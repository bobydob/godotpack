parcelRequire=function(r,s,t){var e,o="function"==typeof parcelRequire&&parcelRequire,a="function"==typeof require&&require;function h(e,t){if(!s[e]){if(!r[e]){var i="function"==typeof parcelRequire&&parcelRequire;if(!t&&i)return i(e,!0);if(o)return o(e,!0);if(a&&"string"==typeof e)return a(e);i=new Error("Cannot find module '"+e+"'");throw i.code="MODULE_NOT_FOUND",i}n.resolve=function(t){return r[e][1][t]||t},n.cache={};i=s[e]=new h.Module(e);r[e][0].call(i.exports,n,i,i.exports,this)}return s[e].exports;function n(t){return h(n.resolve(t))}}h.isParcelRequire=!0,h.Module=function(t){this.id=t,this.bundle=h,this.exports={}},h.modules=r,h.cache=s,h.parent=o,h.register=function(t,i){r[t]=[function(t,e){e.exports=i},{}]};for(var i,n=0;n<t.length;n++)try{h(t[n])}catch(r){e=e||r}if(t.length&&(i=h(t[t.length-1]),"object"==typeof exports&&"undefined"!=typeof module?module.exports=i:"function"==typeof define&&define.amd&&define(function(){return i})),parcelRequire=h,e)throw e;return h}({Mc2P:[function(t,e,w){var i=arguments[3];!function(t){var e,i=t.Promise,n=i&&"resolve"in i&&"reject"in i&&"all"in i&&"race"in i&&(new i(function(t){e=t}),"function"==typeof e);function r(){}function s(t){return"[object Array]"===Object.prototype.toString.call(t)}void 0!==w&&w?(w.Promise=n?i:v,w.Polyfill=v):n||(t.Promise=v);var o,a="undefined"!=typeof setImmediate?setImmediate:setTimeout,h=[];function l(){for(var t=0;t<h.length;t++)h[t][0](h[t][1]);o=!(h=[])}function u(t,e){h.push([t,e]),o||(o=!0,a(l,0))}function c(t){var e=t.owner,i=e.state_,n=e.data_,r=t[i],e=t.then;if("function"==typeof r){i="fulfilled";try{n=r(n)}catch(t){f(e,t)}}p(e,n)||("fulfilled"===i&&d(e,n),"rejected"===i&&f(e,n))}function p(e,i){var n;try{if(e===i)throw new TypeError("A promises callback cannot return that same promise.");if(i&&("function"==typeof i||"object"==typeof i)){var t=i.then;if("function"==typeof t)return t.call(i,function(t){n||(n=!0,(i!==t?d:_)(e,t))},function(t){n||(n=!0,f(e,t))}),1}}catch(i){return n||f(e,i),1}}function d(t,e){t!==e&&p(t,e)||_(t,e)}function _(t,e){"pending"===t.state_&&(t.state_="sealed",t.data_=e,u(y,t))}function f(t,e){"pending"===t.state_&&(t.state_="sealed",t.data_=e,u(g,t))}function m(t){var e=t.then_;t.then_=void 0;for(var i=0;i<e.length;i++)c(e[i])}function y(t){t.state_="fulfilled",m(t)}function g(t){t.state_="rejected",m(t)}function v(t){if("function"!=typeof t)throw new TypeError("Promise constructor takes a function argument");if(this instanceof v==0)throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");this.then_=[],function(t,e){function i(t){f(e,t)}try{t(function(t){d(e,t)},i)}catch(t){i(t)}}(t,this)}v.prototype={constructor:v,state_:"pending",then_:null,data_:void 0,then:function(t,e){e={owner:this,then:new this.constructor(r),fulfilled:t,rejected:e};return"fulfilled"===this.state_||"rejected"===this.state_?u(c,e):this.then_.push(e),e.then},catch:function(t){return this.then(null,t)}},v.all=function(o){if(!s(o))throw new TypeError("You must pass an array to Promise.all().");return new this(function(i,t){var n=[],r=0;for(var e,s=0;s<o.length;s++)(e=o[s])&&"function"==typeof e.then?e.then(function(e){return r++,function(t){n[e]=t,--r||i(n)}}(s),t):n[s]=e;r||i(n)})},v.race=function(r){if(!s(r))throw new TypeError("You must pass an array to Promise.race().");return new this(function(t,e){for(var i,n=0;n<r.length;n++)(i=r[n])&&"function"==typeof i.then?i.then(t,e):t(i)})},v.resolve=function(e){return e&&"object"==typeof e&&e.constructor===this?e:new this(function(t){t(e)})},v.reject=function(i){return new this(function(t,e){e(i)})}}("undefined"!=typeof window?window:void 0!==i?i:"undefined"!=typeof self?self:this)},{}],tLxU:[function(t,e,i){"use strict";var h=Object.getOwnPropertySymbols,l=Object.prototype.hasOwnProperty,u=Object.prototype.propertyIsEnumerable;e.exports=function(){try{if(!Object.assign)return;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return;for(var e={},i=0;i<10;i++)e["_"+String.fromCharCode(i)]=i;if("0123456789"!==Object.getOwnPropertyNames(e).map(function(t){return e[t]}).join(""))return;var n={};return"abcdefghijklmnopqrst".split("").forEach(function(t){n[t]=t}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},n)).join("")}catch(t){return}}()?Object.assign:function(t,e){for(var i,n,r=function(t){if(null==t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}(t),s=1;s<arguments.length;s++){for(var o in i=Object(arguments[s]))l.call(i,o)&&(r[o]=i[o]);if(h){n=h(i);for(var a=0;a<n.length;a++)u.call(i,n[a])&&(r[n[a]]=i[n[a]])}}return r}},{}],AWY2:[function(t,e,i){var n,r=arguments[3],s=t("es6-promise-polyfill"),o=(n=t("object-assign"))&&n.__esModule?n:{default:n};window.Promise||(window.Promise=s.Polyfill),Object.assign||(Object.assign=o.default);var a,h="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==r?r:"undefined"!=typeof self?self:{};Date.now&&Date.prototype.getTime||(Date.now=function(){return(new Date).getTime()}),h.performance&&h.performance.now||(a=Date.now(),h.performance||(h.performance={}),h.performance.now=function(){return Date.now()-a});for(var l=Date.now(),u=["ms","moz","webkit","o"],c=0;c<u.length&&!h.requestAnimationFrame;++c){var p=u[c];h.requestAnimationFrame=h[p+"RequestAnimationFrame"],h.cancelAnimationFrame=h[p+"CancelAnimationFrame"]||h[p+"CancelRequestAnimationFrame"]}h.requestAnimationFrame||(h.requestAnimationFrame=function(t){if("function"!=typeof t)throw new TypeError(t+"is not a function");var e=Date.now(),i=16+l-e;return i<0&&(i=0),l=e,setTimeout(function(){l=Date.now(),t(performance.now())},i)}),h.cancelAnimationFrame||(h.cancelAnimationFrame=function(t){return clearTimeout(t)}),Math.sign||(Math.sign=function(t){return 0===(t=Number(t))||isNaN(t)?t:0<t?1:-1}),Number.isInteger||(Number.isInteger=function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t}),window.ArrayBuffer||(window.ArrayBuffer=Array),window.Float32Array||(window.Float32Array=Array),window.Uint32Array||(window.Uint32Array=Array),window.Uint16Array||(window.Uint16Array=Array),window.Uint8Array||(window.Uint8Array=Array),window.Int32Array||(window.Int32Array=Array)},{"es6-promise-polyfill":"Mc2P","object-assign":"tLxU"}],ZeGp:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(t){var e={userAgent:"",platform:"",maxTouchPoints:0};t||"undefined"==typeof navigator?"string"==typeof t?e.userAgent=t:t&&t.userAgent&&(e={userAgent:t.userAgent,platform:t.platform,maxTouchPoints:t.maxTouchPoints||0}):e={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0};var i=e.userAgent,t=i.split("[FBAN");void 0!==t[1]&&(i=t[0]),void 0!==(t=i.split("Twitter"))[1]&&(i=t[0]);var n,i=(n=i,function(t){return t.test(n)}),i={apple:{phone:i(r)&&!i(p),ipod:i(s),tablet:!i(r)&&(i(o)||v(e))&&!i(p),universal:i(a),device:(i(r)||i(s)||i(o)||i(a)||v(e))&&!i(p)},amazon:{phone:i(u),tablet:!i(u)&&i(c),device:i(u)||i(c)},android:{phone:!i(p)&&i(u)||!i(p)&&i(h),tablet:!i(p)&&!i(u)&&!i(h)&&(i(c)||i(l)),device:!i(p)&&(i(u)||i(c)||i(h)||i(l))||i(/\bokhttp\b/i)},windows:{phone:i(p),tablet:i(d),device:i(p)||i(d)},other:{blackberry:i(_),blackberry10:i(f),opera:i(m),firefox:i(g),chrome:i(y),device:i(_)||i(f)||i(m)||i(g)||i(y)},any:!1,phone:!1,tablet:!1};return i.any=i.apple.device||i.android.device||i.windows.device||i.other.device,i.phone=i.apple.phone||i.android.phone||i.windows.phone,i.tablet=i.apple.tablet||i.android.tablet||i.windows.tablet,i};var r=/iPhone/i,s=/iPod/i,o=/iPad/i,a=/\biOS-universal(?:.+)Mac\b/i,h=/\bAndroid(?:.+)Mobile\b/i,l=/Android/i,u=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,c=/Silk/i,p=/Windows Phone/i,d=/\bWindows(?:.+)ARM\b/i,_=/BlackBerry/i,f=/BB10/i,m=/Opera Mini/i,y=/\b(CriOS|Chrome)(?:.+)Mobile/i,g=/Mobile(?:.+)Firefox\b/i,v=function(t){return void 0!==t&&"MacIntel"===t.platform&&"number"==typeof t.maxTouchPoints&&1<t.maxTouchPoints&&"undefined"==typeof MSStream}},{}],S82H:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n={};Object.defineProperty(i,"default",{enumerable:!0,get:function(){return r.default}});var r=function(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var e=o();if(e&&e.has(t))return e.get(t);var i,n,r={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(i in t)Object.prototype.hasOwnProperty.call(t,i)&&((n=s?Object.getOwnPropertyDescriptor(t,i):null)&&(n.get||n.set)?Object.defineProperty(r,i,n):r[i]=t[i]);return r.default=t,e&&e.set(t,r),r}(t("./isMobile"));function o(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return o=function(){return t},t}Object.keys(r).forEach(function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(n,t)||Object.defineProperty(i,t,{enumerable:!0,get:function(){return r[t]}}))})},{"./isMobile":"ZeGp"}],v11T:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});t=(i.settings=i.isMobile=void 0,((r=t("ismobilejs"))&&r.__esModule?r:{default:r}).default)();i.isMobile=t;var n,r,t={MIPMAP_TEXTURES:1,ANISOTROPIC_LEVEL:0,RESOLUTION:1,FILTER_RESOLUTION:1,SPRITE_MAX_TEXTURES:(r=!0,(t.tablet||t.phone)&&(r=!1,t.apple.device&&(n=navigator.userAgent.match(/OS (\d+)_(\d+)?/))&&11<=parseInt(n[1],10)&&(r=!0),!t.android.device||(n=navigator.userAgent.match(/Android\s([0-9.]*)/))&&7<=parseInt(n[1],10)&&(r=!0)),r?32:4),SPRITE_BATCH_SIZE:4096,RENDER_OPTIONS:{view:null,antialias:!1,forceFXAA:!1,autoDensity:!1,transparent:!1,backgroundColor:0,clearBeforeRender:!0,preserveDrawingBuffer:!1,width:800,height:600,legacy:!1},GC_MODE:0,GC_MAX_IDLE:3600,GC_MAX_CHECK_COUNT:600,WRAP_MODE:33071,SCALE_MODE:1,PRECISION_VERTEX:"highp",PRECISION_FRAGMENT:t.apple.device?"highp":"mediump",CAN_UPLOAD_SAME_BUFFER:!t.apple.device,CREATE_IMAGE_BITMAP:!1,ROUND_PIXELS:!1};i.settings=t},{ismobilejs:"S82H"}],Clm3:[function(t,e,i){"use strict";var n=Object.prototype.hasOwnProperty,d="~";function r(){}function s(t,e,i){this.fn=t,this.context=e,this.once=i||!1}function o(t,e,i,n,r){if("function"!=typeof i)throw new TypeError("The listener must be a function");r=new s(i,n||t,r),e=d?d+e:e;return t._events[e]?t._events[e].fn?t._events[e]=[t._events[e],r]:t._events[e].push(r):(t._events[e]=r,t._eventsCount++),t}function h(t,e){0==--t._eventsCount?t._events=new r:delete t._events[e]}function a(){this._events=new r,this._eventsCount=0}Object.create&&(r.prototype=Object.create(null),(new r).__proto__||(d=!1)),a.prototype.eventNames=function(){var t,e,i=[];if(0===this._eventsCount)return i;for(e in t=this._events)n.call(t,e)&&i.push(d?e.slice(1):e);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(t)):i},a.prototype.listeners=function(t){var t=d?d+t:t,e=this._events[t];if(!e)return[];if(e.fn)return[e.fn];for(var i=0,n=e.length,r=new Array(n);i<n;i++)r[i]=e[i].fn;return r},a.prototype.listenerCount=function(t){t=d?d+t:t,t=this._events[t];return t?t.fn?1:t.length:0},a.prototype.emit=function(t,e,i,n,r,s){var o=d?d+t:t;if(!this._events[o])return!1;var a,h=this._events[o],l=arguments.length;if(h.fn){switch(h.once&&this.removeListener(t,h.fn,void 0,!0),l){case 1:return h.fn.call(h.context),!0;case 2:return h.fn.call(h.context,e),!0;case 3:return h.fn.call(h.context,e,i),!0;case 4:return h.fn.call(h.context,e,i,n),!0;case 5:return h.fn.call(h.context,e,i,n,r),!0;case 6:return h.fn.call(h.context,e,i,n,r,s),!0}for(p=1,a=new Array(l-1);p<l;p++)a[p-1]=arguments[p];h.fn.apply(h.context,a)}else for(var u,c=h.length,p=0;p<c;p++)switch(h[p].once&&this.removeListener(t,h[p].fn,void 0,!0),l){case 1:h[p].fn.call(h[p].context);break;case 2:h[p].fn.call(h[p].context,e);break;case 3:h[p].fn.call(h[p].context,e,i);break;case 4:h[p].fn.call(h[p].context,e,i,n);break;default:if(!a)for(u=1,a=new Array(l-1);u<l;u++)a[u-1]=arguments[u];h[p].fn.apply(h[p].context,a)}return!0},a.prototype.on=function(t,e,i){return o(this,t,e,i,!1)},a.prototype.once=function(t,e,i){return o(this,t,e,i,!0)},a.prototype.removeListener=function(t,e,i,n){t=d?d+t:t;if(!this._events[t])return this;if(!e)return h(this,t),this;var r=this._events[t];if(r.fn)r.fn!==e||n&&!r.once||i&&r.context!==i||h(this,t);else{for(var s=0,o=[],a=r.length;s<a;s++)(r[s].fn!==e||n&&!r[s].once||i&&r[s].context!==i)&&o.push(r[s]);o.length?this._events[t]=1===o.length?o[0]:o:h(this,t)}return this},a.prototype.removeAllListeners=function(t){return t?(t=d?d+t:t,this._events[t]&&h(this,t)):(this._events=new r,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=d,a.EventEmitter=a,void 0!==e&&(e.exports=a)},{}],Ic8v:[function(t,e,i){"use strict";function n(t,e,i){i=i||2;var n,r,s,o,a,h,l,u=e&&e.length,c=u?e[0]*i:t.length,p=f(t,0,c,i,!0),d=[];if(!p||p.next===p.prev)return d;if(u&&(p=function(t,e,i,n){for(var r,s,o,a=[],h=0,l=e.length;h<l;h++)(r=f(t,e[h]*n,h<l-1?e[h+1]*n:t.length,n,!1))===r.next&&(r.steiner=!0),a.push(function(t){var e=t,i=t;for(;(e.x<i.x||e.x===i.x&&e.y<i.y)&&(i=e),e=e.next,e!==t;);return i}(r));for(a.sort(g),h=0;h<a.length;h++)s=a[h],(o=function(t,e){var i,n=e,r=t.x,s=t.y,o=-1/0;do{if(s<=n.y&&s>=n.next.y&&n.next.y!==n.y){var a=n.x+(s-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(a<=r&&o<a){if((o=a)===r){if(s===n.y)return n;if(s===n.next.y)return n.next}i=n.x<n.next.x?n:n.next}}}while((n=n.next)!==e);if(!i)return null;if(r===o)return i;for(var h,l,u,c=i,p=i.x,d=i.y,_=1/0,n=i;r>=n.x&&n.x>=p&&r!==n.x&&w(s<d?r:o,s,p,d,s<d?o:r,s,n.x,n.y)&&(h=Math.abs(s-n.y)/(r-n.x),b(n,t)&&(h<_||h===_&&(n.x>i.x||n.x===i.x&&(u=n,x((l=i).prev,l,u.prev)<0&&x(u.next,l,l.next)<0)))&&(i=n,_=h)),n=n.next,n!==c;);return i}(s,o=i))&&(s=E(o,s),m(o,o.next),m(s,s.next)),i=m(i,i.next);return i}(t,e,p,i)),t.length>80*i){n=s=t[0],r=o=t[1];for(var _=i;_<c;_+=i)(a=t[_])<n&&(n=a),(h=t[_+1])<r&&(r=h),s<a&&(s=a),o<h&&(o=h);l=0!==(l=Math.max(s-n,o-r))?1/l:0}return y(p,d,i,n,r,l),d}function f(t,e,i,n,r){var s,o;if(r===0<$(t,e,i,n))for(s=e;s<i;s+=n)o=a(s,t[s],t[s+1],o);else for(s=i-n;e<=s;s-=n)o=a(s,t[s],t[s+1],o);return o&&u(o,o.next)&&(p(o),o=o.next),o}function m(t,e){if(!t)return t;e=e||t;var i,n=t;do{if(i=!1,n.steiner||!u(n,n.next)&&0!==x(n.prev,n,n.next))n=n.next;else{if(p(n),(n=e=n.prev)===n.next)break;i=!0}}while(i||n!==e);return e}function y(t,e,i,n,r,s,o){if(t){!o&&s&&function(t,e,i,n){for(var r=t;null===r.z&&(r.z=v(r.x,r.y,e,i,n)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next,r!==t;);r.prevZ.nextZ=null,r.prevZ=null,function(t){var e,i,n,r,s,o,a,h,l=1;do{for(i=t,s=t=null,o=0;i;){for(o++,n=i,e=a=0;e<l&&(a++,n=n.nextZ);e++);for(h=l;0<a||0<h&&n;)0!==a&&(0===h||!n||i.z<=n.z)?(i=(r=i).nextZ,a--):(n=(r=n).nextZ,h--),s?s.nextZ=r:t=r,r.prevZ=s,s=r;i=n}}while(s.nextZ=null,l*=2,1<o)}(r)}(t,n,r,s);for(var a,h,l=t;t.prev!==t.next;)if(a=t.prev,h=t.next,s?function(t,e,i,n){var r=t.prev,s=t,o=t.next;if(0<=x(r,s,o))return!1;for(var a=(r.x<s.x?r.x<o.x?r:o:s.x<o.x?s:o).x,h=(r.y<s.y?r.y<o.y?r:o:s.y<o.y?s:o).y,l=(r.x>s.x?r.x>o.x?r:o:s.x>o.x?s:o).x,u=(r.y>s.y?r.y>o.y?r:o:s.y>o.y?s:o).y,c=v(a,h,e,i,n),p=v(l,u,e,i,n),d=t.prevZ,_=t.nextZ;d&&d.z>=c&&_&&_.z<=p;){if(d!==t.prev&&d!==t.next&&w(r.x,r.y,s.x,s.y,o.x,o.y,d.x,d.y)&&0<=x(d.prev,d,d.next))return!1;if(d=d.prevZ,_!==t.prev&&_!==t.next&&w(r.x,r.y,s.x,s.y,o.x,o.y,_.x,_.y)&&0<=x(_.prev,_,_.next))return!1;_=_.nextZ}for(;d&&d.z>=c;){if(d!==t.prev&&d!==t.next&&w(r.x,r.y,s.x,s.y,o.x,o.y,d.x,d.y)&&0<=x(d.prev,d,d.next))return!1;d=d.prevZ}for(;_&&_.z<=p;){if(_!==t.prev&&_!==t.next&&w(r.x,r.y,s.x,s.y,o.x,o.y,_.x,_.y)&&0<=x(_.prev,_,_.next))return!1;_=_.nextZ}return!0}(t,n,r,s):function(t){var e=t.prev,i=t,n=t.next;if(0<=x(e,i,n))return!1;for(var r=t.next.next;r!==t.prev;){if(w(e.x,e.y,i.x,i.y,n.x,n.y,r.x,r.y)&&0<=x(r.prev,r,r.next))return!1;r=r.next}return!0}(t))e.push(a.i/i),e.push(t.i/i),e.push(h.i/i),p(t),t=h.next,l=h.next;else if((t=h)===l){o?1===o?y(t=function(t,e,i){var n=t;do{var r=n.prev,s=n.next.next}while(!u(r,s)&&c(r,n,n.next,s)&&b(r,s)&&b(s,r)&&(e.push(r.i/i),e.push(n.i/i),e.push(s.i/i),p(n),p(n.next),n=t=s),n=n.next,n!==t);return m(n)}(m(t),e,i),e,i,n,r,s,2):2===o&&function(t,e,i,n,r,s){var o=t;do{for(var a=o.next.next;a!==o.prev;){if(o.i!==a.i&&function(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var i=t;do{if(i.i!==t.i&&i.next.i!==t.i&&i.i!==e.i&&i.next.i!==e.i&&c(i,i.next,t,e))return 1}while((i=i.next)!==t)}(t,e)&&(b(t,e)&&b(e,t)&&function(t,e){for(var i=t,n=!1,r=(t.x+e.x)/2,s=(t.y+e.y)/2;i.y>s!=i.next.y>s&&i.next.y!==i.y&&r<(i.next.x-i.x)*(s-i.y)/(i.next.y-i.y)+i.x&&(n=!n),i=i.next,i!==t;);return n}(t,e)&&(x(t.prev,t,e.prev)||x(t,e.prev,e))||u(t,e)&&0<x(t.prev,t,t.next)&&0<x(e.prev,e,e.next))}(o,a)){var h=E(o,a);return o=m(o,o.next),h=m(h,h.next),y(o,e,i,n,r,s),y(h,e,i,n,r,s)}a=a.next}}while((o=o.next)!==t)}(t,e,i,n,r,s):y(m(t),e,i,n,r,s,1);break}}}function g(t,e){return t.x-e.x}function v(t,e,i,n,r){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-i)*r)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-n)*r)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function w(t,e,i,n,r,s,o,a){return 0<=(r-o)*(e-a)-(t-o)*(s-a)&&0<=(t-o)*(n-a)-(i-o)*(e-a)&&0<=(i-o)*(s-a)-(r-o)*(n-a)}function x(t,e,i){return(e.y-t.y)*(i.x-e.x)-(e.x-t.x)*(i.y-e.y)}function u(t,e){return t.x===e.x&&t.y===e.y}function c(t,e,i,n){var r=l(x(t,e,i)),s=l(x(t,e,n)),o=l(x(i,n,t)),a=l(x(i,n,e));return r!==s&&o!==a||0===r&&h(t,i,e)||0===s&&h(t,n,e)||0===o&&h(i,t,n)||0===a&&h(i,e,n)}function h(t,e,i){return e.x<=Math.max(t.x,i.x)&&e.x>=Math.min(t.x,i.x)&&e.y<=Math.max(t.y,i.y)&&e.y>=Math.min(t.y,i.y)}function l(t){return 0<t?1:t<0?-1:0}function b(t,e){return x(t.prev,t,t.next)<0?0<=x(t,e,t.next)&&0<=x(t,t.prev,e):x(t,e,t.prev)<0||x(t,t.next,e)<0}function E(t,e){var i=new o(t.i,t.x,t.y),n=new o(e.i,e.x,e.y),r=t.next,s=e.prev;return(t.next=e).prev=t,(i.next=r).prev=i,(n.next=i).prev=n,(s.next=n).prev=s,n}function a(t,e,i,n){i=new o(t,e,i);return n?(i.next=n.next,(i.prev=n).next.prev=i,n.next=i):(i.prev=i).next=i,i}function p(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function o(t,e,i){this.i=t,this.x=e,this.y=i,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function $(t,e,i,n){for(var r=0,s=e,o=i-n;s<i;s+=n)r+=(t[o]-t[s])*(t[s+1]+t[o+1]),o=s;return r}e.exports=n,(e.exports.default=n).deviation=function(t,e,i,n){var r=e&&e.length,s=r?e[0]*i:t.length,o=Math.abs($(t,0,s,i));if(r)for(var a=0,h=e.length;a<h;a++){var l=e[a]*i,u=a<h-1?e[a+1]*i:t.length;o-=Math.abs($(t,l,u,i))}for(var c=0,a=0;a<n.length;a+=3){var p=n[a]*i,d=n[a+1]*i,_=n[a+2]*i;c+=Math.abs((t[p]-t[_])*(t[1+d]-t[1+p])-(t[p]-t[d])*(t[1+_]-t[1+p]))}return 0===o&&0===c?0:Math.abs((c-o)/o)},n.flatten=function(t){for(var e=t[0][0].length,i={vertices:[],holes:[],dimensions:e},n=0,r=0;r<t.length;r++){for(var s=0;s<t[r].length;s++)for(var o=0;o<e;o++)i.vertices.push(t[r][s][o]);0<r&&(n+=t[r-1].length,i.holes.push(n))}return i}},{}],PT1R:[function(t,f,m){var $=arguments[3];!function(t){var e="object"==typeof m&&m&&!m.nodeType&&m,i="object"==typeof f&&f&&!f.nodeType&&f,n="object"==typeof $&&$;n.global!==n&&n.window!==n&&n.self!==n||(t=n);var r,s,y=2147483647,o=/^xn--/,a=/[^\x20-\x7E]/,h=/[\x2E\u3002\uFF0E\uFF61]/g,l={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},g=Math.floor,v=String.fromCharCode;function w(t){throw new RangeError(l[t])}function u(t,e){for(var i=t.length,n=[];i--;)n[i]=e(t[i]);return n}function c(t,e){var i=t.split("@"),n="";return 1<i.length&&(n=i[0]+"@",t=i[1]),n+u((t=t.replace(h,".")).split("."),e).join(".")}function x(t){for(var e,i,n=[],r=0,s=t.length;r<s;)55296<=(e=t.charCodeAt(r++))&&e<=56319&&r<s?56320==(64512&(i=t.charCodeAt(r++)))?n.push(((1023&e)<<10)+(1023&i)+65536):(n.push(e),r--):n.push(e);return n}function _(t){return u(t,function(t){var e="";return 65535<t&&(e+=v((t-=65536)>>>10&1023|55296),t=56320|1023&t),e+v(t)}).join("")}function b(t,e){return t+22+75*(t<26)-((0!=e)<<5)}function E(t,e,i){var n=0;for(t=i?g(t/700):t>>1,t+=g(t/e);455<t;n+=36)t=g(t/35);return g(n+36*t/(t+38))}function p(t){var e,i,n,r,s,o,a,h,l=[],u=t.length,c=0,p=128,d=72;for((i=t.lastIndexOf("-"))<0&&(i=0),n=0;n<i;++n)128<=t.charCodeAt(n)&&w("not-basic"),l.push(t.charCodeAt(n));for(r=0<i?i+1:0;r<u;){for(s=c,o=1,a=36;u<=r&&w("invalid-input"),(36<=(h=(h=t.charCodeAt(r++))-48<10?h-22:h-65<26?h-65:h-97<26?h-97:36)||h>g((y-c)/o))&&w("overflow"),c+=h*o,!(h<(h=a<=d?1:d+26<=a?26:a-d));a+=36)o>g(y/(h=36-h))&&w("overflow"),o*=h;d=E(c-s,e=l.length+1,0==s),g(c/e)>y-p&&w("overflow"),p+=g(c/e),c%=e,l.splice(c++,0,p)}return _(l)}function d(t){for(var e,i,n,r,s,o,a,h,l,u,c=[],p=(t=x(t)).length,d=128,_=0,f=72,m=0;m<p;++m)(a=t[m])<128&&c.push(v(a));for(e=i=c.length,i&&c.push("-");e<p;){for(n=y,m=0;m<p;++m)(a=t[m])>=d&&a<n&&(n=a);for(n-d>g((y-_)/(h=e+1))&&w("overflow"),_+=(n-d)*h,d=n,m=0;m<p;++m)if((a=t[m])<d&&++_>y&&w("overflow"),a==d){for(r=_,s=36;!(r<(o=s<=f?1:f+26<=s?26:s-f));s+=36)u=r-o,l=36-o,c.push(v(b(o+u%l,0))),r=g(u/l);c.push(v(b(r,0))),f=E(_,h,e==i),_=0,++e}++_,++d}return c.join("")}if(r={version:"1.4.1",ucs2:{decode:x,encode:_},decode:p,encode:d,toASCII:function(t){return c(t,function(t){return a.test(t)?"xn--"+d(t):t})},toUnicode:function(t){return c(t,function(t){return o.test(t)?p(t.slice(4).toLowerCase()):t})}},0,e&&i)if(f.exports==e)i.exports=r;else for(s in r)r.hasOwnProperty(s)&&(e[s]=r[s]);else t.punycode=r}(this)},{}],rm6D:[function(t,e,i){"use strict";e.exports={isString:function(t){return"string"==typeof t},isObject:function(t){return"object"==typeof t&&null!==t},isNull:function(t){return null===t},isNullOrUndefined:function(t){return null==t}}},{}],DdMC:[function(t,e,i){"use strict";e.exports=function(t,e,i,n){e=e||"&",i=i||"=";var r={};if("string"!=typeof t||0===t.length)return r;var s=/\+/g;t=t.split(e);e=1e3;n&&"number"==typeof n.maxKeys&&(e=n.maxKeys);var o=t.length;0<e&&e<o&&(o=e);for(var a=0;a<o;++a){var h,l=t[a].replace(s,"%20"),u=l.indexOf(i),c=0<=u?(h=l.substr(0,u),l.substr(u+1)):(h=l,""),p=decodeURIComponent(h),u=decodeURIComponent(c);l=r,c=p,Object.prototype.hasOwnProperty.call(l,c)?d(r[p])?r[p].push(u):r[p]=[r[p],u]:r[p]=u}return r};var d=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)}},{}],ipy0:[function(t,e,i){"use strict";function s(t){switch(typeof t){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}}e.exports=function(i,n,r,t){return n=n||"&",r=r||"=",null===i&&(i=void 0),"object"==typeof i?a(h(i),function(t){var e=encodeURIComponent(s(t))+r;return o(i[t])?a(i[t],function(t){return e+encodeURIComponent(s(t))}).join(n):e+encodeURIComponent(s(i[t]))}).join(n):t?encodeURIComponent(s(t))+r+encodeURIComponent(s(i)):""};var o=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)};function a(t,e){if(t.map)return t.map(e);for(var i=[],n=0;n<t.length;n++)i.push(e(t[n],n));return i}var h=Object.keys||function(t){var e,i=[];for(e in t)Object.prototype.hasOwnProperty.call(t,e)&&i.push(e);return i}},{}],njjI:[function(t,e,i){"use strict";i.decode=i.parse=t("./decode"),i.encode=i.stringify=t("./encode")},{"./decode":"DdMC","./encode":"ipy0"}],s956:[function(t,e,i){"use strict";var S=t("punycode"),T=t("./util");function x(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}i.parse=r,i.resolve=function(t,e){return r(t,!1,!0).resolve(e)},i.resolveObject=function(t,e){return t?r(t,!1,!0).resolveObject(e):e},i.format=function(t){return T.isString(t)&&(t=r(t)),t instanceof x?t.format():x.prototype.format.call(t)},i.Url=x;var C=/^([a-z0-9.+-]+:)/i,n=/:[0-9]*$/,M=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,i=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),I=["'"].concat(i),P=["%","/","?",";","#"].concat(I),O=["/","?","#"],D=/^[+a-z0-9A-Z_-]{0,63}$/,R=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,L={javascript:!0,"javascript:":!0},k={javascript:!0,"javascript:":!0},F={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},N=t("querystring");function r(t,e,i){if(t&&T.isObject(t)&&t instanceof x)return t;var n=new x;return n.parse(t,e,i),n}x.prototype.parse=function(t,e,i){if(!T.isString(t))throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var n=t.indexOf("?"),r=-1!==n&&n<t.indexOf("#")?"?":"#",n=t.split(r);n[0]=n[0].replace(/\\/g,"/");var s=(s=t=n.join(r)).trim();if(!i&&1===t.split("#").length){var o=M.exec(s);if(o)return this.path=s,this.href=s,this.pathname=o[1],o[2]?(this.search=o[2],this.query=e?N.parse(this.search.substr(1)):this.search.substr(1)):e&&(this.search="",this.query={}),this}var a,o=C.exec(s);if(o&&(A=(o=o[0]).toLowerCase(),this.protocol=A,s=s.substr(o.length)),(i||o||s.match(/^\/\/[^@\/]+@[^@\/]+/))&&(!(a="//"===s.substr(0,2))||o&&k[o]||(s=s.substr(2),this.slashes=!0)),!k[o]&&(a||o&&!F[o])){for(var h,l=-1,u=0;u<O.length;u++)-1!==(h=s.indexOf(O[u]))&&(-1===l||h<l)&&(l=h);for(-1!==(x=-1===l?s.lastIndexOf("@"):s.lastIndexOf("@",l))&&(b=s.slice(0,x),s=s.slice(x+1),this.auth=decodeURIComponent(b)),l=-1,u=0;u<P.length;u++)-1!==(h=s.indexOf(P[u]))&&(-1===l||h<l)&&(l=h);-1===l&&(l=s.length),this.host=s.slice(0,l),s=s.slice(l),this.parseHost(),this.hostname=this.hostname||"";var c="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!c)for(var p=this.hostname.split(/\./),d=(u=0,p.length);u<d;u++){var _=p[u];if(_&&!_.match(D)){for(var f="",m=0,y=_.length;m<y;m++)127<_.charCodeAt(m)?f+="x":f+=_[m];if(!f.match(D)){var g=p.slice(0,u),v=p.slice(u+1),w=_.match(R);w&&(g.push(w[1]),v.unshift(w[2])),v.length&&(s="/"+v.join(".")+s),this.hostname=g.join(".");break}}}255<this.hostname.length?this.hostname="":this.hostname=this.hostname.toLowerCase(),c||(this.hostname=S.toASCII(this.hostname));var x=this.port?":"+this.port:"",b=this.hostname||"";this.host=b+x,this.href+=this.host,c&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==s[0]&&(s="/"+s))}if(!L[A])for(u=0,d=I.length;u<d;u++){var E,$=I[u];-1!==s.indexOf($)&&((E=encodeURIComponent($))===$&&(E=escape($)),s=s.split($).join(E))}c=s.indexOf("#");-1!==c&&(this.hash=s.substr(c),s=s.slice(0,c));var A,c=s.indexOf("?");return-1!==c?(this.search=s.substr(c),this.query=s.substr(c+1),e&&(this.query=N.parse(this.query)),s=s.slice(0,c)):e&&(this.search="",this.query={}),s&&(this.pathname=s),F[A]&&this.hostname&&!this.pathname&&(this.pathname="/"),(this.pathname||this.search)&&(x=this.pathname||"",A=this.search||"",this.path=x+A),this.href=this.format(),this},x.prototype.format=function(){var t=this.auth||"";t&&(t=(t=encodeURIComponent(t)).replace(/%3A/i,":"),t+="@");var e=this.protocol||"",i=this.pathname||"",n=this.hash||"",r=!1,s="";this.host?r=t+this.host:this.hostname&&(r=t+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(r+=":"+this.port)),this.query&&T.isObject(this.query)&&Object.keys(this.query).length&&(s=N.stringify(this.query));s=this.search||s&&"?"+s||"";return e&&":"!==e.substr(-1)&&(e+=":"),this.slashes||(!e||F[e])&&!1!==r?(r="//"+(r||""),i&&"/"!==i.charAt(0)&&(i="/"+i)):r=r||"",n&&"#"!==n.charAt(0)&&(n="#"+n),s&&"?"!==s.charAt(0)&&(s="?"+s),e+r+(i=i.replace(/[?#]/g,function(t){return encodeURIComponent(t)}))+(s=s.replace("#","%23"))+n},x.prototype.resolve=function(t){return this.resolveObject(r(t,!1,!0)).format()},x.prototype.resolveObject=function(t){T.isString(t)&&((d=new x).parse(t,!1,!0),t=d);for(var e=new x,i=Object.keys(this),n=0;n<i.length;n++){var r=i[n];e[r]=this[r]}if(e.hash=t.hash,""===t.href)return e.href=e.format(),e;if(t.slashes&&!t.protocol){for(var s=Object.keys(t),o=0;o<s.length;o++){var a=s[o];"protocol"!==a&&(e[a]=t[a])}return F[e.protocol]&&e.hostname&&!e.pathname&&(e.path=e.pathname="/"),e.href=e.format(),e}if(t.protocol&&t.protocol!==e.protocol){if(!F[t.protocol]){for(var h=Object.keys(t),l=0;l<h.length;l++){var u=h[l];e[u]=t[u]}return e.href=e.format(),e}if(e.protocol=t.protocol,t.host||k[t.protocol])e.pathname=t.pathname;else{for(var c=(t.pathname||"").split("/");c.length&&!(t.host=c.shift()););t.host||(t.host=""),t.hostname||(t.hostname=""),""!==c[0]&&c.unshift(""),c.length<2&&c.unshift(""),e.pathname=c.join("/")}return e.search=t.search,e.query=t.query,e.host=t.host||"",e.auth=t.auth,e.hostname=t.hostname||t.host,e.port=t.port,(e.pathname||e.search)&&(_=e.pathname||"",f=e.search||"",e.path=_+f),e.slashes=e.slashes||t.slashes,e.href=e.format(),e}var p=e.pathname&&"/"===e.pathname.charAt(0),d=t.host||t.pathname&&"/"===t.pathname.charAt(0),_=d||p||e.host&&t.pathname,f=_,m=e.pathname&&e.pathname.split("/")||[],p=(c=t.pathname&&t.pathname.split("/")||[],e.protocol&&!F[e.protocol]);if(p&&(e.hostname="",e.port=null,e.host&&(""===m[0]?m[0]=e.host:m.unshift(e.host)),e.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(""===c[0]?c[0]=t.host:c.unshift(t.host)),t.host=null),_=_&&(""===c[0]||""===m[0])),d)e.host=(t.host||""===t.host?t:e).host,e.hostname=(t.hostname||""===t.hostname?t:e).hostname,e.search=t.search,e.query=t.query,m=c;else if(c.length)(m=m||[]).pop(),m=m.concat(c),e.search=t.search,e.query=t.query;else if(!T.isNullOrUndefined(t.search))return p&&(e.hostname=e.host=m.shift(),(w=!!(e.host&&0<e.host.indexOf("@"))&&e.host.split("@"))&&(e.auth=w.shift(),e.host=e.hostname=w.shift())),e.search=t.search,e.query=t.query,T.isNull(e.pathname)&&T.isNull(e.search)||(e.path=(e.pathname||"")+(e.search||"")),e.href=e.format(),e;if(!m.length)return e.pathname=null,e.search?e.path="/"+e.search:e.path=null,e.href=e.format(),e;for(var y=m.slice(-1)[0],d=(e.host||t.host||1<m.length)&&("."===y||".."===y)||""===y,g=0,v=m.length;0<=v;v--)"."===(y=m[v])?m.splice(v,1):".."===y?(m.splice(v,1),g++):g&&(m.splice(v,1),g--);if(!_&&!f)for(;g--;)m.unshift("..");!_||""===m[0]||m[0]&&"/"===m[0].charAt(0)||m.unshift(""),d&&"/"!==m.join("/").substr(-1)&&m.push("");var w,d=""===m[0]||m[0]&&"/"===m[0].charAt(0);return p&&(e.hostname=e.host=!d&&m.length?m.shift():"",(w=!!(e.host&&0<e.host.indexOf("@"))&&e.host.split("@"))&&(e.auth=w.shift(),e.host=e.hostname=w.shift())),(_=_||e.host&&m.length)&&!d&&m.unshift(""),m.length?e.pathname=m.join("/"):(e.pathname=null,e.path=null),T.isNull(e.pathname)&&T.isNull(e.search)||(e.path=(e.pathname||"")+(e.search||"")),e.auth=t.auth||e.auth,e.slashes=e.slashes||t.slashes,e.href=e.format(),e},x.prototype.parseHost=function(){var t=this.host,e=n.exec(t);e&&(":"!==(e=e[0])&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)}},{punycode:"PT1R","./util":"rm6D",querystring:"njjI"}],R76a:[function(t,e,i){"use strict";var n;Object.defineProperty(i,"__esModule",{value:!0}),i.WRAP_MODES=i.TYPES=i.TARGETS=i.SCALE_MODES=i.RENDERER_TYPE=i.PRECISION=i.MIPMAP_MODES=i.MASK_TYPES=i.GC_MODES=i.FORMATS=i.ENV=i.DRAW_MODES=i.BLEND_MODES=i.ALPHA_MODES=void 0,i.ENV=void 0,(n=i.ENV={})[n.WEBGL_LEGACY=0]="WEBGL_LEGACY",n[n.WEBGL=1]="WEBGL",n[n.WEBGL2=2]="WEBGL2",i.RENDERER_TYPE=void 0,(n=i.RENDERER_TYPE={})[n.UNKNOWN=0]="UNKNOWN",n[n.WEBGL=1]="WEBGL",n[n.CANVAS=2]="CANVAS",i.BLEND_MODES=void 0,(n=i.BLEND_MODES={})[n.NORMAL=0]="NORMAL",n[n.ADD=1]="ADD",n[n.MULTIPLY=2]="MULTIPLY",n[n.SCREEN=3]="SCREEN",n[n.OVERLAY=4]="OVERLAY",n[n.DARKEN=5]="DARKEN",n[n.LIGHTEN=6]="LIGHTEN",n[n.COLOR_DODGE=7]="COLOR_DODGE",n[n.COLOR_BURN=8]="COLOR_BURN",n[n.HARD_LIGHT=9]="HARD_LIGHT",n[n.SOFT_LIGHT=10]="SOFT_LIGHT",n[n.DIFFERENCE=11]="DIFFERENCE",n[n.EXCLUSION=12]="EXCLUSION",n[n.HUE=13]="HUE",n[n.SATURATION=14]="SATURATION",n[n.COLOR=15]="COLOR",n[n.LUMINOSITY=16]="LUMINOSITY",n[n.NORMAL_NPM=17]="NORMAL_NPM",n[n.ADD_NPM=18]="ADD_NPM",n[n.SCREEN_NPM=19]="SCREEN_NPM",n[n.NONE=20]="NONE",n[n.SRC_OVER=0]="SRC_OVER",n[n.SRC_IN=21]="SRC_IN",n[n.SRC_OUT=22]="SRC_OUT",n[n.SRC_ATOP=23]="SRC_ATOP",n[n.DST_OVER=24]="DST_OVER",n[n.DST_IN=25]="DST_IN",n[n.DST_OUT=26]="DST_OUT",n[n.DST_ATOP=27]="DST_ATOP",n[n.ERASE=26]="ERASE",n[n.SUBTRACT=28]="SUBTRACT",n[n.XOR=29]="XOR",i.DRAW_MODES=void 0,(n=i.DRAW_MODES={})[n.POINTS=0]="POINTS",n[n.LINES=1]="LINES",n[n.LINE_LOOP=2]="LINE_LOOP",n[n.LINE_STRIP=3]="LINE_STRIP",n[n.TRIANGLES=4]="TRIANGLES",n[n.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",n[n.TRIANGLE_FAN=6]="TRIANGLE_FAN",i.FORMATS=void 0,(n=i.FORMATS={})[n.RGBA=6408]="RGBA",n[n.RGB=6407]="RGB",n[n.ALPHA=6406]="ALPHA",n[n.LUMINANCE=6409]="LUMINANCE",n[n.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",n[n.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",n[n.DEPTH_STENCIL=34041]="DEPTH_STENCIL",i.TARGETS=void 0,(n=i.TARGETS={})[n.TEXTURE_2D=3553]="TEXTURE_2D",n[n.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",n[n.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",n[n.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",n[n.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",n[n.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",n[n.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",n[n.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",n[n.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",i.TYPES=void 0,(n=i.TYPES={})[n.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",n[n.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",n[n.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",n[n.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",n[n.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",n[n.FLOAT=5126]="FLOAT",n[n.HALF_FLOAT=36193]="HALF_FLOAT",i.SCALE_MODES=void 0,(n=i.SCALE_MODES={})[n.NEAREST=0]="NEAREST",n[n.LINEAR=1]="LINEAR",i.WRAP_MODES=void 0,(n=i.WRAP_MODES={})[n.CLAMP=33071]="CLAMP",n[n.REPEAT=10497]="REPEAT",n[n.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",i.MIPMAP_MODES=void 0,(n=i.MIPMAP_MODES={})[n.OFF=0]="OFF",n[n.POW2=1]="POW2",n[n.ON=2]="ON",i.ALPHA_MODES=void 0,(n=i.ALPHA_MODES={})[n.NPM=0]="NPM",n[n.UNPACK=1]="UNPACK",n[n.PMA=2]="PMA",n[n.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",n[n.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",n[n.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA",i.GC_MODES=void 0,(n=i.GC_MODES={})[n.AUTO=0]="AUTO",n[n.MANUAL=1]="MANUAL",i.PRECISION=void 0,(n=i.PRECISION={}).LOW="lowp",n.MEDIUM="mediump",n.HIGH="highp",i.MASK_TYPES=void 0,(i=i.MASK_TYPES={})[i.NONE=0]="NONE",i[i.SCISSOR=1]="SCISSOR",i[i.STENCIL=2]="STENCIL",i[i.SPRITE=3]="SPRITE"},{}],x5Ec:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.clearTextureCache=function(){for(var t in y)delete y[t];for(t in g)delete g[t]},i.correctBlendMode=function(t,e){return p[e?1:0][t]},i.createIndicesForQuads=function(t,e){void 0===e&&(e=null);var i=6*t;if((e=e||new Uint16Array(i)).length!==i)throw new Error("Out buffer length is incorrect, got "+e.length+" and expected "+i);for(var n=0,r=0;n<i;n+=6,r+=4)e[n+0]=r+0,e[n+1]=r+1,e[n+2]=r+2,e[n+3]=r+0,e[n+4]=r+2,e[n+5]=r+3;return e},i.decomposeDataUri=function(t){t=x.exec(t);if(t)return{mediaType:t[1]?t[1].toLowerCase():void 0,subType:t[2]?t[2].toLowerCase():void 0,charset:t[3]?t[3].toLowerCase():void 0,encoding:t[4]?t[4].toLowerCase():void 0,data:t[5]}},i.deprecation=function(t,e,i){var n;void 0===i&&(i=3),m[e]||(void 0===(n=(new Error).stack)?console.warn("PixiJS Deprecation Warning: ",e+"\nDeprecated since v"+t):(n=n.split("\n").splice(i).join("\n"),console.groupCollapsed?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",e+"\nDeprecated since v"+t),console.warn(n),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",e+"\nDeprecated since v"+t),console.warn(n))),m[e]=!0)},i.destroyTextureCache=function(){for(var t in y)y[t].destroy();for(t in g)g[t].destroy()},i.determineCrossOrigin=function(t,e){if(void 0===e&&(e=window.location),0===t.indexOf("data:"))return"";e=e||window.location,(w=w||document.createElement("a")).href=t;var i=(0,o.parse)(w.href),t=!i.port&&""===e.port||i.port===e.port;return i.hostname===e.hostname&&t&&i.protocol===e.protocol?"":"anonymous"},i.getBufferType=d,i.getResolutionOfUrl=function(t,e){t=r.settings.RETINA_PREFIX.exec(t);return t?parseFloat(t[1]):void 0!==e?e:1},i.hex2rgb=function(t,e){return(e=e||[])[0]=(t>>16&255)/255,e[1]=(t>>8&255)/255,e[2]=(255&t)/255,e},i.hex2string=function(t){t=t.toString(16);return"#"+("000000".substr(0,6-t.length)+t)},i.interleaveTypedArrays=function(t,e){for(var i=0,n=0,r={},s=0;s<t.length;s++)n+=e[s],i+=t[s].length;for(var o=new ArrayBuffer(4*i),a=null,h=0,s=0;s<t.length;s++){var l=e[s],u=t[s],c=d(u);r[c]||(r[c]=new _[c](o)),a=r[c];for(var p=0;p<u.length;p++)a[(p/l|0)*n+h+p%l]=u[p];h+=l}return new Float32Array(o)},i.isPow2=function(t){return!(t&t-1||!t)},i.isWebGLSupported=function(){return void 0===u&&(u=function(){var t={stencil:!0,failIfMajorPerformanceCaveat:r.settings.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT};try{if(!window.WebGLRenderingContext)return!1;var e=document.createElement("canvas"),i=e.getContext("webgl",t)||e.getContext("experimental-webgl",t),n=!(!i||!i.getContextAttributes().stencil);return!i||(e=i.getExtension("WEBGL_lose_context"))&&e.loseContext(),i=null,n}catch(t){return!1}}()),u},i.log2=function(t){var e,i=(255<(t>>>=e=(65535<t?1:0)<<4)?1:0)<<3;return e|=i,e|=i=(15<(t>>>=i)?1:0)<<2,(e|=i=(3<(t>>>=i)?1:0)<<1)|(t>>>=i)>>1},i.nextPow2=function(t){return t+=0===t?1:0,--t,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,1+(t|=t>>>16)},i.premultiplyRgba=function(t,e,i,n){return i=i||new Float32Array(4),n||void 0===n?(i[0]=t[0]*e,i[1]=t[1]*e,i[2]=t[2]*e):(i[0]=t[0],i[1]=t[1],i[2]=t[2]),i[3]=e,i},i.premultiplyTint=function(t,e){if(1===e)return(255*e<<24)+t;if(0===e)return 0;var i=255&t;return(255*e<<24)+(((t>>16&255)*e+.5|0)<<16)+(((t>>8&255)*e+.5|0)<<8)+(i*e+.5|0)},i.premultiplyTintToRgba=function(t,e,i,n){return(i=i||new Float32Array(4))[0]=(t>>16&255)/255,i[1]=(t>>8&255)/255,i[2]=(255&t)/255,!n&&void 0!==n||(i[0]*=e,i[1]*=e,i[2]*=e),i[3]=e,i},i.removeItems=function(t,e,i){var n=t.length;if(!(n<=e||0===i)){for(var r=n-(i=n<e+i?n-e:i),s=e;s<r;++s)t[s]=t[s+i];t.length=r}},i.rgb2hex=function(t){return(255*t[0]<<16)+(255*t[1]<<8)+(255*t[2]|0)},i.sayHello=function(t){var e,i;c||(-1<navigator.userAgent.toLowerCase().indexOf("chrome")?(i=["\n %c %c %c PixiJS 5.2.1 - ✰ "+t+" ✰  %c  %c  http://www.pixijs.com/  %c %c ♥%c♥%c♥ \n\n","background: #ff66a5; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff66a5; background: #030307; padding:5px 0;","background: #ff66a5; padding:5px 0;","background: #ffc3dc; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;"],(e=window.console).log.apply(e,i)):window.console&&window.console.log("PixiJS 5.2.1 - "+t+" - http://www.pixijs.com/"),c=!0)},i.sign=function(t){return 0===t?0:t<0?-1:1},i.skipHello=function(){c=!0},i.string2hex=function(t){return"string"==typeof t&&"#"===t[0]&&(t=t.substr(1)),parseInt(t,16)},i.trimCanvas=function(t){for(var e,i,n=t.width,r=t.height,s=t.getContext("2d"),o=s.getImageData(0,0,n,r).data,a=o.length,h={top:null,left:null,right:null,bottom:null},t=null,l=0;l<a;l+=4)0!==o[l+3]&&(e=l/4%n,i=~~(l/4/n),null===h.top&&(h.top=i),(null===h.left||e<h.left)&&(h.left=e),(null===h.right||h.right<e)&&(h.right=1+e),(null===h.bottom||h.bottom<i)&&(h.bottom=i));return null!==h.top&&(n=h.right-h.left,r=h.bottom-h.top+1,t=s.getImageData(h.left,h.top,n,r)),{height:r,width:n,data:t}},i.uid=function(){return++f},Object.defineProperty(i,"isMobile",{enumerable:!0,get:function(){return r.isMobile}}),Object.defineProperty(i,"EventEmitter",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(i,"earcut",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(i,"url",{enumerable:!0,get:function(){return o.default}}),i.premultiplyBlendMode=i.TextureCache=i.ProgramCache=i.DATA_URI=i.CanvasRenderTarget=i.BaseTextureCache=void 0;var r=t("@pixi/settings"),n=l(t("eventemitter3")),s=l(t("earcut")),o=function(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var e=h();if(e&&e.has(t))return e.get(t);var i,n,r={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(i in t)Object.prototype.hasOwnProperty.call(t,i)&&((n=s?Object.getOwnPropertyDescriptor(t,i):null)&&(n.get||n.set)?Object.defineProperty(r,i,n):r[i]=t[i]);return r.default=t,e&&e.set(t,r),r}(t("url")),a=t("@pixi/constants");function h(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return h=function(){return t},t}function l(t){return t&&t.__esModule?t:{default:t}}r.settings.RETINA_PREFIX=/@([0-9\.]+)x/;var u,c=!(r.settings.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT=!0),p=function(){for(var t=[],e=[],i=0;i<32;i++)e[t[i]=i]=i;t[a.BLEND_MODES.NORMAL_NPM]=a.BLEND_MODES.NORMAL,t[a.BLEND_MODES.ADD_NPM]=a.BLEND_MODES.ADD,t[a.BLEND_MODES.SCREEN_NPM]=a.BLEND_MODES.SCREEN,e[a.BLEND_MODES.NORMAL]=a.BLEND_MODES.NORMAL_NPM,e[a.BLEND_MODES.ADD]=a.BLEND_MODES.ADD_NPM,e[a.BLEND_MODES.SCREEN]=a.BLEND_MODES.SCREEN_NPM;var n=[];return n.push(e),n.push(t),n}();function d(t){if(4===t.BYTES_PER_ELEMENT)return t instanceof Float32Array?"Float32Array":t instanceof Uint32Array?"Uint32Array":"Int32Array";if(2===t.BYTES_PER_ELEMENT){if(t instanceof Uint16Array)return"Uint16Array"}else if(1===t.BYTES_PER_ELEMENT&&t instanceof Uint8Array)return"Uint8Array";return null}i.premultiplyBlendMode=p;var _={Float32Array:Float32Array,Uint32Array:Uint32Array,Int32Array:Int32Array,Uint8Array:Uint8Array},f=0,m={};i.ProgramCache={};var y=Object.create(null);i.TextureCache=y;var g=Object.create(null);i.BaseTextureCache=g;v.prototype.clear=function(){this.context.setTransform(1,0,0,1,0,0),this.context.clearRect(0,0,this.canvas.width,this.canvas.height)},v.prototype.resize=function(t,e){this.canvas.width=t*this.resolution,this.canvas.height=e*this.resolution},v.prototype.destroy=function(){this.context=null,this.canvas=null},Object.defineProperty(v.prototype,"width",{get:function(){return this.canvas.width},set:function(t){this.canvas.width=t},enumerable:!0,configurable:!0}),Object.defineProperty(v.prototype,"height",{get:function(){return this.canvas.height},set:function(t){this.canvas.height=t},enumerable:!0,configurable:!0}),t=v;function v(t,e,i){this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.resolution=i||r.settings.RESOLUTION,this.resize(t,e)}i.CanvasRenderTarget=t;var w,x=/^\s*data:(?:([\w-]+)\/([\w+.-]+))?(?:;charset=([\w-]+))?(?:;(base64))?,(.*)/i;i.DATA_URI=x},{"@pixi/settings":"v11T",eventemitter3:"Clm3",earcut:"Ic8v",url:"s956","@pixi/constants":"R76a"}],GTL5:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.groupD8=i.Transform=i.SHAPES=i.RoundedRectangle=i.Rectangle=i.RAD_TO_DEG=i.Polygon=i.Point=i.PI_2=i.ObservablePoint=i.Matrix=i.Ellipse=i.DEG_TO_RAD=i.Circle=void 0;var o=(n.prototype.clone=function(){return new n(this.x,this.y)},n.prototype.copyFrom=function(t){return this.set(t.x,t.y),this},n.prototype.copyTo=function(t){return t.set(this.x,this.y),t},n.prototype.equals=function(t){return t.x===this.x&&t.y===this.y},n.prototype.set=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this.x=t,this.y=e,this},n);function n(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.x=t,this.y=e}i.Point=o;var r=(s.prototype.clone=function(t,e){return void 0===t&&(t=this.cb),void 0===e&&(e=this.scope),new s(t,e,this._x,this._y)},s.prototype.set=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this._x===t&&this._y===e||(this._x=t,this._y=e,this.cb.call(this.scope)),this},s.prototype.copyFrom=function(t){return this._x===t.x&&this._y===t.y||(this._x=t.x,this._y=t.y,this.cb.call(this.scope)),this},s.prototype.copyTo=function(t){return t.set(this._x,this._y),t},s.prototype.equals=function(t){return t.x===this._x&&t.y===this._y},Object.defineProperty(s.prototype,"x",{get:function(){return this._x},set:function(t){this._x!==t&&(this._x=t,this.cb.call(this.scope))},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"y",{get:function(){return this._y},set:function(t){this._y!==t&&(this._y=t,this.cb.call(this.scope))},enumerable:!0,configurable:!0}),s);function s(t,e,i,n){void 0===i&&(i=0),void 0===n&&(n=0),this._x=i,this._y=n,this.cb=t,this.scope=e}i.ObservablePoint=r;var h=2*Math.PI;i.PI_2=h;var a=180/Math.PI;i.RAD_TO_DEG=a;var l,a=Math.PI/180;i.DEG_TO_RAD=a,i.SHAPES=l,(a=l||(i.SHAPES=l={}))[a.POLY=0]="POLY",a[a.RECT=1]="RECT",a[a.CIRC=2]="CIRC",a[a.ELIP=3]="ELIP",a[a.RREC=4]="RREC";var u=(c.prototype.fromArray=function(t){this.a=t[0],this.b=t[1],this.c=t[3],this.d=t[4],this.tx=t[2],this.ty=t[5]},c.prototype.set=function(t,e,i,n,r,s){return this.a=t,this.b=e,this.c=i,this.d=n,this.tx=r,this.ty=s,this},c.prototype.toArray=function(t,e){this.array||(this.array=new Float32Array(9));e=e||this.array;return t?(e[0]=this.a,e[1]=this.b,e[2]=0,e[3]=this.c,e[4]=this.d,e[5]=0,e[6]=this.tx,e[7]=this.ty):(e[0]=this.a,e[1]=this.c,e[2]=this.tx,e[3]=this.b,e[4]=this.d,e[5]=this.ty,e[6]=0,e[7]=0),e[8]=1,e},c.prototype.apply=function(t,e){e=e||new o;var i=t.x,t=t.y;return e.x=this.a*i+this.c*t+this.tx,e.y=this.b*i+this.d*t+this.ty,e},c.prototype.applyInverse=function(t,e){e=e||new o;var i=1/(this.a*this.d+this.c*-this.b),n=t.x,t=t.y;return e.x=this.d*i*n+-this.c*i*t+(this.ty*this.c-this.tx*this.d)*i,e.y=this.a*i*t+-this.b*i*n+(-this.ty*this.a+this.tx*this.b)*i,e},c.prototype.translate=function(t,e){return this.tx+=t,this.ty+=e,this},c.prototype.scale=function(t,e){return this.a*=t,this.d*=e,this.c*=t,this.b*=e,this.tx*=t,this.ty*=e,this},c.prototype.rotate=function(t){var e=Math.cos(t),i=Math.sin(t),n=this.a,r=this.c,t=this.tx;return this.a=n*e-this.b*i,this.b=n*i+this.b*e,this.c=r*e-this.d*i,this.d=r*i+this.d*e,this.tx=t*e-this.ty*i,this.ty=t*i+this.ty*e,this},c.prototype.append=function(t){var e=this.a,i=this.b,n=this.c,r=this.d;return this.a=t.a*e+t.b*n,this.b=t.a*i+t.b*r,this.c=t.c*e+t.d*n,this.d=t.c*i+t.d*r,this.tx=t.tx*e+t.ty*n+this.tx,this.ty=t.tx*i+t.ty*r+this.ty,this},c.prototype.setTransform=function(t,e,i,n,r,s,o,a,h){return this.a=Math.cos(o+h)*r,this.b=Math.sin(o+h)*r,this.c=-Math.sin(o-a)*s,this.d=Math.cos(o-a)*s,this.tx=t-(i*this.a+n*this.c),this.ty=e-(i*this.b+n*this.d),this},c.prototype.prepend=function(t){var e,i,n=this.tx;return 1===t.a&&0===t.b&&0===t.c&&1===t.d||(e=this.a,i=this.c,this.a=e*t.a+this.b*t.c,this.b=e*t.b+this.b*t.d,this.c=i*t.a+this.d*t.c,this.d=i*t.b+this.d*t.d),this.tx=n*t.a+this.ty*t.c+t.tx,this.ty=n*t.b+this.ty*t.d+t.ty,this},c.prototype.decompose=function(t){var e=this.a,i=this.b,n=this.c,r=this.d,s=-Math.atan2(-n,r),o=Math.atan2(i,e),a=Math.abs(s+o);return a<1e-5||Math.abs(h-a)<1e-5?(t.rotation=o,t.skew.x=t.skew.y=0):(t.rotation=0,t.skew.x=s,t.skew.y=o),t.scale.x=Math.sqrt(e*e+i*i),t.scale.y=Math.sqrt(n*n+r*r),t.position.x=this.tx,t.position.y=this.ty,t},c.prototype.invert=function(){var t=this.a,e=this.b,i=this.c,n=this.d,r=this.tx,s=t*n-e*i;return this.a=n/s,this.b=-e/s,this.c=-i/s,this.d=t/s,this.tx=(i*this.ty-n*r)/s,this.ty=-(t*this.ty-e*r)/s,this},c.prototype.identity=function(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this},c.prototype.clone=function(){var t=new c;return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t},c.prototype.copyTo=function(t){return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t},c.prototype.copyFrom=function(t){return this.a=t.a,this.b=t.b,this.c=t.c,this.d=t.d,this.tx=t.tx,this.ty=t.ty,this},Object.defineProperty(c,"IDENTITY",{get:function(){return new c},enumerable:!0,configurable:!0}),Object.defineProperty(c,"TEMP_MATRIX",{get:function(){return new c},enumerable:!0,configurable:!0}),c);function c(t,e,i,n,r,s){void 0===t&&(t=1),void 0===e&&(e=0),void 0===i&&(i=0),void 0===n&&(n=1),void 0===r&&(r=0),void 0===s&&(s=0),this.array=null,this.a=t,this.b=e,this.c=i,this.d=n,this.tx=r,this.ty=s}i.Matrix=u;var p=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],d=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],_=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],f=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],m=[],y=[],g=Math.sign;!function(){for(var t=0;t<16;t++){var e=[];m.push(e);for(var i=0;i<16;i++)for(var n=g(p[t]*p[i]+_[t]*d[i]),r=g(d[t]*p[i]+f[t]*d[i]),s=g(p[t]*_[i]+_[t]*f[i]),o=g(d[t]*_[i]+f[t]*f[i]),a=0;a<16;a++)if(p[a]===n&&d[a]===r&&_[a]===s&&f[a]===o){e.push(a);break}}for(t=0;t<16;t++){var h=new u;h.set(p[t],d[t],_[t],f[t],0,0),y.push(h)}}();var v={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:function(t){return p[t]},uY:function(t){return d[t]},vX:function(t){return _[t]},vY:function(t){return f[t]},inv:function(t){return 8&t?15&t:7&-t},add:function(t,e){return m[t][e]},sub:function(t,e){return m[t][v.inv(e)]},rotate180:function(t){return 4^t},isVertical:function(t){return 2==(3&t)},byDirection:function(t,e){return 2*Math.abs(t)<=Math.abs(e)?0<=e?v.S:v.N:2*Math.abs(e)<=Math.abs(t)?0<t?v.E:v.W:0<e?0<t?v.SE:v.SW:0<t?v.NE:v.NW},matrixAppendRotationInv:function(t,e,i,n){void 0===i&&(i=0),void 0===n&&(n=0);e=y[v.inv(e)];e.tx=i,e.ty=n,t.append(e)}};i.groupD8=v;w.prototype.onChange=function(){this._localID++},w.prototype.updateSkew=function(){this._cx=Math.cos(this._rotation+this.skew.y),this._sx=Math.sin(this._rotation+this.skew.y),this._cy=-Math.sin(this._rotation-this.skew.x),this._sy=Math.cos(this._rotation-this.skew.x),this._localID++},w.prototype.updateLocalTransform=function(){var t=this.localTransform;this._localID!==this._currentLocalID&&(t.a=this._cx*this.scale.x,t.b=this._sx*this.scale.x,t.c=this._cy*this.scale.y,t.d=this._sy*this.scale.y,t.tx=this.position.x-(this.pivot.x*t.a+this.pivot.y*t.c),t.ty=this.position.y-(this.pivot.x*t.b+this.pivot.y*t.d),this._currentLocalID=this._localID,this._parentID=-1)},w.prototype.updateTransform=function(t){var e,i,n=this.localTransform;this._localID!==this._currentLocalID&&(n.a=this._cx*this.scale.x,n.b=this._sx*this.scale.x,n.c=this._cy*this.scale.y,n.d=this._sy*this.scale.y,n.tx=this.position.x-(this.pivot.x*n.a+this.pivot.y*n.c),n.ty=this.position.y-(this.pivot.x*n.b+this.pivot.y*n.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==t._worldID&&(e=t.worldTransform,(i=this.worldTransform).a=n.a*e.a+n.b*e.c,i.b=n.a*e.b+n.b*e.d,i.c=n.c*e.a+n.d*e.c,i.d=n.c*e.b+n.d*e.d,i.tx=n.tx*e.a+n.ty*e.c+e.tx,i.ty=n.tx*e.b+n.ty*e.d+e.ty,this._parentID=t._worldID,this._worldID++)},w.prototype.setFromMatrix=function(t){t.decompose(this),this._localID++},Object.defineProperty(w.prototype,"rotation",{get:function(){return this._rotation},set:function(t){this._rotation!==t&&(this._rotation=t,this.updateSkew())},enumerable:!0,configurable:!0}),w.IDENTITY=new w,a=w;function w(){this.worldTransform=new u,this.localTransform=new u,this.position=new r(this.onChange,this,0,0),this.scale=new r(this.onChange,this,1,1),this.pivot=new r(this.onChange,this,0,0),this.skew=new r(this.updateSkew,this,0,0),this._rotation=0,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._localID=0,this._currentLocalID=0,this._worldID=0,this._parentID=0}i.Transform=a;var x=(Object.defineProperty(b.prototype,"left",{get:function(){return this.x},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"right",{get:function(){return this.x+this.width},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"top",{get:function(){return this.y},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"bottom",{get:function(){return this.y+this.height},enumerable:!0,configurable:!0}),Object.defineProperty(b,"EMPTY",{get:function(){return new b(0,0,0,0)},enumerable:!0,configurable:!0}),b.prototype.clone=function(){return new b(this.x,this.y,this.width,this.height)},b.prototype.copyFrom=function(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this},b.prototype.copyTo=function(t){return t.x=this.x,t.y=this.y,t.width=this.width,t.height=this.height,t},b.prototype.contains=function(t,e){return!(this.width<=0||this.height<=0)&&t>=this.x&&t<this.x+this.width&&e>=this.y&&e<this.y+this.height},b.prototype.pad=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this.x-=t,this.y-=e,this.width+=2*t,this.height+=2*e,this},b.prototype.fit=function(t){var e=Math.max(this.x,t.x),i=Math.min(this.x+this.width,t.x+t.width),n=Math.max(this.y,t.y),t=Math.min(this.y+this.height,t.y+t.height);return this.x=e,this.width=Math.max(i-e,0),this.y=n,this.height=Math.max(t-n,0),this},b.prototype.ceil=function(t,e){void 0===t&&(t=1),void 0===e&&(e=.001);var i=Math.ceil((this.x+this.width-e)*t)/t,n=Math.ceil((this.y+this.height-e)*t)/t;return this.x=Math.floor((this.x+e)*t)/t,this.y=Math.floor((this.y+e)*t)/t,this.width=i-this.x,this.height=n-this.y,this},b.prototype.enlarge=function(t){var e=Math.min(this.x,t.x),i=Math.max(this.x+this.width,t.x+t.width),n=Math.min(this.y,t.y),t=Math.max(this.y+this.height,t.y+t.height);return this.x=e,this.width=i-e,this.y=n,this.height=t-n,this},b);function b(t,e,i,n){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),void 0===n&&(n=0),this.x=Number(t),this.y=Number(e),this.width=Number(i),this.height=Number(n),this.type=l.RECT}i.Rectangle=x;E.prototype.clone=function(){return new E(this.x,this.y,this.radius)},E.prototype.contains=function(t,e){if(this.radius<=0)return!1;var i=this.radius*this.radius,t=this.x-t,e=this.y-e;return(t*=t)+(e*=e)<=i},E.prototype.getBounds=function(){return new x(this.x-this.radius,this.y-this.radius,2*this.radius,2*this.radius)},a=E;function E(t,e,i){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),this.x=t,this.y=e,this.radius=i,this.type=l.CIRC}i.Circle=a;$.prototype.clone=function(){return new $(this.x,this.y,this.width,this.height)},$.prototype.contains=function(t,e){if(this.width<=0||this.height<=0)return!1;t=(t-this.x)/this.width,e=(e-this.y)/this.height;return(t*=t)+(e*=e)<=1},$.prototype.getBounds=function(){return new x(this.x-this.width,this.y-this.height,this.width,this.height)},a=$;function $(t,e,i,n){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),void 0===n&&(n=0),this.x=t,this.y=e,this.width=i,this.height=n,this.type=l.ELIP}i.Ellipse=a;A.prototype.clone=function(){var t=new A(this.points.slice());return t.closeStroke=this.closeStroke,t},A.prototype.contains=function(t,e){for(var i=!1,n=this.points.length/2,r=0,s=n-1;r<n;s=r++){var o=this.points[2*r],a=this.points[2*r+1],h=this.points[2*s],l=this.points[2*s+1];e<a!=e<l&&t<(e-a)/(l-a)*(h-o)+o&&(i=!i)}return i},a=A;function A(){for(var t=arguments,e=[],i=0;i<arguments.length;i++)e[i]=t[i];if(Array.isArray(e[0])&&(e=e[0]),e[0]instanceof o){for(var n=[],r=0,s=e.length;r<s;r++)n.push(e[r].x,e[r].y);e=n}this.points=e,this.type=l.POLY,this.closeStroke=!0}i.Polygon=a;S.prototype.clone=function(){return new S(this.x,this.y,this.width,this.height,this.radius)},S.prototype.contains=function(t,e){if(this.width<=0||this.height<=0)return!1;if(t>=this.x&&t<=this.x+this.width&&e>=this.y&&e<=this.y+this.height){if(e>=this.y+this.radius&&e<=this.y+this.height-this.radius||t>=this.x+this.radius&&t<=this.x+this.width-this.radius)return!0;var i=t-(this.x+this.radius),n=e-(this.y+this.radius),r=this.radius*this.radius;if(i*i+n*n<=r)return!0;if((i=t-(this.x+this.width-this.radius))*i+n*n<=r)return!0;if(i*i+(n=e-(this.y+this.height-this.radius))*n<=r)return!0;if((i=t-(this.x+this.radius))*i+n*n<=r)return!0}return!1},a=S;function S(t,e,i,n,r){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),void 0===n&&(n=0),void 0===r&&(r=20),this.x=t,this.y=e,this.width=i,this.height=n,this.radius=r,this.type=l.RREC}i.RoundedRectangle=a},{}],LJAM:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.DisplayObject=i.Container=i.Bounds=void 0;var n=t("@pixi/settings"),s=t("@pixi/math"),o=t("@pixi/utils");n.settings.SORTABLE_CHILDREN=!1;function a(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.rect=null}(i.Bounds=a).prototype.isEmpty=function(){return this.minX>this.maxX||this.minY>this.maxY},a.prototype.clear=function(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0},a.prototype.getRectangle=function(t){return this.minX>this.maxX||this.minY>this.maxY?s.Rectangle.EMPTY:((t=t||new s.Rectangle(0,0,1,1)).x=this.minX,t.y=this.minY,t.width=this.maxX-this.minX,t.height=this.maxY-this.minY,t)},a.prototype.addPoint=function(t){this.minX=Math.min(this.minX,t.x),this.maxX=Math.max(this.maxX,t.x),this.minY=Math.min(this.minY,t.y),this.maxY=Math.max(this.maxY,t.y)},a.prototype.addQuad=function(t){var e=this.minX,i=this.minY,n=this.maxX,r=this.maxY,s=t[0],o=t[1],e=s<e?s:e,i=o<i?o:i,n=n<s?s:n,r=r<o?o:r;e=(s=t[2])<e?s:e,i=(o=t[3])<i?o:i,n=n<s?s:n,r=r<o?o:r,e=(s=t[4])<e?s:e,i=(o=t[5])<i?o:i,n=n<s?s:n,r=r<o?o:r,e=(s=t[6])<e?s:e,i=(o=t[7])<i?o:i,n=n<s?s:n,r=r<o?o:r,this.minX=e,this.minY=i,this.maxX=n,this.maxY=r},a.prototype.addFrame=function(t,e,i,n,r){this.addFrameMatrix(t.worldTransform,e,i,n,r)},a.prototype.addFrameMatrix=function(t,e,i,n,r){var s=t.a,o=t.b,a=t.c,h=t.d,l=t.tx,u=t.ty,c=s*e+a*i+l,p=o*e+h*i+u,d=c<(d=this.minX)?c:d,_=p<(_=this.minY)?p:_,f=(f=this.maxX)<c?c:f,t=(t=this.maxY)<p?p:t;d=(c=s*n+a*i+l)<d?c:d,_=(p=o*n+h*i+u)<_?p:_,f=f<c?c:f,t=t<p?p:t,d=(c=s*e+a*r+l)<d?c:d,_=(p=o*e+h*r+u)<_?p:_,f=f<c?c:f,t=t<p?p:t,d=(c=s*n+a*r+l)<d?c:d,_=(p=o*n+h*r+u)<_?p:_,f=f<c?c:f,t=t<p?p:t,this.minX=d,this.minY=_,this.maxX=f,this.maxY=t},a.prototype.addVertexData=function(t,e,i){for(var n=this.minX,r=this.minY,s=this.maxX,o=this.maxY,a=e;a<i;a+=2)var h=t[a],l=t[a+1],n=h<n?h:n,r=l<r?l:r,s=s<h?h:s,o=o<l?l:o;this.minX=n,this.minY=r,this.maxX=s,this.maxY=o},a.prototype.addVertices=function(t,e,i,n){this.addVerticesMatrix(t.worldTransform,e,i,n)},a.prototype.addVerticesMatrix=function(t,e,i,n,r,s){var o=t.a,a=t.b,h=t.c,l=t.d,u=t.tx,c=t.ty;r=r||0,s=s||0;for(var p=this.minX,d=this.minY,_=this.maxX,f=this.maxY,m=i;m<n;m+=2)var y=e[m],g=e[m+1],v=o*y+h*g+u,y=l*g+a*y+c,p=Math.min(p,v-r),_=Math.max(_,v+r),d=Math.min(d,y-s),f=Math.max(f,y+s);this.minX=p,this.minY=d,this.maxX=_,this.maxY=f},a.prototype.addBounds=function(t){var e=this.minX,i=this.minY,n=this.maxX,r=this.maxY;this.minX=t.minX<e?t.minX:e,this.minY=t.minY<i?t.minY:i,this.maxX=t.maxX>n?t.maxX:n,this.maxY=t.maxY>r?t.maxY:r},a.prototype.addBoundsMask=function(t,e){var i,n,r=(t.minX>e.minX?t:e).minX,s=(t.minY>e.minY?t:e).minY,o=(t.maxX<e.maxX?t:e).maxX,a=(t.maxY<e.maxY?t:e).maxY;r<=o&&s<=a&&(i=this.minX,n=this.minY,t=this.maxX,e=this.maxY,this.minX=r<i?r:i,this.minY=s<n?s:n,this.maxX=t<o?o:t,this.maxY=e<a?a:e)},a.prototype.addBoundsMatrix=function(t,e){this.addFrameMatrix(e,t.minX,t.minY,t.maxX,t.maxY)},a.prototype.addBoundsArea=function(t,e){var i,n,r=t.minX>e.x?t.minX:e.x,s=t.minY>e.y?t.minY:e.y,o=t.maxX<e.x+e.width?t.maxX:e.x+e.width,a=t.maxY<e.y+e.height?t.maxY:e.y+e.height;r<=o&&s<=a&&(i=this.minX,n=this.minY,t=this.maxX,e=this.maxY,this.minX=r<i?r:i,this.minY=s<n?s:n,this.maxX=t<o?o:t,this.maxY=e<a?a:e)},a.prototype.pad=function(t,e){t=t||0,e=e||(0!==e?t:0),this.isEmpty()||(this.minX-=t,this.maxX+=t,this.minY-=e,this.maxY+=e)},a.prototype.addFramePad=function(t,e,i,n,r,s){t-=r,e-=s,i+=r,n+=s,this.minX=this.minX<t?this.minX:t,this.maxX=this.maxX>i?this.maxX:i,this.minY=this.minY<e?this.minY:e,this.maxY=this.maxY>n?this.maxY:n};t=function(t){function r(){t.call(this),this.tempDisplayObjectParent=null,this.transform=new s.Transform,this.alpha=1,this.visible=!0,this.renderable=!0,this.parent=null,this.worldAlpha=1,this._lastSortedIndex=0,this._zIndex=0,this.filterArea=null,this.filters=null,this._enabledFilters=null,this._bounds=new a,this._boundsID=0,this._lastBoundsID=-1,this._boundsRect=null,this._localBoundsRect=null,this._mask=null,this._destroyed=!1,this.isSprite=!1,this.isMask=!1}t&&(r.__proto__=t);var e={_tempDisplayObjectParent:{configurable:!0},x:{configurable:!0},y:{configurable:!0},worldTransform:{configurable:!0},localTransform:{configurable:!0},position:{configurable:!0},scale:{configurable:!0},pivot:{configurable:!0},skew:{configurable:!0},rotation:{configurable:!0},angle:{configurable:!0},zIndex:{configurable:!0},worldVisible:{configurable:!0},mask:{configurable:!0}};return((r.prototype=Object.create(t&&t.prototype)).constructor=r).mixin=function(t){for(var e=Object.keys(t),i=0;i<e.length;++i){var n=e[i];Object.defineProperty(r.prototype,n,Object.getOwnPropertyDescriptor(t,n))}},e._tempDisplayObjectParent.get=function(){return null===this.tempDisplayObjectParent&&(this.tempDisplayObjectParent=new r),this.tempDisplayObjectParent},r.prototype.updateTransform=function(){this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha},r.prototype.calculateBounds=function(){},r.prototype._recursivePostUpdateTransform=function(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)},r.prototype.getBounds=function(t,e){return t||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._boundsID!==this._lastBoundsID&&(this.calculateBounds(),this._lastBoundsID=this._boundsID),e||(this._boundsRect||(this._boundsRect=new s.Rectangle),e=this._boundsRect),this._bounds.getRectangle(e)},r.prototype.getLocalBounds=function(t){var e=this.transform,i=this.parent;this.parent=null,this.transform=this._tempDisplayObjectParent.transform,t||(this._localBoundsRect||(this._localBoundsRect=new s.Rectangle),t=this._localBoundsRect);t=this.getBounds(!1,t);return this.parent=i,this.transform=e,t},r.prototype.toGlobal=function(t,e,i){return void 0===i&&(i=!1),i||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(t,e)},r.prototype.toLocal=function(t,e,i,n){return e&&(t=e.toGlobal(t,i,n)),n||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(t,i)},r.prototype.render=function(t){},r.prototype.setParent=function(t){if(!t||!t.addChild)throw new Error("setParent: Argument must be a Container");return t.addChild(this),t},r.prototype.setTransform=function(t,e,i,n,r,s,o,a,h){return void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=1),void 0===n&&(n=1),void 0===r&&(r=0),void 0===s&&(s=0),void 0===o&&(o=0),void 0===a&&(a=0),void 0===h&&(h=0),this.position.x=t,this.position.y=e,this.scale.x=i||1,this.scale.y=n||1,this.rotation=r,this.skew.x=s,this.skew.y=o,this.pivot.x=a,this.pivot.y=h,this},r.prototype.destroy=function(){this.parent&&this.parent.removeChild(this),this.removeAllListeners(),this.transform=null,this.parent=null,this._bounds=null,this._currentBounds=null,this._mask=null,this.filters=null,this.filterArea=null,this.hitArea=null,this.interactive=!1,this.interactiveChildren=!1,this._destroyed=!0},e.x.get=function(){return this.position.x},e.x.set=function(t){this.transform.position.x=t},e.y.get=function(){return this.position.y},e.y.set=function(t){this.transform.position.y=t},e.worldTransform.get=function(){return this.transform.worldTransform},e.localTransform.get=function(){return this.transform.localTransform},e.position.get=function(){return this.transform.position},e.position.set=function(t){this.transform.position.copyFrom(t)},e.scale.get=function(){return this.transform.scale},e.scale.set=function(t){this.transform.scale.copyFrom(t)},e.pivot.get=function(){return this.transform.pivot},e.pivot.set=function(t){this.transform.pivot.copyFrom(t)},e.skew.get=function(){return this.transform.skew},e.skew.set=function(t){this.transform.skew.copyFrom(t)},e.rotation.get=function(){return this.transform.rotation},e.rotation.set=function(t){this.transform.rotation=t},e.angle.get=function(){return this.transform.rotation*s.RAD_TO_DEG},e.angle.set=function(t){this.transform.rotation=t*s.DEG_TO_RAD},e.zIndex.get=function(){return this._zIndex},e.zIndex.set=function(t){this._zIndex=t,this.parent&&(this.parent.sortDirty=!0)},e.worldVisible.get=function(){var t=this;do{if(!t.visible)return!1}while(t=t.parent);return!0},e.mask.get=function(){return this._mask},e.mask.set=function(t){var e;this._mask&&((e=this._mask.maskObject||this._mask).renderable=!0,e.isMask=!1),this._mask=t,this._mask&&((t=this._mask.maskObject||this._mask).renderable=!1,t.isMask=!0)},Object.defineProperties(r.prototype,e),r}(o.EventEmitter);function h(t,e){return t.zIndex===e.zIndex?t._lastSortedIndex-e._lastSortedIndex:t.zIndex-e.zIndex}(i.DisplayObject=t).prototype.displayObjectUpdateTransform=t.prototype.updateTransform;t=function(r){function t(){r.call(this),this.children=[],this.sortableChildren=n.settings.SORTABLE_CHILDREN,this.sortDirty=!1}r&&(t.__proto__=r);var e={width:{configurable:!0},height:{configurable:!0}};return((t.prototype=Object.create(r&&r.prototype)).constructor=t).prototype.onChildrenChange=function(){},t.prototype.addChild=function(t){var e=arguments,i=arguments.length;if(1<i)for(var n=0;n<i;n++)this.addChild(e[n]);else t.parent&&t.parent.removeChild(t),(t.parent=this).sortDirty=!0,t.transform._parentID=-1,this.children.push(t),this._boundsID++,this.onChildrenChange(this.children.length-1),this.emit("childAdded",t,this,this.children.length-1),t.emit("added",this);return t},t.prototype.addChildAt=function(t,e){if(e<0||e>this.children.length)throw new Error(t+"addChildAt: The index "+e+" supplied is out of bounds "+this.children.length);return t.parent&&t.parent.removeChild(t),(t.parent=this).sortDirty=!0,t.transform._parentID=-1,this.children.splice(e,0,t),this._boundsID++,this.onChildrenChange(e),t.emit("added",this),this.emit("childAdded",t,this,e),t},t.prototype.swapChildren=function(t,e){var i,n;t!==e&&(i=this.getChildIndex(t),n=this.getChildIndex(e),this.children[i]=e,this.children[n]=t,this.onChildrenChange(i<n?i:n))},t.prototype.getChildIndex=function(t){t=this.children.indexOf(t);if(-1===t)throw new Error("The supplied DisplayObject must be a child of the caller");return t},t.prototype.setChildIndex=function(t,e){if(e<0||e>=this.children.length)throw new Error("The index "+e+" supplied is out of bounds "+this.children.length);var i=this.getChildIndex(t);(0,o.removeItems)(this.children,i,1),this.children.splice(e,0,t),this.onChildrenChange(e)},t.prototype.getChildAt=function(t){if(t<0||t>=this.children.length)throw new Error("getChildAt: Index ("+t+") does not exist.");return this.children[t]},t.prototype.removeChild=function(t){var e=arguments,i=arguments.length;if(1<i)for(var n=0;n<i;n++)this.removeChild(e[n]);else{var r=this.children.indexOf(t);if(-1===r)return null;t.parent=null,t.transform._parentID=-1,(0,o.removeItems)(this.children,r,1),this._boundsID++,this.onChildrenChange(r),t.emit("removed",this),this.emit("childRemoved",t,this,r)}return t},t.prototype.removeChildAt=function(t){var e=this.getChildAt(t);return e.parent=null,e.transform._parentID=-1,(0,o.removeItems)(this.children,t,1),this._boundsID++,this.onChildrenChange(t),e.emit("removed",this),this.emit("childRemoved",e,this,t),e},t.prototype.removeChildren=function(t,e){void 0===t&&(t=0);var i,n="number"==typeof e?e:this.children.length,e=n-t;if(0<e&&e<=n){i=this.children.splice(t,e);for(var r=0;r<i.length;++r)i[r].parent=null,i[r].transform&&(i[r].transform._parentID=-1);this._boundsID++,this.onChildrenChange(t);for(var s=0;s<i.length;++s)i[s].emit("removed",this),this.emit("childRemoved",i[s],this,s);return i}if(0==e&&0===this.children.length)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")},t.prototype.sortChildren=function(){for(var t=!1,e=0,i=this.children.length;e<i;++e){var n=this.children[e];n._lastSortedIndex=e,t||0===n.zIndex||(t=!0)}t&&1<this.children.length&&this.children.sort(h),this.sortDirty=!1},t.prototype.updateTransform=function(){this.sortableChildren&&this.sortDirty&&this.sortChildren(),this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(var t=0,e=this.children.length;t<e;++t){var i=this.children[t];i.visible&&i.updateTransform()}},t.prototype.calculateBounds=function(){this._bounds.clear(),this._calculateBounds();for(var t=0;t<this.children.length;t++){var e,i=this.children[t];i.visible&&i.renderable&&(i.calculateBounds(),i._mask?((e=i._mask.maskObject||i._mask).calculateBounds(),this._bounds.addBoundsMask(i._bounds,e._bounds)):i.filterArea?this._bounds.addBoundsArea(i._bounds,i.filterArea):this._bounds.addBounds(i._bounds))}this._lastBoundsID=this._boundsID},t.prototype._calculateBounds=function(){},t.prototype.render=function(t){if(this.visible&&!(this.worldAlpha<=0)&&this.renderable)if(this._mask||this.filters&&this.filters.length)this.renderAdvanced(t);else{this._render(t);for(var e=0,i=this.children.length;e<i;++e)this.children[e].render(t)}},t.prototype.renderAdvanced=function(t){t.batch.flush();var e=this.filters,i=this._mask;if(e){this._enabledFilters||(this._enabledFilters=[]);for(var n=this._enabledFilters.length=0;n<e.length;n++)e[n].enabled&&this._enabledFilters.push(e[n]);this._enabledFilters.length&&t.filter.push(this,this._enabledFilters)}i&&t.mask.push(this,this._mask),this._render(t);for(var r=0,s=this.children.length;r<s;r++)this.children[r].render(t);t.batch.flush(),i&&t.mask.pop(this,this._mask),e&&this._enabledFilters&&this._enabledFilters.length&&t.filter.pop()},t.prototype._render=function(t){},t.prototype.destroy=function(t){r.prototype.destroy.call(this),this.sortDirty=!1;var e="boolean"==typeof t?t:t&&t.children,i=this.removeChildren(0,this.children.length);if(e)for(var n=0;n<i.length;++n)i[n].destroy(t)},e.width.get=function(){return this.scale.x*this.getLocalBounds().width},e.width.set=function(t){var e=this.getLocalBounds().width;this.scale.x=0!==e?t/e:1,this._width=t},e.height.get=function(){return this.scale.y*this.getLocalBounds().height},e.height.set=function(t){var e=this.getLocalBounds().height;this.scale.y=0!==e?t/e:1,this._height=t},Object.defineProperties(t.prototype,e),t}(t);(i.Container=t).prototype.containerUpdateTransform=t.prototype.updateTransform},{"@pixi/settings":"v11T","@pixi/math":"GTL5","@pixi/utils":"x5Ec"}],jFkj:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.accessibleTarget=i.AccessibilityManager=void 0;var h=t("@pixi/utils"),n=t("@pixi/display"),t={accessible:!1,accessibleTitle:null,accessibleHint:null,tabIndex:0,_accessibleActive:!1,_accessibleDiv:!1,accessibleType:"button",accessiblePointerEvents:"auto",accessibleChildren:!0};i.accessibleTarget=t,n.DisplayObject.mixin(t);t=function(t){this._hookDiv=null,(h.isMobile.tablet||h.isMobile.phone)&&this.createTouchHook();var e=document.createElement("div");e.style.width="100px",e.style.height="100px",e.style.position="absolute",e.style.top="0px",e.style.left="0px",e.style.zIndex=2,this.div=e,this.pool=[],this.renderId=0,this.debug=!1,this.renderer=t,this.children=[],this._onKeyDown=this._onKeyDown.bind(this),this._onMouseMove=this._onMouseMove.bind(this),this.isActive=!1,this.isMobileAccessibility=!1,window.addEventListener("keydown",this._onKeyDown,!1)};(i.AccessibilityManager=t).prototype.createTouchHook=function(){var t=this,e=document.createElement("button");e.style.width="1px",e.style.height="1px",e.style.position="absolute",e.style.top="-1000px",e.style.left="-1000px",e.style.zIndex=2,e.style.backgroundColor="#FF0000",e.title="HOOK DIV",e.addEventListener("focus",function(){t.isMobileAccessibility=!0,t.activate(),t.destroyTouchHook()}),document.body.appendChild(e),this._hookDiv=e},t.prototype.destroyTouchHook=function(){this._hookDiv&&(document.body.removeChild(this._hookDiv),this._hookDiv=null)},t.prototype.activate=function(){this.isActive||(this.isActive=!0,window.document.addEventListener("mousemove",this._onMouseMove,!0),window.removeEventListener("keydown",this._onKeyDown,!1),this.renderer.on("postrender",this.update,this),this.renderer.view.parentNode&&this.renderer.view.parentNode.appendChild(this.div))},t.prototype.deactivate=function(){this.isActive&&!this.isMobileAccessibility&&(this.isActive=!1,window.document.removeEventListener("mousemove",this._onMouseMove,!0),window.addEventListener("keydown",this._onKeyDown,!1),this.renderer.off("postrender",this.update),this.div.parentNode&&this.div.parentNode.removeChild(this.div))},t.prototype.updateAccessibleObjects=function(t){if(t.visible&&t.accessibleChildren){t.accessible&&t.interactive&&(t._accessibleActive||this.addChild(t),t.renderId=this.renderId);for(var e=t.children,i=0;i<e.length;i++)this.updateAccessibleObjects(e[i])}},t.prototype.update=function(){if(this.renderer.renderingToScreen){this.updateAccessibleObjects(this.renderer._lastObjectRendered);var t=this.renderer.view.getBoundingClientRect(),e=t.width/this.renderer.width,i=t.height/this.renderer.height,n=this.div;n.style.left=t.left+"px",n.style.top=t.top+"px",n.style.width=this.renderer.width+"px",n.style.height=this.renderer.height+"px";for(var r=0;r<this.children.length;r++){var s,o,a=this.children[r];a.renderId!==this.renderId?((a._accessibleActive=!1,h.removeItems)(this.children,r,1),this.div.removeChild(a._accessibleDiv),this.pool.push(a._accessibleDiv),a._accessibleDiv=null,r--,0===this.children.length&&this.deactivate()):(n=a._accessibleDiv,s=a.hitArea,o=a.worldTransform,a.hitArea?(n.style.left=(o.tx+s.x*o.a)*e+"px",n.style.top=(o.ty+s.y*o.d)*i+"px",n.style.width=s.width*o.a*e+"px",n.style.height=s.height*o.d*i+"px"):(s=a.getBounds(),this.capHitArea(s),n.style.left=s.x*e+"px",n.style.top=s.y*i+"px",n.style.width=s.width*e+"px",n.style.height=s.height*i+"px",n.title!==a.accessibleTitle&&null!==a.accessibleTitle&&(n.title=a.accessibleTitle),n.getAttribute("aria-label")!==a.accessibleHint&&null!==a.accessibleHint&&n.setAttribute("aria-label",a.accessibleHint)),a.accessibleTitle===n.title&&a.tabIndex===n.tabIndex||(n.title=a.accessibleTitle,n.tabIndex=a.tabIndex,this.debug&&this.updateDebugHTML(n)))}this.renderId++}},t.prototype.updateDebugHTML=function(t){t.innerHTML="type: "+t.type+"</br> title : "+t.title+"</br> tabIndex: "+t.tabIndex},t.prototype.capHitArea=function(t){t.x<0&&(t.width+=t.x,t.x=0),t.y<0&&(t.height+=t.y,t.y=0),t.x+t.width>this.renderer.width&&(t.width=this.renderer.width-t.x),t.y+t.height>this.renderer.height&&(t.height=this.renderer.height-t.y)},t.prototype.addChild=function(t){var e=this.pool.pop();e||((e=document.createElement("button")).style.width="100px",e.style.height="100px",e.style.backgroundColor=this.debug?"rgba(255,255,255,0.5)":"transparent",e.style.position="absolute",e.style.zIndex=2,e.style.borderStyle="none",-1<navigator.userAgent.toLowerCase().indexOf("chrome")?e.setAttribute("aria-live","off"):e.setAttribute("aria-live","polite"),navigator.userAgent.match(/rv:.*Gecko\//)?e.setAttribute("aria-relevant","additions"):e.setAttribute("aria-relevant","text"),e.addEventListener("click",this._onClick.bind(this)),e.addEventListener("focus",this._onFocus.bind(this)),e.addEventListener("focusout",this._onFocusOut.bind(this))),e.style.pointerEvents=t.accessiblePointerEvents,e.type=t.accessibleType,t.accessibleTitle&&null!==t.accessibleTitle?e.title=t.accessibleTitle:t.accessibleHint&&null!==t.accessibleHint||(e.title="displayObject "+t.tabIndex),t.accessibleHint&&null!==t.accessibleHint&&e.setAttribute("aria-label",t.accessibleHint),this.debug&&this.updateDebugHTML(e),t._accessibleActive=!0,(t._accessibleDiv=e).displayObject=t,this.children.push(t),this.div.appendChild(t._accessibleDiv),t._accessibleDiv.tabIndex=t.tabIndex},t.prototype._onClick=function(t){var e=this.renderer.plugins.interaction;e.dispatchEvent(t.target.displayObject,"click",e.eventData),e.dispatchEvent(t.target.displayObject,"pointertap",e.eventData),e.dispatchEvent(t.target.displayObject,"tap",e.eventData)},t.prototype._onFocus=function(t){t.target.getAttribute("aria-live","off")||t.target.setAttribute("aria-live","assertive");var e=this.renderer.plugins.interaction;e.dispatchEvent(t.target.displayObject,"mouseover",e.eventData)},t.prototype._onFocusOut=function(t){t.target.getAttribute("aria-live","off")||t.target.setAttribute("aria-live","polite");var e=this.renderer.plugins.interaction;e.dispatchEvent(t.target.displayObject,"mouseout",e.eventData)},t.prototype._onKeyDown=function(t){9===t.keyCode&&this.activate()},t.prototype._onMouseMove=function(t){0===t.movementX&&0===t.movementY||this.deactivate()},t.prototype.destroy=function(){this.destroyTouchHook(),this.div=null;for(var t=0;t<this.children.length;t++)this.children[t].div=null;window.document.removeEventListener("mousemove",this._onMouseMove,!0),window.removeEventListener("keydown",this._onKeyDown),this.pool=null,this.children=null,this.renderer=null}},{"@pixi/utils":"x5Ec","@pixi/display":"LJAM"}],t27b:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.UPDATE_PRIORITY=i.TickerPlugin=i.Ticker=void 0;var n,r=t("@pixi/settings");r.settings.TARGET_FPMS=.06,i.UPDATE_PRIORITY=n,(t=n||(i.UPDATE_PRIORITY=n={}))[t.INTERACTION=50]="INTERACTION",t[t.HIGH=25]="HIGH",t[t.NORMAL=0]="NORMAL",t[t.LOW=-25]="LOW",t[t.UTILITY=-50]="UTILITY";var s=(h.prototype.match=function(t,e){return void 0===e&&(e=null),this.fn===t&&this.context===e},h.prototype.emit=function(t){this.fn&&(this.context?this.fn.call(this.context,t):this.fn(t));t=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),t},h.prototype.connect=function(t){(this.previous=t).next&&(t.next.previous=this),this.next=t.next,t.next=this},h.prototype.destroy=function(t){void 0===t&&(t=!1),this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);var e=this.next;return this.next=t?null:e,this.previous=null,e},h),o=(a.prototype._requestIfNeeded=function(){null===this._requestId&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))},a.prototype._cancelIfNeeded=function(){null!==this._requestId&&(cancelAnimationFrame(this._requestId),this._requestId=null)},a.prototype._startIfPossible=function(){this.started?this._requestIfNeeded():this.autoStart&&this.start()},a.prototype.add=function(t,e,i){return void 0===i&&(i=n.NORMAL),this._addListener(new s(t,e,i))},a.prototype.addOnce=function(t,e,i){return void 0===i&&(i=n.NORMAL),this._addListener(new s(t,e,i,!0))},a.prototype._addListener=function(t){var e=this._head.next,i=this._head;if(e){for(;e;){if(t.priority>e.priority){t.connect(i);break}e=(i=e).next}t.previous||t.connect(i)}else t.connect(i);return this._startIfPossible(),this},a.prototype.remove=function(t,e){for(var i=this._head.next;i;)i=i.match(t,e)?i.destroy():i.next;return this._head.next||this._cancelIfNeeded(),this},Object.defineProperty(a.prototype,"count",{get:function(){if(!this._head)return 0;for(var t=0,e=this._head;e=e.next;)t++;return t},enumerable:!0,configurable:!0}),a.prototype.start=function(){this.started||(this.started=!0,this._requestIfNeeded())},a.prototype.stop=function(){this.started&&(this.started=!1,this._cancelIfNeeded())},a.prototype.destroy=function(){if(!this._protected){this.stop();for(var t=this._head.next;t;)t=t.destroy(!0);this._head.destroy(),this._head=null}},a.prototype.update=function(t){if(void 0===t&&(t=performance.now()),t>this.lastTime){if((i=this.elapsedMS=t-this.lastTime)>this._maxElapsedMS&&(i=this._maxElapsedMS),i*=this.speed,this._minElapsedMS){var e=t-this._lastFrame|0;if(e<this._minElapsedMS)return;this._lastFrame=t-e%this._minElapsedMS}this.deltaMS=i,this.deltaTime=this.deltaMS*r.settings.TARGET_FPMS;for(var i=this._head,n=i.next;n;)n=n.emit(this.deltaTime);i.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=t},Object.defineProperty(a.prototype,"FPS",{get:function(){return 1e3/this.elapsedMS},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"minFPS",{get:function(){return 1e3/this._maxElapsedMS},set:function(t){t=Math.min(this.maxFPS,t),t=Math.min(Math.max(0,t)/1e3,r.settings.TARGET_FPMS);this._maxElapsedMS=1/t},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"maxFPS",{get:function(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0},set:function(t){0===t?this._minElapsedMS=0:(t=Math.max(this.minFPS,t),this._minElapsedMS=1/(t/1e3))},enumerable:!0,configurable:!0}),Object.defineProperty(a,"shared",{get:function(){var t;return a._shared||((t=a._shared=new a).autoStart=!0,t._protected=!0),a._shared},enumerable:!0,configurable:!0}),Object.defineProperty(a,"system",{get:function(){var t;return a._system||((t=a._system=new a).autoStart=!0,t._protected=!0),a._system},enumerable:!0,configurable:!0}),a);function a(){var e=this;this._head=new s(null,null,1/0),this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this.autoStart=!1,this.deltaTime=1,this.deltaMS=1/r.settings.TARGET_FPMS,this.elapsedMS=1/r.settings.TARGET_FPMS,this.lastTime=-1,this.speed=1,this.started=!1,this._protected=!1,this._lastFrame=-1,this._tick=function(t){e._requestId=null,e.started&&(e.update(t),e.started&&null===e._requestId&&e._head.next&&(e._requestId=requestAnimationFrame(e._tick)))}}function h(t,e,i,n){void 0===e&&(e=null),void 0===i&&(i=0),void 0===n&&(n=!1),this.fn=t,this.context=e,this.priority=i,this.once=n,this.next=null,this.previous=null,this._destroyed=!1}i.Ticker=o;l.init=function(t){var e=this;t=Object.assign({autoStart:!0,sharedTicker:!1},t),Object.defineProperty(this,"ticker",{set:function(t){this._ticker&&this._ticker.remove(this.render,this),(this._ticker=t)&&t.add(this.render,this,n.LOW)},get:function(){return this._ticker}}),this.stop=function(){e._ticker.stop()},this.start=function(){e._ticker.start()},this._ticker=null,this.ticker=t.sharedTicker?o.shared:new o,t.autoStart&&this.start()},l.destroy=function(){var t;this._ticker&&(t=this._ticker,this.ticker=null,t.destroy())},t=l;function l(){}i.TickerPlugin=t},{"@pixi/settings":"v11T"}],RmUs:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.interactiveTarget=i.InteractionTrackingData=i.InteractionManager=i.InteractionEvent=i.InteractionData=void 0;function n(){this.global=new r.Point,this.target=null,this.originalEvent=null,this.identifier=null,this.isPrimary=!1,this.button=0,this.buttons=0,this.width=0,this.height=0,this.tiltX=0,this.tiltY=0,this.pointerType=null,this.pressure=0,this.rotationAngle=0,this.twist=0,this.tangentialPressure=0}var r=t("@pixi/math"),s=t("@pixi/ticker"),o=t("@pixi/display"),a=t("@pixi/utils");i.InteractionData=n;t={pointerId:{configurable:!0}};t.pointerId.get=function(){return this.identifier},n.prototype.getLocalPosition=function(t,e,i){return t.worldTransform.applyInverse(i||this.global,e)},n.prototype.copyEvent=function(t){t.isPrimary&&(this.isPrimary=!0),this.button=t.button,this.buttons=Number.isInteger(t.buttons)?t.buttons:t.which,this.width=t.width,this.height=t.height,this.tiltX=t.tiltX,this.tiltY=t.tiltY,this.pointerType=t.pointerType,this.pressure=t.pressure,this.rotationAngle=t.rotationAngle,this.twist=t.twist||0,this.tangentialPressure=t.tangentialPressure||0},n.prototype.reset=function(){this.isPrimary=!1},Object.defineProperties(n.prototype,t);function h(){this.stopped=!1,this.stopsPropagatingAt=null,this.stopPropagationHint=!1,this.target=null,this.currentTarget=null,this.type=null,this.data=null}(i.InteractionEvent=h).prototype.stopPropagation=function(){this.stopped=!0,this.stopPropagationHint=!0,this.stopsPropagatingAt=this.currentTarget},h.prototype.reset=function(){this.stopped=!1,this.stopsPropagatingAt=null,this.stopPropagationHint=!1,this.currentTarget=null,this.target=null};function u(t){this._pointerId=t,this._flags=u.FLAGS.NONE}t={pointerId:{configurable:!0},flags:{configurable:!0},none:{configurable:!0},over:{configurable:!0},rightDown:{configurable:!0},leftDown:{configurable:!0}};(i.InteractionTrackingData=u).prototype._doSet=function(t,e){this._flags=e?this._flags|t:this._flags&~t},t.pointerId.get=function(){return this._pointerId},t.flags.get=function(){return this._flags},t.flags.set=function(t){this._flags=t},t.none.get=function(){return this._flags===this.constructor.FLAGS.NONE},t.over.get=function(){return 0!=(this._flags&this.constructor.FLAGS.OVER)},t.over.set=function(t){this._doSet(this.constructor.FLAGS.OVER,t)},t.rightDown.get=function(){return 0!=(this._flags&this.constructor.FLAGS.RIGHT_DOWN)},t.rightDown.set=function(t){this._doSet(this.constructor.FLAGS.RIGHT_DOWN,t)},t.leftDown.get=function(){return 0!=(this._flags&this.constructor.FLAGS.LEFT_DOWN)},t.leftDown.set=function(t){this._doSet(this.constructor.FLAGS.LEFT_DOWN,t)},Object.defineProperties(u.prototype,t),u.FLAGS=Object.freeze({NONE:0,OVER:1,LEFT_DOWN:2,RIGHT_DOWN:4});function l(){this._tempPoint=new r.Point}l.prototype.recursiveFindHit=function(t,e,i,n,r){if(!e||!e.visible)return!1;var s=t.data.global,o=!1,a=r=e.interactive||r,h=!0;if(e.hitArea?(n&&(e.worldTransform.applyInverse(s,this._tempPoint),e.hitArea.contains(this._tempPoint.x,this._tempPoint.y)?o=!0:h=n=!1),a=!1):e._mask&&n&&(e._mask.containsPoint&&e._mask.containsPoint(s)||(n=!1)),h&&e.interactiveChildren&&e.children)for(var l=e.children,u=l.length-1;0<=u;u--){var c=l[u],p=this.recursiveFindHit(t,c,i,n,a);p&&c.parent&&(a=!1,p&&(t.target&&(n=!1),o=!0))}return r&&(n&&!t.target&&!e.hitArea&&e.containsPoint&&e.containsPoint(s)&&(o=!0),e.interactive&&(o&&!t.target&&(t.target=e),i&&i(t,e,!!o))),o};t={interactive:!(l.prototype.findHit=function(t,e,i,n){this.recursiveFindHit(t,e,i,n,!1)}),interactiveChildren:!0,hitArea:null,get buttonMode(){return"pointer"===this.cursor},set buttonMode(t){t?this.cursor="pointer":"pointer"===this.cursor&&(this.cursor=null)},cursor:null,get trackedPointers(){return void 0===this._trackedPointers&&(this._trackedPointers={}),this._trackedPointers},_trackedPointers:void 0};i.interactiveTarget=t,o.DisplayObject.mixin(t);var c={target:null,data:{global:null}},a=function(i){function t(t,e){i.call(this),e=e||{},this.renderer=t,this.autoPreventDefault=void 0===e.autoPreventDefault||e.autoPreventDefault,this.interactionFrequency=e.interactionFrequency||10,this.mouse=new n,this.mouse.identifier=1,this.mouse.global.set(-999999),this.activeInteractionData={},this.activeInteractionData[1]=this.mouse,this.interactionDataPool=[],this.eventData=new h,this.interactionDOMElement=null,this.moveWhenInside=!1,this.eventsAdded=!1,this.tickerAdded=!1,this.mouseOverRenderer=!1,this.supportsTouchEvents="ontouchstart"in window,this.supportsPointerEvents=!!window.PointerEvent,this.onPointerUp=this.onPointerUp.bind(this),this.processPointerUp=this.processPointerUp.bind(this),this.onPointerCancel=this.onPointerCancel.bind(this),this.processPointerCancel=this.processPointerCancel.bind(this),this.onPointerDown=this.onPointerDown.bind(this),this.processPointerDown=this.processPointerDown.bind(this),this.onPointerMove=this.onPointerMove.bind(this),this.processPointerMove=this.processPointerMove.bind(this),this.onPointerOut=this.onPointerOut.bind(this),this.processPointerOverOut=this.processPointerOverOut.bind(this),this.onPointerOver=this.onPointerOver.bind(this),this.cursorStyles={default:"inherit",pointer:"pointer"},this.currentCursorMode=null,this.cursor=null,this.resolution=1,this.delayedEvents=[],this.search=new l,this._useSystemTicker=void 0===e.useSystemTicker||e.useSystemTicker,this.setTargetElement(this.renderer.view,this.renderer.resolution)}i&&(t.__proto__=i),(t.prototype=Object.create(i&&i.prototype)).constructor=t;var e={useSystemTicker:{configurable:!0}};return e.useSystemTicker.get=function(){return this._useSystemTicker},e.useSystemTicker.set=function(t){(this._useSystemTicker=t)?this.addTickerListener():this.removeTickerListener()},t.prototype.hitTest=function(t,e){return c.target=null,c.data.global=t,e=e||this.renderer._lastObjectRendered,this.processInteractive(c,e,null,!0),c.target},t.prototype.setTargetElement=function(t,e){void 0===e&&(e=1),this.removeTickerListener(),this.removeEvents(),this.interactionDOMElement=t,this.resolution=e,this.addEvents(),this.addTickerListener()},t.prototype.addTickerListener=function(){!this.tickerAdded&&this.interactionDOMElement&&this._useSystemTicker&&(s.Ticker.system.add(this.tickerUpdate,this,s.UPDATE_PRIORITY.INTERACTION),this.tickerAdded=!0)},t.prototype.removeTickerListener=function(){this.tickerAdded&&(s.Ticker.system.remove(this.tickerUpdate,this),this.tickerAdded=!1)},t.prototype.addEvents=function(){!this.eventsAdded&&this.interactionDOMElement&&(window.navigator.msPointerEnabled?(this.interactionDOMElement.style["-ms-content-zooming"]="none",this.interactionDOMElement.style["-ms-touch-action"]="none"):this.supportsPointerEvents&&(this.interactionDOMElement.style["touch-action"]="none"),this.supportsPointerEvents?(window.document.addEventListener("pointermove",this.onPointerMove,!0),this.interactionDOMElement.addEventListener("pointerdown",this.onPointerDown,!0),this.interactionDOMElement.addEventListener("pointerleave",this.onPointerOut,!0),this.interactionDOMElement.addEventListener("pointerover",this.onPointerOver,!0),window.addEventListener("pointercancel",this.onPointerCancel,!0),window.addEventListener("pointerup",this.onPointerUp,!0)):(window.document.addEventListener("mousemove",this.onPointerMove,!0),this.interactionDOMElement.addEventListener("mousedown",this.onPointerDown,!0),this.interactionDOMElement.addEventListener("mouseout",this.onPointerOut,!0),this.interactionDOMElement.addEventListener("mouseover",this.onPointerOver,!0),window.addEventListener("mouseup",this.onPointerUp,!0)),this.supportsTouchEvents&&(this.interactionDOMElement.addEventListener("touchstart",this.onPointerDown,!0),this.interactionDOMElement.addEventListener("touchcancel",this.onPointerCancel,!0),this.interactionDOMElement.addEventListener("touchend",this.onPointerUp,!0),this.interactionDOMElement.addEventListener("touchmove",this.onPointerMove,!0)),this.eventsAdded=!0)},t.prototype.removeEvents=function(){this.eventsAdded&&this.interactionDOMElement&&(window.navigator.msPointerEnabled?(this.interactionDOMElement.style["-ms-content-zooming"]="",this.interactionDOMElement.style["-ms-touch-action"]=""):this.supportsPointerEvents&&(this.interactionDOMElement.style["touch-action"]=""),this.supportsPointerEvents?(window.document.removeEventListener("pointermove",this.onPointerMove,!0),this.interactionDOMElement.removeEventListener("pointerdown",this.onPointerDown,!0),this.interactionDOMElement.removeEventListener("pointerleave",this.onPointerOut,!0),this.interactionDOMElement.removeEventListener("pointerover",this.onPointerOver,!0),window.removeEventListener("pointercancel",this.onPointerCancel,!0),window.removeEventListener("pointerup",this.onPointerUp,!0)):(window.document.removeEventListener("mousemove",this.onPointerMove,!0),this.interactionDOMElement.removeEventListener("mousedown",this.onPointerDown,!0),this.interactionDOMElement.removeEventListener("mouseout",this.onPointerOut,!0),this.interactionDOMElement.removeEventListener("mouseover",this.onPointerOver,!0),window.removeEventListener("mouseup",this.onPointerUp,!0)),this.supportsTouchEvents&&(this.interactionDOMElement.removeEventListener("touchstart",this.onPointerDown,!0),this.interactionDOMElement.removeEventListener("touchcancel",this.onPointerCancel,!0),this.interactionDOMElement.removeEventListener("touchend",this.onPointerUp,!0),this.interactionDOMElement.removeEventListener("touchmove",this.onPointerMove,!0)),this.interactionDOMElement=null,this.eventsAdded=!1)},t.prototype.tickerUpdate=function(t){this._deltaTime+=t,this._deltaTime<this.interactionFrequency||(this._deltaTime=0,this.update())},t.prototype.update=function(){if(this.interactionDOMElement)if(this.didMove)this.didMove=!1;else{for(var t in this.cursor=null,this.activeInteractionData){var e;!this.activeInteractionData.hasOwnProperty(t)||(e=this.activeInteractionData[t]).originalEvent&&"touch"!==e.pointerType&&(e=this.configureInteractionEventForDOMEvent(this.eventData,e.originalEvent,e),this.processInteractive(e,this.renderer._lastObjectRendered,this.processPointerOverOut,!0))}this.setCursorMode(this.cursor)}},t.prototype.setCursorMode=function(t){if(t=t||"default",this.currentCursorMode!==t){this.currentCursorMode=t;var e=this.cursorStyles[t];if(e)switch(typeof e){case"string":this.interactionDOMElement.style.cursor=e;break;case"function":e(t);break;case"object":Object.assign(this.interactionDOMElement.style,e)}else"string"!=typeof t||Object.prototype.hasOwnProperty.call(this.cursorStyles,t)||(this.interactionDOMElement.style.cursor=t)}},t.prototype.dispatchEvent=function(t,e,i){i.stopPropagationHint&&t!==i.stopsPropagatingAt||(i.currentTarget=t,i.type=e,t.emit(e,i),t[e]&&t[e](i))},t.prototype.delayDispatchEvent=function(t,e,i){this.delayedEvents.push({displayObject:t,eventString:e,eventData:i})},t.prototype.mapPositionToPoint=function(t,e,i){var n=this.interactionDOMElement.parentElement?this.interactionDOMElement.getBoundingClientRect():{x:0,y:0,width:0,height:0},r=1/this.resolution;t.x=(e-n.left)*(this.interactionDOMElement.width/n.width)*r,t.y=(i-n.top)*(this.interactionDOMElement.height/n.height)*r},t.prototype.processInteractive=function(t,e,i,n){var n=this.search.findHit(t,e,i,n),r=this.delayedEvents;if(!r.length)return n;t.stopPropagationHint=!1;var s=r.length;this.delayedEvents=[];for(var o=0;o<s;o++){var a=r[o],h=a.displayObject,l=a.eventString,a=a.eventData;a.stopsPropagatingAt===h&&(a.stopPropagationHint=!0),this.dispatchEvent(h,l,a)}return n},t.prototype.onPointerDown=function(t){if(!this.supportsTouchEvents||"touch"!==t.pointerType){var e=this.normalizeToPointerData(t);this.autoPreventDefault&&e[0].isNormalized&&(!t.cancelable&&"cancelable"in t||t.preventDefault());for(var i=e.length,n=0;n<i;n++){var r=e[n],s=this.getInteractionDataForPointerId(r),s=this.configureInteractionEventForDOMEvent(this.eventData,r,s);s.data.originalEvent=t,this.processInteractive(s,this.renderer._lastObjectRendered,this.processPointerDown,!0),this.emit("pointerdown",s),"touch"===r.pointerType?this.emit("touchstart",s):"mouse"!==r.pointerType&&"pen"!==r.pointerType||(r=2===r.button,this.emit(r?"rightdown":"mousedown",this.eventData))}}},t.prototype.processPointerDown=function(t,e,i){var n=t.data,r=t.data.identifier;i&&(e.trackedPointers[r]||(e.trackedPointers[r]=new u(r)),this.dispatchEvent(e,"pointerdown",t),"touch"===n.pointerType?this.dispatchEvent(e,"touchstart",t):"mouse"!==n.pointerType&&"pen"!==n.pointerType||((n=2===n.button)?e.trackedPointers[r].rightDown=!0:e.trackedPointers[r].leftDown=!0,this.dispatchEvent(e,n?"rightdown":"mousedown",t)))},t.prototype.onPointerComplete=function(t,e,i){for(var n=this.normalizeToPointerData(t),r=n.length,s=t.target!==this.interactionDOMElement?"outside":"",o=0;o<r;o++){var a,h=n[o],l=this.getInteractionDataForPointerId(h),u=this.configureInteractionEventForDOMEvent(this.eventData,h,l);u.data.originalEvent=t,this.processInteractive(u,this.renderer._lastObjectRendered,i,e||!s),this.emit(e?"pointercancel":"pointerup"+s,u),"mouse"===h.pointerType||"pen"===h.pointerType?(a=2===h.button,this.emit(a?"rightup"+s:"mouseup"+s,u)):"touch"===h.pointerType&&(this.emit(e?"touchcancel":"touchend"+s,u),this.releaseInteractionDataForPointerId(h.pointerId,l))}},t.prototype.onPointerCancel=function(t){this.supportsTouchEvents&&"touch"===t.pointerType||this.onPointerComplete(t,!0,this.processPointerCancel)},t.prototype.processPointerCancel=function(t,e){var i=t.data,n=t.data.identifier;void 0!==e.trackedPointers[n]&&(delete e.trackedPointers[n],this.dispatchEvent(e,"pointercancel",t),"touch"===i.pointerType&&this.dispatchEvent(e,"touchcancel",t))},t.prototype.onPointerUp=function(t){this.supportsTouchEvents&&"touch"===t.pointerType||this.onPointerComplete(t,!1,this.processPointerUp)},t.prototype.processPointerUp=function(t,e,i){var n,r=t.data,s=t.data.identifier,o=e.trackedPointers[s],a="touch"===r.pointerType,h="mouse"===r.pointerType||"pen"===r.pointerType,l=!1;h&&(n=2===r.button,r=u.FLAGS,r=n?r.RIGHT_DOWN:r.LEFT_DOWN,r=void 0!==o&&o.flags&r,i?(this.dispatchEvent(e,n?"rightup":"mouseup",t),r&&(this.dispatchEvent(e,n?"rightclick":"click",t),l=!0)):r&&this.dispatchEvent(e,n?"rightupoutside":"mouseupoutside",t),o&&(n?o.rightDown=!1:o.leftDown=!1)),i?(this.dispatchEvent(e,"pointerup",t),a&&this.dispatchEvent(e,"touchend",t),o&&(h&&!l||this.dispatchEvent(e,"pointertap",t),a&&(this.dispatchEvent(e,"tap",t),o.over=!1))):o&&(this.dispatchEvent(e,"pointerupoutside",t),a&&this.dispatchEvent(e,"touchendoutside",t)),o&&o.none&&delete e.trackedPointers[s]},t.prototype.onPointerMove=function(t){if(!this.supportsTouchEvents||"touch"!==t.pointerType){var e=this.normalizeToPointerData(t);"mouse"!==e[0].pointerType&&"pen"!==e[0].pointerType||(this.didMove=!0,this.cursor=null);for(var i=e.length,n=0;n<i;n++){var r=e[n],s=this.getInteractionDataForPointerId(r),s=this.configureInteractionEventForDOMEvent(this.eventData,r,s);s.data.originalEvent=t,this.processInteractive(s,this.renderer._lastObjectRendered,this.processPointerMove,!0),this.emit("pointermove",s),"touch"===r.pointerType&&this.emit("touchmove",s),"mouse"!==r.pointerType&&"pen"!==r.pointerType||this.emit("mousemove",s)}"mouse"===e[0].pointerType&&this.setCursorMode(this.cursor)}},t.prototype.processPointerMove=function(t,e,i){var n=t.data,r="touch"===n.pointerType,n="mouse"===n.pointerType||"pen"===n.pointerType;n&&this.processPointerOverOut(t,e,i),this.moveWhenInside&&!i||(this.dispatchEvent(e,"pointermove",t),r&&this.dispatchEvent(e,"touchmove",t),n&&this.dispatchEvent(e,"mousemove",t))},t.prototype.onPointerOut=function(t){var e,i;this.supportsTouchEvents&&"touch"===t.pointerType||("mouse"===(e=this.normalizeToPointerData(t)[0]).pointerType&&(this.mouseOverRenderer=!1,this.setCursorMode(null)),i=this.getInteractionDataForPointerId(e),(t=this.configureInteractionEventForDOMEvent(this.eventData,e,i)).data.originalEvent=e,this.processInteractive(t,this.renderer._lastObjectRendered,this.processPointerOverOut,!1),this.emit("pointerout",t),"mouse"===e.pointerType||"pen"===e.pointerType?this.emit("mouseout",t):this.releaseInteractionDataForPointerId(i.identifier))},t.prototype.processPointerOverOut=function(t,e,i){var n=t.data,r=t.data.identifier,s="mouse"===n.pointerType||"pen"===n.pointerType,n=e.trackedPointers[r];i&&!n&&(n=e.trackedPointers[r]=new u(r)),void 0!==n&&(i&&this.mouseOverRenderer?(n.over||(n.over=!0,this.delayDispatchEvent(e,"pointerover",t),s&&this.delayDispatchEvent(e,"mouseover",t)),s&&null===this.cursor&&(this.cursor=e.cursor)):n.over&&(n.over=!1,this.dispatchEvent(e,"pointerout",this.eventData),s&&this.dispatchEvent(e,"mouseout",t),n.none&&delete e.trackedPointers[r]))},t.prototype.onPointerOver=function(t){var e=this.normalizeToPointerData(t)[0],t=this.getInteractionDataForPointerId(e),t=this.configureInteractionEventForDOMEvent(this.eventData,e,t);"mouse"===(t.data.originalEvent=e).pointerType&&(this.mouseOverRenderer=!0),this.emit("pointerover",t),"mouse"!==e.pointerType&&"pen"!==e.pointerType||this.emit("mouseover",t)},t.prototype.getInteractionDataForPointerId=function(t){var e,i=t.pointerId;return 1===i||"mouse"===t.pointerType?e=this.mouse:this.activeInteractionData[i]?e=this.activeInteractionData[i]:((e=this.interactionDataPool.pop()||new n).identifier=i,this.activeInteractionData[i]=e),e.copyEvent(t),e},t.prototype.releaseInteractionDataForPointerId=function(t){var e=this.activeInteractionData[t];e&&(delete this.activeInteractionData[t],e.reset(),this.interactionDataPool.push(e))},t.prototype.configureInteractionEventForDOMEvent=function(t,e,i){return t.data=i,this.mapPositionToPoint(i.global,e.clientX,e.clientY),"touch"===e.pointerType&&(e.globalX=i.global.x,e.globalY=i.global.y),i.originalEvent=e,t.reset(),t},t.prototype.normalizeToPointerData=function(t){var e=[];if(this.supportsTouchEvents&&t instanceof TouchEvent)for(var i=0,n=t.changedTouches.length;i<n;i++){var r=t.changedTouches[i];void 0===r.button&&(r.button=t.touches.length?1:0),void 0===r.buttons&&(r.buttons=t.touches.length?1:0),void 0===r.isPrimary&&(r.isPrimary=1===t.touches.length&&"touchstart"===t.type),void 0===r.width&&(r.width=r.radiusX||1),void 0===r.height&&(r.height=r.radiusY||1),void 0===r.tiltX&&(r.tiltX=0),void 0===r.tiltY&&(r.tiltY=0),void 0===r.pointerType&&(r.pointerType="touch"),void 0===r.pointerId&&(r.pointerId=r.identifier||0),void 0===r.pressure&&(r.pressure=r.force||.5),void 0===r.twist&&(r.twist=0),void 0===r.tangentialPressure&&(r.tangentialPressure=0),void 0===r.layerX&&(r.layerX=r.offsetX=r.clientX),void 0===r.layerY&&(r.layerY=r.offsetY=r.clientY),r.isNormalized=!0,e.push(r)}else!(t instanceof MouseEvent)||this.supportsPointerEvents&&t instanceof window.PointerEvent||(void 0===t.isPrimary&&(t.isPrimary=!0),void 0===t.width&&(t.width=1),void 0===t.height&&(t.height=1),void 0===t.tiltX&&(t.tiltX=0),void 0===t.tiltY&&(t.tiltY=0),void 0===t.pointerType&&(t.pointerType="mouse"),void 0===t.pointerId&&(t.pointerId=1),void 0===t.pressure&&(t.pressure=.5),void 0===t.twist&&(t.twist=0),void 0===t.tangentialPressure&&(t.tangentialPressure=0),t.isNormalized=!0),e.push(t);return e},t.prototype.destroy=function(){this.removeEvents(),this.removeTickerListener(),this.removeAllListeners(),this.renderer=null,this.mouse=null,this.eventData=null,this.interactionDOMElement=null,this.onPointerDown=null,this.processPointerDown=null,this.onPointerUp=null,this.processPointerUp=null,this.onPointerCancel=null,this.processPointerCancel=null,this.onPointerMove=null,this.processPointerMove=null,this.onPointerOut=null,this.processPointerOverOut=null,this.onPointerOver=null,this.search=null},Object.defineProperties(t.prototype,e),t}(a.EventEmitter);i.InteractionManager=a},{"@pixi/math":"GTL5","@pixi/ticker":"t27b","@pixi/display":"LJAM","@pixi/utils":"x5Ec"}],jcTq:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.Runner=void 0;var n=(r.prototype.emit=function(t,e,i,n,r,s,o,a){if(8<arguments.length)throw new Error("max arguments reached");var h=this.name,l=this.items;this._aliasCount++;for(var u=0,c=l.length;u<c;u++)l[u][h](t,e,i,n,r,s,o,a);return l===this.items&&this._aliasCount--,this},r.prototype.ensureNonAliasedItems=function(){0<this._aliasCount&&1<this.items.length&&(this._aliasCount=0,this.items=this.items.slice(0))},r.prototype.add=function(t){return t[this._name]&&(this.ensureNonAliasedItems(),this.remove(t),this.items.push(t)),this},r.prototype.remove=function(t){t=this.items.indexOf(t);return-1!==t&&(this.ensureNonAliasedItems(),this.items.splice(t,1)),this},r.prototype.contains=function(t){return-1!==this.items.indexOf(t)},r.prototype.removeAll=function(){return this.ensureNonAliasedItems(),this.items.length=0,this},r.prototype.destroy=function(){this.removeAll(),this.items=null,this._name=null},Object.defineProperty(r.prototype,"empty",{get:function(){return 0===this.items.length},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"name",{get:function(){return this._name},enumerable:!0,configurable:!0}),r);function r(t){this.items=[],this._name=t,this._aliasCount=0}i.Runner=n,Object.defineProperties(n.prototype,{dispatch:{value:n.prototype.emit},run:{value:n.prototype.emit}})},{}],qqf8:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.autoDetectRenderer=function(t){return He.create(t)},i.checkMaxIfStatementsInShader=Kt,i.systems=i.resources=i.defaultVertex=i.defaultFilterVertex=i.ViewableBuffer=i.UniformGroup=i.TextureUvs=i.TextureMatrix=i.Texture=i.System=i.State=i.SpriteMaskFilter=i.Shader=i.Renderer=i.RenderTexturePool=i.RenderTexture=i.QuadUv=i.Quad=i.Program=i.ObjectRenderer=i.MaskData=i.Geometry=i.GLTexture=i.GLProgram=i.Framebuffer=i.Filter=i.CubeTexture=i.Buffer=i.BatchTextureArray=i.BatchShaderGenerator=i.BatchRenderer=i.BatchPluginFactory=i.BatchGeometry=i.BatchDrawCall=i.BaseTexture=i.BaseRenderTexture=i.Attribute=i.AbstractRenderer=i.AbstractBatchRenderer=void 0;function f(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this._width=t,this._height=e,this.destroyed=!1,this.internal=!1,this.onResize=new n.Runner("setRealSize",2),this.onUpdate=new n.Runner("update"),this.onError=new n.Runner("onError",1)}var n=t("@pixi/runner"),m=t("@pixi/utils"),y=t("@pixi/constants"),g=t("@pixi/settings"),r=t("@pixi/ticker"),h=t("@pixi/math"),s=t("@pixi/display"),o={valid:{configurable:!0},width:{configurable:!0},height:{configurable:!0}};f.prototype.bind=function(t){this.onResize.add(t),this.onUpdate.add(t),this.onError.add(t),(this._width||this._height)&&this.onResize.run(this._width,this._height)},f.prototype.unbind=function(t){this.onResize.remove(t),this.onUpdate.remove(t),this.onError.remove(t)},f.prototype.resize=function(t,e){t===this._width&&e===this._height||(this._width=t,this._height=e,this.onResize.run(t,e))},o.valid.get=function(){return!!this._width&&!!this._height},f.prototype.update=function(){this.destroyed||this.onUpdate.run()},f.prototype.load=function(){return Promise.resolve()},o.width.get=function(){return this._width},o.height.get=function(){return this._height},f.prototype.upload=function(t,e,i){return!1},f.prototype.style=function(t,e,i){return!1},f.prototype.dispose=function(){},f.prototype.destroy=function(){this.destroyed||(this.destroyed=!0,this.dispose(),this.onError.removeAll(),this.onError=null,this.onResize.removeAll(),this.onResize=null,this.onUpdate.removeAll(),this.onUpdate=null)},Object.defineProperties(f.prototype,o);var a,l,u=((l=f)&&(_.__proto__=l),((_.prototype=Object.create(l&&l.prototype)).constructor=_).crossOrigin=function(t,e,i){void 0===i&&0!==e.indexOf("data:")?t.crossOrigin=(0,m.determineCrossOrigin)(e):!1!==i&&(t.crossOrigin="string"==typeof i?i:"anonymous")},_.prototype.upload=function(t,e,i,n){var r=t.gl,s=e.realWidth,t=e.realHeight;return n=n||this.source,r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.alphaMode===y.ALPHA_MODES.UNPACK),this.noSubImage||e.target!==r.TEXTURE_2D||i.width!==s||i.height!==t?(i.width=s,i.height=t,r.texImage2D(e.target,0,e.format,e.format,e.type,n)):r.texSubImage2D(r.TEXTURE_2D,0,0,0,e.format,e.type,n),!0},_.prototype.update=function(){var t,e;this.destroyed||(t=this.source.naturalWidth||this.source.videoWidth||this.source.width,e=this.source.naturalHeight||this.source.videoHeight||this.source.height,this.resize(t,e),l.prototype.update.call(this))},_.prototype.dispose=function(){this.source=null},_),c=((a=u)&&(d.__proto__=a),((d.prototype=Object.create(a&&a.prototype)).constructor=d).prototype.load=function(t){var n=this;return void 0!==t&&(this.createBitmap=t),this._load||(this._load=new Promise(function(t){n.url=n.source.src;function e(){n.destroyed||(i.onload=null,i.onerror=null,n.resize(i.width,i.height),n._load=null,n.createBitmap?t(n.process()):t(n))}var i=n.source;i.complete&&i.src?e():(i.onload=e,i.onerror=function(t){return n.onError.run(t)})})),this._load},d.prototype.process=function(){var e=this;return null!==this._process?this._process:null===this.bitmap&&window.createImageBitmap?(this._process=window.createImageBitmap(this.source,0,0,this.source.width,this.source.height,{premultiplyAlpha:this.premultiplyAlpha===y.ALPHA_MODES.UNPACK?"premultiply":"none"}).then(function(t){return e.destroyed?Promise.reject():(e.bitmap=t,e.update(),e._process=null,Promise.resolve(e))}),this._process):Promise.resolve(this)},d.prototype.upload=function(t,e,i){if("number"==typeof this.alphaMode&&(e.alphaMode=this.alphaMode),!this.createBitmap)return a.prototype.upload.call(this,t,e,i);if(!this.bitmap&&(this.process(),!this.bitmap))return!1;if(a.prototype.upload.call(this,t,e,i,this.bitmap),!this.preserveBitmap){var n,r=!0;for(n in e._glTextures){var s=e._glTextures[n];if(s!==i&&s.dirtyId!==e.dirtyId){r=!1;break}}r&&(this.bitmap.close&&this.bitmap.close(),this.bitmap=null)}return!0},d.prototype.dispose=function(){this.source.onload=null,this.source.onerror=null,a.prototype.dispose.call(this),this.bitmap&&(this.bitmap.close(),this.bitmap=null),this._process=null,this._load=null},d),p=[];function d(t,e){var i;e=e||{},t instanceof HTMLImageElement||(i=new Image,a.crossOrigin(i,t,e.crossorigin),i.src=t,t=i),a.call(this,t),!t.complete&&this._width&&this._height&&(this._width=0,this._height=0),this.url=t.src,this._process=null,this.preserveBitmap=!1,this.createBitmap=(void 0!==e.createBitmap?e.createBitmap:g.settings.CREATE_IMAGE_BITMAP)&&!!window.createImageBitmap,this.alphaMode="number"==typeof e.alphaMode?e.alphaMode:null,void 0!==e.premultiplyAlpha&&(this.premultiplyAlpha=e.premultiplyAlpha),this.bitmap=null,this._load=null,!1!==e.autoLoad&&this.load()}function _(t){var e=t.naturalWidth||t.videoWidth||t.width,i=t.naturalHeight||t.videoHeight||t.height;l.call(this,e,i),this.source=t,this.noSubImage=!1}function v(t,e){if(!t)return null;var i,n="";"string"!=typeof t||(i=/\.(\w{3,4})(?:$|\?|#)/i.exec(t))&&(n=i[1].toLowerCase());for(var r=p.length-1;0<=r;--r){var s=p[r];if(s.test&&s.test(t,n))return new s(t,e)}return new c(t,e)}var w,x=((w=f)&&($.__proto__=w),(($.prototype=Object.create(w&&w.prototype)).constructor=$).prototype.upload=function(t,e,i){t=t.gl;return t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.alphaMode===y.ALPHA_MODES.UNPACK),i.width===e.width&&i.height===e.height?t.texSubImage2D(e.target,0,0,0,e.width,e.height,e.format,e.type,this.data):(i.width=e.width,i.height=e.height,t.texImage2D(e.target,0,i.internalFormat,e.width,e.height,0,e.format,i.type,this.data)),!0},$.prototype.dispose=function(){this.data=null},$.test=function(t){return t instanceof Float32Array||t instanceof Uint8Array||t instanceof Uint32Array},$),b={scaleMode:y.SCALE_MODES.NEAREST,format:y.FORMATS.RGBA,alphaMode:y.ALPHA_MODES.NPM},E=function(_){function o(t,e){void 0===t&&(t=null),void 0===e&&(e=null),_.call(this);var i=(e=e||{}).alphaMode,n=e.mipmap,r=e.anisotropicLevel,s=e.scaleMode,o=e.width,a=e.height,h=e.wrapMode,l=e.format,u=e.type,c=e.target,p=e.resolution,d=e.resourceOptions;!t||t instanceof f||((t=v(t,d)).internal=!0),this.width=o||0,this.height=a||0,this.resolution=p||g.settings.RESOLUTION,this.mipmap=void 0!==n?n:g.settings.MIPMAP_TEXTURES,this.anisotropicLevel=void 0!==r?r:g.settings.ANISOTROPIC_LEVEL,this.wrapMode=h||g.settings.WRAP_MODE,this.scaleMode=void 0!==s?s:g.settings.SCALE_MODE,this.format=l||y.FORMATS.RGBA,this.type=u||y.TYPES.UNSIGNED_BYTE,this.target=c||y.TARGETS.TEXTURE_2D,this.alphaMode=void 0!==i?i:y.ALPHA_MODES.UNPACK,void 0!==e.premultiplyAlpha&&(this.premultiplyAlpha=e.premultiplyAlpha),this.uid=(0,m.uid)(),this.touched=0,this.isPowerOfTwo=!1,this._refreshPOT(),this._glTextures={},this.dirtyId=0,this.dirtyStyleId=0,this.cacheId=null,this.valid=0<o&&0<a,this.textureCacheIds=[],this.destroyed=!1,this.resource=null,this._batchEnabled=0,this._batchLocation=0,this.setResource(t)}_&&(o.__proto__=_),(o.prototype=Object.create(_&&_.prototype)).constructor=o;var t={realWidth:{configurable:!0},realHeight:{configurable:!0}};return t.realWidth.get=function(){return Math.ceil(this.width*this.resolution-1e-4)},t.realHeight.get=function(){return Math.ceil(this.height*this.resolution-1e-4)},o.prototype.setStyle=function(t,e){var i;return void 0!==t&&t!==this.scaleMode&&(this.scaleMode=t,i=!0),void 0!==e&&e!==this.mipmap&&(this.mipmap=e,i=!0),i&&this.dirtyStyleId++,this},o.prototype.setSize=function(t,e,i){return this.resolution=i||this.resolution,this.width=t,this.height=e,this._refreshPOT(),this.update(),this},o.prototype.setRealSize=function(t,e,i){return this.resolution=i||this.resolution,this.width=t/this.resolution,this.height=e/this.resolution,this._refreshPOT(),this.update(),this},o.prototype._refreshPOT=function(){this.isPowerOfTwo=(0,m.isPow2)(this.realWidth)&&(0,m.isPow2)(this.realHeight)},o.prototype.setResolution=function(t){var e=this.resolution;return e===t||(this.resolution=t,this.valid&&(this.width=this.width*e/t,this.height=this.height*e/t,this.emit("update",this)),this._refreshPOT()),this},o.prototype.setResource=function(t){if(this.resource===t)return this;if(this.resource)throw new Error("Resource can be set only once");return t.bind(this),this.resource=t,this},o.prototype.update=function(){this.valid?(this.dirtyId++,this.dirtyStyleId++,this.emit("update",this)):0<this.width&&0<this.height&&(this.valid=!0,this.emit("loaded",this),this.emit("update",this))},o.prototype.onError=function(t){this.emit("error",this,t)},o.prototype.destroy=function(){this.resource&&(this.resource.unbind(this),this.resource.internal&&this.resource.destroy(),this.resource=null),this.cacheId&&(delete m.BaseTextureCache[this.cacheId],delete m.TextureCache[this.cacheId],this.cacheId=null),this.dispose(),o.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0},o.prototype.dispose=function(){this.emit("dispose",this)},o.from=function(t,e,i){void 0===i&&(i=g.settings.STRICT_TEXTURE_CACHE);var n="string"==typeof t,r=null,r=n?t:(t._pixiId||(t._pixiId="pixiid_"+(0,m.uid)()),t._pixiId),s=m.BaseTextureCache[r];if(n&&i&&!s)throw new Error('The cacheId "'+r+'" does not exist in BaseTextureCache.');return s||((s=new o(t,e)).cacheId=r,o.addToCache(s,r)),s},o.fromBuffer=function(t,e,i,n){t=t||new Float32Array(e*i*4);var r=new x(t,{width:e,height:i}),t=t instanceof Float32Array?y.TYPES.FLOAT:y.TYPES.UNSIGNED_BYTE;return new o(r,Object.assign(b,n||{width:e,height:i,type:t}))},o.addToCache=function(t,e){e&&(-1===t.textureCacheIds.indexOf(e)&&t.textureCacheIds.push(e),m.BaseTextureCache[e]&&console.warn("BaseTexture added to the cache with an id ["+e+"] that already had an entry"),m.BaseTextureCache[e]=t)},o.removeFromCache=function(t){if("string"==typeof t){var e=m.BaseTextureCache[t];if(e){var i=e.textureCacheIds.indexOf(t);return-1<i&&e.textureCacheIds.splice(i,1),delete m.BaseTextureCache[t],e}}else if(t&&t.textureCacheIds){for(var n=0;n<t.textureCacheIds.length;++n)delete m.BaseTextureCache[t.textureCacheIds[n]];return t.textureCacheIds.length=0,t}return null},Object.defineProperties(o.prototype,t),o}(m.EventEmitter);function $(t,e){var i=e||{},e=i.width,i=i.height;if(!e||!i)throw new Error("BufferResource width or height invalid");w.call(this,e,i),this.data=t}(i.BaseTexture=E)._globalBatch=0;var A,S,T,C=((T=f)&&(D.__proto__=T),((D.prototype=Object.create(T&&T.prototype)).constructor=D).prototype.dispose=function(){for(var t=0,e=this.length;t<e;t++)this.items[t].destroy();this.items=null,this.itemDirtyIds=null,this._load=null},D.prototype.addResourceAt=function(t,e){if(!this.items[e])throw new Error("Index "+e+" is out of bounds");return t.valid&&!this.valid&&this.resize(t.width,t.height),this.items[e].setResource(t),this},D.prototype.bind=function(t){T.prototype.bind.call(this,t),t.target=y.TARGETS.TEXTURE_2D_ARRAY;for(var e=0;e<this.length;e++)this.items[e].on("update",t.update,t)},D.prototype.unbind=function(t){T.prototype.unbind.call(this,t);for(var e=0;e<this.length;e++)this.items[e].off("update",t.update,t)},D.prototype.load=function(){var i=this;if(this._load)return this._load;var n=this.items.map(function(t){return t.resource}),t=n.map(function(t){return t.load()});return this._load=Promise.all(t).then(function(){var t=n[0],e=t.width,t=t.height;return i.resize(e,t),Promise.resolve(i)}),this._load},D.prototype.upload=function(t,e,i){var n=this.length,r=this.itemDirtyIds,s=this.items,o=t.gl;i.dirtyId<0&&o.texImage3D(o.TEXTURE_2D_ARRAY,0,e.format,this._width,this._height,n,0,e.format,e.type,null);for(var a=0;a<n;a++){var h=s[a];r[a]<h.dirtyId&&(r[a]=h.dirtyId,h.valid&&o.texSubImage3D(o.TEXTURE_2D_ARRAY,0,0,0,a,h.resource.width,h.resource.height,1,e.format,e.type,h.resource.source))}return!0},D),M=((S=u)&&(O.__proto__=S),((O.prototype=Object.create(S&&S.prototype)).constructor=O).test=function(t){var e=window.OffscreenCanvas;return!!(e&&t instanceof e)||t instanceof HTMLCanvasElement},O),I=((A=C)&&(P.__proto__=A),((P.prototype=Object.create(A&&A.prototype)).constructor=P).prototype.bind=function(t){A.prototype.bind.call(this,t),t.target=y.TARGETS.TEXTURE_CUBE_MAP},P.prototype.upload=function(t,e,i){for(var n=this.itemDirtyIds,r=0;r<P.SIDES;r++){var s=this.items[r];n[r]<s.dirtyId&&(n[r]=s.dirtyId,s.valid&&s.resource.upload(t,s,i))}return!0},P);function P(t,e){if(e=e||{},A.call(this,t,e),this.length!==P.SIDES)throw new Error("Invalid length. Got "+this.length+", expected 6");for(var i=0;i<P.SIDES;i++)this.items[i].target=y.TARGETS.TEXTURE_CUBE_MAP_POSITIVE_X+i;!1!==e.autoLoad&&this.load()}function O(){S.apply(this,arguments)}function D(t,e){var i;e=e||{};var n=t;Array.isArray(t)&&(n=(i=t).length),T.call(this,e.width,e.height),this.items=[],this.itemDirtyIds=[];for(var r=0;r<n;r++){var s=new E;this.items.push(s),this.itemDirtyIds.push(-1)}if(this.length=n,this._load=null,i)for(var o=0;o<n;o++)this.addResourceAt(v(i[o],e),o)}I.SIDES=6;var R,L=((R=u)&&(k.__proto__=R),((k.prototype=Object.create(R&&R.prototype)).constructor=k).prototype.load=function(){var e=this;return this._load||(this._load=new Promise(function(t){if(e._resolve=function(){e.resize(e.source.width,e.source.height),t(e)},/^\<svg/.test(e.svg.trim())){if(!btoa)throw new Error("Your browser doesn't support base64 conversions.");e.svg="data:image/svg+xml;base64,"+btoa(unescape(encodeURIComponent(e.svg)))}e._loadSvg()})),this._load},k.prototype._loadSvg=function(){var s=this,o=new Image;R.crossOrigin(o,this.svg,this._crossorigin),o.src=this.svg,o.onerror=function(t){o.onerror=null,s.onError.run(t)},o.onload=function(){var t=o.width,e=o.height;if(!t||!e)throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");var i=t*s.scale,n=e*s.scale;(s._overrideWidth||s._overrideHeight)&&(i=s._overrideWidth||s._overrideHeight/e*t,n=s._overrideHeight||s._overrideWidth/t*e),i=Math.round(i),n=Math.round(n);var r=s.source;r.width=i,r.height=n,r._pixiId="canvas_"+(0,m.uid)(),r.getContext("2d").drawImage(o,0,0,t,e,0,0,i,n),s._resolve(),s._resolve=null}},k.getSize=function(t){var e=k.SVG_SIZE.exec(t),t={};return e&&(t[e[1]]=Math.round(parseFloat(e[3])),t[e[5]]=Math.round(parseFloat(e[7]))),t},k.prototype.dispose=function(){R.prototype.dispose.call(this),this._resolve=null,this._crossorigin=null},k.test=function(t,e){return"svg"===e||"string"==typeof t&&0===t.indexOf("data:image/svg+xml;base64")||"string"==typeof t&&0===t.indexOf("<svg")},k);function k(t,e){e=e||{},R.call(this,document.createElement("canvas")),this._width=0,this._height=0,this.svg=t,this.scale=e.scale||1,this._overrideWidth=e.width,this._overrideHeight=e.height,this._resolve=null,this._crossorigin=e.crossorigin,this._load=null,!1!==e.autoLoad&&this.load()}L.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i;t=function(h){function i(t,e){if(e=e||{},!(t instanceof HTMLVideoElement)){var i=document.createElement("video");i.setAttribute("preload","auto"),i.setAttribute("webkit-playsinline",""),i.setAttribute("playsinline",""),"string"==typeof t&&(t=[t]),h.crossOrigin(i,t[0].src||t[0],e.crossorigin);for(var n=0;n<t.length;++n){var r=document.createElement("source"),s=t[n],o=s.src,a=s.mime,s=(o=o||t[n]).split("?").shift().toLowerCase(),s=s.substr(s.lastIndexOf(".")+1),a=a||"video/"+s;r.src=o,r.type=a,i.appendChild(r)}t=i}h.call(this,t),this.noSubImage=!0,this._autoUpdate=!0,this._isAutoUpdating=!1,this._updateFPS=e.updateFPS||0,this._msToNextUpdate=0,this.autoPlay=!1!==e.autoPlay,this._load=null,this._resolve=null,this._onCanPlay=this._onCanPlay.bind(this),this._onError=this._onError.bind(this),!1!==e.autoLoad&&this.load()}h&&(i.__proto__=h);var t={autoUpdate:{configurable:!0},updateFPS:{configurable:!0}};return((i.prototype=Object.create(h&&h.prototype)).constructor=i).prototype.update=function(t){var e;void 0===t&&(t=0),this.destroyed||(e=r.Ticker.shared.elapsedMS*this.source.playbackRate,this._msToNextUpdate=Math.floor(this._msToNextUpdate-e),(!this._updateFPS||this._msToNextUpdate<=0)&&(h.prototype.update.call(this,t),this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0))},i.prototype.load=function(){var e=this;if(this._load)return this._load;var i=this.source;return(i.readyState===i.HAVE_ENOUGH_DATA||i.readyState===i.HAVE_FUTURE_DATA)&&i.width&&i.height&&(i.complete=!0),i.addEventListener("play",this._onPlayStart.bind(this)),i.addEventListener("pause",this._onPlayStop.bind(this)),this._isSourceReady()?this._onCanPlay():(i.addEventListener("canplay",this._onCanPlay),i.addEventListener("canplaythrough",this._onCanPlay),i.addEventListener("error",this._onError,!0)),this._load=new Promise(function(t){e.valid?t(e):(e._resolve=t,i.load())}),this._load},i.prototype._onError=function(){this.source.removeEventListener("error",this._onError,!0),this.onError.run(event)},i.prototype._isSourcePlaying=function(){var t=this.source;return 0<t.currentTime&&!1===t.paused&&!1===t.ended&&2<t.readyState},i.prototype._isSourceReady=function(){return 3===this.source.readyState||4===this.source.readyState},i.prototype._onPlayStart=function(){this.valid||this._onCanPlay(),!this._isAutoUpdating&&this.autoUpdate&&(r.Ticker.shared.add(this.update,this),this._isAutoUpdating=!0)},i.prototype._onPlayStop=function(){this._isAutoUpdating&&(r.Ticker.shared.remove(this.update,this),this._isAutoUpdating=!1)},i.prototype._onCanPlay=function(){var t=this.source;t.removeEventListener("canplay",this._onCanPlay),t.removeEventListener("canplaythrough",this._onCanPlay);var e=this.valid;this.resize(t.videoWidth,t.videoHeight),!e&&this._resolve&&(this._resolve(this),this._resolve=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&t.play()},i.prototype.dispose=function(){this._isAutoUpdating&&r.Ticker.shared.remove(this.update,this),this.source&&(this.source.removeEventListener("error",this._onError,!0),this.source.pause(),this.source.src="",this.source.load()),h.prototype.dispose.call(this)},t.autoUpdate.get=function(){return this._autoUpdate},t.autoUpdate.set=function(t){t!==this._autoUpdate&&(this._autoUpdate=t,!this._autoUpdate&&this._isAutoUpdating?(r.Ticker.shared.remove(this.update,this),this._isAutoUpdating=!1):this._autoUpdate&&!this._isAutoUpdating&&(r.Ticker.shared.add(this.update,this),this._isAutoUpdating=!0))},t.updateFPS.get=function(){return this._updateFPS},t.updateFPS.set=function(t){t!==this._updateFPS&&(this._updateFPS=t)},i.test=function(t,e){return t instanceof HTMLVideoElement||-1<i.TYPES.indexOf(e)},Object.defineProperties(i.prototype,t),i}(u);t.TYPES=["mp4","m4v","webm","ogg","ogv","h264","avi","mov"];var F,o=((F=u)&&(N.__proto__=F),((N.prototype=Object.create(F&&F.prototype)).constructor=N).test=function(t){return!!window.createImageBitmap&&t instanceof ImageBitmap},N);function N(){F.apply(this,arguments)}p.push(c,o,M,t,L,x,I,C);L={INSTALLED:p,autoDetectResource:v,ArrayResource:C,BufferResource:x,CanvasResource:M,CubeResource:I,ImageResource:c,ImageBitmapResource:o,SVGResource:L,VideoResource:t,Resource:f,BaseImageResource:u};i.resources=L;t=function(t){this.renderer=t};(i.System=t).prototype.destroy=function(){this.renderer=null};function B(t,e){this.width=Math.ceil(t||100),this.height=Math.ceil(e||100),this.stencil=!1,this.depth=!1,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.depthTexture=null,this.colorTextures=[],this.glFramebuffers={},this.disposeRunner=new n.Runner("disposeFramebuffer",2)}var U,X=((U=x)&&(j.__proto__=U),((j.prototype=Object.create(U&&U.prototype)).constructor=j).prototype.upload=function(t,e,i){t=t.gl;return t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.alphaMode===y.ALPHA_MODES.UNPACK),i.width===e.width&&i.height===e.height?t.texSubImage2D(e.target,0,0,0,e.width,e.height,e.format,e.type,this.data):(i.width=e.width,i.height=e.height,t.texImage2D(e.target,0,t.DEPTH_COMPONENT16,e.width,e.height,0,e.format,e.type,this.data)),!0},j);function j(){U.apply(this,arguments)}i.Framebuffer=B;u={colorTexture:{configurable:!0}};u.colorTexture.get=function(){return this.colorTextures[0]},B.prototype.addColorTexture=function(t,e){return void 0===t&&(t=0),this.colorTextures[t]=e||new E(null,{scaleMode:0,resolution:1,mipmap:!1,width:this.width,height:this.height}),this.dirtyId++,this.dirtyFormat++,this},B.prototype.addDepthTexture=function(t){return this.depthTexture=t||new E(new X(null,{width:this.width,height:this.height}),{scaleMode:0,resolution:1,width:this.width,height:this.height,mipmap:!1,format:y.FORMATS.DEPTH_COMPONENT,type:y.TYPES.UNSIGNED_SHORT}),this.dirtyId++,this.dirtyFormat++,this},B.prototype.enableDepth=function(){return this.depth=!0,this.dirtyId++,this.dirtyFormat++,this},B.prototype.enableStencil=function(){return this.stencil=!0,this.dirtyId++,this.dirtyFormat++,this},B.prototype.resize=function(t,e){if(t=Math.ceil(t),e=Math.ceil(e),t!==this.width||e!==this.height){this.width=t,this.height=e,this.dirtyId++,this.dirtySize++;for(var i,n=0;n<this.colorTextures.length;n++){var r=this.colorTextures[n],s=r.resolution;r.setSize(t/s,e/s)}this.depthTexture&&(i=this.depthTexture.resolution,this.depthTexture.setSize(t/i,e/i))}},B.prototype.dispose=function(){this.disposeRunner.run(this,!1)},Object.defineProperties(B.prototype,u);var V,H=((V=E)&&(G.__proto__=V),((G.prototype=Object.create(V&&V.prototype)).constructor=G).prototype.resize=function(t,e){t=Math.ceil(t),e=Math.ceil(e),this.framebuffer.resize(t*this.resolution,e*this.resolution)},G.prototype.dispose=function(){this.framebuffer.dispose(),V.prototype.dispose.call(this)},G.prototype.destroy=function(){V.prototype.destroy.call(this,!0),this.framebuffer=null},G);function G(t){"number"==typeof t&&(t={width:arguments[0],height:arguments[1],scaleMode:arguments[2],resolution:arguments[3]}),V.call(this,null,t);var e=t||{},t=e.width,e=e.height;this.mipmap=!1,this.width=Math.ceil(t)||100,this.height=Math.ceil(e)||100,this.valid=!0,this._canvasRenderTarget=null,this.clearColor=[0,0,0,0],this.framebuffer=new B(this.width*this.resolution,this.height*this.resolution).addColorTexture(0,this),this.maskStack=[],this.filterStack=[{}]}i.BaseRenderTexture=H;function Y(){this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsFloat32=new Float32Array(8)}(i.TextureUvs=Y).prototype.set=function(t,e,i){var n,r,s,o=e.width,a=e.height;i?(n=t.width/2/o,r=t.height/2/a,s=t.x/o+n,e=t.y/a+r,i=h.groupD8.add(i,h.groupD8.NW),this.x0=s+n*h.groupD8.uX(i),this.y0=e+r*h.groupD8.uY(i),i=h.groupD8.add(i,2),this.x1=s+n*h.groupD8.uX(i),this.y1=e+r*h.groupD8.uY(i),i=h.groupD8.add(i,2),this.x2=s+n*h.groupD8.uX(i),this.y2=e+r*h.groupD8.uY(i),i=h.groupD8.add(i,2),this.x3=s+n*h.groupD8.uX(i),this.y3=e+r*h.groupD8.uY(i)):(this.x0=t.x/o,this.y0=t.y/a,this.x1=(t.x+t.width)/o,this.y1=t.y/a,this.x2=(t.x+t.width)/o,this.y2=(t.y+t.height)/a,this.x3=t.x/o,this.y3=(t.y+t.height)/a),this.uvsFloat32[0]=this.x0,this.uvsFloat32[1]=this.y0,this.uvsFloat32[2]=this.x1,this.uvsFloat32[3]=this.y1,this.uvsFloat32[4]=this.x2,this.uvsFloat32[5]=this.y2,this.uvsFloat32[6]=this.x3,this.uvsFloat32[7]=this.y3};var W=new Y,z=function(o){function a(t,e,i,n,r,s){if(o.call(this),this.noFrame=!1,e||(this.noFrame=!0,e=new h.Rectangle(0,0,1,1)),t instanceof a&&(t=t.baseTexture),this.baseTexture=t,this._frame=e,this.trim=n,this.valid=!1,this.requiresUpdate=!1,this._uvs=W,this.uvMatrix=null,this.orig=i||e,this._rotate=Number(r||0),!0===r)this._rotate=2;else if(this._rotate%2!=0)throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");this.defaultAnchor=s?new h.Point(s.x,s.y):new h.Point(0,0),this._updateID=0,this.textureCacheIds=[],t.valid?this.noFrame?t.valid&&this.onBaseTextureUpdated(t):this.frame=e:t.once("loaded",this.onBaseTextureUpdated,this),this.noFrame&&t.on("update",this.onBaseTextureUpdated,this)}o&&(a.__proto__=o);var t={resolution:{configurable:!0},frame:{configurable:!0},rotate:{configurable:!0},width:{configurable:!0},height:{configurable:!0}};return((a.prototype=Object.create(o&&o.prototype)).constructor=a).prototype.update=function(){this.baseTexture.resource&&this.baseTexture.resource.update()},a.prototype.onBaseTextureUpdated=function(t){if(this.noFrame){if(!this.baseTexture.valid)return;this._frame.width=t.width,this._frame.height=t.height,this.valid=!0,this.updateUvs()}else this.frame=this._frame;this.emit("update",this)},a.prototype.destroy=function(t){this.baseTexture&&(t&&((t=this.baseTexture.resource)&&m.TextureCache[t.url]&&a.removeFromCache(t.url),this.baseTexture.destroy()),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture=null),this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,a.removeFromCache(this),this.textureCacheIds=null},a.prototype.clone=function(){return new a(this.baseTexture,this.frame,this.orig,this.trim,this.rotate,this.defaultAnchor)},a.prototype.updateUvs=function(){this._uvs===W&&(this._uvs=new Y),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++},a.from=function(t,e,i){void 0===e&&(e={}),void 0===i&&(i=g.settings.STRICT_TEXTURE_CACHE);var n="string"==typeof t,r=null,r=n?t:(t._pixiId||(t._pixiId="pixiid_"+(0,m.uid)()),t._pixiId),s=m.TextureCache[r];if(n&&i&&!s)throw new Error('The cacheId "'+r+'" does not exist in TextureCache.');return s||(e.resolution||(e.resolution=(0,m.getResolutionOfUrl)(t)),(s=new a(new E(t,e))).baseTexture.cacheId=r,E.addToCache(s.baseTexture,r),a.addToCache(s,r)),s},a.fromBuffer=function(t,e,i,n){return new a(E.fromBuffer(t,e,i,n))},a.fromLoader=function(t,e,i){t=new c(t);t.url=e;t=new a(new E(t,{scaleMode:g.settings.SCALE_MODE,resolution:(0,m.getResolutionOfUrl)(e)}));return i=i||e,E.addToCache(t.baseTexture,i),a.addToCache(t,i),i!==e&&(E.addToCache(t.baseTexture,e),a.addToCache(t,e)),t},a.addToCache=function(t,e){e&&(-1===t.textureCacheIds.indexOf(e)&&t.textureCacheIds.push(e),m.TextureCache[e]&&console.warn("Texture added to the cache with an id ["+e+"] that already had an entry"),m.TextureCache[e]=t)},a.removeFromCache=function(t){if("string"==typeof t){var e=m.TextureCache[t];if(e){var i=e.textureCacheIds.indexOf(t);return-1<i&&e.textureCacheIds.splice(i,1),delete m.TextureCache[t],e}}else if(t&&t.textureCacheIds){for(var n=0;n<t.textureCacheIds.length;++n)m.TextureCache[t.textureCacheIds[n]]===t&&delete m.TextureCache[t.textureCacheIds[n]];return t.textureCacheIds.length=0,t}return null},t.resolution.get=function(){return this.baseTexture.resolution},t.frame.get=function(){return this._frame},t.frame.set=function(t){this._frame=t,this.noFrame=!1;var e=t.x,i=t.y,n=t.width,r=t.height,s=e+n>this.baseTexture.width,o=i+r>this.baseTexture.height;if(s||o){o=s&&o?"and":"or",e="X: "+e+" + "+n+" = "+(e+n)+" > "+this.baseTexture.width,i="Y: "+i+" + "+r+" = "+(i+r)+" > "+this.baseTexture.height;throw new Error("Texture Error: frame does not fit inside the base Texture dimensions: "+e+" "+o+" "+i)}this.valid=n&&r&&this.baseTexture.valid,this.trim||this.rotate||(this.orig=t),this.valid&&this.updateUvs()},t.rotate.get=function(){return this._rotate},t.rotate.set=function(t){this._rotate=t,this.valid&&this.updateUvs()},t.width.get=function(){return this.orig.width},t.height.get=function(){return this.orig.height},Object.defineProperties(a.prototype,t),a}(m.EventEmitter);function q(t){t.destroy=function(){},t.on=function(){},t.once=function(){},t.emit=function(){}}(i.Texture=z).EMPTY=new z(new E),q(z.EMPTY),q(z.EMPTY.baseTexture),z.WHITE=function(){var t=document.createElement("canvas");t.width=16,t.height=16;var e=t.getContext("2d");return e.fillStyle="white",e.fillRect(0,0,16,16),new z(new E(new M(t)))}(),q(z.WHITE),q(z.WHITE.baseTexture);var J,K=((J=z)&&(Z.__proto__=J),((Z.prototype=Object.create(J&&J.prototype)).constructor=Z).prototype.resize=function(t,e,i){void 0===i&&(i=!0),t=Math.ceil(t),e=Math.ceil(e),this.valid=0<t&&0<e,this._frame.width=this.orig.width=t,this._frame.height=this.orig.height=e,i&&this.baseTexture.resize(t,e),this.updateUvs()},Z.prototype.setResolution=function(t){var e=this.baseTexture;e.resolution!==t&&(e.setResolution(t),this.resize(e.width,e.height,!1))},Z.create=function(t){return"number"==typeof t&&(t={width:t,height:arguments[1],scaleMode:arguments[2],resolution:arguments[3]}),new Z(new H(t))},Z);function Z(t,e){var i,n,r,s,o=null;t instanceof H||(i=arguments[1],n=arguments[2],r=arguments[3],s=arguments[4],console.warn("Please use RenderTexture.create("+i+", "+n+") instead of the ctor directly."),o=arguments[0],e=null,t=new H({width:i,height:n,scaleMode:r,resolution:s})),J.call(this,t,e),this.legacyRenderer=o,this.valid=!0,this.filterFrame=null,this.filterPoolKey=null,this.updateUvs()}i.RenderTexture=K;function Q(t){this.texturePool={},this.textureOptions=t||{},this.enableFullScreen=!1,this._pixelsWidth=0,this._pixelsHeight=0}(i.RenderTexturePool=Q).prototype.createTexture=function(t,e){e=new H(Object.assign({width:t,height:e,resolution:1},this.textureOptions));return new K(e)},Q.prototype.getOptimalTexture=function(t,e,i){void 0===i&&(i=1);var n=Q.SCREEN_KEY;t*=i,e*=i,this.enableFullScreen&&t===this._pixelsWidth&&e===this._pixelsHeight||(n=(65535&(t=(0,m.nextPow2)(t)))<<16|65535&(e=(0,m.nextPow2)(e))),this.texturePool[n]||(this.texturePool[n]=[]);var r=this.texturePool[n].pop();return(r=r||this.createTexture(t,e)).filterPoolKey=n,r.setResolution(i),r},Q.prototype.getFilterTexture=function(t,e){e=this.getOptimalTexture(t.width,t.height,e||t.resolution);return e.filterFrame=t.filterFrame,e},Q.prototype.returnTexture=function(t){var e=t.filterPoolKey;t.filterFrame=null,this.texturePool[e].push(t)},Q.prototype.returnFilterTexture=function(t){this.returnTexture(t)},Q.prototype.clear=function(t){if(t=!1!==t)for(var e in this.texturePool){var i=this.texturePool[e];if(i)for(var n=0;n<i.length;n++)i[n].destroy(!0)}this.texturePool={}},Q.prototype.setScreenSize=function(t){if(t.width!==this._pixelsWidth||t.height!==this._pixelsHeight){var e=Q.SCREEN_KEY,i=this.texturePool[e];if(this.enableFullScreen=0<t.width&&0<t.height,i)for(var n=0;n<i.length;n++)i[n].destroy(!0);this.texturePool[e]=[],this._pixelsWidth=t.width,this._pixelsHeight=t.height}},Q.SCREEN_KEY="screen";function tt(t,e,i,n,r,s,o){void 0===i&&(i=!1),void 0===n&&(n=5126),this.buffer=t,this.size=e,this.normalized=i,this.type=n,this.stride=r,this.start=s,this.instance=o}(i.Attribute=tt).prototype.destroy=function(){this.buffer=null},tt.from=function(t,e,i,n,r){return new tt(t,e,i,n,r)};function et(t,e,i){void 0===e&&(e=!0),void 0===i&&(i=!1),this.data=t||new Float32Array(1),this._glBuffers={},this._updateID=0,this.index=i,this.static=e,this.id=it++,this.disposeRunner=new n.Runner("disposeBuffer",2)}var it=0;function nt(t){if(4===t.BYTES_PER_ELEMENT)return t instanceof Float32Array?"Float32Array":t instanceof Uint32Array?"Uint32Array":"Int32Array";if(2===t.BYTES_PER_ELEMENT){if(t instanceof Uint16Array)return"Uint16Array"}else if(1===t.BYTES_PER_ELEMENT&&t instanceof Uint8Array)return"Uint8Array";return null}(i.Buffer=et).prototype.update=function(t){this.data=t||this.data,this._updateID++},et.prototype.dispose=function(){this.disposeRunner.run(this,!1)},et.prototype.destroy=function(){this.dispose(),this.data=null},et.from=function(t){return t instanceof Array&&(t=new Float32Array(t)),new et(t)};function rt(t,e){void 0===t&&(t=[]),void 0===e&&(e={}),this.buffers=t,this.indexBuffer=null,this.attributes=e,this.glVertexArrayObjects={},this.id=at++,this.instanced=!1,this.instanceCount=1,this.disposeRunner=new n.Runner("disposeGeometry",2),this.refCount=0}var st={Float32Array:Float32Array,Uint32Array:Uint32Array,Int32Array:Int32Array,Uint8Array:Uint8Array},ot={5126:4,5123:2,5121:1},at=0,ht={Float32Array:Float32Array,Uint32Array:Uint32Array,Int32Array:Int32Array,Uint8Array:Uint8Array,Uint16Array:Uint16Array};(i.Geometry=rt).prototype.addAttribute=function(t,e,i,n,r,s,o,a){if(void 0===n&&(n=!1),void 0===a&&(a=!1),!e)throw new Error("You must pass a buffer when creating an attribute");e.data||(e instanceof Array&&(e=new Float32Array(e)),e=new et(e));var h=t.split("|");if(1<h.length){for(var l=0;l<h.length;l++)this.addAttribute(h[l],e,i,n,r);return this}var u=this.buffers.indexOf(e);return-1===u&&(this.buffers.push(e),u=this.buffers.length-1),this.attributes[t]=new tt(u,i,n,r,s,o,a),this.instanced=this.instanced||a,this},rt.prototype.getAttribute=function(t){return this.attributes[t]},rt.prototype.getBuffer=function(t){return this.buffers[this.getAttribute(t).buffer]},rt.prototype.addIndex=function(t){return t.data||(t instanceof Array&&(t=new Uint16Array(t)),t=new et(t)),t.index=!0,this.indexBuffer=t,-1===this.buffers.indexOf(t)&&this.buffers.push(t),this},rt.prototype.getIndex=function(){return this.indexBuffer},rt.prototype.interleave=function(){if(1===this.buffers.length||2===this.buffers.length&&this.indexBuffer)return this;var t,e=[],i=[],n=new et;for(t in this.attributes){var r=this.attributes[t],s=this.buffers[r.buffer];e.push(s.data),i.push(r.size*ot[r.type]/4),r.buffer=0}for(n.data=function(t,e){for(var i=0,n=0,r={},s=0;s<t.length;s++)n+=e[s],i+=t[s].length;for(var o=new ArrayBuffer(4*i),a=null,h=0,l=0;l<t.length;l++){var u=e[l],c=t[l],p=nt(c);r[p]||(r[p]=new st[p](o)),a=r[p];for(var d=0;d<c.length;d++)a[(d/u|0)*n+h+d%u]=c[d];h+=u}return new Float32Array(o)}(e,i),t=0;t<this.buffers.length;t++)this.buffers[t]!==this.indexBuffer&&this.buffers[t].destroy();return this.buffers=[n],this.indexBuffer&&this.buffers.push(this.indexBuffer),this},rt.prototype.getSize=function(){for(var t in this.attributes){var e=this.attributes[t];return this.buffers[e.buffer].data.length/(e.stride/4||e.size)}return 0},rt.prototype.dispose=function(){this.disposeRunner.run(this,!1)},rt.prototype.destroy=function(){this.dispose(),this.buffers=null,this.indexBuffer=null,this.attributes=null},rt.prototype.clone=function(){for(var t,e=new rt,i=0;i<this.buffers.length;i++)e.buffers[i]=new et(this.buffers[i].data.slice());for(t in this.attributes){var n=this.attributes[t];e.attributes[t]=new tt(n.buffer,n.size,n.normalized,n.type,n.stride,n.start,n.instance)}return this.indexBuffer&&(e.indexBuffer=e.buffers[this.buffers.indexOf(this.indexBuffer)],e.indexBuffer.index=!0),e},rt.merge=function(t){for(var e,i=new rt,n=[],r=[],s=[],o=0;o<t.length;o++){e=t[o];for(var a=0;a<e.buffers.length;a++)r[a]=r[a]||0,r[a]+=e.buffers[a].data.length,s[a]=0}for(var h=0;h<e.buffers.length;h++)n[h]=new ht[nt(e.buffers[h].data)](r[h]),i.buffers[h]=new et(n[h]);for(var l=0;l<t.length;l++){e=t[l];for(var u=0;u<e.buffers.length;u++)n[u].set(e.buffers[u].data,s[u]),s[u]+=e.buffers[u].data.length}if(i.attributes=e.attributes,e.indexBuffer){i.indexBuffer=i.buffers[e.buffers.indexOf(e.indexBuffer)],i.indexBuffer.index=!0;for(var c,p=0,d=0,_=0,f=0,m=0;m<e.buffers.length;m++)if(e.buffers[m]!==e.indexBuffer){f=m;break}for(c in e.attributes){var y=e.attributes[c];(0|y.buffer)===f&&(d+=y.size*ot[y.type]/4)}for(var g=0;g<t.length;g++){for(var v=t[g].indexBuffer.data,w=0;w<v.length;w++)i.indexBuffer.data[w+_]+=p;p+=e.buffers[f].data.length/d,_+=v.length}}return i};var lt,ut=((lt=rt)&&(ct.__proto__=lt),(ct.prototype=Object.create(lt&&lt.prototype)).constructor=ct);function ct(){lt.call(this),this.addAttribute("aVertexPosition",[0,0,1,0,1,1,0,1]).addIndex([0,1,3,2])}i.Quad=ut;var pt,dt=((pt=rt)&&(_t.__proto__=pt),((_t.prototype=Object.create(pt&&pt.prototype)).constructor=_t).prototype.map=function(t,e){var i,n;return this.uvs[0]=0,this.uvs[1]=0,this.uvs[2]=0+e.width/t.width,this.uvs[3]=0,this.uvs[4]=0+e.width/t.width,this.uvs[5]=0+e.height/t.height,this.uvs[6]=0,this.uvs[7]=0+e.height/t.height,i=e.x,n=e.y,this.vertices[0]=i,this.vertices[1]=n,this.vertices[2]=i+e.width,this.vertices[3]=n,this.vertices[4]=i+e.width,this.vertices[5]=n+e.height,this.vertices[6]=i,this.vertices[7]=n+e.height,this.invalidate(),this},_t.prototype.invalidate=function(){return this.vertexBuffer._updateID++,this.uvBuffer._updateID++,this},_t);function _t(){pt.call(this),this.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),this.uvs=new Float32Array([0,0,1,0,1,1,0,1]),this.vertexBuffer=new et(this.vertices),this.uvBuffer=new et(this.uvs),this.addAttribute("aVertexPosition",this.vertexBuffer).addAttribute("aTextureCoord",this.uvBuffer).addIndex([0,1,2,0,2,3])}i.QuadUv=dt;var ft=0,mt=function(t,e){this.uniforms=t,this.group=!0,this.syncUniforms={},this.dirtyId=0,this.id=ft++,this.static=!!e};(i.UniformGroup=mt).prototype.update=function(){this.dirtyId++},mt.prototype.add=function(t,e,i){this.uniforms[t]=new mt(e,i)},mt.from=function(t,e){return new mt(t,e)};function yt(){this.renderTexture=null,this.target=null,this.legacy=!1,this.resolution=1,this.sourceFrame=new h.Rectangle,this.destinationFrame=new h.Rectangle,this.filters=[]}yt.prototype.clear=function(){this.target=null,this.filters=null,this.renderTexture=null};function gt(t){this.renderer=t}var vt,wt=((vt=t)&&(xt.__proto__=vt),((xt.prototype=Object.create(vt&&vt.prototype)).constructor=xt).prototype.push=function(t,e){for(var i=this.renderer,n=this.defaultFilterStack,r=this.statePool.pop()||new yt,s=e[0].resolution,o=e[0].padding,a=e[0].autoFit,h=e[0].legacy,l=1;l<e.length;l++)var u=e[l],s=Math.min(s,u.resolution),o=Math.max(o,u.padding),a=a||u.autoFit,h=h||u.legacy;1===n.length&&(this.defaultFilterStack[0].renderTexture=i.renderTexture.current),n.push(r),r.resolution=s,r.legacy=h,r.target=t,r.sourceFrame.copyFrom(t.filterArea||t.getBounds(!0)),r.sourceFrame.pad(o),a&&r.sourceFrame.fit(this.renderer.renderTexture.sourceFrame),r.sourceFrame.ceil(s),r.renderTexture=this.getOptimalFilterTexture(r.sourceFrame.width,r.sourceFrame.height,s),r.filters=e,r.destinationFrame.width=r.renderTexture.width,r.destinationFrame.height=r.renderTexture.height,r.renderTexture.filterFrame=r.sourceFrame,i.renderTexture.bind(r.renderTexture,r.sourceFrame),i.renderTexture.clear()},xt.prototype.pop=function(){var t=this.defaultFilterStack,e=t.pop(),i=e.filters;this.activeState=e;var n=this.globalUniforms.uniforms;n.outputFrame=e.sourceFrame,n.resolution=e.resolution;var r=n.inputSize,s=n.inputPixel,o=n.inputClamp;r[0]=e.destinationFrame.width,r[1]=e.destinationFrame.height,r[2]=1/r[0],r[3]=1/r[1],s[0]=r[0]*e.resolution,s[1]=r[1]*e.resolution,s[2]=1/s[0],s[3]=1/s[1],o[0]=.5*s[2],o[1]=.5*s[3],o[2]=e.sourceFrame.width*r[2]-.5*s[2],o[3]=e.sourceFrame.height*r[3]-.5*s[3],e.legacy&&((s=n.filterArea)[0]=e.destinationFrame.width,s[1]=e.destinationFrame.height,s[2]=e.sourceFrame.x,s[3]=e.sourceFrame.y,n.filterClamp=n.inputClamp),this.globalUniforms.update();t=t[t.length-1];if(1===i.length)i[0].apply(this,e.renderTexture,t.renderTexture,!1,e),this.returnFilterTexture(e.renderTexture);else{var a=e.renderTexture;(u=this.getOptimalFilterTexture(a.width,a.height,e.resolution)).filterFrame=a.filterFrame;for(var h=0,h=0;h<i.length-1;++h){i[h].apply(this,a,u,!0,e);var l=a,a=u,u=l}i[h].apply(this,a,t.renderTexture,!1,e),this.returnFilterTexture(a),this.returnFilterTexture(u)}e.clear(),this.statePool.push(e)},xt.prototype.applyFilter=function(t,e,i,n){var r=this.renderer;r.renderTexture.bind(i,i?i.filterFrame:null),n&&r.renderTexture.clear(),t.uniforms.uSampler=e,t.uniforms.filterGlobals=this.globalUniforms,r.state.set(t.state),r.shader.bind(t),t.legacy?(this.quadUv.map(e._frame,e.filterFrame),r.geometry.bind(this.quadUv),r.geometry.draw(y.DRAW_MODES.TRIANGLES)):(r.geometry.bind(this.quad),r.geometry.draw(y.DRAW_MODES.TRIANGLE_STRIP))},xt.prototype.calculateSpriteMatrix=function(t,e){var i=this.activeState,n=i.sourceFrame,r=i.destinationFrame,i=e._texture.orig,r=t.set(r.width,0,0,r.height,n.x,n.y),n=e.worldTransform.copyTo(h.Matrix.TEMP_MATRIX);return n.invert(),r.prepend(n),r.scale(1/i.width,1/i.height),r.translate(e.anchor.x,e.anchor.y),r},xt.prototype.destroy=function(){this.texturePool.clear(!1)},xt.prototype.getOptimalFilterTexture=function(t,e,i){return void 0===i&&(i=1),this.texturePool.getOptimalTexture(t,e,i)},xt.prototype.getFilterTexture=function(t,e){var i;"number"==typeof t&&(i=t,t=e,e=i),t=t||this.activeState.renderTexture;e=this.texturePool.getOptimalTexture(t.width,t.height,e||t.resolution);return e.filterFrame=t.filterFrame,e},xt.prototype.returnFilterTexture=function(t){this.texturePool.returnTexture(t)},xt.prototype.emptyPool=function(){this.texturePool.clear(!0)},xt.prototype.resize=function(){this.texturePool.setScreenSize(this.renderer.view)},xt);function xt(t){vt.call(this,t),this.defaultFilterStack=[{}],this.texturePool=new Q,this.texturePool.setScreenSize(t.view),this.statePool=[],this.quad=new ut,this.quadUv=new dt,this.tempRect=new h.Rectangle,this.activeState={},this.globalUniforms=new mt({outputFrame:this.tempRect,inputSize:new Float32Array(4),inputPixel:new Float32Array(4),inputClamp:new Float32Array(4),resolution:1,filterArea:new Float32Array(4),filterClamp:new Float32Array(4)},!0),this._pixelsWidth=t.view.width,this._pixelsHeight=t.view.height}(i.ObjectRenderer=gt).prototype.flush=function(){},gt.prototype.destroy=function(){this.renderer=null},gt.prototype.start=function(){},gt.prototype.stop=function(){this.flush()},gt.prototype.render=function(t){};var bt,Et=((bt=t)&&($t.__proto__=bt),(($t.prototype=Object.create(bt&&bt.prototype)).constructor=$t).prototype.setObjectRenderer=function(t){this.currentRenderer!==t&&(this.currentRenderer.stop(),this.currentRenderer=t,this.currentRenderer.start())},$t.prototype.flush=function(){this.setObjectRenderer(this.emptyRenderer)},$t.prototype.reset=function(){this.setObjectRenderer(this.emptyRenderer)},$t.prototype.copyBoundTextures=function(t,e){for(var i=this.renderer.texture.boundTextures,n=e-1;0<=n;--n)t[n]=i[n]||null,t[n]&&(t[n]._batchLocation=n)},$t.prototype.boundArray=function(t,e,i,n){for(var r=t.elements,s=t.ids,o=t.count,a=0,h=0;h<o;h++){var l=r[h],u=l._batchLocation;if(0<=u&&u<n&&e[u]===l)s[h]=u;else for(;a<n;){var c=e[a];if(!c||c._batchEnabled!==i||c._batchLocation!==a){s[h]=a,e[l._batchLocation=a]=l;break}a++}}},$t);function $t(t){bt.call(this,t),this.emptyRenderer=new gt(t),this.currentRenderer=this.emptyRenderer}g.settings.PREFER_ENV=m.isMobile.any?y.ENV.WEBGL:y.ENV.WEBGL2,g.settings.STRICT_TEXTURE_CACHE=!1;function At(t){this.buffer=t,this.updateID=-1,this.byteLength=-1,this.refCount=0}function St(t){this.type=y.MASK_TYPES.NONE,this.autoDetect=!0,this.maskObject=t||null,this.pooled=!1,this.isMaskData=!0,this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null,this._target=null}var Tt,Ct=0,Mt=function(e){function t(t){e.call(this,t),this.webGLVersion=1,this.extensions={},this.handleContextLost=this.handleContextLost.bind(this),this.handleContextRestored=this.handleContextRestored.bind(this),t.view.addEventListener("webglcontextlost",this.handleContextLost,!1),t.view.addEventListener("webglcontextrestored",this.handleContextRestored,!1)}e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t;var i={isLost:{configurable:!0}};return i.isLost.get=function(){return!this.gl||this.gl.isContextLost()},t.prototype.contextChange=function(t){this.gl=t,this.renderer.gl=t,this.renderer.CONTEXT_UID=Ct++,t.isContextLost()&&t.getExtension("WEBGL_lose_context")&&t.getExtension("WEBGL_lose_context").restoreContext()},t.prototype.initFromContext=function(t){this.gl=t,this.validateContext(t),this.renderer.gl=t,this.renderer.CONTEXT_UID=Ct++,this.renderer.runners.contextChange.run(t)},t.prototype.initFromOptions=function(t){t=this.createContext(this.renderer.view,t);this.initFromContext(t)},t.prototype.createContext=function(t,e){var i;if(g.settings.PREFER_ENV>=y.ENV.WEBGL2&&(i=t.getContext("webgl2",e)),i)this.webGLVersion=2;else if(this.webGLVersion=1,!(i=t.getContext("webgl",e)||t.getContext("experimental-webgl",e)))throw new Error("This browser does not support WebGL. Try using the canvas renderer");return this.gl=i,this.getExtensions(),i},t.prototype.getExtensions=function(){var t=this.gl;1===this.webGLVersion?Object.assign(this.extensions,{drawBuffers:t.getExtension("WEBGL_draw_buffers"),depthTexture:t.getExtension("WEBKIT_WEBGL_depth_texture"),loseContext:t.getExtension("WEBGL_lose_context"),vertexArrayObject:t.getExtension("OES_vertex_array_object")||t.getExtension("MOZ_OES_vertex_array_object")||t.getExtension("WEBKIT_OES_vertex_array_object"),anisotropicFiltering:t.getExtension("EXT_texture_filter_anisotropic"),uint32ElementIndex:t.getExtension("OES_element_index_uint"),floatTexture:t.getExtension("OES_texture_float"),floatTextureLinear:t.getExtension("OES_texture_float_linear"),textureHalfFloat:t.getExtension("OES_texture_half_float"),textureHalfFloatLinear:t.getExtension("OES_texture_half_float_linear")}):2===this.webGLVersion&&Object.assign(this.extensions,{anisotropicFiltering:t.getExtension("EXT_texture_filter_anisotropic"),colorBufferFloat:t.getExtension("EXT_color_buffer_float"),floatTextureLinear:t.getExtension("OES_texture_float_linear")})},t.prototype.handleContextLost=function(t){t.preventDefault()},t.prototype.handleContextRestored=function(){this.renderer.runners.contextChange.run(this.gl)},t.prototype.destroy=function(){var t=this.renderer.view;t.removeEventListener("webglcontextlost",this.handleContextLost),t.removeEventListener("webglcontextrestored",this.handleContextRestored),this.gl.useProgram(null),this.extensions.loseContext&&this.extensions.loseContext.loseContext()},t.prototype.postrender=function(){this.renderer.renderingToScreen&&this.gl.flush()},t.prototype.validateContext=function(t){t.getContextAttributes().stencil||console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly")},Object.defineProperties(t.prototype,i),t}(t),It=function(e){function t(t){e.call(this,t),this.managedFramebuffers=[],this.unknownFramebuffer=new B(10,10)}e&&(t.__proto__=e);var i={size:{configurable:!0}};return((t.prototype=Object.create(e&&e.prototype)).constructor=t).prototype.contextChange=function(){var e,t,i=this.gl=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.current=this.unknownFramebuffer,this.viewport=new h.Rectangle,this.hasMRT=!0,this.writeDepthTexture=!0,this.disposeAll(!0),1===this.renderer.context.webGLVersion&&(e=this.renderer.context.extensions.drawBuffers,t=this.renderer.context.extensions.depthTexture,g.settings.PREFER_ENV===y.ENV.WEBGL_LEGACY&&(t=e=null),e?i.drawBuffers=function(t){return e.drawBuffersWEBGL(t)}:(this.hasMRT=!1,i.drawBuffers=function(){}),t||(this.writeDepthTexture=!1))},t.prototype.bind=function(t,e){var i=this.gl;if(t){var n=t.glFramebuffers[this.CONTEXT_UID]||this.initFramebuffer(t);this.current!==t&&(this.current=t,i.bindFramebuffer(i.FRAMEBUFFER,n.framebuffer)),n.dirtyId!==t.dirtyId&&(n.dirtyId=t.dirtyId,n.dirtyFormat!==t.dirtyFormat?(n.dirtyFormat=t.dirtyFormat,this.updateFramebuffer(t)):n.dirtySize!==t.dirtySize&&(n.dirtySize=t.dirtySize,this.resizeFramebuffer(t)));for(var r=0;r<t.colorTextures.length;r++)t.colorTextures[r].texturePart?this.renderer.texture.unbind(t.colorTextures[r].texture):this.renderer.texture.unbind(t.colorTextures[r]);t.depthTexture&&this.renderer.texture.unbind(t.depthTexture),e?this.setViewport(e.x,e.y,e.width,e.height):this.setViewport(0,0,t.width,t.height)}else this.current&&(this.current=null,i.bindFramebuffer(i.FRAMEBUFFER,null)),e?this.setViewport(e.x,e.y,e.width,e.height):this.setViewport(0,0,this.renderer.width,this.renderer.height)},t.prototype.setViewport=function(t,e,i,n){var r=this.viewport;r.width===i&&r.height===n&&r.x===t&&r.y===e||(r.x=t,r.y=e,r.width=i,r.height=n,this.gl.viewport(t,e,i,n))},i.size.get=function(){return this.current?{x:0,y:0,width:this.current.width,height:this.current.height}:{x:0,y:0,width:this.renderer.width,height:this.renderer.height}},t.prototype.clear=function(t,e,i,n){var r=this.gl;r.clearColor(t,e,i,n),r.clear(r.COLOR_BUFFER_BIT|r.DEPTH_BUFFER_BIT)},t.prototype.initFramebuffer=function(t){var e={framebuffer:this.gl.createFramebuffer(),stencil:null,dirtyId:0,dirtyFormat:0,dirtySize:0};return t.glFramebuffers[this.CONTEXT_UID]=e,this.managedFramebuffers.push(t),t.disposeRunner.add(this),e},t.prototype.resizeFramebuffer=function(t){var e=this.gl,i=t.glFramebuffers[this.CONTEXT_UID];i.stencil&&(e.bindRenderbuffer(e.RENDERBUFFER,i.stencil),e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_STENCIL,t.width,t.height));for(var n=t.colorTextures,r=0;r<n.length;r++)this.renderer.texture.bind(n[r],0);t.depthTexture&&this.renderer.texture.bind(t.depthTexture,0)},t.prototype.updateFramebuffer=function(t){var e=this.gl,i=t.glFramebuffers[this.CONTEXT_UID],n=t.colorTextures.length;e.drawBuffers||(n=Math.min(n,1));for(var r,s=[],o=0;o<n;o++){var a=t.colorTextures[o];a.texturePart?(this.renderer.texture.bind(a.texture,0),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0+o,e.TEXTURE_CUBE_MAP_NEGATIVE_X+a.side,a.texture._glTextures[this.CONTEXT_UID].texture,0)):(this.renderer.texture.bind(a,0),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0+o,e.TEXTURE_2D,a._glTextures[this.CONTEXT_UID].texture,0)),s.push(e.COLOR_ATTACHMENT0+o)}1<s.length&&e.drawBuffers(s),t.depthTexture&&this.writeDepthTexture&&(r=t.depthTexture,this.renderer.texture.bind(r,0),e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.TEXTURE_2D,r._glTextures[this.CONTEXT_UID].texture,0)),i.stencil||!t.stencil&&!t.depth||(i.stencil=e.createRenderbuffer(),e.bindRenderbuffer(e.RENDERBUFFER,i.stencil),e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_STENCIL,t.width,t.height),t.depthTexture||e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.RENDERBUFFER,i.stencil))},t.prototype.disposeFramebuffer=function(t,e){var i,n=t.glFramebuffers[this.CONTEXT_UID],r=this.gl;n&&(delete t.glFramebuffers[this.CONTEXT_UID],0<=(i=this.managedFramebuffers.indexOf(t))&&this.managedFramebuffers.splice(i,1),t.disposeRunner.remove(this),e||(r.deleteFramebuffer(n.framebuffer),n.stencil&&r.deleteRenderbuffer(n.stencil)))},t.prototype.disposeAll=function(t){var e=this.managedFramebuffers;this.managedFramebuffers=[];for(var i=0;i<e.length;i++)this.disposeFramebuffer(e[i],t)},t.prototype.forceStencil=function(){var t,e,i,n,r=this.current;!r||(t=r.glFramebuffers[this.CONTEXT_UID])&&!t.stencil&&(r.enableStencil(),e=r.width,i=r.height,r=(n=this.gl).createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,r),n.renderbufferStorage(n.RENDERBUFFER,n.DEPTH_STENCIL,e,i),t.stencil=r,n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.RENDERBUFFER,r))},t.prototype.reset=function(){this.current=this.unknownFramebuffer,this.viewport=new h.Rectangle},Object.defineProperties(t.prototype,i),t}(t),Pt={5126:4,5123:2,5121:1},Ot=((Tt=t)&&(Dt.__proto__=Tt),((Dt.prototype=Object.create(Tt&&Tt.prototype)).constructor=Dt).prototype.contextChange=function(){this.disposeAll(!0);var e,s,t=this.gl=this.renderer.gl,i=this.renderer.context;this.CONTEXT_UID=this.renderer.CONTEXT_UID,t.createVertexArray||(e=this.renderer.context.extensions.vertexArrayObject,g.settings.PREFER_ENV===y.ENV.WEBGL_LEGACY&&(e=null),e?(t.createVertexArray=function(){return e.createVertexArrayOES()},t.bindVertexArray=function(t){return e.bindVertexArrayOES(t)},t.deleteVertexArray=function(t){return e.deleteVertexArrayOES(t)}):(this.hasVao=!1,t.createVertexArray=function(){},t.bindVertexArray=function(){},t.deleteVertexArray=function(){})),t.vertexAttribDivisor||((s=t.getExtension("ANGLE_instanced_arrays"))?(t.vertexAttribDivisor=function(t,e){return s.vertexAttribDivisorANGLE(t,e)},t.drawElementsInstanced=function(t,e,i,n,r){return s.drawElementsInstancedANGLE(t,e,i,n,r)},t.drawArraysInstanced=function(t,e,i,n){return s.drawArraysInstancedANGLE(t,e,i,n)}):this.hasInstance=!1),this.canUseUInt32ElementIndex=2===i.webGLVersion||!!i.extensions.uint32ElementIndex},Dt.prototype.bind=function(t,e){e=e||this.renderer.shader.shader;var i=this.gl,n=t.glVertexArrayObjects[this.CONTEXT_UID];n||((this.managedGeometries[t.id]=t).disposeRunner.add(this),t.glVertexArrayObjects[this.CONTEXT_UID]=n={});n=n[e.program.id]||this.initGeometryVao(t,e.program);this._activeGeometry=t,this._activeVao!==n&&(this._activeVao=n,this.hasVao?i.bindVertexArray(n):this.activateVao(t,e.program)),this.updateBuffers()},Dt.prototype.reset=function(){this.unbind()},Dt.prototype.updateBuffers=function(){for(var t=this._activeGeometry,e=this.gl,i=0;i<t.buffers.length;i++){var n,r,s=t.buffers[i],o=s._glBuffers[this.CONTEXT_UID];s._updateID!==o.updateID&&(o.updateID=s._updateID,n=s.index?e.ELEMENT_ARRAY_BUFFER:e.ARRAY_BUFFER,e.bindBuffer(n,o.buffer),(this._boundBuffer=o).byteLength>=s.data.byteLength?e.bufferSubData(n,0,s.data):(r=s.static?e.STATIC_DRAW:e.DYNAMIC_DRAW,o.byteLength=s.data.byteLength,e.bufferData(n,s.data,r)))}},Dt.prototype.checkCompatibility=function(t,e){var i,n=t.attributes;for(i in e.attributeData)if(!n[i])throw new Error('shader and geometry incompatible, geometry missing the "'+i+'" attribute')},Dt.prototype.getSignature=function(t,e){var i,n=t.attributes,r=e.attributeData,s=["g",t.id];for(i in n)r[i]&&s.push(i);return s.join("-")},Dt.prototype.initGeometryVao=function(t,e){this.checkCompatibility(t,e);var i=this.gl,n=this.CONTEXT_UID,r=this.getSignature(t,e),s=t.glVertexArrayObjects[this.CONTEXT_UID],o=s[r];if(o)return s[e.id]=o;var a,h,l,u=t.buffers,c=t.attributes,p={},d={};for(a in u)p[a]=0,d[a]=0;for(h in c)!c[h].size&&e.attributeData[h]?c[h].size=e.attributeData[h].size:c[h].size||console.warn("PIXI Geometry attribute '"+h+"' size cannot be determined (likely the bound shader does not have the attribute)"),p[c[h].buffer]+=c[h].size*Pt[c[h].type];for(l in c){var _=c[l],f=_.size;void 0===_.stride&&(p[_.buffer]===f*Pt[_.type]?_.stride=0:_.stride=p[_.buffer]),void 0===_.start&&(_.start=d[_.buffer],d[_.buffer]+=f*Pt[_.type])}o=i.createVertexArray(),i.bindVertexArray(o);for(var m=0;m<u.length;m++){var y=u[m];y._glBuffers[n]||(y._glBuffers[n]=new At(i.createBuffer()),(this.managedBuffers[y.id]=y).disposeRunner.add(this)),y._glBuffers[n].refCount++}return this.activateVao(t,e),this._activeVao=o,s[e.id]=o,s[r]=o},Dt.prototype.disposeBuffer=function(t,e){var i,n;this.managedBuffers[t.id]&&(delete this.managedBuffers[t.id],i=t._glBuffers[this.CONTEXT_UID],n=this.gl,t.disposeRunner.remove(this),i&&(e||n.deleteBuffer(i.buffer),delete t._glBuffers[this.CONTEXT_UID]))},Dt.prototype.disposeGeometry=function(t,e){if(this.managedGeometries[t.id]){delete this.managedGeometries[t.id];var i=t.glVertexArrayObjects[this.CONTEXT_UID],n=this.gl,r=t.buffers;if(t.disposeRunner.remove(this),i){for(var s,o=0;o<r.length;o++){var a=r[o]._glBuffers[this.CONTEXT_UID];a.refCount--,0!==a.refCount||e||this.disposeBuffer(r[o],e)}if(!e)for(var h in i)"g"===h[0]&&(s=i[h],this._activeVao===s&&this.unbind(),n.deleteVertexArray(s));delete t.glVertexArrayObjects[this.CONTEXT_UID]}}},Dt.prototype.disposeAll=function(t){for(var e=Object.keys(this.managedGeometries),i=0;i<e.length;i++)this.disposeGeometry(this.managedGeometries[e[i]],t);e=Object.keys(this.managedBuffers);for(var n=0;n<e.length;n++)this.disposeBuffer(this.managedBuffers[e[n]],t)},Dt.prototype.activateVao=function(t,e){var i=this.gl,n=this.CONTEXT_UID,r=t.buffers,s=t.attributes;t.indexBuffer&&i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,t.indexBuffer._glBuffers[n].buffer);var o,a=null;for(o in s){var h=s[o],l=r[h.buffer]._glBuffers[n];if(e.attributeData[o]){a!==l&&(i.bindBuffer(i.ARRAY_BUFFER,l.buffer),a=l);l=e.attributeData[o].location;if(i.enableVertexAttribArray(l),i.vertexAttribPointer(l,h.size,h.type||i.FLOAT,h.normalized,h.stride,h.start),h.instance){if(!this.hasInstance)throw new Error("geometry error, GPU Instancing is not supported on this device");i.vertexAttribDivisor(l,1)}}}},Dt.prototype.draw=function(t,e,i,n){var r,s,o=this.gl,a=this._activeGeometry;return a.indexBuffer?(s=2===(r=a.indexBuffer.data.BYTES_PER_ELEMENT)?o.UNSIGNED_SHORT:o.UNSIGNED_INT,2===r||4===r&&this.canUseUInt32ElementIndex?a.instanced?o.drawElementsInstanced(t,e||a.indexBuffer.data.length,s,(i||0)*r,n||1):o.drawElements(t,e||a.indexBuffer.data.length,s,(i||0)*r):console.warn("unsupported index buffer type: uint32")):a.instanced?o.drawArraysInstanced(t,i,e||a.getSize(),n||1):o.drawArrays(t,i,e||a.getSize()),this},Dt.prototype.unbind=function(){this.gl.bindVertexArray(null),this._activeVao=null,this._activeGeometry=null},Dt);function Dt(t){Tt.call(this,t),this._activeGeometry=null,this._activeVao=null,this.hasVao=!0,this.hasInstance=!0,this.canUseUInt32ElementIndex=!1,this.boundBuffers={},this.managedGeometries={},this.managedBuffers={}}function Rt(t,e,i,n){var r=Lt(t,t.VERTEX_SHADER,e),s=Lt(t,t.FRAGMENT_SHADER,i),o=t.createProgram();if(t.attachShader(o,r),t.attachShader(o,s),n)for(var a in n)t.bindAttribLocation(o,n[a],a);return t.linkProgram(o),t.getProgramParameter(o,t.LINK_STATUS)||(t.getShaderParameter(r,t.COMPILE_STATUS)||(console.warn(e),console.error(t.getShaderInfoLog(r))),t.getShaderParameter(s,t.COMPILE_STATUS)||(console.warn(i),console.error(t.getShaderInfoLog(s))),console.error("Pixi.js Error: Could not initialize shader."),console.error("gl.VALIDATE_STATUS",t.getProgramParameter(o,t.VALIDATE_STATUS)),console.error("gl.getError()",t.getError()),""!==t.getProgramInfoLog(o)&&console.warn("Pixi.js Warning: gl.getProgramInfoLog()",t.getProgramInfoLog(o)),t.deleteProgram(o),o=null),t.deleteShader(r),t.deleteShader(s),o}function Lt(t,e,i){e=t.createShader(e);return t.shaderSource(e,i),t.compileShader(e),e}function kt(t,e){switch(t){case"float":return 0;case"vec2":return new Float32Array(2*e);case"vec3":return new Float32Array(3*e);case"vec4":return new Float32Array(4*e);case"int":case"sampler2D":case"sampler2DArray":return 0;case"ivec2":return new Int32Array(2*e);case"ivec3":return new Int32Array(3*e);case"ivec4":return new Int32Array(4*e);case"bool":return!1;case"bvec2":return Ft(2*e);case"bvec3":return Ft(3*e);case"bvec4":return Ft(4*e);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}function Ft(t){for(var e=new Array(t),i=0;i<e.length;i++)e[i]=!1;return e}(i.MaskData=St).prototype.reset=function(){this.pooled&&(this.maskObject=null,this.type=y.MASK_TYPES.NONE,this.autoDetect=!0),this._target=null},St.prototype.copyCountersOrReset=function(t){t?(this._stencilCounter=t._stencilCounter,this._scissorCounter=t._scissorCounter,this._scissorRect=t._scissorRect):(this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null)};var Nt,Bt={},Ut=Bt;function Xt(){var t,e;return(Ut===Bt||Ut&&Ut.isContextLost())&&(e=document.createElement("canvas"),g.settings.PREFER_ENV>=y.ENV.WEBGL2&&(t=e.getContext("webgl2",{})),t||((t=e.getContext("webgl",{})||e.getContext("experimental-webgl",{}))?t.getExtension("WEBGL_draw_buffers"):t=null),Ut=t),Ut}function jt(t,e,i){if("precision"===t.substring(0,9))return i!==y.PRECISION.HIGH&&"precision highp"===t.substring(0,15)?t.replace("precision highp","precision mediump"):t;var n=e;return e===y.PRECISION.HIGH&&i!==y.PRECISION.HIGH&&(n=y.PRECISION.MEDIUM),"precision "+n+" float;\n"+t}var Vt={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};var Ht=null,Gt={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube",SAMPLER_2D_ARRAY:"sampler2DArray"};function Yt(t,e){if(!Ht){var i=Object.keys(Gt);Ht={};for(var n=0;n<i.length;++n){var r=i[n];Ht[t[r]]=Gt[r]}}return Ht[e]}var Wt,zt={float:"\n    if(cv !== v)\n    {\n        cv.v = v;\n        gl.uniform1f(location, v)\n    }",vec2:"\n    if(cv[0] !== v[0] || cv[1] !== v[1])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        gl.uniform2f(location, v[0], v[1])\n    }",vec3:"\n    if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n\n        gl.uniform3f(location, v[0], v[1], v[2])\n    }",vec4:"gl.uniform4f(location, v[0], v[1], v[2], v[3])",int:"gl.uniform1i(location, v)",ivec2:"gl.uniform2i(location, v[0], v[1])",ivec3:"gl.uniform3i(location, v[0], v[1], v[2])",ivec4:"gl.uniform4i(location, v[0], v[1], v[2], v[3])",bool:"gl.uniform1i(location, v)",bvec2:"gl.uniform2i(location, v[0], v[1])",bvec3:"gl.uniform3i(location, v[0], v[1], v[2])",bvec4:"gl.uniform4i(location, v[0], v[1], v[2], v[3])",mat2:"gl.uniformMatrix2fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",sampler2D:"gl.uniform1i(location, v)",samplerCube:"gl.uniform1i(location, v)",sampler2DArray:"gl.uniform1i(location, v)"},qt={float:"gl.uniform1fv(location, v)",vec2:"gl.uniform2fv(location, v)",vec3:"gl.uniform3fv(location, v)",vec4:"gl.uniform4fv(location, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat2:"gl.uniformMatrix2fv(location, false, v)",int:"gl.uniform1iv(location, v)",ivec2:"gl.uniform2iv(location, v)",ivec3:"gl.uniform3iv(location, v)",ivec4:"gl.uniform4iv(location, v)",bool:"gl.uniform1iv(location, v)",bvec2:"gl.uniform2iv(location, v)",bvec3:"gl.uniform3iv(location, v)",bvec4:"gl.uniform4iv(location, v)",sampler2D:"gl.uniform1iv(location, v)",samplerCube:"gl.uniform1iv(location, v)",sampler2DArray:"gl.uniform1iv(location, v)"},Jt=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join("\n");function Kt(t,e){if(0===t)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");for(var i=e.createShader(e.FRAGMENT_SHADER);;){var n=Jt.replace(/%forloop%/gi,function(t){for(var e="",i=0;i<t;++i)0<i&&(e+="\nelse "),i<t-1&&(e+="if(test == "+i+".0){}");return e}(t));if(e.shaderSource(i,n),e.compileShader(i),e.getShaderParameter(i,e.COMPILE_STATUS))break;t=t/2|0}return t}var Zt=0,Qt={},te=function t(e,i,n){void 0===n&&(n="pixi-shader"),this.id=Zt++,this.vertexSrc=e||t.defaultVertexSrc,this.fragmentSrc=i||t.defaultFragmentSrc,this.vertexSrc=this.vertexSrc.trim(),this.fragmentSrc=this.fragmentSrc.trim(),"#version"!==this.vertexSrc.substring(0,8)&&(n=n.replace(/\s+/g,"-"),Qt[n]?(Qt[n]++,n+="-"+Qt[n]):Qt[n]=1,this.vertexSrc="#define SHADER_NAME "+n+"\n"+this.vertexSrc,this.fragmentSrc="#define SHADER_NAME "+n+"\n"+this.fragmentSrc,this.vertexSrc=jt(this.vertexSrc,g.settings.PRECISION_VERTEX,y.PRECISION.HIGH),this.fragmentSrc=jt(this.fragmentSrc,g.settings.PRECISION_FRAGMENT,(Nt||(Nt=y.PRECISION.MEDIUM,(n=Xt())&&n.getShaderPrecisionFormat&&(n=n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_FLOAT),Nt=n.precision?y.PRECISION.HIGH:y.PRECISION.MEDIUM)),Nt))),this.extractData(this.vertexSrc,this.fragmentSrc),this.glPrograms={},this.syncUniforms=null},L={defaultVertexSrc:{configurable:!0},defaultFragmentSrc:{configurable:!0}};(i.Program=te).prototype.extractData=function(t,e){var i=Xt();i?(e=Rt(i,t,e),this.attributeData=this.getAttributeData(e,i),this.uniformData=this.getUniformData(e,i),i.deleteProgram(e)):(this.uniformData={},this.attributeData={})},te.prototype.getAttributeData=function(t,e){for(var i={},n=[],r=e.getProgramParameter(t,e.ACTIVE_ATTRIBUTES),s=0;s<r;s++){var o=e.getActiveAttrib(t,s),a=Yt(e,o.type),a={type:a,name:o.name,size:Vt[a],location:0};i[o.name]=a,n.push(a)}n.sort(function(t,e){return t.name>e.name?1:-1});for(var h=0;h<n.length;h++)n[h].location=h;return i},te.prototype.getUniformData=function(t,e){for(var i={},n=e.getProgramParameter(t,e.ACTIVE_UNIFORMS),r=0;r<n;r++){var s=e.getActiveUniform(t,r),o=s.name.replace(/\[.*?\]/,""),a=s.name.match(/\[.*?\]/,""),h=Yt(e,s.type);i[o]={type:h,size:s.size,isArray:a,value:kt(h,s.size)}}return i},L.defaultVertexSrc.get=function(){return"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void){\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n   vTextureCoord = aTextureCoord;\n}\n"},L.defaultFragmentSrc.get=function(){return"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n   gl_FragColor *= texture2D(uSampler, vTextureCoord);\n}"},te.from=function(t,e,i){var n=t+e,r=m.ProgramCache[n];return r||(m.ProgramCache[n]=r=new te(t,e,i)),r},Object.defineProperties(te,L);function ee(t,e){for(var i in this.program=t,this.uniformGroup=e?e instanceof mt?e:new mt(e):new mt({}),t.uniformData)this.uniformGroup.uniforms[i]instanceof Array&&(this.uniformGroup.uniforms[i]=new Float32Array(this.uniformGroup.uniforms[i]))}u={uniforms:{configurable:!0}};(i.Shader=ee).prototype.checkUniformExists=function(t,e){if(e.uniforms[t])return!0;for(var i in e.uniforms){var n=e.uniforms[i];if(n.group&&this.checkUniformExists(t,n))return!0}return!1},ee.prototype.destroy=function(){this.uniformGroup=null},u.uniforms.get=function(){return this.uniformGroup.uniforms},ee.from=function(t,e,i){e=te.from(t,e);return new ee(e,i)},Object.defineProperties(ee.prototype,u);var ie=function(){this.data=0,this.blendMode=y.BLEND_MODES.NORMAL,this.polygonOffset=0,this.blend=!0};i.State=ie;L={blend:{configurable:!0},offsets:{configurable:!0},culling:{configurable:!0},depthTest:{configurable:!0},clockwiseFrontFace:{configurable:!0},blendMode:{configurable:!0},polygonOffset:{configurable:!0}};L.blend.get=function(){return!!(1&this.data)},L.blend.set=function(t){!!(1&this.data)!==t&&(this.data^=1)},L.offsets.get=function(){return!!(2&this.data)},L.offsets.set=function(t){!!(2&this.data)!==t&&(this.data^=2)},L.culling.get=function(){return!!(4&this.data)},L.culling.set=function(t){!!(4&this.data)!==t&&(this.data^=4)},L.depthTest.get=function(){return!!(8&this.data)},L.depthTest.set=function(t){!!(8&this.data)!==t&&(this.data^=8)},L.clockwiseFrontFace.get=function(){return!!(16&this.data)},L.clockwiseFrontFace.set=function(t){!!(16&this.data)!==t&&(this.data^=16)},L.blendMode.get=function(){return this._blendMode},L.blendMode.set=function(t){this.blend=t!==y.BLEND_MODES.NONE,this._blendMode=t},L.polygonOffset.get=function(){return this._polygonOffset},L.polygonOffset.set=function(t){this.offsets=!!t,this._polygonOffset=t},ie.for2d=function(){var t=new ie;return t.depthTest=!1,t.blend=!0,t},Object.defineProperties(ie.prototype,L);u=function(n){function r(t,e,i){e=te.from(t||r.defaultVertexSrc,e||r.defaultFragmentSrc);n.call(this,e,i),this.padding=0,this.resolution=g.settings.FILTER_RESOLUTION,this.enabled=!0,this.autoFit=!0,this.legacy=!!this.program.attributeData.aTextureCoord,this.state=new ie}n&&(r.__proto__=n);var t={blendMode:{configurable:!0}},e={defaultVertexSrc:{configurable:!0},defaultFragmentSrc:{configurable:!0}};return((r.prototype=Object.create(n&&n.prototype)).constructor=r).prototype.apply=function(t,e,i,n,r){t.applyFilter(this,e,i,n,r)},t.blendMode.get=function(){return this.state.blendMode},t.blendMode.set=function(t){this.state.blendMode=t},e.defaultVertexSrc.get=function(){return"attribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvec2 filterTextureCoord( void )\n{\n    return aVertexPosition * (outputFrame.zw * inputSize.zw);\n}\n\nvoid main(void)\n{\n    gl_Position = filterVertexPosition();\n    vTextureCoord = filterTextureCoord();\n}\n"},e.defaultFragmentSrc.get=function(){return"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n   gl_FragColor = texture2D(uSampler, vTextureCoord);\n}\n"},Object.defineProperties(r.prototype,t),Object.defineProperties(r,e),r}(ee);(i.Filter=u).SOURCE_KEY_MAP={};function ne(t,e){this._texture=t,this.mapCoord=new h.Matrix,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._updateID=-1,this.clampOffset=0,this.clampMargin=void 0===e?.5:e,this.isSimple=!1}var re=new h.Matrix;i.TextureMatrix=ne;L={texture:{configurable:!0}};L.texture.get=function(){return this._texture},L.texture.set=function(t){this._texture=t,this._updateID=-1},ne.prototype.multiplyUvs=function(t,e){void 0===e&&(e=t);for(var i=this.mapCoord,n=0;n<t.length;n+=2){var r=t[n],s=t[n+1];e[n]=r*i.a+s*i.c+i.tx,e[n+1]=r*i.b+s*i.d+i.ty}return e},ne.prototype.update=function(t){var e=this._texture;if(!e||!e.valid)return!1;if(!t&&this._updateID===e._updateID)return!1;this._updateID=e._updateID;var i=e._uvs;this.mapCoord.set(i.x1-i.x0,i.y1-i.y0,i.x3-i.x0,i.y3-i.y0,i.x0,i.y0);var n=e.orig,r=e.trim;r&&(re.set(n.width/r.width,0,0,n.height/r.height,-r.x/r.width,-r.y/r.height),this.mapCoord.append(re));t=e.baseTexture,i=this.uClampFrame,n=this.clampMargin/t.resolution,r=this.clampOffset;return i[0]=(e._frame.x+n+r)/t.width,i[1]=(e._frame.y+n+r)/t.height,i[2]=(e._frame.x+e._frame.width-n+r)/t.width,i[3]=(e._frame.y+e._frame.height-n+r)/t.height,this.uClampOffset[0]=r/t.realWidth,this.uClampOffset[1]=r/t.realHeight,this.isSimple=e._frame.width===t.width&&e._frame.height===t.height&&0===e.rotate,!0},Object.defineProperties(ne.prototype,L);var se,oe=((se=u)&&(ae.__proto__=se),((ae.prototype=Object.create(se&&se.prototype)).constructor=ae).prototype.apply=function(t,e,i,n){var r=this.maskSprite,s=this.maskSprite.texture;s.valid&&(s.transform||(s.transform=new ne(s,0)),s.transform.update(),this.uniforms.npmAlpha=s.baseTexture.alphaMode?0:1,this.uniforms.mask=s,this.uniforms.otherMatrix=t.calculateSpriteMatrix(this.maskMatrix,r).prepend(s.transform.mapCoord),this.uniforms.alpha=r.worldAlpha,this.uniforms.maskClamp=s.transform.uClampFrame,t.applyFilter(this,e,i,n))},ae);function ae(t){var e=new h.Matrix;se.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 otherMatrix;\n\nvarying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;\n}\n","varying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform sampler2D mask;\nuniform float alpha;\nuniform float npmAlpha;\nuniform vec4 maskClamp;\n\nvoid main(void)\n{\n    float clip = step(3.5,\n        step(maskClamp.x, vMaskCoord.x) +\n        step(maskClamp.y, vMaskCoord.y) +\n        step(vMaskCoord.x, maskClamp.z) +\n        step(vMaskCoord.y, maskClamp.w));\n\n    vec4 original = texture2D(uSampler, vTextureCoord);\n    vec4 masky = texture2D(mask, vMaskCoord);\n    float alphaMul = 1.0 - npmAlpha * (1.0 - masky.a);\n\n    original *= (alphaMul * masky.r * alpha * clip);\n\n    gl_FragColor = original;\n}\n"),t.renderable=!1,this.maskSprite=t,this.maskMatrix=e}i.SpriteMaskFilter=oe;function he(t,e){this.program=t,this.uniformData=e,this.uniformGroups={}}var le,ue,ce,pe,de,_e,fe=((_e=t)&&(Se.__proto__=_e),((Se.prototype=Object.create(_e&&_e.prototype)).constructor=Se).prototype.setMaskStack=function(t){this.maskStack=t,this.renderer.scissor.setMaskStack(t),this.renderer.stencil.setMaskStack(t)},Se.prototype.push=function(t,e){var i;switch(e.isMaskData||((i=this.maskDataPool.pop()||new St).pooled=!0,i.maskObject=e,e=i),e.autoDetect&&this.detect(e),e.copyCountersOrReset(this.maskStack[this.maskStack.length-1]),e._target=t,e.type){case y.MASK_TYPES.SCISSOR:this.maskStack.push(e),this.renderer.scissor.push(e);break;case y.MASK_TYPES.STENCIL:this.maskStack.push(e),this.renderer.stencil.push(e);break;case y.MASK_TYPES.SPRITE:e.copyCountersOrReset(null),this.pushSpriteMask(e),this.maskStack.push(e)}},Se.prototype.pop=function(t){var e=this.maskStack.pop();if(e&&e._target===t){switch(e.type){case y.MASK_TYPES.SCISSOR:this.renderer.scissor.pop();break;case y.MASK_TYPES.STENCIL:this.renderer.stencil.pop(e.maskObject);break;case y.MASK_TYPES.SPRITE:this.popSpriteMask()}e.reset(),e.pooled&&this.maskDataPool.push(e)}},Se.prototype.detect=function(t){var e,i=t.maskObject;i.isSprite?t.type=y.MASK_TYPES.SPRITE:(t.type=y.MASK_TYPES.STENCIL,this.enableScissor&&i.isFastRect&&i.isFastRect()&&(e=i.worldTransform,i=Math.atan2(e.b,e.a),e=Math.atan2(e.d,e.c),i=Math.round(i*(180/Math.PI)*100),e=((e=Math.round(e*(180/Math.PI)*100)-i)%18e3+18e3)%18e3,0==(i=(i%9e3+9e3)%9e3)&&9e3==e&&(t.type=y.MASK_TYPES.SCISSOR)))},Se.prototype.pushSpriteMask=function(t){var e=t.maskObject,i=t._target,n=this.alphaMaskPool[this.alphaMaskIndex];(n=n||(this.alphaMaskPool[this.alphaMaskIndex]=[new oe(e)]))[0].resolution=this.renderer.resolution,n[0].maskSprite=e;t=i.filterArea;i.filterArea=e.getBounds(!0),this.renderer.filter.push(i,n),i.filterArea=t,this.alphaMaskIndex++},Se.prototype.popSpriteMask=function(){this.renderer.filter.pop(),this.alphaMaskIndex--},Se),u=((de=t)&&(Ae.__proto__=de),((Ae.prototype=Object.create(de&&de.prototype)).constructor=Ae).prototype.getStackLength=function(){return this.maskStack.length},Ae.prototype.setMaskStack=function(t){var e=this.renderer.gl,i=this.getStackLength();this.maskStack=t;t=this.getStackLength();t!==i&&(0===t?e.disable(this.glConst):(e.enable(this.glConst),this._useCurrent()))},Ae.prototype._useCurrent=function(){},Ae.prototype.destroy=function(){de.prototype.destroy.call(this,this),this.maskStack=null},Ae),me=((pe=u)&&($e.__proto__=pe),(($e.prototype=Object.create(pe&&pe.prototype)).constructor=$e).prototype.getStackLength=function(){var t=this.maskStack[this.maskStack.length-1];return t?t._scissorCounter:0},$e.prototype.push=function(t){var e=t.maskObject;e.renderable=!0;var i=t._scissorRect,n=e.getBounds(!0),r=this.renderer.gl;e.renderable=!1,i?n.fit(i):r.enable(r.SCISSOR_TEST),t._scissorCounter++,t._scissorRect=n,this._useCurrent()},$e.prototype.pop=function(){var t=this.renderer.gl;0<this.getStackLength()?this._useCurrent():t.disable(t.SCISSOR_TEST)},$e.prototype._useCurrent=function(){var t=this.maskStack[this.maskStack.length-1]._scissorRect,e=this.renderer.renderTexture.current,i=this.renderer.projection,n=i.transform,r=i.sourceFrame,s=i.destinationFrame,o=(e||this.renderer).resolution,i=(t.x-r.x)*o+s.x,r=(t.y-r.y)*o+s.y,s=t.width*o,t=t.height*o;n&&(i+=n.tx*o,r+=n.ty*o),e||(r=this.renderer.height-t-r),this.renderer.gl.scissor(i,r,s,t)},$e),ye=((ce=u)&&(Ee.__proto__=ce),((Ee.prototype=Object.create(ce&&ce.prototype)).constructor=Ee).prototype.getStackLength=function(){var t=this.maskStack[this.maskStack.length-1];return t?t._stencilCounter:0},Ee.prototype.push=function(t){var e=t.maskObject,i=this.renderer.gl,n=t._stencilCounter;0===n&&(this.renderer.framebuffer.forceStencil(),i.enable(i.STENCIL_TEST)),t._stencilCounter++,i.colorMask(!1,!1,!1,!1),i.stencilFunc(i.EQUAL,n,this._getBitwiseMask()),i.stencilOp(i.KEEP,i.KEEP,i.INCR),e.renderable=!0,e.render(this.renderer),this.renderer.batch.flush(),e.renderable=!1,this._useCurrent()},Ee.prototype.pop=function(t){var e=this.renderer.gl;0===this.getStackLength()?(e.disable(e.STENCIL_TEST),e.clear(e.STENCIL_BUFFER_BIT),e.clearStencil(0)):(e.colorMask(!1,!1,!1,!1),e.stencilOp(e.KEEP,e.KEEP,e.DECR),t.renderable=!0,t.render(this.renderer),this.renderer.batch.flush(),t.renderable=!1,this._useCurrent())},Ee.prototype._useCurrent=function(){var t=this.renderer.gl;t.colorMask(!0,!0,!0,!0),t.stencilFunc(t.EQUAL,this.getStackLength(),this._getBitwiseMask()),t.stencilOp(t.KEEP,t.KEEP,t.KEEP)},Ee.prototype._getBitwiseMask=function(){return(1<<this.getStackLength())-1},Ee),ge=((ue=t)&&(be.__proto__=ue),((be.prototype=Object.create(ue&&ue.prototype)).constructor=be).prototype.update=function(t,e,i,n){this.destinationFrame=t||this.destinationFrame||this.defaultFrame,this.sourceFrame=e||this.sourceFrame||t,this.calculateProjection(this.destinationFrame,this.sourceFrame,i,n),this.transform&&this.projectionMatrix.append(this.transform);n=this.renderer;n.globalUniforms.uniforms.projectionMatrix=this.projectionMatrix,n.globalUniforms.update(),n.shader.shader&&n.shader.syncUniformGroup(n.shader.shader.uniforms.globals)},be.prototype.calculateProjection=function(t,e,i,n){var r=this.projectionMatrix;n?(r.a=1/t.width*2*i,r.d=-1/t.height*2*i,r.tx=-1-e.x*r.a,r.ty=1-e.y*r.d):(r.a=1/t.width*2*i,r.d=1/t.height*2*i,r.tx=-1-e.x*r.a,r.ty=-1-e.y*r.d)},be.prototype.setTransform=function(){},be),ve=new h.Rectangle,we=((le=t)&&(xe.__proto__=le),((xe.prototype=Object.create(le&&le.prototype)).constructor=xe).prototype.bind=function(t,e,i){void 0===t&&(t=null),this.current=t;var n,r=this.renderer;t?(n=(t=t.baseTexture).resolution,i||(ve.width=t.realWidth,ve.height=t.realHeight,i=ve),e=e||i,this.renderer.framebuffer.bind(t.framebuffer,i),this.renderer.projection.update(i,e,n,!1),this.renderer.mask.setMaskStack(t.maskStack)):(n=this.renderer.resolution,i||(ve.width=r.width,ve.height=r.height,i=ve),e=e||i,r.framebuffer.bind(null,i),this.renderer.projection.update(i,e,n,!0),this.renderer.mask.setMaskStack(this.defaultMaskStack)),this.sourceFrame.copyFrom(e),this.destinationFrame.x=i.x/n,this.destinationFrame.y=i.y/n,this.destinationFrame.width=i.width/n,this.destinationFrame.height=i.height/n,e===i&&this.sourceFrame.copyFrom(this.destinationFrame)},xe.prototype.clear=function(t){t=this.current?t||this.current.baseTexture.clearColor:t||this.clearColor,this.renderer.framebuffer.clear(t[0],t[1],t[2],t[3])},xe.prototype.resize=function(){this.bind(null)},xe.prototype.reset=function(){this.bind(null)},xe);function xe(t){le.call(this,t),this.clearColor=t._backgroundColorRgba,this.defaultMaskStack=[],this.current=null,this.sourceFrame=new h.Rectangle,this.destinationFrame=new h.Rectangle}function be(t){ue.call(this,t),this.destinationFrame=null,this.sourceFrame=null,this.defaultFrame=null,this.projectionMatrix=new h.Matrix,this.transform=null}function Ee(t){ce.call(this,t),this.glConst=WebGLRenderingContext.STENCIL_TEST}function $e(t){pe.call(this,t),this.glConst=WebGLRenderingContext.SCISSOR_TEST}function Ae(t){de.call(this,t),this.maskStack=[],this.glConst=0}function Se(t){_e.call(this,t),this.scissorRenderTarget=null,this.enableScissor=!1,this.alphaMaskPool=[],this.maskDataPool=[],this.maskStack=[],this.alphaMaskIndex=0}(i.GLProgram=he).prototype.destroy=function(){this.uniformData=null,this.uniformGroups=null,this.program=null};var Te,Ce=0,Me={textureCount:0},Ie=((Te=t)&&(Pe.__proto__=Te),((Pe.prototype=Object.create(Te&&Te.prototype)).constructor=Pe).prototype.systemCheck=function(){if(!function(){if("boolean"==typeof Wt)return Wt;try{var t=new Function("param1","param2","param3","return param1[param2] === param3;");Wt=!0===t({a:"b"},"a","b")}catch(t){Wt=!1}return Wt}())throw new Error("Current environment does not allow unsafe-eval, please use @pixi/unsafe-eval module to enable support.")},Pe.prototype.contextChange=function(t){this.gl=t,this.reset()},Pe.prototype.bind=function(t,e){t.uniforms.globals=this.renderer.globalUniforms;var i=t.program,n=i.glPrograms[this.renderer.CONTEXT_UID]||this.generateShader(t);return this.shader=t,this.program!==i&&(this.program=i,this.gl.useProgram(n.program)),e||(Me.textureCount=0,this.syncUniformGroup(t.uniformGroup,Me)),n},Pe.prototype.setUniforms=function(t){var e=this.shader.program,i=e.glPrograms[this.renderer.CONTEXT_UID];e.syncUniforms(i.uniformData,t,this.renderer)},Pe.prototype.syncUniformGroup=function(t,e){var i=this.getglProgram();t.static&&t.dirtyId===i.uniformGroups[t.id]||(i.uniformGroups[t.id]=t.dirtyId,this.syncUniforms(t,i,e))},Pe.prototype.syncUniforms=function(t,e,i){(t.syncUniforms[this.shader.program.id]||this.createSyncGroups(t))(e.uniformData,t.uniforms,this.renderer,i)},Pe.prototype.createSyncGroups=function(t){var e=this.getSignature(t,this.shader.program.uniformData);return this.cache[e]||(this.cache[e]=function(t,e){var i,n="var v = null;\n    var cv = null\n    var t = 0;\n    var gl = renderer.gl\n    ";for(i in t.uniforms){var r=e[i];r?"float"===r.type&&1===r.size?n+="\n            if(uv."+i+" !== ud."+i+".value)\n            {\n                ud."+i+".value = uv."+i+"\n                gl.uniform1f(ud."+i+".location, uv."+i+")\n            }\n":"sampler2D"!==r.type&&"samplerCube"!==r.type&&"sampler2DArray"!==r.type||1!==r.size||r.isArray?"mat3"===r.type&&1===r.size?void 0!==t.uniforms[i].a?n+="\n                gl.uniformMatrix3fv(ud."+i+".location, false, uv."+i+".toArray(true));\n                \n":n+="\n                gl.uniformMatrix3fv(ud."+i+".location, false, uv."+i+");\n                \n":"vec2"===r.type&&1===r.size?void 0!==t.uniforms[i].x?n+="\n                cv = ud."+i+".value;\n                v = uv."+i+";\n\n                if(cv[0] !== v.x || cv[1] !== v.y)\n                {\n                    cv[0] = v.x;\n                    cv[1] = v.y;\n                    gl.uniform2f(ud."+i+".location, v.x, v.y);\n                }\n":n+="\n                cv = ud."+i+".value;\n                v = uv."+i+";\n\n                if(cv[0] !== v[0] || cv[1] !== v[1])\n                {\n                    cv[0] = v[0];\n                    cv[1] = v[1];\n                    gl.uniform2f(ud."+i+".location, v[0], v[1]);\n                }\n                \n":"vec4"===r.type&&1===r.size?void 0!==t.uniforms[i].width?n+="\n                cv = ud."+i+".value;\n                v = uv."+i+";\n\n                if(cv[0] !== v.x || cv[1] !== v.y || cv[2] !== v.width || cv[3] !== v.height)\n                {\n                    cv[0] = v.x;\n                    cv[1] = v.y;\n                    cv[2] = v.width;\n                    cv[3] = v.height;\n                    gl.uniform4f(ud."+i+".location, v.x, v.y, v.width, v.height)\n                }\n":n+="\n                cv = ud."+i+".value;\n                v = uv."+i+";\n\n                if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n                {\n                    cv[0] = v[0];\n                    cv[1] = v[1];\n                    cv[2] = v[2];\n                    cv[3] = v[3];\n\n                    gl.uniform4f(ud."+i+".location, v[0], v[1], v[2], v[3])\n                }\n                \n":n+="\n            cv = ud."+i+".value;\n            v = uv."+i+";\n            "+(1===r.size?zt:qt)[r.type].replace("location","ud."+i+".location")+";\n":n+="\n\n            t = syncData.textureCount++;\n\n            renderer.texture.bind(uv."+i+", t);\n            \n            if(ud."+i+".value !== t)\n            {\n                ud."+i+".value = t;\n                gl.uniform1i(ud."+i+".location, t);\n; // eslint-disable-line max-len\n            }\n":t.uniforms[i].group&&(n+="\n                    renderer.shader.syncUniformGroup(uv."+i+", syncData);\n                ")}return new Function("ud","uv","renderer","syncData",n)}(t,this.shader.program.uniformData)),t.syncUniforms[this.shader.program.id]=this.cache[e],t.syncUniforms[this.shader.program.id]},Pe.prototype.getSignature=function(t,e){var i,n=[];for(i in t.uniforms)n.push(i),e[i]&&n.push(e[i].type);return n.join("-")},Pe.prototype.getglProgram=function(){return this.shader?this.shader.program.glPrograms[this.renderer.CONTEXT_UID]:null},Pe.prototype.generateShader=function(t){var e,i=this.gl,n=t.program,r={};for(e in n.attributeData)r[e]=n.attributeData[e].location;var s,o=Rt(i,n.vertexSrc,n.fragmentSrc,r),a={};for(s in n.uniformData){var h=n.uniformData[s];a[s]={location:i.getUniformLocation(o,s),value:kt(h.type,h.size)}}t=new he(o,a);return n.glPrograms[this.renderer.CONTEXT_UID]=t},Pe.prototype.reset=function(){this.program=null,this.shader=null},Pe.prototype.destroy=function(){this.destroyed=!0},Pe);function Pe(t){Te.call(this,t),this.systemCheck(),this.gl=null,this.shader=null,this.program=null,this.cache={},this.id=Ce++}function Oe(t){this.texture=t,this.width=-1,this.height=-1,this.dirtyId=-1,this.dirtyStyleId=-1,this.mipmap=!1,this.wrapMode=33071,this.type=6408,this.internalFormat=5121}var De,Re,Le=((Re=t)&&(Ne.__proto__=Re),((Ne.prototype=Object.create(Re&&Re.prototype)).constructor=Ne).prototype.contextChange=function(t){var e;this.gl=t,this.blendModes=(t=t,void 0===e&&(e=[]),e[y.BLEND_MODES.NORMAL]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[y.BLEND_MODES.ADD]=[t.ONE,t.ONE],e[y.BLEND_MODES.MULTIPLY]=[t.DST_COLOR,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[y.BLEND_MODES.SCREEN]=[t.ONE,t.ONE_MINUS_SRC_COLOR,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[y.BLEND_MODES.OVERLAY]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[y.BLEND_MODES.DARKEN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[y.BLEND_MODES.LIGHTEN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[y.BLEND_MODES.COLOR_DODGE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[y.BLEND_MODES.COLOR_BURN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[y.BLEND_MODES.HARD_LIGHT]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[y.BLEND_MODES.SOFT_LIGHT]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[y.BLEND_MODES.DIFFERENCE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[y.BLEND_MODES.EXCLUSION]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[y.BLEND_MODES.HUE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[y.BLEND_MODES.SATURATION]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[y.BLEND_MODES.COLOR]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[y.BLEND_MODES.LUMINOSITY]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[y.BLEND_MODES.NONE]=[0,0],e[y.BLEND_MODES.NORMAL_NPM]=[t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[y.BLEND_MODES.ADD_NPM]=[t.SRC_ALPHA,t.ONE,t.ONE,t.ONE],e[y.BLEND_MODES.SCREEN_NPM]=[t.SRC_ALPHA,t.ONE_MINUS_SRC_COLOR,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[y.BLEND_MODES.SRC_IN]=[t.DST_ALPHA,t.ZERO],e[y.BLEND_MODES.SRC_OUT]=[t.ONE_MINUS_DST_ALPHA,t.ZERO],e[y.BLEND_MODES.SRC_ATOP]=[t.DST_ALPHA,t.ONE_MINUS_SRC_ALPHA],e[y.BLEND_MODES.DST_OVER]=[t.ONE_MINUS_DST_ALPHA,t.ONE],e[y.BLEND_MODES.DST_IN]=[t.ZERO,t.SRC_ALPHA],e[y.BLEND_MODES.DST_OUT]=[t.ZERO,t.ONE_MINUS_SRC_ALPHA],e[y.BLEND_MODES.DST_ATOP]=[t.ONE_MINUS_DST_ALPHA,t.SRC_ALPHA],e[y.BLEND_MODES.XOR]=[t.ONE_MINUS_DST_ALPHA,t.ONE_MINUS_SRC_ALPHA],e[y.BLEND_MODES.SUBTRACT]=[t.ONE,t.ONE,t.ONE,t.ONE,t.FUNC_REVERSE_SUBTRACT,t.FUNC_ADD],e),this.set(this.defaultState),this.reset()},Ne.prototype.set=function(t){if(t=t||this.defaultState,this.stateId!==t.data){for(var e=this.stateId^t.data,i=0;e;)1&e&&this.map[i].call(this,!!(t.data&1<<i)),e>>=1,i++;this.stateId=t.data}for(var n=0;n<this.checks.length;n++)this.checks[n](this,t)},Ne.prototype.forceState=function(t){t=t||this.defaultState;for(var e=0;e<this.map.length;e++)this.map[e].call(this,!!(t.data&1<<e));for(var i=0;i<this.checks.length;i++)this.checks[i](this,t);this.stateId=t.data},Ne.prototype.setBlend=function(t){this.updateCheck(Ne.checkBlendMode,t),this.gl[t?"enable":"disable"](this.gl.BLEND)},Ne.prototype.setOffset=function(t){this.updateCheck(Ne.checkPolygonOffset,t),this.gl[t?"enable":"disable"](this.gl.POLYGON_OFFSET_FILL)},Ne.prototype.setDepthTest=function(t){this.gl[t?"enable":"disable"](this.gl.DEPTH_TEST)},Ne.prototype.setCullFace=function(t){this.gl[t?"enable":"disable"](this.gl.CULL_FACE)},Ne.prototype.setFrontFace=function(t){this.gl.frontFace(this.gl[t?"CW":"CCW"])},Ne.prototype.setBlendMode=function(t){var e;t!==this.blendMode&&(this.blendMode=t,e=this.blendModes[t],t=this.gl,2===e.length?t.blendFunc(e[0],e[1]):t.blendFuncSeparate(e[0],e[1],e[2],e[3]),6===e.length?(this._blendEq=!0,t.blendEquationSeparate(e[4],e[5])):this._blendEq&&(this._blendEq=!1,t.blendEquationSeparate(t.FUNC_ADD,t.FUNC_ADD)))},Ne.prototype.setPolygonOffset=function(t,e){this.gl.polygonOffset(t,e)},Ne.prototype.reset=function(){this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.forceState(0),this._blendEq=!0,this.blendMode=-1,this.setBlendMode(0)},Ne.prototype.updateCheck=function(t,e){var i=this.checks.indexOf(t);e&&-1===i?this.checks.push(t):e||-1===i||this.checks.splice(i,1)},Ne.checkBlendMode=function(t,e){t.setBlendMode(e.blendMode)},Ne.checkPolygonOffset=function(t,e){t.setPolygonOffset(e.polygonOffset,0)},Ne),ke=((De=t)&&(Fe.__proto__=De),((Fe.prototype=Object.create(De&&De.prototype)).constructor=Fe).prototype.postrender=function(){this.renderer.renderingToScreen&&(this.count++,this.mode!==y.GC_MODES.MANUAL&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run())))},Fe.prototype.run=function(){for(var t=this.renderer.texture,e=t.managedTextures,i=!1,n=0;n<e.length;n++){var r=e[n];!r.framebuffer&&this.count-r.touched>this.maxIdle&&(t.destroyTexture(r,!0),i=!(e[n]=null))}if(i){for(var s=0,o=0;o<e.length;o++)null!==e[o]&&(e[s++]=e[o]);e.length=s}},Fe.prototype.unload=function(t){var e=this.renderer.textureSystem;t._texture&&t._texture._glRenderTargets&&e.destroyTexture(t._texture);for(var i=t.children.length-1;0<=i;i--)this.unload(t.children[i])},Fe);function Fe(t){De.call(this,t),this.count=0,this.checkCount=0,this.maxIdle=g.settings.GC_MAX_IDLE,this.checkCountMax=g.settings.GC_MAX_CHECK_COUNT,this.mode=g.settings.GC_MODE}function Ne(t){Re.call(this,t),this.gl=null,this.stateId=0,this.polygonOffset=0,this.blendMode=y.BLEND_MODES.NONE,this._blendEq=!1,this.map=[],this.map[0]=this.setBlend,this.map[1]=this.setOffset,this.map[2]=this.setCullFace,this.map[3]=this.setDepthTest,this.map[4]=this.setFrontFace,this.checks=[],this.defaultState=new ie,this.defaultState.blend=!0,this.defaultState.depth=!0}i.GLTexture=Oe;var Be,Ue=((Be=t)&&(Xe.__proto__=Be),((Xe.prototype=Object.create(Be&&Be.prototype)).constructor=Xe).prototype.contextChange=function(){var t=this.gl=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.webGLVersion=this.renderer.context.webGLVersion;var e=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS);this.boundTextures.length=e;for(var i=0;i<e;i++)this.boundTextures[i]=null;this.emptyTextures={};var n=new Oe(t.createTexture());t.bindTexture(t.TEXTURE_2D,n.texture),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,new Uint8Array(4)),this.emptyTextures[t.TEXTURE_2D]=n,this.emptyTextures[t.TEXTURE_CUBE_MAP]=new Oe(t.createTexture()),t.bindTexture(t.TEXTURE_CUBE_MAP,this.emptyTextures[t.TEXTURE_CUBE_MAP].texture);for(var r=0;r<6;r++)t.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+r,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,null);t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_MIN_FILTER,t.LINEAR);for(var s=0;s<this.boundTextures.length;s++)this.bind(null,s)},Xe.prototype.bind=function(t,e){void 0===e&&(e=0);var i,n=this.gl;t?(t=t.baseTexture||t).valid&&(t.touched=this.renderer.textureGC.count,i=t._glTextures[this.CONTEXT_UID]||this.initTexture(t),this.boundTextures[e]!==t&&(this.currentLocation!==e&&(this.currentLocation=e,n.activeTexture(n.TEXTURE0+e)),n.bindTexture(t.target,i.texture)),i.dirtyId!==t.dirtyId&&(this.currentLocation!==e&&(this.currentLocation=e,n.activeTexture(n.TEXTURE0+e)),this.updateTexture(t)),this.boundTextures[e]=t):(this.currentLocation!==e&&(this.currentLocation=e,n.activeTexture(n.TEXTURE0+e)),n.bindTexture(n.TEXTURE_2D,this.emptyTextures[n.TEXTURE_2D].texture),this.boundTextures[e]=null)},Xe.prototype.reset=function(){this._unknownBoundTextures=!0,this.currentLocation=-1;for(var t=0;t<this.boundTextures.length;t++)this.boundTextures[t]=this.unknownTexture},Xe.prototype.unbind=function(t){var e=this.gl,i=this.boundTextures;if(this._unknownBoundTextures){this._unknownBoundTextures=!1;for(var n=0;n<i.length;n++)i[n]===this.unknownTexture&&this.bind(null,n)}for(var r=0;r<i.length;r++)i[r]===t&&(this.currentLocation!==r&&(e.activeTexture(e.TEXTURE0+r),this.currentLocation=r),e.bindTexture(e.TEXTURE_2D,this.emptyTextures[t.target].texture),i[r]=null)},Xe.prototype.initTexture=function(t){var e=new Oe(this.gl.createTexture());return e.dirtyId=-1,t._glTextures[this.CONTEXT_UID]=e,this.managedTextures.push(t),t.on("dispose",this.destroyTexture,this),e},Xe.prototype.initTextureType=function(t,e){var i;e.internalFormat=t.format,e.type=t.type,2===this.webGLVersion&&(i=this.renderer.gl,t.type===i.FLOAT&&t.format===i.RGBA&&(e.internalFormat=i.RGBA32F),t.type===y.TYPES.HALF_FLOAT&&(e.type=i.HALF_FLOAT),e.type===i.HALF_FLOAT&&t.format===i.RGBA&&(e.internalFormat=i.RGBA16F))},Xe.prototype.updateTexture=function(t){var e,i,n,r=t._glTextures[this.CONTEXT_UID];r&&(n=this.renderer,this.initTextureType(t,r),t.resource&&t.resource.upload(n,t,r)||(e=t.realWidth,i=t.realHeight,n=n.gl,(r.width!==e||r.height!==i||r.dirtyId<0)&&(r.width=e,r.height=i,n.texImage2D(t.target,0,r.internalFormat,e,i,0,t.format,r.type,null))),t.dirtyStyleId!==r.dirtyStyleId&&this.updateTextureStyle(t),r.dirtyId=t.dirtyId)},Xe.prototype.destroyTexture=function(t,e){var i=this.gl;!(t=t.baseTexture||t)._glTextures[this.CONTEXT_UID]||(this.unbind(t),i.deleteTexture(t._glTextures[this.CONTEXT_UID].texture),t.off("dispose",this.destroyTexture,this),delete t._glTextures[this.CONTEXT_UID],e)||-1!==(t=this.managedTextures.indexOf(t))&&(0,m.removeItems)(this.managedTextures,t,1)},Xe.prototype.updateTextureStyle=function(t){var e=t._glTextures[this.CONTEXT_UID];e&&(t.mipmap!==y.MIPMAP_MODES.POW2&&2===this.webGLVersion||t.isPowerOfTwo?e.mipmap=1<=t.mipmap:e.mipmap=0,2===this.webGLVersion||t.isPowerOfTwo?e.wrapMode=t.wrapMode:e.wrapMode=y.WRAP_MODES.CLAMP,t.resource&&t.resource.style(this.renderer,t,e)||this.setStyle(t,e),e.dirtyStyleId=t.dirtyStyleId)},Xe.prototype.setStyle=function(t,e){var i,n=this.gl;e.mipmap&&n.generateMipmap(t.target),n.texParameteri(t.target,n.TEXTURE_WRAP_S,e.wrapMode),n.texParameteri(t.target,n.TEXTURE_WRAP_T,e.wrapMode),e.mipmap?(n.texParameteri(t.target,n.TEXTURE_MIN_FILTER,t.scaleMode?n.LINEAR_MIPMAP_LINEAR:n.NEAREST_MIPMAP_NEAREST),(i=this.renderer.context.extensions.anisotropicFiltering)&&0<t.anisotropicLevel&&t.scaleMode===y.SCALE_MODES.LINEAR&&(e=Math.min(t.anisotropicLevel,n.getParameter(i.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),n.texParameterf(t.target,i.TEXTURE_MAX_ANISOTROPY_EXT,e))):n.texParameteri(t.target,n.TEXTURE_MIN_FILTER,t.scaleMode?n.LINEAR:n.NEAREST),n.texParameteri(t.target,n.TEXTURE_MAG_FILTER,t.scaleMode?n.LINEAR:n.NEAREST)},Xe),u={FilterSystem:wt,BatchSystem:Et,ContextSystem:Mt,FramebufferSystem:It,GeometrySystem:Ot,MaskSystem:fe,ScissorSystem:me,StencilSystem:ye,ProjectionSystem:ge,RenderTextureSystem:we,ShaderSystem:Ie,StateSystem:Le,TextureGCSystem:ke,TextureSystem:Ue};function Xe(t){Be.call(this,t),this.boundTextures=[],this.currentLocation=-1,this.managedTextures=[],this._unknownBoundTextures=!1,this.unknownTexture=new E}i.systems=u;var je=new h.Matrix,t=function(i){function t(t,e){i.call(this),(e=Object.assign({},g.settings.RENDER_OPTIONS,e)).roundPixels&&(g.settings.ROUND_PIXELS=e.roundPixels,(0,m.deprecation)("5.0.0","Renderer roundPixels option is deprecated, please use PIXI.settings.ROUND_PIXELS",2)),this.options=e,this.type=y.RENDERER_TYPE.UNKNOWN,this.screen=new h.Rectangle(0,0,e.width,e.height),this.view=e.view||document.createElement("canvas"),this.resolution=e.resolution||g.settings.RESOLUTION,this.transparent=e.transparent,this.autoDensity=e.autoDensity||e.autoResize||!1,this.preserveDrawingBuffer=e.preserveDrawingBuffer,this.clearBeforeRender=e.clearBeforeRender,this._backgroundColor=0,this._backgroundColorRgba=[0,0,0,0],this._backgroundColorString="#000000",this.backgroundColor=e.backgroundColor||this._backgroundColor,this._tempDisplayObjectParent=new s.Container,this._lastObjectRendered=this._tempDisplayObjectParent,this.plugins={}}i&&(t.__proto__=i);var e={width:{configurable:!0},height:{configurable:!0},backgroundColor:{configurable:!0}};return((t.prototype=Object.create(i&&i.prototype)).constructor=t).prototype.initPlugins=function(t){for(var e in t)this.plugins[e]=new t[e](this)},e.width.get=function(){return this.view.width},e.height.get=function(){return this.view.height},t.prototype.resize=function(t,e){this.screen.width=t,this.screen.height=e,this.view.width=t*this.resolution,this.view.height=e*this.resolution,this.autoDensity&&(this.view.style.width=t+"px",this.view.style.height=e+"px")},t.prototype.generateTexture=function(t,e,i,n){0===(n=n||t.getLocalBounds()).width&&(n.width=1),0===n.height&&(n.height=1);i=K.create(0|n.width,0|n.height,e,i);return je.tx=-n.x,je.ty=-n.y,this.render(t,i,!1,je,!!t.parent),i},t.prototype.destroy=function(t){for(var e in this.plugins)this.plugins[e].destroy(),this.plugins[e]=null;t&&this.view.parentNode&&this.view.parentNode.removeChild(this.view),this.plugins=null,this.type=y.RENDERER_TYPE.UNKNOWN,this.view=null,this.screen=null,this.resolution=0,this.transparent=!1,this.autoDensity=!1,this.blendModes=null,this.options=null,this.preserveDrawingBuffer=!1,this.clearBeforeRender=!1,this._backgroundColor=0,this._backgroundColorRgba=null,this._backgroundColorString=null,this._tempDisplayObjectParent=null,this._lastObjectRendered=null},e.backgroundColor.get=function(){return this._backgroundColor},e.backgroundColor.set=function(t){this._backgroundColor=t,this._backgroundColorString=(0,m.hex2string)(t),(0,m.hex2rgb)(t,this._backgroundColorRgba)},Object.defineProperties(t.prototype,e),t}(m.EventEmitter);i.AbstractRenderer=t;var Ve,He=((Ve=t)&&(Ge.__proto__=Ve),((Ge.prototype=Object.create(Ve&&Ve.prototype)).constructor=Ge).create=function(t){if((0,m.isWebGLSupported)())return new Ge(t);throw new Error('WebGL unsupported in this browser, use "pixi.js-legacy" for fallback canvas2d support.')},Ge.prototype.addSystem=function(t,e){e=e||t.name;var i,n=new t(this);if(this[e])throw new Error('Whoops! The name "'+e+'" is already in use');for(i in this[e]=n,this.runners)this.runners[i].add(n);return this},Ge.prototype.render=function(t,e,i,n,r){this.renderingToScreen=!e,this.runners.prerender.run(),this.emit("prerender"),this.projection.transform=n,this.context.isLost||(e||(this._lastObjectRendered=t),r||(r=t.parent,t.parent=this._tempDisplayObjectParent,t.updateTransform(),t.parent=r),this.renderTexture.bind(e),this.batch.currentRenderer.start(),(void 0!==i?i:this.clearBeforeRender)&&this.renderTexture.clear(),t.render(this),this.batch.currentRenderer.flush(),e&&e.baseTexture.update(),this.runners.postrender.run(),this.projection.transform=null,this.emit("postrender"))},Ge.prototype.resize=function(t,e){Ve.prototype.resize.call(this,t,e),this.runners.resize.run(t,e)},Ge.prototype.reset=function(){return this.runners.reset.run(),this},Ge.prototype.clear=function(){this.framebuffer.bind(),this.framebuffer.clear()},Ge.prototype.destroy=function(t){for(var e in this.runners.destroy.run(),this.runners)this.runners[e].destroy();Ve.prototype.destroy.call(this,t),this.gl=null},Ge.registerPlugin=function(t,e){(Ge.__plugins=Ge.__plugins||{})[t]=e},Ge);function Ge(t){void 0===t&&(t={}),Ve.call(this,"WebGL",t),t=this.options,this.type=y.RENDERER_TYPE.WEBGL,this.gl=null,this.CONTEXT_UID=0,this.runners={destroy:new n.Runner("destroy"),contextChange:new n.Runner("contextChange",1),reset:new n.Runner("reset"),update:new n.Runner("update"),postrender:new n.Runner("postrender"),prerender:new n.Runner("prerender"),resize:new n.Runner("resize",2)},this.globalUniforms=new mt({projectionMatrix:new h.Matrix},!0),this.addSystem(fe,"mask").addSystem(Mt,"context").addSystem(Le,"state").addSystem(Ie,"shader").addSystem(Ue,"texture").addSystem(Ot,"geometry").addSystem(It,"framebuffer").addSystem(me,"scissor").addSystem(ye,"stencil").addSystem(ge,"projection").addSystem(ke,"textureGC").addSystem(wt,"filter").addSystem(we,"renderTexture").addSystem(Et,"batch"),this.initPlugins(Ge.__plugins),t.context?this.context.initFromContext(t.context):this.context.initFromOptions({alpha:this.transparent,antialias:t.antialias,premultipliedAlpha:this.transparent&&"notMultiplied"!==this.transparent,stencil:!0,preserveDrawingBuffer:t.preserveDrawingBuffer,powerPreference:this.options.powerPreference}),this.renderingToScreen=!0,(0,m.sayHello)(2===this.context.webGLVersion?"WebGL 2":"WebGL 1"),this.resize(this.options.width,this.options.height)}i.Renderer=He,i.defaultVertex="attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}",i.defaultFilterVertex="attribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvec2 filterTextureCoord( void )\n{\n    return aVertexPosition * (outputFrame.zw * inputSize.zw);\n}\n\nvoid main(void)\n{\n    gl_Position = filterVertexPosition();\n    vTextureCoord = filterTextureCoord();\n}\n";var Ye,u=((Ye=E)&&(We.__proto__=Ye),((We.prototype=Object.create(Ye&&Ye.prototype)).constructor=We).from=function(t,e){return new We(new I(t,e))},We);function We(){Ye.apply(this,arguments)}i.CubeTexture=u;function ze(){this.texArray=null,this.blend=0,this.type=y.DRAW_MODES.TRIANGLES,this.start=0,this.size=0,this.data=null}i.BatchDrawCall=ze;function qe(){this.elements=[],this.ids=[],this.count=0}(i.BatchTextureArray=qe).prototype.clear=function(){for(var t=0;t<this.count;t++)this.elements[t]=null;this.count=0};function Je(t){this.rawBinaryData=new ArrayBuffer(t),this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData)}i.ViewableBuffer=Je;t={int8View:{configurable:!0},uint8View:{configurable:!0},int16View:{configurable:!0},uint16View:{configurable:!0},int32View:{configurable:!0}};t.int8View.get=function(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View},t.uint8View.get=function(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View},t.int16View.get=function(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View},t.uint16View.get=function(){return this._uint16View||(this._uint16View=new Uint16Array(this.rawBinaryData)),this._uint16View},t.int32View.get=function(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View},Je.prototype.view=function(t){return this[t+"View"]},Je.prototype.destroy=function(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this._uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null},Je.sizeOf=function(t){switch(t){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(t+" isn't a valid view type")}},Object.defineProperties(Je.prototype,t);var Ke,Ze=((Ke=gt)&&(Qe.__proto__=Ke),((Qe.prototype=Object.create(Ke&&Ke.prototype)).constructor=Qe).prototype.contextChange=function(){var t=this.renderer.gl;g.settings.PREFER_ENV===y.ENV.WEBGL_LEGACY?this.MAX_TEXTURES=1:(this.MAX_TEXTURES=Math.min(t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),g.settings.SPRITE_MAX_TEXTURES),this.MAX_TEXTURES=Kt(this.MAX_TEXTURES,t)),this._shader=this.shaderGenerator.generateShader(this.MAX_TEXTURES);for(var e=0;e<this._packedGeometryPoolSize;e++)this._packedGeometries[e]=new this.geometryClass;this.initFlushBuffers()},Qe.prototype.initFlushBuffers=function(){for(var t=Qe._drawCallPool,e=Qe._textureArrayPool,i=this.size/4,n=Math.floor(i/this.MAX_TEXTURES)+1;t.length<i;)t.push(new ze);for(;e.length<n;)e.push(new qe);for(var r=0;r<this.MAX_TEXTURES;r++)this._tempBoundTextures[r]=null},Qe.prototype.onPrerender=function(){this._flushId=0},Qe.prototype.render=function(t){t._texture.valid&&(this._vertexCount+t.vertexData.length/2>this.size&&this.flush(),this._vertexCount+=t.vertexData.length/2,this._indexCount+=t.indices.length,this._bufferedTextures[this._bufferSize]=t._texture.baseTexture,this._bufferedElements[this._bufferSize++]=t)},Qe.prototype.buildTexturesAndDrawCalls=function(){var t=this._bufferedTextures,e=this.MAX_TEXTURES,i=Qe._textureArrayPool,n=this.renderer.batch,r=this._tempBoundTextures,s=this.renderer.textureGC.count,o=++E._globalBatch,a=0,h=i[0],l=0;n.copyBoundTextures(r,e);for(var u=0;u<this._bufferSize;++u){var c=t[u];t[u]=null,c._batchEnabled!==o&&(h.count>=e&&(n.boundArray(h,r,o,e),this.buildDrawCalls(h,l,u),l=u,h=i[++a],++o),c._batchEnabled=o,c.touched=s,h.elements[h.count++]=c)}0<h.count&&(n.boundArray(h,r,o,e),this.buildDrawCalls(h,l,this._bufferSize),++a,++o);for(var p=0;p<r.length;p++)r[p]=null;E._globalBatch=o},Qe.prototype.buildDrawCalls=function(t,e,i){var n=this._bufferedElements,r=this._attributeBuffer,s=this._indexBuffer,o=this.vertexSize,a=Qe._drawCallPool,h=this._dcIndex,l=this._aIndex,u=this._iIndex,c=a[h];c.start=this._iIndex,c.texArray=t;for(var p=e;p<i;++p){var d=n[p],_=d._texture.baseTexture,_=m.premultiplyBlendMode[_.alphaMode?1:0][d.blendMode];n[p]=null,e<p&&c.blend!==_&&(c.size=u-c.start,e=p,(c=a[++h]).texArray=t,c.start=u),this.packInterleavedGeometry(d,r,s,l,u),l+=d.vertexData.length/2*o,u+=d.indices.length,c.blend=_}e<i&&(c.size=u-c.start,++h),this._dcIndex=h,this._aIndex=l,this._iIndex=u},Qe.prototype.bindAndClearTexArray=function(t){for(var e=this.renderer.texture,i=0;i<t.count;i++)e.bind(t.elements[i],t.ids[i]),t.elements[i]=null;t.count=0},Qe.prototype.updateGeometry=function(){var t=this._packedGeometries,e=this._attributeBuffer,i=this._indexBuffer;g.settings.CAN_UPLOAD_SAME_BUFFER?(t[this._flushId]._buffer.update(e.rawBinaryData),t[this._flushId]._indexBuffer.update(i),this.renderer.geometry.updateBuffers()):(this._packedGeometryPoolSize<=this._flushId&&(this._packedGeometryPoolSize++,t[this._flushId]=new this.geometryClass),t[this._flushId]._buffer.update(e.rawBinaryData),t[this._flushId]._indexBuffer.update(i),this.renderer.geometry.bind(t[this._flushId]),this.renderer.geometry.updateBuffers(),this._flushId++)},Qe.prototype.drawBatches=function(){for(var t=this._dcIndex,e=this.renderer,i=e.gl,n=e.state,r=Qe._drawCallPool,s=null,o=0;o<t;o++){var a=r[o],h=a.texArray,l=a.type,u=a.size,c=a.start,a=a.blend;s!==h&&(s=h,this.bindAndClearTexArray(h)),this.state.blendMode=a,n.set(this.state),i.drawElements(l,u,i.UNSIGNED_SHORT,2*c)}},Qe.prototype.flush=function(){0!==this._vertexCount&&(this._attributeBuffer=this.getAttributeBuffer(this._vertexCount),this._indexBuffer=this.getIndexBuffer(this._indexCount),this._aIndex=0,this._iIndex=0,this._dcIndex=0,this.buildTexturesAndDrawCalls(),this.updateGeometry(),this.drawBatches(),this._bufferSize=0,this._vertexCount=0,this._indexCount=0)},Qe.prototype.start=function(){this.renderer.state.set(this.state),this.renderer.shader.bind(this._shader),g.settings.CAN_UPLOAD_SAME_BUFFER&&this.renderer.geometry.bind(this._packedGeometries[this._flushId])},Qe.prototype.stop=function(){this.flush()},Qe.prototype.destroy=function(){for(var t=0;t<this._packedGeometryPoolSize;t++)this._packedGeometries[t]&&this._packedGeometries[t].destroy();this.renderer.off("prerender",this.onPrerender,this),this._aBuffers=null,this._iBuffers=null,this._packedGeometries=null,this._attributeBuffer=null,this._indexBuffer=null,this._shader&&(this._shader.destroy(),this._shader=null),Ke.prototype.destroy.call(this)},Qe.prototype.getAttributeBuffer=function(t){var e=(0,m.nextPow2)(Math.ceil(t/8)),t=(0,m.log2)(e),e=8*e;this._aBuffers.length<=t&&(this._iBuffers.length=t+1);t=this._aBuffers[e];return t||(this._aBuffers[e]=t=new Je(e*this.vertexSize*4)),t},Qe.prototype.getIndexBuffer=function(t){var e=(0,m.nextPow2)(Math.ceil(t/12)),i=(0,m.log2)(e),t=12*e;this._iBuffers.length<=i&&(this._iBuffers.length=i+1);e=this._iBuffers[i];return e||(this._iBuffers[i]=e=new Uint16Array(t)),e},Qe.prototype.packInterleavedGeometry=function(t,e,i,n,r){for(var s=e.uint32View,o=e.float32View,a=n/this.vertexSize,h=t.uvs,l=t.indices,u=t.vertexData,c=t._texture.baseTexture._batchLocation,e=Math.min(t.worldAlpha,1),p=e<1&&t._texture.baseTexture.alphaMode?(0,m.premultiplyTint)(t._tintRGB,e):t._tintRGB+(255*e<<24),d=0;d<u.length;d+=2)o[n++]=u[d],o[n++]=u[d+1],o[n++]=h[d],o[n++]=h[d+1],s[n++]=p,o[n++]=c;for(var _=0;_<l.length;_++)i[r++]=a+l[_]},Qe);function Qe(t){Ke.call(this,t),this.shaderGenerator=null,this.geometryClass=null,this.vertexSize=null,this.state=ie.for2d(),this.size=4*g.settings.SPRITE_BATCH_SIZE,this._vertexCount=0,this._indexCount=0,this._bufferedElements=[],this._bufferedTextures=[],this._bufferSize=0,this._shader=null,this._packedGeometries=[],this._packedGeometryPoolSize=2,this._flushId=0,this._aBuffers={},this._iBuffers={},this.MAX_TEXTURES=1,this.renderer.on("prerender",this.onPrerender,this),t.runners.contextChange.add(this),this._dcIndex=0,this._aIndex=0,this._iIndex=0,this._attributeBuffer=null,this._indexBuffer=null,this._tempBoundTextures=[]}(i.AbstractBatchRenderer=Ze)._drawCallPool=[],Ze._textureArrayPool=[];function ti(t,e){if(this.vertexSrc=t,this.fragTemplate=e,this.programCache={},this.defaultGroupCache={},e.indexOf("%count%")<0)throw new Error('Fragment template must contain "%count%".');if(e.indexOf("%forloop%")<0)throw new Error('Fragment template must contain "%forloop%".')}(i.BatchShaderGenerator=ti).prototype.generateShader=function(t){if(!this.programCache[t]){for(var e=new Int32Array(t),i=0;i<t;i++)e[i]=i;this.defaultGroupCache[t]=mt.from({uSamplers:e},!0);var n=(n=(n=this.fragTemplate).replace(/%count%/gi,""+t)).replace(/%forloop%/gi,this.generateSampleSrc(t));this.programCache[t]=new te(this.vertexSrc,n)}n={tint:new Float32Array([1,1,1,1]),translationMatrix:new h.Matrix,default:this.defaultGroupCache[t]};return new ee(this.programCache[t],n)},ti.prototype.generateSampleSrc=function(t){var e="";e+="\n",e+="\n";for(var i=0;i<t;i++)0<i&&(e+="\nelse "),i<t-1&&(e+="if(vTextureId < "+i+".5)"),e+="\n{",e+="\n\tcolor = texture2D(uSamplers["+i+"], vTextureCoord);",e+="\n}";return(e+="\n")+"\n"};var ei,ii=((ei=rt)&&(ni.__proto__=ei),(ni.prototype=Object.create(ei&&ei.prototype)).constructor=ni);function ni(t){void 0===t&&(t=!1),ei.call(this),this._buffer=new et(null,t,!1),this._indexBuffer=new et(null,t,!0),this.addAttribute("aVertexPosition",this._buffer,2,!1,y.TYPES.FLOAT).addAttribute("aTextureCoord",this._buffer,2,!1,y.TYPES.FLOAT).addAttribute("aColor",this._buffer,4,!0,y.TYPES.UNSIGNED_BYTE).addAttribute("aTextureId",this._buffer,1,!0,y.TYPES.FLOAT).addIndex(this._indexBuffer)}i.BatchGeometry=ii;var ri="precision highp float;\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\nattribute float aTextureId;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform vec4 tint;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\n\nvoid main(void){\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vTextureId = aTextureId;\n    vColor = aColor * tint;\n}\n",si="varying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\nuniform sampler2D uSamplers[%count%];\n\nvoid main(void){\n    vec4 color;\n    %forloop%\n    gl_FragColor = color * vColor;\n}\n",u=function(){},t={defaultVertexSrc:{configurable:!0},defaultFragmentTemplate:{configurable:!0}};(i.BatchPluginFactory=u).create=function(t){var e,t=Object.assign({vertex:ri,fragment:si,geometryClass:ii,vertexSize:6},t),i=t.vertex,n=t.fragment,r=t.vertexSize,s=t.geometryClass;return(e=Ze)&&(o.__proto__=e),(o.prototype=Object.create(e&&e.prototype)).constructor=o;function o(t){e.call(this,t),this.shaderGenerator=new ti(i,n),this.geometryClass=s,this.vertexSize=r}},t.defaultVertexSrc.get=function(){return ri},t.defaultFragmentTemplate.get=function(){return si},Object.defineProperties(u,t);u=u.create();i.BatchRenderer=u},{"@pixi/runner":"jcTq","@pixi/utils":"x5Ec","@pixi/constants":"R76a","@pixi/settings":"v11T","@pixi/ticker":"t27b","@pixi/math":"GTL5","@pixi/display":"LJAM"}],HdTX:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.Application=void 0;function r(e){var i=this;e=Object.assign({forceCanvas:!1},e),this.renderer=(0,s.autoDetectRenderer)(e),this.stage=new n.Container,r._plugins.forEach(function(t){t.init.call(i,e)})}var n=t("@pixi/display"),s=t("@pixi/core"),t={view:{configurable:!0},screen:{configurable:!0}};(i.Application=r).registerPlugin=function(t){r._plugins.push(t)},r.prototype.render=function(){this.renderer.render(this.stage)},t.view.get=function(){return this.renderer.view},t.screen.get=function(){return this.renderer.screen},r.prototype.destroy=function(t,e){var i=this,n=r._plugins.slice(0);n.reverse(),n.forEach(function(t){t.destroy.call(i)}),this.stage.destroy(e),this.stage=null,this.renderer.destroy(t),this.renderer=null,this._options=null},Object.defineProperties(r.prototype,t),r._plugins=[];t=function(){};t.init=function(t){var e=this;Object.defineProperty(this,"resizeTo",{set:function(t){window.removeEventListener("resize",this.resize),(this._resizeTo=t)&&(window.addEventListener("resize",this.resize),this.resize())},get:function(){return this._resizeTo}}),this.resize=function(){e._resizeTo&&(e._resizeTo===window?e.renderer.resize(window.innerWidth,window.innerHeight):e.renderer.resize(e._resizeTo.clientWidth,e._resizeTo.clientHeight))},this._resizeTo=null,this.resizeTo=t.resizeTo||null},t.destroy=function(){this.resizeTo=null,this.resize=null},r.registerPlugin(t)},{"@pixi/display":"LJAM","@pixi/core":"qqf8"}],lAKD:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.Extract=void 0;function u(t){(this.renderer=t).extract=this}var c=t("@pixi/core"),p=t("@pixi/utils"),d=new(t("@pixi/math").Rectangle);(i.Extract=u).prototype.image=function(t,e,i){var n=new Image;return n.src=this.base64(t,e,i),n},u.prototype.base64=function(t,e,i){return this.canvas(t).toDataURL(e,i)},u.prototype.canvas=function(t){var e,i,n,r=this.renderer,s=!1,o=!1;t&&(t instanceof c.RenderTexture?n=t:(n=this.renderer.generateTexture(t),o=!0)),n?(e=n.baseTexture.resolution,i=n.frame,s=!1,r.renderTexture.bind(n)):(e=this.renderer.resolution,s=!0,(i=d).width=this.renderer.width,i.height=this.renderer.height,r.renderTexture.bind(null));var a=Math.floor(i.width*e+1e-4),h=Math.floor(i.height*e+1e-4),l=new p.CanvasRenderTarget(a,h,1),t=new Uint8Array(4*a*h),r=r.gl;r.readPixels(i.x*e,i.y*e,a,h,r.RGBA,r.UNSIGNED_BYTE,t);a=l.context.getImageData(0,0,a,h);return u.arrayPostDivide(t,a.data),l.context.putImageData(a,0,0),s&&(l.context.scale(1,-1),l.context.drawImage(l.canvas,0,-h)),o&&n.destroy(!0),l.canvas},u.prototype.pixels=function(t){var e,i,n,r=this.renderer,s=!1;t&&(t instanceof c.RenderTexture?n=t:(n=this.renderer.generateTexture(t),s=!0)),n?(e=n.baseTexture.resolution,i=n.frame,r.renderTexture.bind(n)):(e=r.resolution,(i=d).width=r.width,i.height=r.height,r.renderTexture.bind(null));var o=i.width*e,a=i.height*e,t=new Uint8Array(4*o*a),r=r.gl;return r.readPixels(i.x*e,i.y*e,o,a,r.RGBA,r.UNSIGNED_BYTE,t),s&&n.destroy(!0),u.arrayPostDivide(t,t),t},u.prototype.destroy=function(){this.renderer.extract=null,this.renderer=null},u.arrayPostDivide=function(t,e){for(var i=0;i<t.length;i+=4){var n=e[i+3]=t[i+3];0!==n?(e[i]=Math.round(Math.min(255*t[i]/n,255)),e[i+1]=Math.round(Math.min(255*t[i+1]/n,255)),e[i+2]=Math.round(Math.min(255*t[i+2]/n,255))):(e[i]=t[i],e[i+1]=t[i+1],e[i+2]=t[i+2])}}},{"@pixi/core":"qqf8","@pixi/utils":"x5Ec","@pixi/math":"GTL5"}],SFsV:[function(t,e,i){"use strict";e.exports=function(t,e){e=e||{};for(var n={key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}},i=n.parser[e.strictMode?"strict":"loose"].exec(t),r={},s=14;s--;)r[n.key[s]]=i[s]||"";return r[n.q.name]={},r[n.key[12]].replace(n.q.parser,function(t,e,i){e&&(r[n.q.name][e]=i)}),r}},{}],KIAI:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n=function(t,e,i){return e&&r(t.prototype,e),i&&r(t,i),t};function r(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var o=(n(a,[{key:"detach",value:function(){return null!==this._owner&&(this._owner.detach(this),!0)}}]),a);function a(t,e,i){void 0===e&&(e=!1),s(this,a),this._fn=t,this._once=e,this._thisArg=i,this._next=this._prev=this._owner=null}function h(t,e){return t._head?(t._tail._next=e)._prev=t._tail:t._head=e,(t._tail=e)._owner=t,e}n(l,[{key:"handlers",value:function(){var t=!(arguments.length<=0||void 0===arguments[0])&&arguments[0],e=this._head;if(t)return!!e;for(var i=[];e;)i.push(e),e=e._next;return i}},{key:"has",value:function(t){if(!(t instanceof o))throw new Error("MiniSignal#has(): First arg must be a MiniSignalBinding object.");return t._owner===this}},{key:"dispatch",value:function(){var t=this._head;if(!t)return!1;for(;t;)t._once&&this.detach(t),t._fn.apply(t._thisArg,arguments),t=t._next;return!0}},{key:"add",value:function(t){var e=arguments.length<=1||void 0===arguments[1]?null:arguments[1];if("function"!=typeof t)throw new Error("MiniSignal#add(): First arg must be a Function.");return h(this,new o(t,!1,e))}},{key:"once",value:function(t){var e=arguments.length<=1||void 0===arguments[1]?null:arguments[1];if("function"!=typeof t)throw new Error("MiniSignal#once(): First arg must be a Function.");return h(this,new o(t,!0,e))}},{key:"detach",value:function(t){if(!(t instanceof o))throw new Error("MiniSignal#detach(): First arg must be a MiniSignalBinding object.");return t._owner!==this||(t._prev&&(t._prev._next=t._next),t._next&&(t._next._prev=t._prev),t===this._head?(this._head=t._next,null===t._next&&(this._tail=null)):t===this._tail&&(this._tail=t._prev,this._tail._next=null),t._owner=null),this}},{key:"detachAll",value:function(){var t=this._head;if(!t)return this;for(this._head=this._tail=null;t;)t._owner=null,t=t._next;return this}}]),n=l;function l(){s(this,l),this._head=this._tail=void 0}n.MiniSignalBinding=o,i.default=n,e.exports=i.default},{}],ndyJ:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.encodeBinary=g,i.middleware=i.async=i.Resource=i.Loader=void 0;var s=n(t("parse-uri")),o=n(t("mini-signals"));function n(t){return t&&t.__esModule?t:{default:t}}function a(){}function r(i,n,r,s){var o=0,a=i.length;!function t(e){e||o===a?r&&r(e):s?setTimeout(function(){n(i[o++],t)},1):n(i[o++],t)}()}function h(e,t){if(null==t)t=1;else if(0===t)throw new Error("Concurrency must not be zero");var i=0,n={_tasks:[],concurrency:t,saturated:a,unsaturated:a,buffer:t/4,empty:a,drain:a,error:a,started:!1,paused:!1,push:function(t,e){r(t,!1,e)},kill:function(){i=0,n.drain=a,n.started=!1,n._tasks=[]},unshift:function(t,e){r(t,!0,e)},process:function(){for(;!n.paused&&i<n.concurrency&&n._tasks.length;){var t=n._tasks.shift();0===n._tasks.length&&n.empty(),(i+=1)===n.concurrency&&n.saturated(),e(t.data,function(e){return function(){if(null===e)throw new Error("Callback was already called.");var t=e;e=null,t.apply(this,arguments)}}(function(t){return function(){--i,t.callback.apply(t,arguments),null!=arguments[0]&&n.error(arguments[0],t.data),i<=n.concurrency-n.buffer&&n.unsaturated(),n.idle()&&n.drain(),n.process()}}(t)))}},length:function(){return n._tasks.length},running:function(){return i},idle:function(){return n._tasks.length+i===0},pause:function(){!0!==n.paused&&(n.paused=!0)},resume:function(){if(!1!==n.paused){n.paused=!1;for(var t=1;t<=n.concurrency;t++)n.process()}}};function r(t,e,i){if(null!=i&&"function"!=typeof i)throw new Error("task callback must be a function");n.started=!0,null==t&&n.idle()?setTimeout(function(){return n.drain()},1):(i={data:t,callback:"function"==typeof i?i:a},e?n._tasks.unshift(i):n._tasks.push(i),setTimeout(function(){return n.process()},1))}return n}t={eachSeries:r,queue:h};i.async=t;var l={};function u(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function c(t,e,i){return e&&u(t.prototype,e),i&&u(t,i),t}var p=!(!window.XDomainRequest||"withCredentials"in new XMLHttpRequest),d=null;function _(){}var f=function(){function r(t,e,i){if("string"!=typeof t||"string"!=typeof e)throw new Error("Both name and url are required for constructing a resource.");i=i||{},this._flags=0,this._setFlag(r.STATUS_FLAGS.DATA_URL,0===e.indexOf("data:")),this.name=t,this.url=e,this.extension=this._getExtension(),this.data=null,this.crossOrigin=!0===i.crossOrigin?"anonymous":i.crossOrigin,this.timeout=i.timeout||0,this.loadType=i.loadType||this._determineLoadType(),this.xhrType=i.xhrType,this.metadata=i.metadata||{},this.error=null,this.xhr=null,this.children=[],this.type=r.TYPE.UNKNOWN,this.progressChunk=0,this._dequeue=_,this._onLoadBinding=null,this._elementTimer=0,this._boundComplete=this.complete.bind(this),this._boundOnError=this._onError.bind(this),this._boundOnProgress=this._onProgress.bind(this),this._boundOnTimeout=this._onTimeout.bind(this),this._boundXhrOnError=this._xhrOnError.bind(this),this._boundXhrOnTimeout=this._xhrOnTimeout.bind(this),this._boundXhrOnAbort=this._xhrOnAbort.bind(this),this._boundXhrOnLoad=this._xhrOnLoad.bind(this),this.onStart=new o.default,this.onProgress=new o.default,this.onComplete=new o.default,this.onAfterMiddleware=new o.default}r.setExtensionLoadType=function(t,e){m(r._loadTypeMap,t,e)},r.setExtensionXhrType=function(t,e){m(r._xhrTypeMap,t,e)};var t=r.prototype;return t.complete=function(){this._clearEvents(),this._finish()},t.abort=function(t){if(!this.error){if(this.error=new Error(t),this._clearEvents(),this.xhr)this.xhr.abort();else if(this.xdr)this.xdr.abort();else if(this.data)if(this.data.src)this.data.src=r.EMPTY_GIF;else for(;this.data.firstChild;)this.data.removeChild(this.data.firstChild);this._finish()}},t.load=function(t){var e=this;if(!this.isLoading)if(this.isComplete)t&&setTimeout(function(){return t(e)},1);else switch(t&&this.onComplete.once(t),this._setFlag(r.STATUS_FLAGS.LOADING,!0),this.onStart.dispatch(this),!1!==this.crossOrigin&&"string"==typeof this.crossOrigin||(this.crossOrigin=this._determineCrossOrigin(this.url)),this.loadType){case r.LOAD_TYPE.IMAGE:this.type=r.TYPE.IMAGE,this._loadElement("image");break;case r.LOAD_TYPE.AUDIO:this.type=r.TYPE.AUDIO,this._loadSourceElement("audio");break;case r.LOAD_TYPE.VIDEO:this.type=r.TYPE.VIDEO,this._loadSourceElement("video");break;case r.LOAD_TYPE.XHR:default:p&&this.crossOrigin?this._loadXdr():this._loadXhr()}},t._hasFlag=function(t){return 0!=(this._flags&t)},t._setFlag=function(t,e){this._flags=e?this._flags|t:this._flags&~t},t._clearEvents=function(){clearTimeout(this._elementTimer),this.data&&this.data.removeEventListener&&(this.data.removeEventListener("error",this._boundOnError,!1),this.data.removeEventListener("load",this._boundComplete,!1),this.data.removeEventListener("progress",this._boundOnProgress,!1),this.data.removeEventListener("canplaythrough",this._boundComplete,!1)),this.xhr&&(this.xhr.removeEventListener?(this.xhr.removeEventListener("error",this._boundXhrOnError,!1),this.xhr.removeEventListener("timeout",this._boundXhrOnTimeout,!1),this.xhr.removeEventListener("abort",this._boundXhrOnAbort,!1),this.xhr.removeEventListener("progress",this._boundOnProgress,!1),this.xhr.removeEventListener("load",this._boundXhrOnLoad,!1)):(this.xhr.onerror=null,this.xhr.ontimeout=null,this.xhr.onprogress=null,this.xhr.onload=null))},t._finish=function(){if(this.isComplete)throw new Error("Complete called again for an already completed resource.");this._setFlag(r.STATUS_FLAGS.COMPLETE,!0),this._setFlag(r.STATUS_FLAGS.LOADING,!1),this.onComplete.dispatch(this)},t._loadElement=function(t){this.metadata.loadElement?this.data=this.metadata.loadElement:"image"===t&&void 0!==window.Image?this.data=new Image:this.data=document.createElement(t),this.crossOrigin&&(this.data.crossOrigin=this.crossOrigin),this.metadata.skipSource||(this.data.src=this.url),this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1),this.timeout&&(this._elementTimer=setTimeout(this._boundOnTimeout,this.timeout))},t._loadSourceElement=function(t){if(this.metadata.loadElement?this.data=this.metadata.loadElement:"audio"===t&&void 0!==window.Audio?this.data=new Audio:this.data=document.createElement(t),null!==this.data){if(this.crossOrigin&&(this.data.crossOrigin=this.crossOrigin),!this.metadata.skipSource)if(navigator.isCocoonJS)this.data.src=Array.isArray(this.url)?this.url[0]:this.url;else if(Array.isArray(this.url))for(var e=this.metadata.mimeType,i=0;i<this.url.length;++i)this.data.appendChild(this._createSource(t,this.url[i],Array.isArray(e)?e[i]:e));else{var n=this.metadata.mimeType;this.data.appendChild(this._createSource(t,this.url,Array.isArray(n)?n[0]:n))}this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1),this.data.addEventListener("canplaythrough",this._boundComplete,!1),this.data.load(),this.timeout&&(this._elementTimer=setTimeout(this._boundOnTimeout,this.timeout))}else this.abort("Unsupported element: "+t)},t._loadXhr=function(){"string"!=typeof this.xhrType&&(this.xhrType=this._determineXhrType());var t=this.xhr=new XMLHttpRequest;t.open("GET",this.url,!0),t.timeout=this.timeout,this.xhrType===r.XHR_RESPONSE_TYPE.JSON||this.xhrType===r.XHR_RESPONSE_TYPE.DOCUMENT?t.responseType=r.XHR_RESPONSE_TYPE.TEXT:t.responseType=this.xhrType,t.addEventListener("error",this._boundXhrOnError,!1),t.addEventListener("timeout",this._boundXhrOnTimeout,!1),t.addEventListener("abort",this._boundXhrOnAbort,!1),t.addEventListener("progress",this._boundOnProgress,!1),t.addEventListener("load",this._boundXhrOnLoad,!1),t.send()},t._loadXdr=function(){"string"!=typeof this.xhrType&&(this.xhrType=this._determineXhrType());var t=this.xhr=new XDomainRequest;t.timeout=this.timeout||5e3,t.onerror=this._boundXhrOnError,t.ontimeout=this._boundXhrOnTimeout,t.onprogress=this._boundOnProgress,t.onload=this._boundXhrOnLoad,t.open("GET",this.url,!0),setTimeout(function(){return t.send()},1)},t._createSource=function(t,e,i){i=i||t+"/"+this._getExtension(e);t=document.createElement("source");return t.src=e,t.type=i,t},t._onError=function(t){this.abort("Failed to load element using: "+t.target.nodeName)},t._onProgress=function(t){t&&t.lengthComputable&&this.onProgress.dispatch(this,t.loaded/t.total)},t._onTimeout=function(){this.abort("Load timed out.")},t._xhrOnError=function(){var t=this.xhr;this.abort(y(t)+" Request failed. Status: "+t.status+', text: "'+t.statusText+'"')},t._xhrOnTimeout=function(){var t=this.xhr;this.abort(y(t)+" Request timed out.")},t._xhrOnAbort=function(){var t=this.xhr;this.abort(y(t)+" Request was aborted by the user.")},t._xhrOnLoad=function(){var t,e=this.xhr,i="",n=void 0===e.status?200:e.status;if(""!==e.responseType&&"text"!==e.responseType&&void 0!==e.responseType||(i=e.responseText),0===n&&(0<i.length||e.responseType===r.XHR_RESPONSE_TYPE.BUFFER)?n=200:1223===n&&(n=204),2==(n/100|0)){if(this.xhrType===r.XHR_RESPONSE_TYPE.TEXT)this.data=i,this.type=r.TYPE.TEXT;else if(this.xhrType===r.XHR_RESPONSE_TYPE.JSON)try{this.data=JSON.parse(i),this.type=r.TYPE.JSON}catch(t){return void this.abort("Error trying to parse loaded json: "+t)}else if(this.xhrType===r.XHR_RESPONSE_TYPE.DOCUMENT)try{window.DOMParser?(t=new DOMParser,this.data=t.parseFromString(i,"text/xml")):((t=document.createElement("div")).innerHTML=i,this.data=t),this.type=r.TYPE.XML}catch(t){return void this.abort("Error trying to parse loaded xml: "+t)}else this.data=e.response||i;this.complete()}else this.abort("["+e.status+"] "+e.statusText+": "+e.responseURL)},t._determineCrossOrigin=function(t,e){if(0===t.indexOf("data:"))return"";if(window.origin!==window.location.origin)return"anonymous";e=e||window.location,(d=d||document.createElement("a")).href=t;var i=!(t=(0,s.default)(d.href,{strictMode:!0})).port&&""===e.port||t.port===e.port,n=t.protocol?t.protocol+":":"";return t.host===e.hostname&&i&&n===e.protocol?"":"anonymous"},t._determineXhrType=function(){return r._xhrTypeMap[this.extension]||r.XHR_RESPONSE_TYPE.TEXT},t._determineLoadType=function(){return r._loadTypeMap[this.extension]||r.LOAD_TYPE.XHR},t._getExtension=function(){var t,e,i=this.url;return(this.isDataUrl?(e=i.indexOf("/"),i.substring(e+1,i.indexOf(";",e))):(t=i.indexOf("?"),e=i.indexOf("#"),e=Math.min(-1<t?t:i.length,-1<e?e:i.length),(i=i.substring(0,e)).substring(i.lastIndexOf(".")+1))).toLowerCase()},t._getMimeFromXhrType=function(t){switch(t){case r.XHR_RESPONSE_TYPE.BUFFER:return"application/octet-binary";case r.XHR_RESPONSE_TYPE.BLOB:return"application/blob";case r.XHR_RESPONSE_TYPE.DOCUMENT:return"application/xml";case r.XHR_RESPONSE_TYPE.JSON:return"application/json";case r.XHR_RESPONSE_TYPE.DEFAULT:case r.XHR_RESPONSE_TYPE.TEXT:default:return"text/plain"}},c(r,[{key:"isDataUrl",get:function(){return this._hasFlag(r.STATUS_FLAGS.DATA_URL)}},{key:"isComplete",get:function(){return this._hasFlag(r.STATUS_FLAGS.COMPLETE)}},{key:"isLoading",get:function(){return this._hasFlag(r.STATUS_FLAGS.LOADING)}}]),r}();function m(t,e,i){e&&0===e.indexOf(".")&&(e=e.substring(1)),e&&(t[e]=i)}function y(t){return t.toString().replace("object ","")}function g(t){for(var e="",i=0;i<t.length;){for(var n=[0,0,0],r=[0,0,0,0],s=0;s<n.length;++s)i<t.length?n[s]=255&t.charCodeAt(i++):n[s]=0;switch(r[0]=n[0]>>2,r[1]=(3&n[0])<<4|n[1]>>4,r[2]=(15&n[1])<<2|n[2]>>6,r[3]=63&n[2],i-(t.length-1)){case 2:r[3]=64,r[2]=64;break;case 1:r[3]=64}for(var o=0;o<r.length;++o)e+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(r[o])}return e}(i.Resource=f).STATUS_FLAGS={NONE:0,DATA_URL:1,COMPLETE:2,LOADING:4},f.TYPE={UNKNOWN:0,JSON:1,XML:2,IMAGE:3,AUDIO:4,VIDEO:5,TEXT:6},f.LOAD_TYPE={XHR:1,IMAGE:2,AUDIO:3,VIDEO:4},f.XHR_RESPONSE_TYPE={DEFAULT:"text",BUFFER:"arraybuffer",BLOB:"blob",DOCUMENT:"document",JSON:"json",TEXT:"text"},f._loadTypeMap={gif:f.LOAD_TYPE.IMAGE,png:f.LOAD_TYPE.IMAGE,bmp:f.LOAD_TYPE.IMAGE,jpg:f.LOAD_TYPE.IMAGE,jpeg:f.LOAD_TYPE.IMAGE,tif:f.LOAD_TYPE.IMAGE,tiff:f.LOAD_TYPE.IMAGE,webp:f.LOAD_TYPE.IMAGE,tga:f.LOAD_TYPE.IMAGE,svg:f.LOAD_TYPE.IMAGE,"svg+xml":f.LOAD_TYPE.IMAGE,mp3:f.LOAD_TYPE.AUDIO,ogg:f.LOAD_TYPE.AUDIO,wav:f.LOAD_TYPE.AUDIO,mp4:f.LOAD_TYPE.VIDEO,webm:f.LOAD_TYPE.VIDEO},f._xhrTypeMap={xhtml:f.XHR_RESPONSE_TYPE.DOCUMENT,html:f.XHR_RESPONSE_TYPE.DOCUMENT,htm:f.XHR_RESPONSE_TYPE.DOCUMENT,xml:f.XHR_RESPONSE_TYPE.DOCUMENT,tmx:f.XHR_RESPONSE_TYPE.DOCUMENT,svg:f.XHR_RESPONSE_TYPE.DOCUMENT,tsx:f.XHR_RESPONSE_TYPE.DOCUMENT,gif:f.XHR_RESPONSE_TYPE.BLOB,png:f.XHR_RESPONSE_TYPE.BLOB,bmp:f.XHR_RESPONSE_TYPE.BLOB,jpg:f.XHR_RESPONSE_TYPE.BLOB,jpeg:f.XHR_RESPONSE_TYPE.BLOB,tif:f.XHR_RESPONSE_TYPE.BLOB,tiff:f.XHR_RESPONSE_TYPE.BLOB,webp:f.XHR_RESPONSE_TYPE.BLOB,tga:f.XHR_RESPONSE_TYPE.BLOB,json:f.XHR_RESPONSE_TYPE.JSON,text:f.XHR_RESPONSE_TYPE.TEXT,txt:f.XHR_RESPONSE_TYPE.TEXT,ttf:f.XHR_RESPONSE_TYPE.BUFFER,otf:f.XHR_RESPONSE_TYPE.BUFFER},f.EMPTY_GIF="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==";var v=window.URL||window.webkitURL,t={caching:function(t,e){var i=this;l[t.url]?(t.data=l[t.url],t.complete()):t.onComplete.once(function(){return l[i.url]=i.data}),e()},parsing:function(t,e){if(t.data){if(t.xhr&&t.xhrType===f.XHR_RESPONSE_TYPE.BLOB)if(window.Blob&&"string"!=typeof t.data){if(0===t.data.type.indexOf("image")){var i=v.createObjectURL(t.data);return t.blob=t.data,t.data=new Image,t.data.src=i,t.type=f.TYPE.IMAGE,void(t.data.onload=function(){v.revokeObjectURL(i),t.data.onload=null,e()})}}else{var n=t.xhr.getResponseHeader("content-type");if(n&&0===n.indexOf("image"))return t.data=new Image,t.data.src="data:"+n+";base64,"+g(t.xhr.responseText),t.type=f.TYPE.IMAGE,void(t.data.onload=function(){t.data.onload=null,e()})}e()}else e()}};i.middleware=t;var w=/(#[\w-]+)?$/,x=((t=b.prototype).add=function(t,e,i,n){if(Array.isArray(t)){for(var r=0;r<t.length;++r)this.add(t[r]);return this}if("object"==typeof t&&(n=e||t.callback||t.onComplete,e=(i=t).url,t=t.name||t.key||t.url),"string"!=typeof e&&(n=i,i=e,e=t),"string"!=typeof e)throw new Error("No url passed to add resource to loader.");if("function"==typeof i&&(n=i,i=null),this.loading&&(!i||!i.parentResource))throw new Error("Cannot add resources while the loader is running.");if(this.resources[t])throw new Error('Resource named "'+t+'" already exists.');if(e=this._prepareUrl(e),this.resources[t]=new f(t,e,i),"function"==typeof n&&this.resources[t].onAfterMiddleware.once(n),this.loading){for(var s=i.parentResource,o=[],a=0;a<s.children.length;++a)s.children[a].isComplete||o.push(s.children[a]);var h=s.progressChunk*(o.length+1)/(o.length+2);s.children.push(this.resources[t]),s.progressChunk=h;for(var l=0;l<o.length;++l)o[l].progressChunk=h;this.resources[t].progressChunk=h}return this._queue.push(this.resources[t]),this},t.pre=function(t){return this._beforeMiddleware.push(t),this},t.use=function(t){return this._afterMiddleware.push(t),this},t.reset=function(){for(var t in this.progress=0,this.loading=!1,this._queue.kill(),this._queue.pause(),this.resources){var e=this.resources[t];e._onLoadBinding&&e._onLoadBinding.detach(),e.isLoading&&e.abort()}return this.resources={},this},t.load=function(t){if("function"==typeof t&&this.onComplete.once(t),this.loading)return this;if(this._queue.idle())this._onStart(),this._onComplete();else{for(var e=100/this._queue._tasks.length,i=0;i<this._queue._tasks.length;++i)this._queue._tasks[i].data.progressChunk=e;this._onStart(),this._queue.resume()}return this},t._prepareUrl=function(t){var e=(0,s.default)(t,{strictMode:!0}),e=e.protocol||!e.path||0===t.indexOf("//")?t:this.baseUrl.length&&this.baseUrl.lastIndexOf("/")!==this.baseUrl.length-1&&"/"!==t.charAt(0)?this.baseUrl+"/"+t:this.baseUrl+t;return this.defaultQueryString&&(t=w.exec(e)[0],-1!==(e=e.substr(0,e.length-t.length)).indexOf("?")?e+="&"+this.defaultQueryString:e+="?"+this.defaultQueryString,e+=t),e},t._loadResource=function(i,t){var n=this;i._dequeue=t,r(this._beforeMiddleware,function(t,e){t.call(n,i,function(){e(i.isComplete?{}:null)})},function(){i.isComplete?n._onLoad(i):(i._onLoadBinding=i.onComplete.once(n._onLoad,n),i.load())},!0)},t._onStart=function(){this.progress=0,this.loading=!0,this.onStart.dispatch(this)},t._onComplete=function(){this.progress=100,this.loading=!1,this.onComplete.dispatch(this,this.resources)},t._onLoad=function(i){var n=this;i._onLoadBinding=null,this._resourcesParsing.push(i),i._dequeue(),r(this._afterMiddleware,function(t,e){t.call(n,i,e)},function(){i.onAfterMiddleware.dispatch(i),n.progress=Math.min(100,n.progress+i.progressChunk),n.onProgress.dispatch(n,i),i.error?n.onError.dispatch(i.error,n,i):n.onLoad.dispatch(n,i),n._resourcesParsing.splice(n._resourcesParsing.indexOf(i),1),n._queue.idle()&&0===n._resourcesParsing.length&&n._onComplete()},!0)},c(b,[{key:"concurrency",get:function(){return this._queue.concurrency},set:function(t){this._queue.concurrency=t}}]),b);function b(t,e){var i=this;void 0===t&&(t=""),void 0===e&&(e=10),this.baseUrl=t,this.progress=0,this.loading=!1,this.defaultQueryString="",this._beforeMiddleware=[],this._afterMiddleware=[],this._resourcesParsing=[],this._boundLoadResource=function(t,e){return i._loadResource(t,e)},this._queue=h(this._boundLoadResource,e),this._queue.pause(),this.resources={},this.onProgress=new o.default,this.onError=new o.default,this.onLoad=new o.default,this.onStart=new o.default,this.onComplete=new o.default;for(var n=0;n<b._defaultBeforeMiddleware.length;++n)this.pre(b._defaultBeforeMiddleware[n]);for(var r=0;r<b._defaultAfterMiddleware.length;++r)this.use(b._defaultAfterMiddleware[r])}(i.Loader=x)._defaultBeforeMiddleware=[],x._defaultAfterMiddleware=[],x.pre=function(t){return x._defaultBeforeMiddleware.push(t),x},x.use=function(t){return x._defaultAfterMiddleware.push(t),x}},{"parse-uri":"SFsV","mini-signals":"KIAI"}],pAmg:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.TextureLoader=i.LoaderResource=i.Loader=i.AppLoaderPlugin=void 0;var n=t("resource-loader"),h=t("@pixi/utils"),r=t("@pixi/core"),t=function(){};(i.TextureLoader=t).use=function(t,e){t.data&&t.type===n.Resource.TYPE.IMAGE&&(t.texture=r.Texture.fromLoader(t.data,t.url,t.name)),e()};var s=function(o){function a(t,e){var n=this;o.call(this,t,e),h.EventEmitter.call(this);for(var i=0;i<a._plugins.length;++i){var r=a._plugins[i],s=r.pre,r=r.use;s&&this.pre(s),r&&this.use(r)}this.onStart.add(function(t){return n.emit("start",t)}),this.onProgress.add(function(t,e){return n.emit("progress",t,e)}),this.onError.add(function(t,e,i){return n.emit("error",t,e,i)}),this.onLoad.add(function(t,e){return n.emit("load",t,e)}),this.onComplete.add(function(t,e){return n.emit("complete",t,e)}),this._protected=!1}o&&(a.__proto__=o);var t={shared:{configurable:!0}};return((a.prototype=Object.create(o&&o.prototype)).constructor=a).prototype.destroy=function(){this._protected||(this.removeAllListeners(),this.reset())},t.shared.get=function(){var t=a._shared;return t||((t=new a)._protected=!0,a._shared=t),t},Object.defineProperties(a,t),a}(n.Loader);i.Loader=s,Object.assign(s.prototype,h.EventEmitter.prototype),s._plugins=[],s.registerPlugin=function(t){return s._plugins.push(t),t.add&&t.add(),s},s.registerPlugin({use:n.middleware.parsing}),s.registerPlugin(t);t=function(){};(i.AppLoaderPlugin=t).init=function(t){t=Object.assign({sharedLoader:!1},t),this.loader=t.sharedLoader?s.shared:new s},t.destroy=function(){this.loader&&(this.loader.destroy(),this.loader=null)};t=n.Resource;i.LoaderResource=t},{"resource-loader":"ndyJ","@pixi/utils":"x5Ec","@pixi/core":"qqf8"}],lXcw:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.ParticleRenderer=i.ParticleContainer=void 0;var p=t("@pixi/constants"),f=t("@pixi/utils"),n=t("@pixi/display"),d=t("@pixi/core"),r=t("@pixi/math"),n=function(r){function t(t,e,i,n){void 0===t&&(t=1500),void 0===i&&(i=16384),void 0===n&&(n=!1),r.call(this),16384<i&&(i=16384),this._properties=[!1,!0,!1,!1,!1],this._maxSize=t,this._batchSize=i,this._buffers=null,this._bufferUpdateIDs=[],this._updateID=0,this.interactiveChildren=!1,this.blendMode=p.BLEND_MODES.NORMAL,this.autoResize=n,this.roundPixels=!0,this.baseTexture=null,this.setProperties(e),this._tint=0,this.tintRgb=new Float32Array(4),this.tint=16777215}r&&(t.__proto__=r);var e={tint:{configurable:!0}};return((t.prototype=Object.create(r&&r.prototype)).constructor=t).prototype.setProperties=function(t){t&&(this._properties[0]="vertices"in t||"scale"in t?!!t.vertices||!!t.scale:this._properties[0],this._properties[1]="position"in t?!!t.position:this._properties[1],this._properties[2]="rotation"in t?!!t.rotation:this._properties[2],this._properties[3]="uvs"in t?!!t.uvs:this._properties[3],this._properties[4]="tint"in t||"alpha"in t?!!t.tint||!!t.alpha:this._properties[4])},t.prototype.updateTransform=function(){this.displayObjectUpdateTransform()},e.tint.get=function(){return this._tint},e.tint.set=function(t){this._tint=t,(0,f.hex2rgb)(t,this.tintRgb)},t.prototype.render=function(t){var e=this;this.visible&&!(this.worldAlpha<=0)&&this.children.length&&this.renderable&&(this.baseTexture||(this.baseTexture=this.children[0]._texture.baseTexture,this.baseTexture.valid||this.baseTexture.once("update",function(){return e.onChildrenChange(0)})),t.batch.setObjectRenderer(t.plugins.particle),t.plugins.particle.render(this))},t.prototype.onChildrenChange=function(t){for(var e=Math.floor(t/this._batchSize);this._bufferUpdateIDs.length<e;)this._bufferUpdateIDs.push(0);this._bufferUpdateIDs[e]=++this._updateID},t.prototype.dispose=function(){if(this._buffers){for(var t=0;t<this._buffers.length;++t)this._buffers[t].destroy();this._buffers=null}},t.prototype.destroy=function(t){r.prototype.destroy.call(this,t),this.dispose(),this._properties=null,this._buffers=null,this._bufferUpdateIDs=null},Object.defineProperties(t.prototype,e),t}(n.Container);i.ParticleContainer=n;function o(t,e,i){this.geometry=new d.Geometry,this.indexBuffer=null,this.size=i,this.dynamicProperties=[],this.staticProperties=[];for(var n=0;n<t.length;++n){var r={attributeName:(r=t[n]).attributeName,size:r.size,uploadFunction:r.uploadFunction,type:r.type||p.TYPES.FLOAT,offset:r.offset};(e[n]?this.dynamicProperties:this.staticProperties).push(r)}this.staticStride=0,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.dynamicStride=0,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this._updateID=0,this.initBuffers()}o.prototype.initBuffers=function(){var t=this.geometry,e=0;this.indexBuffer=new d.Buffer((0,f.createIndicesForQuads)(this.size),!0,!0),t.addIndex(this.indexBuffer);for(var i=this.dynamicStride=0;i<this.dynamicProperties.length;++i){var n=this.dynamicProperties[i];n.offset=e,e+=n.size,this.dynamicStride+=n.size}var r=new ArrayBuffer(this.size*this.dynamicStride*4*4);this.dynamicData=new Float32Array(r),this.dynamicDataUint32=new Uint32Array(r),this.dynamicBuffer=new d.Buffer(this.dynamicData,!1,!1);for(var s=0,o=this.staticStride=0;o<this.staticProperties.length;++o){var a=this.staticProperties[o];a.offset=s,s+=a.size,this.staticStride+=a.size}r=new ArrayBuffer(this.size*this.staticStride*4*4);this.staticData=new Float32Array(r),this.staticDataUint32=new Uint32Array(r),this.staticBuffer=new d.Buffer(this.staticData,!0,!1);for(var h=0;h<this.dynamicProperties.length;++h){var l=this.dynamicProperties[h];t.addAttribute(l.attributeName,this.dynamicBuffer,0,l.type===p.TYPES.UNSIGNED_BYTE,l.type,4*this.dynamicStride,4*l.offset)}for(var u=0;u<this.staticProperties.length;++u){var c=this.staticProperties[u];t.addAttribute(c.attributeName,this.staticBuffer,0,c.type===p.TYPES.UNSIGNED_BYTE,c.type,4*this.staticStride,4*c.offset)}},o.prototype.uploadDynamic=function(t,e,i){for(var n=0;n<this.dynamicProperties.length;n++){var r=this.dynamicProperties[n];r.uploadFunction(t,e,i,r.type===p.TYPES.UNSIGNED_BYTE?this.dynamicDataUint32:this.dynamicData,this.dynamicStride,r.offset)}this.dynamicBuffer._updateID++},o.prototype.uploadStatic=function(t,e,i){for(var n=0;n<this.staticProperties.length;n++){var r=this.staticProperties[n];r.uploadFunction(t,e,i,r.type===p.TYPES.UNSIGNED_BYTE?this.staticDataUint32:this.staticData,this.staticStride,r.offset)}this.staticBuffer._updateID++},o.prototype.destroy=function(){this.indexBuffer=null,this.dynamicProperties=null,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this.staticProperties=null,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.geometry.destroy()};var s,n=((s=d.ObjectRenderer)&&(a.__proto__=s),((a.prototype=Object.create(s&&s.prototype)).constructor=a).prototype.render=function(t){var e=t.children,i=t._maxSize,n=t._batchSize,r=this.renderer,s=e.length;if(0!==s){i<s&&!t.autoResize&&(s=i);var o=(o=t._buffers)||(t._buffers=this.generateBuffers(t)),a=e[0]._texture.baseTexture;this.state.blendMode=(0,f.correctBlendMode)(t.blendMode,a.alphaMode),r.state.set(this.state);var h=r.gl,i=t.worldTransform.copyTo(this.tempMatrix);i.prepend(r.globalUniforms.uniforms.projectionMatrix),this.shader.uniforms.translationMatrix=i.toArray(!0),this.shader.uniforms.uColor=(0,f.premultiplyRgba)(t.tintRgb,t.worldAlpha,this.shader.uniforms.uColor,a.alphaMode),this.shader.uniforms.uSampler=a,this.renderer.shader.bind(this.shader);for(var l=!1,u=0,c=0;u<s;u+=n,c+=1){var p=s-u;n<p&&(p=n),c>=o.length&&o.push(this._generateOneMoreBuffer(t));var d=o[c];d.uploadDynamic(e,u,p);var _=t._bufferUpdateIDs[c]||0;(l=l||d._updateID<_)&&(d._updateID=t._updateID,d.uploadStatic(e,u,p)),r.geometry.bind(d.geometry),h.drawElements(h.TRIANGLES,6*p,h.UNSIGNED_SHORT,0)}}},a.prototype.generateBuffers=function(t){for(var e=[],i=t._maxSize,n=t._batchSize,r=t._properties,s=0;s<i;s+=n)e.push(new o(this.properties,r,n));return e},a.prototype._generateOneMoreBuffer=function(t){var e=t._batchSize,t=t._properties;return new o(this.properties,t,e)},a.prototype.uploadVertices=function(t,e,i,n,r,s){for(var o=0,a=0,h=0,l=0,u=0;u<i;++u){var c=t[e+u],p=c._texture,d=c.scale.x,_=c.scale.y,f=p.trim,p=p.orig;f?(o=(a=f.x-c.anchor.x*p.width)+f.width,h=(l=f.y-c.anchor.y*p.height)+f.height):(o=p.width*(1-c.anchor.x),a=p.width*-c.anchor.x,h=p.height*(1-c.anchor.y),l=p.height*-c.anchor.y),n[s]=a*d,n[s+1]=l*_,n[s+r]=o*d,n[s+r+1]=l*_,n[s+2*r]=o*d,n[s+2*r+1]=h*_,n[s+3*r]=a*d,n[s+3*r+1]=h*_,s+=4*r}},a.prototype.uploadPosition=function(t,e,i,n,r,s){for(var o=0;o<i;o++){var a=t[e+o].position;n[s]=a.x,n[s+1]=a.y,n[s+r]=a.x,n[s+r+1]=a.y,n[s+2*r]=a.x,n[s+2*r+1]=a.y,n[s+3*r]=a.x,n[s+3*r+1]=a.y,s+=4*r}},a.prototype.uploadRotation=function(t,e,i,n,r,s){for(var o=0;o<i;o++){var a=t[e+o].rotation;n[s]=a,n[s+r]=a,n[s+2*r]=a,n[s+3*r]=a,s+=4*r}},a.prototype.uploadUvs=function(t,e,i,n,r,s){for(var o=0;o<i;++o){var a=t[e+o]._texture._uvs;a?(n[s]=a.x0,n[s+1]=a.y0,n[s+r]=a.x1,n[s+r+1]=a.y1,n[s+2*r]=a.x2,n[s+2*r+1]=a.y2,n[s+3*r]=a.x3,n[s+3*r+1]=a.y3):(n[s]=0,n[s+1]=0,n[s+r]=0,n[s+r+1]=0,n[s+2*r]=0,n[s+2*r+1]=0,n[s+3*r]=0,n[s+3*r+1]=0),s+=4*r}},a.prototype.uploadTint=function(t,e,i,n,r,s){for(var o=0;o<i;++o){var a=t[e+o],h=0<a._texture.baseTexture.alphaMode,l=a.alpha,l=l<1&&h?(0,f.premultiplyTint)(a._tintRGB,l):a._tintRGB+(255*l<<24);n[s]=l,n[s+r]=l,n[s+2*r]=l,n[s+3*r]=l,s+=4*r}},a.prototype.destroy=function(){s.prototype.destroy.call(this),this.shader&&(this.shader.destroy(),this.shader=null),this.tempMatrix=null},a);function a(t){s.call(this,t),this.shader=null,this.properties=null,this.tempMatrix=new r.Matrix,this.properties=[{attributeName:"aVertexPosition",size:2,uploadFunction:this.uploadVertices,offset:0},{attributeName:"aPositionCoord",size:2,uploadFunction:this.uploadPosition,offset:0},{attributeName:"aRotation",size:1,uploadFunction:this.uploadRotation,offset:0},{attributeName:"aTextureCoord",size:2,uploadFunction:this.uploadUvs,offset:0},{attributeName:"aColor",size:1,type:p.TYPES.UNSIGNED_BYTE,uploadFunction:this.uploadTint,offset:0}],this.shader=d.Shader.from("attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\n\nattribute vec2 aPositionCoord;\nattribute float aRotation;\n\nuniform mat3 translationMatrix;\nuniform vec4 uColor;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nvoid main(void){\n    float x = (aVertexPosition.x) * cos(aRotation) - (aVertexPosition.y) * sin(aRotation);\n    float y = (aVertexPosition.x) * sin(aRotation) + (aVertexPosition.y) * cos(aRotation);\n\n    vec2 v = vec2(x, y);\n    v = v + aPositionCoord;\n\n    gl_Position = vec4((translationMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vColor = aColor * uColor;\n}\n","varying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n    vec4 color = texture2D(uSampler, vTextureCoord) * vColor;\n    gl_FragColor = color;\n}",{}),this.state=d.State.for2d()}i.ParticleRenderer=n},{"@pixi/constants":"R76a","@pixi/utils":"x5Ec","@pixi/display":"LJAM","@pixi/core":"qqf8","@pixi/math":"GTL5"}],uuMi:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.graphicsUtils=i.LineStyle=i.GraphicsGeometry=i.GraphicsData=i.Graphics=i.GRAPHICS_CURVES=i.FillStyle=void 0;var f=t("@pixi/core"),D=t("@pixi/math"),d=t("@pixi/utils"),m=t("@pixi/constants"),r=t("@pixi/display"),v={adaptive:!0,maxLength:10,minSegments:8,maxSegments:2048,_segmentsCount:function(t,e){if(void 0===e&&(e=20),!this.adaptive||!t||Number.isNaN(t))return e;t=Math.ceil(t/this.maxLength);return t<this.minSegments?t=this.minSegments:t>this.maxSegments&&(t=this.maxSegments),t}};i.GRAPHICS_CURVES=v;function n(){this.reset()}(i.FillStyle=n).prototype.clone=function(){var t=new n;return t.color=this.color,t.alpha=this.alpha,t.texture=this.texture,t.matrix=this.matrix,t.visible=this.visible,t},n.prototype.reset=function(){this.color=16777215,this.alpha=1,this.texture=f.Texture.WHITE,this.matrix=null,this.visible=!1},n.prototype.destroy=function(){this.texture=null,this.matrix=null};var s={build:function(t){t.points=t.shape.points.slice()},triangulate:function(t,e){var i=t.points,n=t.holes,r=e.points,s=e.indices;if(6<=i.length){for(var o=[],a=0;a<n.length;a++){var h=n[a];o.push(i.length/2),i=i.concat(h.points)}var l=(0,d.earcut)(i,o,2);if(l){for(var u=r.length/2,c=0;c<l.length;c+=3)s.push(l[c]+u),s.push(l[c+1]+u),s.push(l[c+2]+u);for(var p=0;p<i.length;p++)r.push(i[p])}}}},o={build:function(t){var e,i,n=t.shape,r=t.points,s=n.x,o=n.y;if(r.length=0,i=t.type===D.SHAPES.CIRC?(e=n.radius,n.radius):(e=n.width,n.height),0!==e&&0!==i){var a=Math.floor(30*Math.sqrt(n.radius))||Math.floor(15*Math.sqrt(n.width+n.height));a/=2.3;for(var h=2*Math.PI/a,l=0;l<a-.5;l++)r.push(s+Math.sin(-h*l)*e,o+Math.cos(-h*l)*i);r.push(r[0],r[1])}},triangulate:function(t,e){var i=t.points,n=e.points,r=e.indices,s=n.length/2,o=s;n.push(t.shape.x,t.shape.y);for(var a=0;a<i.length;a+=2)n.push(i[a],i[a+1]),r.push(s++,o,s)}},a={build:function(t){var e=t.shape,i=e.x,n=e.y,r=e.width,e=e.height,t=t.points;t.length=0,t.push(i,n,i+r,n,i+r,n+e,i,n+e)},triangulate:function(t,e){var i=t.points,n=e.points,t=n.length/2;n.push(i[0],i[1],i[2],i[3],i[6],i[7],i[4],i[5]),e.indices.push(t,1+t,2+t,1+t,2+t,3+t)}},t={build:function(t){var e=t.shape,i=t.points,n=e.x,r=e.y,s=e.width,t=e.height,e=e.radius;i.length=0,h(n,r+e,n,r,n+e,r,i),h(n+s-e,r,n+s,r,n+s,r+e,i),h(n+s,r+t-e,n+s,r+t,n+s-e,r+t,i),h(n+e,r+t,n,r+t,n,r+t-e,i)},triangulate:function(t,e){for(var i=t.points,n=e.points,r=e.indices,s=n.length/2,o=(0,d.earcut)(i,null,2),a=0,h=o.length;a<h;a+=3)r.push(o[a]+s),r.push(o[a+1]+s),r.push(o[a+2]+s);for(var l=0,u=i.length;l<u;l++)n.push(i[l],i[++l])}};function y(t,e,i){return t+(e-t)*i}function h(t,e,i,n,r,s,o){void 0===o&&(o=[]);for(var a,h,l,u,c,p,d,_=o,f=0;f<=20;++f)a=y(t,i,d=f/20),h=y(e,n,d),l=y(i,r,d),u=y(n,s,d),c=y(a,l,d),p=y(h,u,d),_.push(c,p);return _}function l(h,t){h.lineStyle.native?function(t){var e=0,i=h.shape,n=h.points||i.points,i=i.type!==D.SHAPES.POLY||i.closeStroke;if(0!==n.length){var r=t.points,s=t.indices,o=n.length/2,t=r.length/2,a=t;for(r.push(n[0],n[1]),e=1;e<o;e++)r.push(n[2*e],n[2*e+1]),s.push(a,a+1),a++;i&&s.push(a,t)}}(t):function(t,e){var i=t.shape,n=t.points||i.points.slice(),r=e.closePointEps;if(0!==n.length){var s=t.lineStyle,o=new D.Point(n[0],n[1]),t=new D.Point(n[n.length-2],n[n.length-1]),i=i.type!==D.SHAPES.POLY||i.closeStroke,r=Math.abs(o.x-t.x)<r&&Math.abs(o.y-t.y)<r;i&&(n=n.slice(),r&&(n.pop(),n.pop(),t.set(n[n.length-2],n[n.length-1])),r=t.x+.5*(o.x-t.x),t=t.y+.5*(o.y-t.y),n.unshift(r,t),n.push(r,t));var a,h,l=e.points,u=n.length/2,c=n.length,p=l.length/2,d=s.width/2,_=n[0],f=n[1],m=n[2],y=n[3],g=-(f-y),v=_-m,w=Math.sqrt(g*g+v*v);g/=w,v/=w,g*=d,v*=d;var s=s.alignment,x=2*(1-s),b=2*s;l.push(_-g*x,f-v*x),l.push(_+g*b,f+v*b);for(var E=1;E<u-1;++E){_=n[2*(E-1)],f=n[2*(E-1)+1],m=n[2*E],y=n[2*E+1],M=n[2*(E+1)],I=n[2*(E+1)+1],g=-(f-y),v=_-m,g/=w=Math.sqrt(g*g+v*v),v/=w,g*=d,v*=d,a=-(y-I),h=m-M,a/=w=Math.sqrt(a*a+h*h),h/=w;var $=-v+f-(-v+y),A=-g+m-(-g+_),S=(-g+_)*(-v+y)-(-g+m)*(-v+f),T=-(h*=d)+I-(-h+y),C=-(a*=d)+m-(-a+M),M=(-a+M)*(-h+y)-(-a+m)*(-h+I),I=$*C-T*A;Math.abs(I)<.1?(I+=10.1,l.push(m-g*x,y-v*x),l.push(m+g*b,y+v*b)):196*d*d<((C=(A*M-C*S)/I)-m)*(C-m)+((I=(T*S-$*M)/I)-y)*(I-y)?(a=g-a,h=v-h,a/=w=Math.sqrt(a*a+h*h),h/=w,a*=d,h*=d,l.push(m-a*x,y-h*x),l.push(m+a*b,y+h*b),l.push(m-a*b*x,y-h*x),c++):(l.push(m+(C-m)*x,y+(I-y)*x),l.push(m-(C-m)*b,y-(I-y)*b))}_=n[2*(u-2)],f=n[2*(u-2)+1],m=n[2*(u-1)],g=-(f-(y=n[2*(u-1)+1])),v=_-m,g/=w=Math.sqrt(g*g+v*v),v/=w,g*=d,v*=d,l.push(m-g*x,y-v*x),l.push(m+g*b,y+v*b);for(var P=e.indices,O=0;O<c-2;++O)P.push(p,p+1,p+2),p++}}(h,t)}function p(){}var _,u=((_=D.Polygon)&&(c.__proto__=_),(c.prototype=Object.create(_&&_.prototype)).constructor=c);function c(t,e,i,n,r,s){r=r||n/2;for(var o=-1*Math.PI/2+s,a=2*i,h=D.PI_2/a,l=[],u=0;u<a;u++){var c=u%2?r:n,p=u*h+o;l.push(t+c*Math.cos(p),e+c*Math.sin(p))}_.call(this,l)}p.curveTo=function(t,e,i,n,r,s){var o=s[s.length-2],a=s[s.length-1]-e,h=o-t,l=n-e,u=i-t,c=Math.abs(a*u-h*l);if(c<1e-8||0===r)return s[s.length-2]===t&&s[s.length-1]===e||s.push(t,e),null;var p=a*a+h*h,d=l*l+u*u,o=a*l+h*u,n=r*Math.sqrt(p)/c,i=r*Math.sqrt(d)/c,s=n*o/p,c=i*o/d,p=n*u+i*h,o=n*l+i*a,d=h*(i+s),i=a*(i+s),s=u*(n+c),c=l*(n+c);return{cx:p+t,cy:o+e,radius:r,startAngle:Math.atan2(i-o,d-p),endAngle:Math.atan2(c-o,s-p),anticlockwise:u*a<h*l}},p.arc=function(t,e,i,n,r,s,o,a,h){for(var l=o-s,o=v._segmentsCount(Math.abs(l)*r,40*Math.ceil(Math.abs(l)/D.PI_2)),u=l/(2*o),c=2*u,p=Math.cos(u),d=Math.sin(u),_=o-1,f=_%1/_,m=0;m<=_;++m){var y=u+s+c*(m+f*m),g=Math.cos(y),y=-Math.sin(y);h.push((p*g+d*y)*r+i,(p*-y+d*g)*r+n)}};function g(){}g.curveLength=function(t,e,i,n,r,s,o,a){for(var h,l,u,c,p,d,_,f,m,y,g=0,v=t,w=e,x=1;x<=10;++x)m=v-(_=(d=(p=(c=1-(h=x/10))*c)*c)*t+3*p*h*i+3*c*(l=h*h)*r+(u=l*h)*o),y=w-(f=d*e+3*p*h*n+3*c*l*s+u*a),v=_,w=f,g+=Math.sqrt(m*m+y*y);return g},g.curveTo=function(t,e,i,n,r,s,o){var a=o[o.length-2],h=o[o.length-1];o.length-=2;var l,u,c,p,d,_=v._segmentsCount(g.curveLength(a,h,t,e,i,n,r,s));o.push(a,h);for(var f,m=1;m<=_;++m)c=(u=(l=1-(f=m/_))*l)*l,d=(p=f*f)*f,o.push(c*a+3*u*f*t+3*l*p*i+d*r,c*h+3*u*f*e+3*l*p*n+d*s)};function w(){}w.curveLength=function(t,e,i,n,r,s){var o=t-2*i+r,a=e-2*n+s,r=2*i-2*t,s=2*n-2*e,i=4*(o*o+a*a),t=4*(o*r+a*s),n=r*r+s*s,e=2*Math.sqrt(i+t+n),o=Math.sqrt(i),a=2*i*o,r=2*Math.sqrt(n),s=t/o;return(a*e+o*t*(e-r)+(4*n*i-t*t)*Math.log((2*o+s+e)/(s+r)))/(4*a)},w.curveTo=function(t,e,i,n,r){for(var s=r[r.length-2],o=r[r.length-1],a=v._segmentsCount(w.curveLength(s,o,t,e,i,n)),h=1;h<=a;++h){var l=h/a,u=s+(t-s)*l,c=o+(e-o)*l;r.push(u+(t+(i-t)*l-u)*l,c+(e+(n-e)*l-c)*l)}};function x(){this.reset()}x.prototype.begin=function(t,e,i){this.reset(),this.style=t,this.start=e,this.attribStart=i},x.prototype.end=function(t,e){this.attribSize=e-this.attribStart,this.size=t-this.start},x.prototype.reset=function(){this.style=null,this.size=0,this.start=0,this.attribStart=0,this.attribSize=0};var b={};b[D.SHAPES.POLY]=s,b[D.SHAPES.CIRC]=o,b[D.SHAPES.ELIP]=o,b[D.SHAPES.RECT]=a,b[D.SHAPES.RREC]=t;var E=[],$=[],t={buildPoly:s,buildCircle:o,buildRectangle:a,buildRoundedRectangle:t,FILL_COMMANDS:b,BATCH_POOL:E,DRAW_CALL_POOL:$,buildLine:l,buildComplexPoly:function(t,e){var i=t.points.slice();if(!(i.length<6)){var n=e.indices;e.points=i,e.alpha=t.fillAlpha,e.color=(0,d.hex2rgb)(t.fillColor);for(var r,s,o=1/0,a=-1/0,h=1/0,l=-1/0,u=0;u<i.length;u+=2)o=(r=i[u])<o?r:o,a=a<r?r:a,h=(s=i[u+1])<h?s:h,l=l<s?s:l;i.push(o,h,a,h,a,l,o,l);for(var c=i.length/2,p=0;p<c;p++)n.push(p)}},bezierCurveTo:function(t,e,i,n,r,s,o,a,h,l){void 0===l&&(l=[]);var u,c,p,d,_;l.push(t,e);for(var f,m=1;m<=h;++m)p=(c=(u=1-(f=m/h))*u)*u,_=(d=f*f)*f,l.push(p*t+3*c*f*i+3*u*d*r+_*o,p*e+3*c*f*n+3*u*d*s+_*a);return l},Star:u,ArcUtils:p,BezierUtils:g,QuadraticUtils:w,BatchPart:x};i.graphicsUtils=t;function A(t,e,i,n){void 0===e&&(e=null),void 0===i&&(i=null),void 0===n&&(n=null),this.shape=t,this.lineStyle=i,this.fillStyle=e,this.matrix=n,this.type=t.type,this.points=[],this.holes=[]}(i.GraphicsData=A).prototype.clone=function(){return new A(this.shape,this.fillStyle,this.lineStyle,this.matrix)},A.prototype.destroy=function(){this.shape=null,this.holes.length=0,this.holes=null,this.points.length=0,this.points=null,this.lineStyle=null,this.fillStyle=null};var S=new D.Point,T=new r.Bounds,C=function(i){function n(){i.call(this),this.points=[],this.colors=[],this.uvs=[],this.indices=[],this.textureIds=[],this.graphicsData=[],this.dirty=0,this.batchDirty=-1,this.cacheDirty=-1,this.clearDirty=0,this.drawCalls=[],this.batches=[],this.shapeIndex=0,this._bounds=new r.Bounds,this.boundsDirty=-1,this.boundsPadding=0,this.batchable=!1,this.indicesUint16=null,this.uvsFloat32=null,this.closePointEps=1e-4}i&&(n.__proto__=i),(n.prototype=Object.create(i&&i.prototype)).constructor=n;var t={bounds:{configurable:!0}};return t.bounds.get=function(){return this.boundsDirty!==this.dirty&&(this.boundsDirty=this.dirty,this.calculateBounds()),this._bounds},n.prototype.invalidate=function(){this.boundsDirty=-1,this.dirty++,this.batchDirty++,this.shapeIndex=0,this.points.length=0,this.colors.length=0,this.uvs.length=0,this.indices.length=0;for(var t=this.textureIds.length=0;t<this.drawCalls.length;t++)this.drawCalls[t].textures.length=0,$.push(this.drawCalls[t]);for(var e=this.drawCalls.length=0;e<this.batches.length;e++){var i=this.batches[e];i.reset(),E.push(i)}this.batches.length=0},n.prototype.clear=function(){return 0<this.graphicsData.length&&(this.invalidate(),this.clearDirty++,this.graphicsData.length=0),this},n.prototype.drawShape=function(t,e,i,n){n=new A(t,e,i,n);return this.graphicsData.push(n),this.dirty++,this},n.prototype.drawHole=function(t,e){if(!this.graphicsData.length)return null;t=new A(t,null,null,e),e=this.graphicsData[this.graphicsData.length-1];return t.lineStyle=e.lineStyle,e.holes.push(t),this.dirty++,this},n.prototype.destroy=function(t){i.prototype.destroy.call(this,t);for(var e=0;e<this.graphicsData.length;++e)this.graphicsData[e].destroy();this.points.length=0,this.points=null,this.colors.length=0,this.colors=null,this.uvs.length=0,this.uvs=null,this.indices.length=0,this.indices=null,this.indexBuffer.destroy(),this.indexBuffer=null,this.graphicsData.length=0,this.graphicsData=null,this.drawCalls.length=0,this.drawCalls=null,this.batches.length=0,this.batches=null,this._bounds=null},n.prototype.containsPoint=function(t){for(var e=this.graphicsData,i=0;i<e.length;++i){var n=e[i];if(n.fillStyle.visible&&n.shape&&(n.matrix?n.matrix.applyInverse(t,S):S.copyFrom(t),n.shape.contains(S.x,S.y))){var r=!1;if(n.holes)for(var s=0;s<n.holes.length;s++)if(n.holes[s].shape.contains(S.x,S.y)){r=!0;break}if(!r)return!0}}return!1},n.prototype.updateBatches=function(){if(this.graphicsData.length){if(this.validateBatching()){this.cacheDirty=this.dirty;var t=this.uvs,e=this.graphicsData,i=null,n=null;0<this.batches.length&&(n=(i=this.batches[this.batches.length-1]).style);for(var r,s,o=this.shapeIndex;o<e.length;o++){this.shapeIndex++;var a=e[o],h=a.fillStyle,l=a.lineStyle;b[a.type].build(a),a.matrix&&this.transformPoints(a.points,a.matrix);for(var u=0;u<2;u++){var c,p,d,_=0===u?h:l;_.visible&&(d=_.texture.baseTexture,c=this.indices.length,p=this.points.length/2,d.wrapMode=m.WRAP_MODES.REPEAT,0===u?this.processFill(a):this.processLine(a),0!=(d=this.points.length/2-p)&&(i&&!this._compareStyles(n,_)&&(i.end(c,p),i=null),i||((i=E.pop()||new x).begin(_,c,p),this.batches.push(i),n=_),this.addUvs(this.points,t,_.texture,p,d,_.matrix)))}}i&&(r=this.indices.length,s=this.points.length/2,i.end(r,s)),0!==this.batches.length?(this.indicesUint16=new Uint16Array(this.indices),this.batchable=this.isBatchable(),this.batchable?this.packBatches():this.buildDrawCalls()):this.batchable=!0}}else this.batchable=!0},n.prototype._compareStyles=function(t,e){return!(!t||!e)&&t.texture.baseTexture===e.texture.baseTexture&&t.color+t.alpha===e.color+e.alpha&&!!t.native==!!e.native},n.prototype.validateBatching=function(){if(this.dirty===this.cacheDirty||!this.graphicsData.length)return!1;for(var t=0,e=this.graphicsData.length;t<e;t++){var i=this.graphicsData[t],n=i.fillStyle,i=i.lineStyle;if(n&&!n.texture.baseTexture.valid)return!1;if(i&&!i.texture.baseTexture.valid)return!1}return!0},n.prototype.packBatches=function(){this.batchDirty++,this.uvsFloat32=new Float32Array(this.uvs);for(var t=this.batches,e=0,i=t.length;e<i;e++)for(var n=t[e],r=0;r<n.size;r++){var s=n.start+r;this.indicesUint16[s]=this.indicesUint16[s]-n.attribStart}},n.prototype.isBatchable=function(){for(var t=this.batches,e=0;e<t.length;e++)if(t[e].style.native)return!1;return this.points.length<2*n.BATCHABLE_SIZE},n.prototype.buildDrawCalls=function(){for(var t=++f.BaseTexture._globalBatch,e=0;e<this.drawCalls.length;e++)this.drawCalls[e].textures.length=0,$.push(this.drawCalls[e]);this.drawCalls.length=0;var i=this.colors,n=this.textureIds,r=$.pop();r||((r=new f.BatchDrawCall).textures=new f.BatchTextureArray),r.textures.count=0,r.start=0,r.size=0,r.type=m.DRAW_MODES.TRIANGLES;var s,o=0,a=null,h=!1,l=m.DRAW_MODES.TRIANGLES,u=0;this.drawCalls.push(r);for(var c=0;c<this.batches.length;c++){var p=this.batches[c],d=p.style,_=d.texture.baseTexture;h!==!!d.native&&(l=(h=!!d.native)?m.DRAW_MODES.LINES:m.DRAW_MODES.TRIANGLES,a=null,o=8,t++),a!==_&&((a=_)._batchEnabled!==t&&(8===o&&(t++,(o=0)<r.size&&((r=$.pop())||((r=new f.BatchDrawCall).textures=new f.BatchTextureArray),this.drawCalls.push(r)),r.start=u,r.size=0,r.textures.count=0,r.type=l),_.touched=1,_._batchEnabled=t,_._batchLocation=o,_.wrapMode=10497,r.textures.elements[r.textures.count++]=_,o++)),r.size+=p.size,u+=p.size,s=_._batchLocation,this.addColors(i,d.color,d.alpha,p.attribSize),this.addTextureIds(n,s,p.attribSize)}f.BaseTexture._globalBatch=t,this.packAttributes()},n.prototype.packAttributes=function(){for(var t=this.points,e=this.uvs,i=this.colors,n=this.textureIds,r=new ArrayBuffer(3*t.length*4),s=new Float32Array(r),o=new Uint32Array(r),a=0,h=0;h<t.length/2;h++)s[a++]=t[2*h],s[a++]=t[2*h+1],s[a++]=e[2*h],s[a++]=e[2*h+1],o[a++]=i[h],s[a++]=n[h];this._buffer.update(r),this._indexBuffer.update(this.indicesUint16)},n.prototype.processFill=function(t){t.holes.length?(this.processHoles(t.holes),s.triangulate(t,this)):b[t.type].triangulate(t,this)},n.prototype.processLine=function(t){l(t,this);for(var e=0;e<t.holes.length;e++)l(t.holes[e],this)},n.prototype.processHoles=function(t){for(var e=0;e<t.length;e++){var i=t[e];b[i.type].build(i),i.matrix&&this.transformPoints(i.points,i.matrix)}},n.prototype.calculateBounds=function(){var t=this._bounds,e=T,i=D.Matrix.IDENTITY;this._bounds.clear(),e.clear();for(var n=0;n<this.graphicsData.length;n++){var r=this.graphicsData[n],s=r.shape,o=r.type,a=r.lineStyle,h=r.matrix||D.Matrix.IDENTITY,l=0;a&&a.visible&&(r=a.alignment,l=a.width,o===D.SHAPES.POLY?l*=.5+Math.abs(.5-r):l*=Math.max(0,r)),i!==h&&(e.isEmpty()||(t.addBoundsMatrix(e,i),e.clear()),i=h),o===D.SHAPES.RECT||o===D.SHAPES.RREC?e.addFramePad(s.x,s.y,s.x+s.width,s.y+s.height,l,l):o===D.SHAPES.CIRC?e.addFramePad(s.x,s.y,s.x,s.y,s.radius+l,s.radius+l):o===D.SHAPES.ELIP?e.addFramePad(s.x,s.y,s.x,s.y,s.width+l,s.height+l):t.addVerticesMatrix(i,s.points,0,s.points.length,l,l)}e.isEmpty()||t.addBoundsMatrix(e,i),t.pad(this.boundsPadding,this.boundsPadding)},n.prototype.transformPoints=function(t,e){for(var i=0;i<t.length/2;i++){var n=t[2*i],r=t[2*i+1];t[2*i]=e.a*n+e.c*r+e.tx,t[2*i+1]=e.b*n+e.d*r+e.ty}},n.prototype.addColors=function(t,e,i,n){for(var e=(e>>16)+(65280&e)+((255&e)<<16),r=(0,d.premultiplyTint)(e,i);0<n--;)t.push(r)},n.prototype.addTextureIds=function(t,e,i){for(;0<i--;)t.push(e)},n.prototype.addUvs=function(t,e,i,n,r,s){for(var o=0,a=e.length,h=i.frame;o<r;){var l,u=t[2*(n+o)],c=t[2*(n+o)+1];s&&(l=s.a*u+s.c*c+s.tx,c=s.b*u+s.d*c+s.ty,u=l),o++,e.push(u/h.width,c/h.height)}var p=i.baseTexture;(h.width<p.width||h.height<p.height)&&this.adjustUvs(e,i,a,r)},n.prototype.adjustUvs=function(t,e,i,n){for(var r=e.baseTexture,s=i+2*n,e=e.frame,o=e.width/r.width,a=e.height/r.height,h=e.x/e.width,l=e.y/e.height,u=Math.floor(t[i]+1e-6),c=Math.floor(t[i+1]+1e-6),p=i+2;p<s;p+=2)u=Math.min(u,Math.floor(t[p]+1e-6)),c=Math.min(c,Math.floor(t[p+1]+1e-6));h-=u,l-=c;for(var d=i;d<s;d+=2)t[d]=(t[d]+h)*o,t[d+1]=(t[d+1]+l)*a},Object.defineProperties(n.prototype,t),n}(f.BatchGeometry);(i.GraphicsGeometry=C).BATCHABLE_SIZE=100;var M,I=((M=n)&&(P.__proto__=M),((P.prototype=Object.create(M&&M.prototype)).constructor=P).prototype.clone=function(){var t=new P;return t.color=this.color,t.alpha=this.alpha,t.texture=this.texture,t.matrix=this.matrix,t.visible=this.visible,t.width=this.width,t.alignment=this.alignment,t.native=this.native,t},P.prototype.reset=function(){M.prototype.reset.call(this),this.color=0,this.width=0,this.alignment=.5,this.native=!1},P);function P(){M.apply(this,arguments)}i.LineStyle=I;var O=new Float32Array(3),R={},t=function(e){function i(t){void 0===t&&(t=null),e.call(this),this.geometry=t||new C,this.geometry.refCount++,this.shader=null,this.state=f.State.for2d(),this._fillStyle=new n,this._lineStyle=new I,this._matrix=null,this._holeMode=!1,this.currentPath=null,this.batches=[],this.batchTint=-1,this.vertexData=null,this._transformID=-1,this.batchDirty=-1,this.pluginName="batch",this.tint=16777215,this.blendMode=m.BLEND_MODES.NORMAL}e&&(i.__proto__=e);var t={blendMode:{configurable:!0},tint:{configurable:!0},fill:{configurable:!0},line:{configurable:!0}};return((i.prototype=Object.create(e&&e.prototype)).constructor=i).prototype.clone=function(){return this.finishPoly(),new i(this.geometry)},t.blendMode.set=function(t){this.state.blendMode=t},t.blendMode.get=function(){return this.state.blendMode},t.tint.get=function(){return this._tint},t.tint.set=function(t){this._tint=t},t.fill.get=function(){return this._fillStyle},t.line.get=function(){return this._lineStyle},i.prototype.lineStyle=function(t){var e;return"number"==typeof t&&(t={width:(e=arguments)[0]||0,color:e[1]||0,alpha:void 0!==e[2]?e[2]:1,alignment:void 0!==e[3]?e[3]:.5,native:!!e[4]}),this.lineTextureStyle(t)},i.prototype.lineTextureStyle=function(e){"number"==typeof e&&((0,d.deprecation)("v5.2.0","Please use object-based options for Graphics#lineTextureStyle"),e={width:arguments[0],texture:arguments[1],color:arguments[2],alpha:arguments[3],matrix:arguments[4],alignment:arguments[5],native:arguments[6]},Object.keys(e).forEach(function(t){return void 0===e[t]&&delete e[t]})),e=Object.assign({width:0,texture:f.Texture.WHITE,color:e&&e.texture?16777215:0,alpha:1,matrix:null,alignment:.5,native:!1},e),this.currentPath&&this.startPoly();var t=0<e.width&&0<e.alpha;return t?(e.matrix&&(e.matrix=e.matrix.clone(),e.matrix.invert()),Object.assign(this._lineStyle,{visible:t},e)):this._lineStyle.reset(),this},i.prototype.startPoly=function(){var t,e;this.currentPath?(t=this.currentPath.points,2<(e=this.currentPath.points.length)&&(this.drawShape(this.currentPath),this.currentPath=new D.Polygon,this.currentPath.closeStroke=!1,this.currentPath.points.push(t[e-2],t[e-1]))):(this.currentPath=new D.Polygon,this.currentPath.closeStroke=!1)},i.prototype.finishPoly=function(){this.currentPath&&(2<this.currentPath.points.length?(this.drawShape(this.currentPath),this.currentPath=null):this.currentPath.points.length=0)},i.prototype.moveTo=function(t,e){return this.startPoly(),this.currentPath.points[0]=t,this.currentPath.points[1]=e,this},i.prototype.lineTo=function(t,e){this.currentPath||this.moveTo(0,0);var i=this.currentPath.points,n=i[i.length-2],r=i[i.length-1];return n===t&&r===e||i.push(t,e),this},i.prototype._initCurve=function(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.currentPath?0===this.currentPath.points.length&&(this.currentPath.points=[t,e]):this.moveTo(t,e)},i.prototype.quadraticCurveTo=function(t,e,i,n){this._initCurve();var r=this.currentPath.points;return 0===r.length&&this.moveTo(0,0),w.curveTo(t,e,i,n,r),this},i.prototype.bezierCurveTo=function(t,e,i,n,r,s){return this._initCurve(),g.curveTo(t,e,i,n,r,s,this.currentPath.points),this},i.prototype.arcTo=function(t,e,i,n,r){this._initCurve(t,e);var s=this.currentPath.points,t=p.curveTo(t,e,i,n,r,s);return t&&(e=t.cx,i=t.cy,n=t.radius,r=t.startAngle,s=t.endAngle,t=t.anticlockwise,this.arc(e,i,n,r,s,t)),this},i.prototype.arc=function(t,e,i,n,r,s){if(void 0===s&&(s=!1),n===r)return this;if(!s&&r<=n?r+=D.PI_2:s&&n<=r&&(n+=D.PI_2),0==r-n)return this;var o,a,h=t+Math.cos(n)*i,l=e+Math.sin(n)*i,u=this.geometry.closePointEps,c=this.currentPath?this.currentPath.points:null;return c?(o=Math.abs(c[c.length-2]-h),a=Math.abs(c[c.length-1]-l),o<u&&a<u||c.push(h,l)):(this.moveTo(h,l),c=this.currentPath.points),p.arc(h,l,t,e,i,n,r,s,c),this},i.prototype.beginFill=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=1),this.beginTextureFill({texture:f.Texture.WHITE,color:t,alpha:e})},i.prototype.beginTextureFill=function(e){e instanceof f.Texture&&((0,d.deprecation)("v5.2.0","Please use object-based options for Graphics#beginTextureFill"),e={texture:arguments[0],color:arguments[1],alpha:arguments[2],matrix:arguments[3]},Object.keys(e).forEach(function(t){return void 0===e[t]&&delete e[t]})),e=Object.assign({texture:f.Texture.WHITE,color:16777215,alpha:1,matrix:null},e),this.currentPath&&this.startPoly();var t=0<e.alpha;return t?(e.matrix&&(e.matrix=e.matrix.clone(),e.matrix.invert()),Object.assign(this._fillStyle,{visible:t},e)):this._fillStyle.reset(),this},i.prototype.endFill=function(){return this.finishPoly(),this._fillStyle.reset(),this},i.prototype.drawRect=function(t,e,i,n){return this.drawShape(new D.Rectangle(t,e,i,n))},i.prototype.drawRoundedRect=function(t,e,i,n,r){return this.drawShape(new D.RoundedRectangle(t,e,i,n,r))},i.prototype.drawCircle=function(t,e,i){return this.drawShape(new D.Circle(t,e,i))},i.prototype.drawEllipse=function(t,e,i,n){return this.drawShape(new D.Ellipse(t,e,i,n))},i.prototype.drawPolygon=function(t){var e=arguments,i=t,n=!0;if(i.points&&(n=i.closeStroke,i=i.points),!Array.isArray(i)){i=new Array(arguments.length);for(var r=0;r<i.length;++r)i[r]=e[r]}t=new D.Polygon(i);return t.closeStroke=n,this.drawShape(t),this},i.prototype.drawShape=function(t){return this._holeMode?this.geometry.drawHole(t,this._matrix):this.geometry.drawShape(t,this._fillStyle.clone(),this._lineStyle.clone(),this._matrix),this},i.prototype.drawStar=function(t,e,i,n,r,s){return void 0===s&&(s=0),this.drawPolygon(new u(t,e,i,n,r,s))},i.prototype.clear=function(){return this.geometry.clear(),this._lineStyle.reset(),this._fillStyle.reset(),this._matrix=null,this._holeMode=!1,this.currentPath=null,this},i.prototype.isFastRect=function(){return 1===this.geometry.graphicsData.length&&this.geometry.graphicsData[0].shape.type===D.SHAPES.RECT&&!this.geometry.graphicsData[0].lineWidth},i.prototype._render=function(t){this.finishPoly();var e=this.geometry;e.updateBatches(),e.batchable?(this.batchDirty!==e.batchDirty&&this._populateBatches(),this._renderBatched(t)):(t.batch.flush(),this._renderDirect(t))},i.prototype._populateBatches=function(){var t=this.geometry,e=this.blendMode;this.batches=[],this.batchTint=-1,this._transformID=-1,this.batchDirty=t.batchDirty,this.vertexData=new Float32Array(t.points);for(var i=0,n=t.batches.length;i<n;i++){var r=t.batches[i],s=r.style.color,o=new Float32Array(this.vertexData.buffer,4*r.attribStart*2,2*r.attribSize),a=new Float32Array(t.uvsFloat32.buffer,4*r.attribStart*2,2*r.attribSize),r={vertexData:o,blendMode:e,indices:new Uint16Array(t.indicesUint16.buffer,2*r.start,r.size),uvs:a,_batchRGB:(0,d.hex2rgb)(s),_tintRGB:s,_texture:r.style.texture,alpha:r.style.alpha,worldAlpha:1};this.batches[i]=r}},i.prototype._renderBatched=function(t){if(this.batches.length){t.batch.setObjectRenderer(t.plugins[this.pluginName]),this.calculateVertices(),this.calculateTints();for(var e=0,i=this.batches.length;e<i;e++){var n=this.batches[e];n.worldAlpha=this.worldAlpha*n.alpha,t.plugins[this.pluginName].render(n)}}},i.prototype._renderDirect=function(t){var e=this._resolveDirectShader(t),i=this.geometry,n=this.tint,r=this.worldAlpha,s=e.uniforms,o=i.drawCalls;s.translationMatrix=this.transform.worldTransform,s.tint[0]=(n>>16&255)/255*r,s.tint[1]=(n>>8&255)/255*r,s.tint[2]=(255&n)/255*r,s.tint[3]=r,t.shader.bind(e),t.geometry.bind(i,e),t.state.set(this.state);for(var a=0,h=o.length;a<h;a++)this._renderDrawCallDirect(t,i.drawCalls[a])},i.prototype._renderDrawCallDirect=function(t,e){for(var i=e.textures,n=e.type,r=e.size,e=e.start,s=i.count,o=0;o<s;o++)t.texture.bind(i.elements[o],o);t.geometry.draw(n,r,e)},i.prototype._resolveDirectShader=function(t){var e=this.shader,i=this.pluginName;if(!e){if(!R[i]){for(var n=new Int32Array(16),r=0;r<16;r++)n[r]=r;var s={tint:new Float32Array([1,1,1,1]),translationMatrix:new D.Matrix,default:f.UniformGroup.from({uSamplers:n},!0)},t=t.plugins[i]._shader.program;R[i]=new f.Shader(t,s)}e=R[i]}return e},i.prototype._calculateBounds=function(){this.finishPoly();var t,e,i,n=this.geometry;n.graphicsData.length&&(t=(i=n.bounds).minX,e=i.minY,n=i.maxX,i=i.maxY,this._bounds.addFrame(this.transform,t,e,n,i))},i.prototype.containsPoint=function(t){return this.worldTransform.applyInverse(t,i._TEMP_POINT),this.geometry.containsPoint(i._TEMP_POINT)},i.prototype.calculateTints=function(){if(this.batchTint!==this.tint){this.batchTint=this.tint;for(var t=(0,d.hex2rgb)(this.tint,O),e=0;e<this.batches.length;e++){var i=this.batches[e],n=i._batchRGB,n=(t[0]*n[0]*255<<16)+(t[1]*n[1]*255<<8)+(0|t[2]*n[2]*255);i._tintRGB=(n>>16)+(65280&n)+((255&n)<<16)}}},i.prototype.calculateVertices=function(){if(this._transformID!==this.transform._worldID){this._transformID=this.transform._worldID;for(var t=this.transform.worldTransform,e=t.a,i=t.b,n=t.c,r=t.d,s=t.tx,o=t.ty,a=this.geometry.points,h=this.vertexData,l=0,u=0;u<a.length;u+=2){var c=a[u],p=a[u+1];h[l++]=e*c+n*p+s,h[l++]=r*p+i*c+o}}},i.prototype.closePath=function(){var t=this.currentPath;return t&&(t.closeStroke=!0),this},i.prototype.setMatrix=function(t){return this._matrix=t,this},i.prototype.beginHole=function(){return this.finishPoly(),this._holeMode=!0,this},i.prototype.endHole=function(){return this.finishPoly(),this._holeMode=!1,this},i.prototype.destroy=function(t){e.prototype.destroy.call(this,t),this.geometry.refCount--,0===this.geometry.refCount&&this.geometry.dispose(),this._matrix=null,this.currentPath=null,this._lineStyle.destroy(),this._lineStyle=null,this._fillStyle.destroy(),this._fillStyle=null,this.geometry=null,this.shader=null,this.vertexData=null,this.batches.length=0,this.batches=null,e.prototype.destroy.call(this,t)},Object.defineProperties(i.prototype,t),i}(r.Container);(i.Graphics=t)._TEMP_POINT=new D.Point},{"@pixi/core":"qqf8","@pixi/math":"GTL5","@pixi/utils":"x5Ec","@pixi/constants":"R76a","@pixi/display":"LJAM"}],vBI9:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.Sprite=void 0;var n=t("@pixi/math"),r=t("@pixi/utils"),s=t("@pixi/core"),o=t("@pixi/constants"),a=t("@pixi/display"),m=t("@pixi/settings"),h=new n.Point,l=new Uint16Array([0,1,2,0,2,3]),a=function(e){function i(t){e.call(this),this._anchor=new n.ObservablePoint(this._onAnchorUpdate,this,t?t.defaultAnchor.x:0,t?t.defaultAnchor.y:0),this._texture=null,this._width=0,this._height=0,this._tint=null,this._tintRGB=null,this.tint=16777215,this.blendMode=o.BLEND_MODES.NORMAL,this.shader=null,this._cachedTint=16777215,this.uvs=null,this.texture=t||s.Texture.EMPTY,this.vertexData=new Float32Array(8),this.vertexTrimmedData=null,this._transformID=-1,this._textureID=-1,this._transformTrimmedID=-1,this._textureTrimmedID=-1,this.indices=l,this.size=4,this.start=0,this.pluginName="batch",this.isSprite=!0,this._roundPixels=m.settings.ROUND_PIXELS}e&&(i.__proto__=e);var t={roundPixels:{configurable:!0},width:{configurable:!0},height:{configurable:!0},anchor:{configurable:!0},tint:{configurable:!0},texture:{configurable:!0}};return((i.prototype=Object.create(e&&e.prototype)).constructor=i).prototype._onTextureUpdate=function(){this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this._width&&(this.scale.x=(0,r.sign)(this.scale.x)*this._width/this._texture.orig.width),this._height&&(this.scale.y=(0,r.sign)(this.scale.y)*this._height/this._texture.orig.height)},i.prototype._onAnchorUpdate=function(){this._transformID=-1,this._transformTrimmedID=-1},i.prototype.calculateVertices=function(){var t=this._texture;if(this._transformID!==this.transform._worldID||this._textureID!==t._updateID){this._textureID!==t._updateID&&(this.uvs=this._texture._uvs.uvsFloat32),this._transformID=this.transform._worldID,this._textureID=t._updateID;var e=this.transform.worldTransform,i=e.a,n=e.b,r=e.c,s=e.d,o=e.tx,a=e.ty,h=this.vertexData,l=t.trim,u=t.orig,c=this._anchor,p=0,d=0,e=0,t=0,e=l?(p=(d=l.x-c._x*u.width)+l.width,(t=l.y-c._y*u.height)+l.height):(p=(d=-c._x*u.width)+u.width,(t=-c._y*u.height)+u.height);if(h[0]=i*d+r*t+o,h[1]=s*t+n*d+a,h[2]=i*p+r*t+o,h[3]=s*t+n*p+a,h[4]=i*p+r*e+o,h[5]=s*e+n*p+a,h[6]=i*d+r*e+o,h[7]=s*e+n*d+a,this._roundPixels)for(var _=m.settings.RESOLUTION,f=0;f<h.length;++f)h[f]=Math.round((h[f]*_|0)/_)}},i.prototype.calculateTrimmedVertices=function(){if(this.vertexTrimmedData){if(this._transformTrimmedID===this.transform._worldID&&this._textureTrimmedID===this._texture._updateID)return}else this.vertexTrimmedData=new Float32Array(8);this._transformTrimmedID=this.transform._worldID,this._textureTrimmedID=this._texture._updateID;var t=this._texture,e=this.vertexTrimmedData,i=t.orig,n=this._anchor,r=this.transform.worldTransform,s=r.a,o=r.b,a=r.c,h=r.d,l=r.tx,u=r.ty,t=-n._x*i.width,r=t+i.width,n=-n._y*i.height,i=n+i.height;e[0]=s*t+a*n+l,e[1]=h*n+o*t+u,e[2]=s*r+a*n+l,e[3]=h*n+o*r+u,e[4]=s*r+a*i+l,e[5]=h*i+o*r+u,e[6]=s*t+a*i+l,e[7]=h*i+o*t+u},i.prototype._render=function(t){this.calculateVertices(),t.batch.setObjectRenderer(t.plugins[this.pluginName]),t.plugins[this.pluginName].render(this)},i.prototype._calculateBounds=function(){var t=this._texture.trim,e=this._texture.orig;!t||t.width===e.width&&t.height===e.height?(this.calculateVertices(),this._bounds.addQuad(this.vertexData)):(this.calculateTrimmedVertices(),this._bounds.addQuad(this.vertexTrimmedData))},i.prototype.getLocalBounds=function(t){return 0===this.children.length?(this._bounds.minX=this._texture.orig.width*-this._anchor._x,this._bounds.minY=this._texture.orig.height*-this._anchor._y,this._bounds.maxX=this._texture.orig.width*(1-this._anchor._x),this._bounds.maxY=this._texture.orig.height*(1-this._anchor._y),t||(this._localBoundsRect||(this._localBoundsRect=new n.Rectangle),t=this._localBoundsRect),this._bounds.getRectangle(t)):e.prototype.getLocalBounds.call(this,t)},i.prototype.containsPoint=function(t){this.worldTransform.applyInverse(t,h);var e=this._texture.orig.width,i=this._texture.orig.height,n=-e*this.anchor.x,t=0;return h.x>=n&&h.x<n+e&&(t=-i*this.anchor.y,h.y>=t&&h.y<t+i)},i.prototype.destroy=function(t){e.prototype.destroy.call(this,t),this._texture.off("update",this._onTextureUpdate,this),this._anchor=null,("boolean"==typeof t?t:t&&t.texture)&&(t="boolean"==typeof t?t:t&&t.baseTexture,this._texture.destroy(!!t)),this._texture=null,this.shader=null},i.from=function(t,e){return new i(t instanceof s.Texture?t:s.Texture.from(t,e))},t.roundPixels.set=function(t){this._roundPixels!==t&&(this._transformID=-1),this._roundPixels=t},t.roundPixels.get=function(){return this._roundPixels},t.width.get=function(){return Math.abs(this.scale.x)*this._texture.orig.width},t.width.set=function(t){var e=(0,r.sign)(this.scale.x)||1;this.scale.x=e*t/this._texture.orig.width,this._width=t},t.height.get=function(){return Math.abs(this.scale.y)*this._texture.orig.height},t.height.set=function(t){var e=(0,r.sign)(this.scale.y)||1;this.scale.y=e*t/this._texture.orig.height,this._height=t},t.anchor.get=function(){return this._anchor},t.anchor.set=function(t){this._anchor.copyFrom(t)},t.tint.get=function(){return this._tint},t.tint.set=function(t){this._tint=t,this._tintRGB=(t>>16)+(65280&t)+((255&t)<<16)},t.texture.get=function(){return this._texture},t.texture.set=function(t){this._texture!==t&&(this._texture&&this._texture.off("update",this._onTextureUpdate,this),this._texture=t||s.Texture.EMPTY,this._cachedTint=16777215,this._textureID=-1,this._textureTrimmedID=-1,t&&(t.baseTexture.valid?this._onTextureUpdate():t.once("update",this._onTextureUpdate,this)))},Object.defineProperties(i.prototype,t),i}(a.Container);i.Sprite=a},{"@pixi/math":"GTL5","@pixi/utils":"x5Ec","@pixi/core":"qqf8","@pixi/constants":"R76a","@pixi/display":"LJAM","@pixi/settings":"v11T"}],LtEJ:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.TextStyle=i.TextMetrics=i.Text=i.TEXT_GRADIENT=void 0;var n=t("@pixi/sprite"),s=t("@pixi/core"),o=t("@pixi/settings"),a=t("@pixi/math"),g=t("@pixi/utils"),f={LINEAR_VERTICAL:0,LINEAR_HORIZONTAL:1};i.TEXT_GRADIENT=f;function h(t){this.styleID=0,this.reset(),p(this,t,t)}var r={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fillGradientType:f.LINEAR_VERTICAL,fillGradientStops:[],fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",letterSpacing:0,lineHeight:0,lineJoin:"miter",miterLimit:10,padding:0,stroke:"black",strokeThickness:0,textBaseline:"alphabetic",trim:!1,whiteSpace:"pre",wordWrap:!1,wordWrapWidth:100,leading:0},l=["serif","sans-serif","monospace","cursive","fantasy","system-ui"],t={align:{configurable:!0},breakWords:{configurable:!0},dropShadow:{configurable:!0},dropShadowAlpha:{configurable:!0},dropShadowAngle:{configurable:!0},dropShadowBlur:{configurable:!0},dropShadowColor:{configurable:!0},dropShadowDistance:{configurable:!0},fill:{configurable:!0},fillGradientType:{configurable:!0},fillGradientStops:{configurable:!0},fontFamily:{configurable:!0},fontSize:{configurable:!0},fontStyle:{configurable:!0},fontVariant:{configurable:!0},fontWeight:{configurable:!0},letterSpacing:{configurable:!0},lineHeight:{configurable:!0},leading:{configurable:!0},lineJoin:{configurable:!0},miterLimit:{configurable:!0},padding:{configurable:!0},stroke:{configurable:!0},strokeThickness:{configurable:!0},textBaseline:{configurable:!0},trim:{configurable:!0},whiteSpace:{configurable:!0},wordWrap:{configurable:!0},wordWrapWidth:{configurable:!0}};function u(t){return"number"==typeof t?(0,g.hex2string)(t):("string"==typeof t&&0===t.indexOf("0x")&&(t=t.replace("0x","#")),t)}function c(t){if(Array.isArray(t)){for(var e=0;e<t.length;++e)t[e]=u(t[e]);return t}return u(t)}function p(t,e,i){for(var n in i)Array.isArray(e[n])?t[n]=e[n].slice():t[n]=e[n]}(i.TextStyle=h).prototype.clone=function(){var t={};return p(t,this,r),new h(t)},h.prototype.reset=function(){p(this,r,r)},t.align.get=function(){return this._align},t.align.set=function(t){this._align!==t&&(this._align=t,this.styleID++)},t.breakWords.get=function(){return this._breakWords},t.breakWords.set=function(t){this._breakWords!==t&&(this._breakWords=t,this.styleID++)},t.dropShadow.get=function(){return this._dropShadow},t.dropShadow.set=function(t){this._dropShadow!==t&&(this._dropShadow=t,this.styleID++)},t.dropShadowAlpha.get=function(){return this._dropShadowAlpha},t.dropShadowAlpha.set=function(t){this._dropShadowAlpha!==t&&(this._dropShadowAlpha=t,this.styleID++)},t.dropShadowAngle.get=function(){return this._dropShadowAngle},t.dropShadowAngle.set=function(t){this._dropShadowAngle!==t&&(this._dropShadowAngle=t,this.styleID++)},t.dropShadowBlur.get=function(){return this._dropShadowBlur},t.dropShadowBlur.set=function(t){this._dropShadowBlur!==t&&(this._dropShadowBlur=t,this.styleID++)},t.dropShadowColor.get=function(){return this._dropShadowColor},t.dropShadowColor.set=function(t){t=c(t);this._dropShadowColor!==t&&(this._dropShadowColor=t,this.styleID++)},t.dropShadowDistance.get=function(){return this._dropShadowDistance},t.dropShadowDistance.set=function(t){this._dropShadowDistance!==t&&(this._dropShadowDistance=t,this.styleID++)},t.fill.get=function(){return this._fill},t.fill.set=function(t){t=c(t);this._fill!==t&&(this._fill=t,this.styleID++)},t.fillGradientType.get=function(){return this._fillGradientType},t.fillGradientType.set=function(t){this._fillGradientType!==t&&(this._fillGradientType=t,this.styleID++)},t.fillGradientStops.get=function(){return this._fillGradientStops},t.fillGradientStops.set=function(t){!function(t,e){if(Array.isArray(t)&&Array.isArray(e)&&t.length===e.length){for(var i=0;i<t.length;++i)if(t[i]!==e[i])return;return 1}}(this._fillGradientStops,t)&&(this._fillGradientStops=t,this.styleID++)},t.fontFamily.get=function(){return this._fontFamily},t.fontFamily.set=function(t){this.fontFamily!==t&&(this._fontFamily=t,this.styleID++)},t.fontSize.get=function(){return this._fontSize},t.fontSize.set=function(t){this._fontSize!==t&&(this._fontSize=t,this.styleID++)},t.fontStyle.get=function(){return this._fontStyle},t.fontStyle.set=function(t){this._fontStyle!==t&&(this._fontStyle=t,this.styleID++)},t.fontVariant.get=function(){return this._fontVariant},t.fontVariant.set=function(t){this._fontVariant!==t&&(this._fontVariant=t,this.styleID++)},t.fontWeight.get=function(){return this._fontWeight},t.fontWeight.set=function(t){this._fontWeight!==t&&(this._fontWeight=t,this.styleID++)},t.letterSpacing.get=function(){return this._letterSpacing},t.letterSpacing.set=function(t){this._letterSpacing!==t&&(this._letterSpacing=t,this.styleID++)},t.lineHeight.get=function(){return this._lineHeight},t.lineHeight.set=function(t){this._lineHeight!==t&&(this._lineHeight=t,this.styleID++)},t.leading.get=function(){return this._leading},t.leading.set=function(t){this._leading!==t&&(this._leading=t,this.styleID++)},t.lineJoin.get=function(){return this._lineJoin},t.lineJoin.set=function(t){this._lineJoin!==t&&(this._lineJoin=t,this.styleID++)},t.miterLimit.get=function(){return this._miterLimit},t.miterLimit.set=function(t){this._miterLimit!==t&&(this._miterLimit=t,this.styleID++)},t.padding.get=function(){return this._padding},t.padding.set=function(t){this._padding!==t&&(this._padding=t,this.styleID++)},t.stroke.get=function(){return this._stroke},t.stroke.set=function(t){t=c(t);this._stroke!==t&&(this._stroke=t,this.styleID++)},t.strokeThickness.get=function(){return this._strokeThickness},t.strokeThickness.set=function(t){this._strokeThickness!==t&&(this._strokeThickness=t,this.styleID++)},t.textBaseline.get=function(){return this._textBaseline},t.textBaseline.set=function(t){this._textBaseline!==t&&(this._textBaseline=t,this.styleID++)},t.trim.get=function(){return this._trim},t.trim.set=function(t){this._trim!==t&&(this._trim=t,this.styleID++)},t.whiteSpace.get=function(){return this._whiteSpace},t.whiteSpace.set=function(t){this._whiteSpace!==t&&(this._whiteSpace=t,this.styleID++)},t.wordWrap.get=function(){return this._wordWrap},t.wordWrap.set=function(t){this._wordWrap!==t&&(this._wordWrap=t,this.styleID++)},t.wordWrapWidth.get=function(){return this._wordWrapWidth},t.wordWrapWidth.set=function(t){this._wordWrapWidth!==t&&(this._wordWrapWidth=t,this.styleID++)},h.prototype.toFontString=function(){var t="number"==typeof this.fontSize?this.fontSize+"px":this.fontSize,e=this.fontFamily;Array.isArray(this.fontFamily)||(e=this.fontFamily.split(","));for(var i=e.length-1;0<=i;i--){var n=e[i].trim();!/([\"\'])[^\'\"]+\1/.test(n)&&l.indexOf(n)<0&&(n='"'+n+'"'),e[i]=n}return this.fontStyle+" "+this.fontVariant+" "+this.fontWeight+" "+t+" "+e.join(",")},Object.defineProperties(h.prototype,t);function A(t,e,i,n,r,s,o,a,h){this.text=t,this.style=e,this.width=i,this.height=n,this.lines=r,this.lineWidths=s,this.lineHeight=o,this.maxLineWidth=a,this.fontProperties=h}(i.TextMetrics=A).measureText=function(t,e,i,n){void 0===n&&(n=A._canvas),i=null==i?e.wordWrap:i;var r=e.toFontString(),s=A.measureFont(r);0===s.fontSize&&(s.fontSize=e.fontSize,s.ascent=e.fontSize);var o=n.getContext("2d");o.font=r;for(var a=(i?A.wordWrap(t,e,n):t).split(/(?:\r\n|\r|\n)/),h=new Array(a.length),l=0,u=0;u<a.length;u++){var c=o.measureText(a[u]).width+(a[u].length-1)*e.letterSpacing;h[u]=c,l=Math.max(l,c)}r=l+e.strokeThickness;e.dropShadow&&(r+=e.dropShadowDistance);i=e.lineHeight||s.fontSize+e.strokeThickness,n=Math.max(i,s.fontSize+e.strokeThickness)+(a.length-1)*(i+e.leading);return e.dropShadow&&(n+=e.dropShadowDistance),new A(t,e,r,n,a,h,i+e.leading,l,s)},A.wordWrap=function(t,e,i){void 0===i&&(i=A._canvas);for(var n=i.getContext("2d"),r=0,s="",o="",a={},h=e.letterSpacing,i=e.whiteSpace,l=A.collapseSpaces(i),u=A.collapseNewlines(i),c=!l,p=e.wordWrapWidth+h,d=A.tokenize(t),_=0;_<d.length;_++){var f=d[_];if(A.isNewline(f)){if(!u){o+=A.addLine(s),c=!l,s="",r=0;continue}f=" "}if(l){var m=A.isBreakingSpace(f),y=A.isBreakingSpace(s[s.length-1]);if(m&&y)continue}m=A.getFromCache(f,h,a,n);if(p<m)if(""!==s&&(o+=A.addLine(s),s="",r=0),A.canBreakWords(f,e.breakWords))for(var g=A.wordWrapSplit(f),v=0;v<g.length;v++){for(var w=g[v],x=1;g[v+x];){var b=g[v+x],E=w[w.length-1];if(A.canBreakChars(E,b,f,v,e.breakWords))break;w+=b,x++}v+=w.length-1;var $=A.getFromCache(w,h,a,n);p<$+r&&(o+=A.addLine(s),c=!1,s="",r=0),s+=w,r+=$}else{0<s.length&&(o+=A.addLine(s),s="",r=0);y=_===d.length-1;o+=A.addLine(f,!y),c=!1,s="",r=0}else p<m+r&&(c=!1,o+=A.addLine(s),s="",r=0),(0<s.length||!A.isBreakingSpace(f)||c)&&(s+=f,r+=m)}return o+A.addLine(s,!1)},A.addLine=function(t,e){return void 0===e&&(e=!0),t=A.trimRight(t),e?t+"\n":t},A.getFromCache=function(t,e,i,n){var r=i[t];return void 0===r&&(e=t.length*e,r=n.measureText(t).width+e,i[t]=r),r},A.collapseSpaces=function(t){return"normal"===t||"pre-line"===t},A.collapseNewlines=function(t){return"normal"===t},A.trimRight=function(t){if("string"!=typeof t)return"";for(var e=t.length-1;0<=e;e--){var i=t[e];if(!A.isBreakingSpace(i))break;t=t.slice(0,-1)}return t},A.isNewline=function(t){return"string"==typeof t&&0<=A._newlines.indexOf(t.charCodeAt(0))},A.isBreakingSpace=function(t){return"string"==typeof t&&0<=A._breakingSpaces.indexOf(t.charCodeAt(0))},A.tokenize=function(t){var e=[],i="";if("string"!=typeof t)return e;for(var n=0;n<t.length;n++){var r=t[n];A.isBreakingSpace(r)||A.isNewline(r)?(""!==i&&(e.push(i),i=""),e.push(r)):i+=r}return""!==i&&e.push(i),e},A.canBreakWords=function(t,e){return e},A.canBreakChars=function(t,e,i,n,r){return!0},A.wordWrapSplit=function(t){return t.split("")},A.measureFont=function(t){if(A._fonts[t])return A._fonts[t];var e={},i=A._canvas,n=A._context;n.font=t;var r=A.METRICS_STRING+A.BASELINE_SYMBOL,s=Math.ceil(n.measureText(r).width),o=2*(a=Math.ceil(n.measureText(A.BASELINE_SYMBOL).width)),a=a*A.BASELINE_MULTIPLIER|0;i.width=s,i.height=o,n.fillStyle="#f00",n.fillRect(0,0,s,o),n.font=t,n.textBaseline="alphabetic",n.fillStyle="#000",n.fillText(r,0,a);for(var h=n.getImageData(0,0,s,o).data,n=h.length,l=4*s,u=0,c=0,p=!1,u=0;u<a;++u){for(var d=0;d<l;d+=4)if(255!==h[c+d]){p=!0;break}if(p)break;c+=l}for(e.ascent=a-u,c=n-l,p=!1,u=o;a<u;--u){for(var _=0;_<l;_+=4)if(255!==h[c+_]){p=!0;break}if(p)break;c-=l}return e.descent=u-a,e.fontSize=e.ascent+e.descent,A._fonts[t]=e},A.clearMetrics=function(t){void 0===t&&(t=""),t?delete A._fonts[t]:A._fonts={}};t=function(){try{var t=new OffscreenCanvas(0,0),e=t.getContext("2d");return e&&e.measureText?t:document.createElement("canvas")}catch(t){return document.createElement("canvas")}}();t.width=t.height=10,A._canvas=t,A._context=t.getContext("2d"),A._fonts={},A.METRICS_STRING="|ÉqÅ",A.BASELINE_SYMBOL="M",A.BASELINE_MULTIPLIER=1.4,A._newlines=[10,13];var d={texture:!0,children:!(A._breakingSpaces=[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288]),baseTexture:!0},n=function(r){function t(t,e,i){(i=i||document.createElement("canvas")).width=3,i.height=3;var n=s.Texture.from(i);n.orig=new a.Rectangle,n.trim=new a.Rectangle,r.call(this,n),this.canvas=i,this.context=this.canvas.getContext("2d"),this._resolution=o.settings.RESOLUTION,this._autoResolution=!0,this._text=null,this._style=null,this._styleListener=null,this._font="",this.text=t,this.style=e,this.localStyleID=-1}r&&(t.__proto__=r);var e={width:{configurable:!0},height:{configurable:!0},style:{configurable:!0},text:{configurable:!0},resolution:{configurable:!0}};return((t.prototype=Object.create(r&&r.prototype)).constructor=t).prototype.updateText=function(t){var e=this._style;if(this.localStyleID!==e.styleID&&(this.dirty=!0,this.localStyleID=e.styleID),this.dirty||!t){this._font=this._style.toFontString();var i,n,r=this.context,s=A.measureText(this._text||" ",this._style,this._style.wordWrap,this.canvas),t=s.width,o=s.height,a=s.lines,h=s.lineHeight,l=s.lineWidths,u=s.maxLineWidth,c=s.fontProperties;this.canvas.width=Math.ceil((Math.max(1,t)+2*e.padding)*this._resolution),this.canvas.height=Math.ceil((Math.max(1,o)+2*e.padding)*this._resolution),r.scale(this._resolution,this._resolution),r.clearRect(0,0,this.canvas.width,this.canvas.height),r.font=this._font,r.lineWidth=e.strokeThickness,r.textBaseline=e.textBaseline,r.lineJoin=e.lineJoin,r.miterLimit=e.miterLimit;for(var p=e.dropShadow?2:1,d=0;d<p;++d){var _=e.dropShadow&&0===d,f=_?2*o:0,m=f*this.resolution;_?(r.fillStyle="black",r.strokeStyle="black",_=e.dropShadowColor,_=(0,g.hex2rgb)("number"==typeof _?_:(0,g.string2hex)(_)),r.shadowColor="rgba("+255*_[0]+","+255*_[1]+","+255*_[2]+","+e.dropShadowAlpha+")",r.shadowBlur=e.dropShadowBlur,r.shadowOffsetX=Math.cos(e.dropShadowAngle)*e.dropShadowDistance,r.shadowOffsetY=Math.sin(e.dropShadowAngle)*e.dropShadowDistance+m):(r.fillStyle=this._generateFillStyle(e,a),r.strokeStyle=e.stroke,r.shadowColor=0,r.shadowBlur=0,r.shadowOffsetX=0,r.shadowOffsetY=0);for(var y=0;y<a.length;y++)i=e.strokeThickness/2,n=e.strokeThickness/2+y*h+c.ascent,"right"===e.align?i+=u-l[y]:"center"===e.align&&(i+=(u-l[y])/2),e.stroke&&e.strokeThickness&&this.drawLetterSpacing(a[y],i+e.padding,n+e.padding-f,!0),e.fill&&this.drawLetterSpacing(a[y],i+e.padding,n+e.padding-f)}this.updateTexture()}},t.prototype.drawLetterSpacing=function(t,e,i,n){void 0===n&&(n=!1);var r=this._style.letterSpacing;if(0!==r)for(var s,o=e,a=Array.from?Array.from(t):t.split(""),h=this.context.measureText(t).width,l=0;l<a.length;++l){var u=a[l];n?this.context.strokeText(u,o,i):this.context.fillText(u,o,i),o+=h-(s=this.context.measureText(t.substring(l+1)).width)+r,h=s}else n?this.context.strokeText(t,e,i):this.context.fillText(t,e,i)},t.prototype.updateTexture=function(){var t=this.canvas;!this._style.trim||(n=(0,g.trimCanvas)(t)).data&&(t.width=n.width,t.height=n.height,this.context.putImageData(n.data,0,0));var e=this._texture,i=this._style,n=i.trim?0:i.padding,i=e.baseTexture;e.trim.width=e._frame.width=Math.ceil(t.width/this._resolution),e.trim.height=e._frame.height=Math.ceil(t.height/this._resolution),e.trim.x=-n,e.trim.y=-n,e.orig.width=e._frame.width-2*n,e.orig.height=e._frame.height-2*n,this._onTextureUpdate(),i.setRealSize(t.width,t.height,this._resolution),this.dirty=!1},t.prototype._render=function(t){this._autoResolution&&this._resolution!==t.resolution&&(this._resolution=t.resolution,this.dirty=!0),this.updateText(!0),r.prototype._render.call(this,t)},t.prototype.getLocalBounds=function(t){return this.updateText(!0),r.prototype.getLocalBounds.call(this,t)},t.prototype._calculateBounds=function(){this.updateText(!0),this.calculateVertices(),this._bounds.addQuad(this.vertexData)},t.prototype._onStyleChange=function(){this.dirty=!0},t.prototype._generateFillStyle=function(t,e){if(!Array.isArray(t.fill))return t.fill;if(1===t.fill.length)return t.fill[0];var i,n,r,s,o=t.dropShadow?t.dropShadowDistance:0,a=Math.ceil(this.canvas.width/this._resolution)-o,o=Math.ceil(this.canvas.height/this._resolution)-o,h=t.fill.slice(),l=t.fillGradientStops.slice();if(!l.length)for(var u=h.length+1,c=1;c<u;++c)l.push(c/u);if(h.unshift(t.fill[0]),l.unshift(0),h.push(t.fill[t.fill.length-1]),l.push(1),t.fillGradientType===f.LINEAR_VERTICAL){i=this.context.createLinearGradient(a/2,0,a/2,o),n=(h.length+1)*e.length;for(var p=r=0;p<e.length;p++){r+=1;for(var d=0;d<h.length;d++)s="number"==typeof l[d]?l[d]/e.length+p/e.length:r/n,i.addColorStop(s,h[d]),r++}}else{i=this.context.createLinearGradient(0,o/2,a,o/2),n=h.length+1,r=1;for(var _=0;_<h.length;_++)s="number"==typeof l[_]?l[_]:r/n,i.addColorStop(s,h[_]),r++}return i},t.prototype.destroy=function(t){"boolean"==typeof t&&(t={children:t}),t=Object.assign({},d,t),r.prototype.destroy.call(this,t),this.context=null,this.canvas=null,this._style=null},e.width.get=function(){return this.updateText(!0),Math.abs(this.scale.x)*this._texture.orig.width},e.width.set=function(t){this.updateText(!0);var e=(0,g.sign)(this.scale.x)||1;this.scale.x=e*t/this._texture.orig.width,this._width=t},e.height.get=function(){return this.updateText(!0),Math.abs(this.scale.y)*this._texture.orig.height},e.height.set=function(t){this.updateText(!0);var e=(0,g.sign)(this.scale.y)||1;this.scale.y=e*t/this._texture.orig.height,this._height=t},e.style.get=function(){return this._style},e.style.set=function(t){t=t||{},this._style=t instanceof h?t:new h(t),this.localStyleID=-1,this.dirty=!0},e.text.get=function(){return this._text},e.text.set=function(t){t=String(null==t?"":t),this._text!==t&&(this._text=t,this.dirty=!0)},e.resolution.get=function(){return this._resolution},e.resolution.set=function(t){this._autoResolution=!1,this._resolution!==t&&(this._resolution=t,this.dirty=!0)},Object.defineProperties(t.prototype,e),t}(n.Sprite);i.Text=n},{"@pixi/sprite":"vBI9","@pixi/core":"qqf8","@pixi/settings":"v11T","@pixi/math":"GTL5","@pixi/utils":"x5Ec"}],kdZ8:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.TimeLimiter=i.Prepare=i.CountLimiter=i.BasePrepare=void 0;var n=t("@pixi/settings"),s=t("@pixi/core"),o=t("@pixi/graphics"),a=t("@pixi/ticker"),r=t("@pixi/display"),h=t("@pixi/text");n.settings.UPLOADS_PER_FRAME=4;function l(t){this.maxItemsPerFrame=t,this.itemsLeft=0}(i.CountLimiter=l).prototype.beginFrame=function(){this.itemsLeft=this.maxItemsPerFrame},l.prototype.allowedToUpload=function(){return 0<this.itemsLeft--};t=function(t){var e=this;this.limiter=new l(n.settings.UPLOADS_PER_FRAME),this.renderer=t,this.uploadHookHelper=null,this.queue=[],this.addHooks=[],this.uploadHooks=[],this.completes=[],this.ticking=!1,this.delayedTick=function(){e.queue&&e.prepareItems()},this.registerFindHook(f),this.registerFindHook(m),this.registerFindHook(u),this.registerFindHook(c),this.registerFindHook(p),this.registerUploadHook(d),this.registerUploadHook(_)};function u(t,e){var i,n=!1;if(t&&t._textures&&t._textures.length)for(var r=0;r<t._textures.length;r++)t._textures[r]instanceof s.Texture&&(i=t._textures[r].baseTexture,-1===e.indexOf(i)&&(e.push(i),n=!0));return n}function c(t,e){if(t.baseTexture instanceof s.BaseTexture){t=t.baseTexture;return-1===e.indexOf(t)&&e.push(t),!0}return!1}function p(t,e){if(t._texture&&t._texture instanceof s.Texture){t=t._texture.baseTexture;return-1===e.indexOf(t)&&e.push(t),!0}return!1}function d(t,e){return e instanceof h.Text&&(e.updateText(!0),!0)}function _(t,e){if(e instanceof h.TextStyle){e=e.toFontString();return h.TextMetrics.measureFont(e),!0}return!1}function f(t,e){if(t instanceof h.Text){-1===e.indexOf(t.style)&&e.push(t.style),-1===e.indexOf(t)&&e.push(t);t=t._texture.baseTexture;return-1===e.indexOf(t)&&e.push(t),!0}return!1}function m(t,e){return t instanceof h.TextStyle&&(-1===e.indexOf(t)&&e.push(t),!0)}(i.BasePrepare=t).prototype.upload=function(t,e){"function"==typeof t&&(e=t,t=null),t&&this.add(t),this.queue.length?(e&&this.completes.push(e),this.ticking||(this.ticking=!0,a.Ticker.system.addOnce(this.tick,this,a.UPDATE_PRIORITY.UTILITY))):e&&e()},t.prototype.tick=function(){setTimeout(this.delayedTick,0)},t.prototype.prepareItems=function(){for(this.limiter.beginFrame();this.queue.length&&this.limiter.allowedToUpload();){var t=this.queue[0],e=!1;if(t&&!t._destroyed)for(var i=0,n=this.uploadHooks.length;i<n;i++)if(this.uploadHooks[i](this.uploadHookHelper,t)){this.queue.shift(),e=!0;break}e||this.queue.shift()}if(this.queue.length)a.Ticker.system.addOnce(this.tick,this,a.UPDATE_PRIORITY.UTILITY);else{this.ticking=!1;for(var r=this.completes.slice(0),s=this.completes.length=0,o=r.length;s<o;s++)r[s]()}},t.prototype.registerFindHook=function(t){return t&&this.addHooks.push(t),this},t.prototype.registerUploadHook=function(t){return t&&this.uploadHooks.push(t),this},t.prototype.add=function(t){for(var e=0,i=this.addHooks.length;e<i&&!this.addHooks[e](t,this.queue);e++);if(t instanceof r.Container)for(var n=t.children.length-1;0<=n;n--)this.add(t.children[n]);return this},t.prototype.destroy=function(){this.ticking&&a.Ticker.system.remove(this.tick,this),this.ticking=!1,this.addHooks=null,this.uploadHooks=null,this.renderer=null,this.completes=null,this.queue=null,this.limiter=null,this.uploadHookHelper=null};var y,t=((y=t)&&(g.__proto__=y),(g.prototype=Object.create(y&&y.prototype)).constructor=g);function g(t){y.call(this,t),this.uploadHookHelper=this.renderer,this.registerFindHook(x),this.registerUploadHook(v),this.registerUploadHook(w)}function v(t,e){return e instanceof s.BaseTexture&&(e._glTextures[t.CONTEXT_UID]||t.texture.bind(e),!0)}function w(t,e){if(!(e instanceof o.Graphics))return!1;var i=e.geometry;e.finishPoly(),i.updateBatches();for(var n=i.batches,r=0;r<n.length;r++){var s=n[r].style.texture;s&&v(t,s.baseTexture)}return i.batchable||t.geometry.bind(i,e._resolveDirectShader()),!0}function x(t,e){return t instanceof o.Graphics&&(e.push(t),!0)}i.Prepare=t;t=function(t){this.maxMilliseconds=t,this.frameStart=0};(i.TimeLimiter=t).prototype.beginFrame=function(){this.frameStart=Date.now()},t.prototype.allowedToUpload=function(){return Date.now()-this.frameStart<this.maxMilliseconds}},{"@pixi/settings":"v11T","@pixi/core":"qqf8","@pixi/graphics":"uuMi","@pixi/ticker":"t27b","@pixi/display":"LJAM","@pixi/text":"LtEJ"}],vMGq:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.SpritesheetLoader=i.Spritesheet=void 0;function l(t,e,i){void 0===i&&(i=null),this.baseTexture=t,this.textures={},this.animations={},this.data=e,this.resolution=this._updateResolution(i||(this.baseTexture.resource?this.baseTexture.resource.url:null)),this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}var u=t("@pixi/math"),c=t("@pixi/core"),n=t("@pixi/utils"),s=t("@pixi/loaders");i.Spritesheet=l;t={BATCH_SIZE:{configurable:!0}};t.BATCH_SIZE.get=function(){return 1e3},l.prototype._updateResolution=function(t){var e=this.data.meta.scale,t=(0,n.getResolutionOfUrl)(t,null);return null===t&&(t=void 0!==e?parseFloat(e):1),1!==t&&this.baseTexture.setResolution(t),t},l.prototype.parse=function(t){this._batchIndex=0,this._callback=t,this._frameKeys.length<=l.BATCH_SIZE?(this._processFrames(0),this._processAnimations(),this._parseComplete()):this._nextBatch()},l.prototype._processFrames=function(t){for(var e=t,i=l.BATCH_SIZE;e-t<i&&e<this._frameKeys.length;){var n,r,s,o=this._frameKeys[e],a=this._frames[o],h=a.frame;h&&(n=s=null,r=!1!==a.trimmed&&a.sourceSize?a.sourceSize:a.frame,r=new u.Rectangle(0,0,Math.floor(r.w)/this.resolution,Math.floor(r.h)/this.resolution),s=a.rotated?new u.Rectangle(Math.floor(h.x)/this.resolution,Math.floor(h.y)/this.resolution,Math.floor(h.h)/this.resolution,Math.floor(h.w)/this.resolution):new u.Rectangle(Math.floor(h.x)/this.resolution,Math.floor(h.y)/this.resolution,Math.floor(h.w)/this.resolution,Math.floor(h.h)/this.resolution),!1!==a.trimmed&&a.spriteSourceSize&&(n=new u.Rectangle(Math.floor(a.spriteSourceSize.x)/this.resolution,Math.floor(a.spriteSourceSize.y)/this.resolution,Math.floor(h.w)/this.resolution,Math.floor(h.h)/this.resolution)),this.textures[o]=new c.Texture(this.baseTexture,s,r,n,a.rotated?2:0,a.anchor),c.Texture.addToCache(this.textures[o],o)),e++}},l.prototype._processAnimations=function(){var t,e=this.data.animations||{};for(t in e){this.animations[t]=[];for(var i=0;i<e[t].length;i++){var n=e[t][i];this.animations[t].push(this.textures[n])}}},l.prototype._parseComplete=function(){var t=this._callback;this._callback=null,this._batchIndex=0,t.call(this,this.textures)},l.prototype._nextBatch=function(){var t=this;this._processFrames(this._batchIndex*l.BATCH_SIZE),this._batchIndex++,setTimeout(function(){t._batchIndex*l.BATCH_SIZE<t._frameKeys.length?t._nextBatch():(t._processAnimations(),t._parseComplete())},0)},l.prototype.destroy=function(t){for(var e in void 0===t&&(t=!1),this.textures)this.textures[e].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,t&&this.baseTexture.destroy(),this.baseTexture=null},Object.defineProperties(l,t);function o(){}(i.SpritesheetLoader=o).use=function(i,n){var t,e,r=i.name+"_image";i.data&&i.type===s.LoaderResource.TYPE.JSON&&i.data.frames&&!this.resources[r]?(t={crossOrigin:i.crossOrigin,metadata:i.metadata.imageMetadata,parentResource:i},e=o.getResourcePath(i,this.baseUrl),this.add(r,e,t,function(t){var e;t.error?n(t.error):(e=new l(t.texture.baseTexture,i.data,i.url)).parse(function(){i.spritesheet=e,i.textures=e.textures,n()})})):n()},o.getResourcePath=function(t,e){return t.isDataUrl?t.data.meta.image:n.url.resolve(t.url.replace(e,""),t.data.meta.image)}},{"@pixi/math":"GTL5","@pixi/core":"qqf8","@pixi/utils":"x5Ec","@pixi/loaders":"pAmg"}],s11n:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.TilingSpriteRenderer=i.TilingSprite=void 0;var s=t("@pixi/core"),o=t("@pixi/math"),d=t("@pixi/utils"),n=t("@pixi/sprite"),_=t("@pixi/constants"),a=new o.Point,n=function(n){function r(t,e,i){void 0===e&&(e=100),void 0===i&&(i=100),n.call(this,t),this.tileTransform=new o.Transform,this._width=e,this._height=i,this._canvasPattern=null,this.uvMatrix=t.uvMatrix||new s.TextureMatrix(t),this.pluginName="tilingSprite",this.uvRespectAnchor=!1}n&&(r.__proto__=n),(r.prototype=Object.create(n&&n.prototype)).constructor=r;var t={clampMargin:{configurable:!0},tileScale:{configurable:!0},tilePosition:{configurable:!0},width:{configurable:!0},height:{configurable:!0}};return t.clampMargin.get=function(){return this.uvMatrix.clampMargin},t.clampMargin.set=function(t){this.uvMatrix.clampMargin=t,this.uvMatrix.update(!0)},t.tileScale.get=function(){return this.tileTransform.scale},t.tileScale.set=function(t){this.tileTransform.scale.copyFrom(t)},t.tilePosition.get=function(){return this.tileTransform.position},t.tilePosition.set=function(t){this.tileTransform.position.copyFrom(t)},r.prototype._onTextureUpdate=function(){this.uvMatrix&&(this.uvMatrix.texture=this._texture),this._cachedTint=16777215},r.prototype._render=function(t){var e=this._texture;e&&e.valid&&(this.tileTransform.updateLocalTransform(),this.uvMatrix.update(),t.batch.setObjectRenderer(t.plugins[this.pluginName]),t.plugins[this.pluginName].render(this))},r.prototype._calculateBounds=function(){var t=this._width*-this._anchor._x,e=this._height*-this._anchor._y,i=this._width*(1-this._anchor._x),n=this._height*(1-this._anchor._y);this._bounds.addFrame(this.transform,t,e,i,n)},r.prototype.getLocalBounds=function(t){return 0===this.children.length?(this._bounds.minX=this._width*-this._anchor._x,this._bounds.minY=this._height*-this._anchor._y,this._bounds.maxX=this._width*(1-this._anchor._x),this._bounds.maxY=this._height*(1-this._anchor._y),t||(this._localBoundsRect||(this._localBoundsRect=new o.Rectangle),t=this._localBoundsRect),this._bounds.getRectangle(t)):n.prototype.getLocalBounds.call(this,t)},r.prototype.containsPoint=function(t){this.worldTransform.applyInverse(t,a);var e=this._width,i=this._height,t=-e*this.anchor._x;if(a.x>=t&&a.x<t+e){e=-i*this.anchor._y;if(a.y>=e&&a.y<e+i)return!0}return!1},r.prototype.destroy=function(t){n.prototype.destroy.call(this,t),this.tileTransform=null,this.uvMatrix=null},r.from=function(t,e,i){return new r(s.Texture.from(t),e,i)},r.fromFrame=function(t,e,i){var n=d.TextureCache[t];if(!n)throw new Error('The frameId "'+t+'" does not exist in the texture cache '+this);return new r(n,e,i)},r.fromImage=function(t,e,i,n){return n&&"object"!=typeof n&&(n={scaleMode:arguments[4],resourceOptions:{crossorigin:arguments[3]}}),new r(s.Texture.from(t,n),e,i)},t.width.get=function(){return this._width},t.width.set=function(t){this._width=t},t.height.get=function(){return this._height},t.height.set=function(t){this._height=t},Object.defineProperties(r.prototype,t),r}(n.Sprite);i.TilingSprite=n;var r,h="attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTransform;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;\n}\n",f=new o.Matrix,n=((r=s.ObjectRenderer)&&(l.__proto__=r),((l.prototype=Object.create(r&&r.prototype)).constructor=l).prototype.render=function(t){var e=this.renderer,i=this.quad,n=i.vertices;n[0]=n[6]=t._width*-t.anchor.x,n[1]=n[3]=t._height*-t.anchor.y,n[2]=n[4]=t._width*(1-t.anchor.x),n[5]=n[7]=t._height*(1-t.anchor.y),t.uvRespectAnchor&&((n=i.uvs)[0]=n[6]=-t.anchor.x,n[1]=n[3]=-t.anchor.y,n[2]=n[4]=1-t.anchor.x,n[5]=n[7]=1-t.anchor.y),i.invalidate();var r=t._texture,s=r.baseTexture,o=t.tileTransform.localTransform,a=t.uvMatrix,h=s.isPowerOfTwo&&r.frame.width===s.width&&r.frame.height===s.height;h&&(s._glTextures[e.CONTEXT_UID]?h=s.wrapMode!==_.WRAP_MODES.CLAMP:s.wrapMode===_.WRAP_MODES.CLAMP&&(s.wrapMode=_.WRAP_MODES.REPEAT));var l=h?this.simpleShader:this.shader,u=r.width,c=r.height,p=t._width,n=t._height;f.set(o.a*u/p,o.b*u/n,o.c*c/p,o.d*c/n,o.tx/p,o.ty/n),f.invert(),h?f.prepend(a.mapCoord):(l.uniforms.uMapCoord=a.mapCoord.toArray(!0),l.uniforms.uClampFrame=a.uClampFrame,l.uniforms.uClampOffset=a.uClampOffset),l.uniforms.uTransform=f.toArray(!0),l.uniforms.uColor=(0,d.premultiplyTintToRgba)(t.tint,t.worldAlpha,l.uniforms.uColor,s.alphaMode),l.uniforms.translationMatrix=t.transform.worldTransform.toArray(!0),l.uniforms.uSampler=r,e.shader.bind(l),e.geometry.bind(i),this.state.blendMode=(0,d.correctBlendMode)(t.blendMode,s.alphaMode),e.state.set(this.state),e.geometry.draw(this.renderer.gl.TRIANGLES,6,0)},l);function l(t){r.call(this,t);t={globals:this.renderer.globalUniforms};this.shader=s.Shader.from(h,"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\nuniform mat3 uMapCoord;\nuniform vec4 uClampFrame;\nuniform vec2 uClampOffset;\n\nvoid main(void)\n{\n    vec2 coord = vTextureCoord - floor(vTextureCoord - uClampOffset);\n    coord = (uMapCoord * vec3(coord, 1.0)).xy;\n    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);\n\n    vec4 texSample = texture2D(uSampler, coord);\n    gl_FragColor = texSample * uColor;\n}\n",t),this.simpleShader=s.Shader.from(h,"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\n\nvoid main(void)\n{\n    vec4 sample = texture2D(uSampler, vTextureCoord);\n    gl_FragColor = sample * uColor;\n}\n",t),this.quad=new s.QuadUv,this.state=s.State.for2d()}i.TilingSpriteRenderer=n},{"@pixi/core":"qqf8","@pixi/math":"GTL5","@pixi/utils":"x5Ec","@pixi/sprite":"vBI9","@pixi/constants":"R76a"}],mTlL:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.BitmapText=i.BitmapFontLoader=void 0;var b=t("@pixi/core"),n=t("@pixi/display"),I=t("@pixi/math"),E=t("@pixi/settings"),P=t("@pixi/sprite"),O=t("@pixi/utils"),d=t("@pixi/loaders"),r=function(n){function M(t,e){var i=this;void 0===e&&(e={}),n.call(this),this._textWidth=0,this._textHeight=0,this._glyphs=[],this._font={tint:void 0!==e.tint?e.tint:16777215,align:e.align||"left",name:null,size:0},this.font=e.font,this._text=t,this._maxWidth=0,this._maxLineHeight=0,this._letterSpacing=0,this._anchor=new I.ObservablePoint(function(){i.dirty=!0},this,0,0),this.dirty=!1,this.roundPixels=E.settings.ROUND_PIXELS,this.updateText()}n&&(M.__proto__=n);var t={tint:{configurable:!0},align:{configurable:!0},anchor:{configurable:!0},font:{configurable:!0},text:{configurable:!0},maxWidth:{configurable:!0},maxLineHeight:{configurable:!0},textWidth:{configurable:!0},letterSpacing:{configurable:!0},textHeight:{configurable:!0}};return((M.prototype=Object.create(n&&n.prototype)).constructor=M).prototype.updateText=function(){for(var t=M.fonts[this._font.name],e=this._font.size/t.size,i=new I.Point,n=[],r=[],s=this._text.replace(/(?:\r\n|\r)/g,"\n")||" ",o=s.length,a=this._maxWidth*t.size/this._font.size,h=null,l=0,u=0,c=0,p=-1,d=0,_=0,f=0,m=0;m<o;m++){var y=s.charCodeAt(m),g=s.charAt(m);/(?:\s)/.test(g)&&(p=m,d=l),"\r"!==g&&"\n"!==g?(g=t.chars[y])&&(h&&g.kerning[h]&&(i.x+=g.kerning[h]),n.push({texture:g.texture,line:c,charCode:y,position:new I.Point(i.x+g.xOffset+this._letterSpacing/2,i.y+g.yOffset)}),i.x+=g.xAdvance+this._letterSpacing,l=i.x,f=Math.max(f,g.yOffset+g.texture.height),h=y,-1!==p&&0<a&&i.x>a&&(++_,(0,O.removeItems)(n,1+p-_,1+m-p),m=p,p=-1,r.push(d),u=Math.max(u,d),c++,i.x=0,i.y+=t.lineHeight,h=null)):(r.push(l),u=Math.max(u,l),++c,++_,i.x=0,i.y+=t.lineHeight,h=null)}var v=s.charAt(s.length-1);"\r"!==v&&"\n"!==v&&(/(?:\s)/.test(v)&&(l=d),r.push(l),u=Math.max(u,l));for(var w=[],x=0;x<=c;x++){var b=0;"right"===this._font.align?b=u-r[x]:"center"===this._font.align&&(b=(u-r[x])/2),w.push(b)}for(var E=n.length,$=this.tint,A=0;A<E;A++){var S=this._glyphs[A];S?S.texture=n[A].texture:((S=new P.Sprite(n[A].texture)).roundPixels=this.roundPixels,this._glyphs.push(S)),S.position.x=(n[A].position.x+w[n[A].line])*e,S.position.y=n[A].position.y*e,S.scale.x=S.scale.y=e,S.tint=$,S.parent||this.addChild(S)}for(var T=E;T<this._glyphs.length;++T)this.removeChild(this._glyphs[T]);if(this._textWidth=u*e,this._textHeight=(i.y+t.lineHeight)*e,0!==this.anchor.x||0!==this.anchor.y)for(var C=0;C<E;C++)this._glyphs[C].x-=this._textWidth*this.anchor.x,this._glyphs[C].y-=this._textHeight*this.anchor.y;this._maxLineHeight=f*e},M.prototype.updateTransform=function(){this.validate(),this.containerUpdateTransform()},M.prototype.getLocalBounds=function(){return this.validate(),n.prototype.getLocalBounds.call(this)},M.prototype.validate=function(){this.dirty&&(this.updateText(),this.dirty=!1)},t.tint.get=function(){return this._font.tint},t.tint.set=function(t){this._font.tint="number"==typeof t&&0<=t?t:16777215,this.dirty=!0},t.align.get=function(){return this._font.align},t.align.set=function(t){this._font.align=t||"left",this.dirty=!0},t.anchor.get=function(){return this._anchor},t.anchor.set=function(t){"number"==typeof t?this._anchor.set(t):this._anchor.copyFrom(t)},t.font.get=function(){return this._font},t.font.set=function(t){t&&("string"==typeof t?(t=t.split(" "),this._font.name=1===t.length?t[0]:t.slice(1).join(" "),this._font.size=2<=t.length?parseInt(t[0],10):M.fonts[this._font.name].size):(this._font.name=t.name,this._font.size="number"==typeof t.size?t.size:parseInt(t.size,10)),this.dirty=!0)},t.text.get=function(){return this._text},t.text.set=function(t){t=String(null==t?"":t),this._text!==t&&(this._text=t,this.dirty=!0)},t.maxWidth.get=function(){return this._maxWidth},t.maxWidth.set=function(t){this._maxWidth!==t&&(this._maxWidth=t,this.dirty=!0)},t.maxLineHeight.get=function(){return this.validate(),this._maxLineHeight},t.textWidth.get=function(){return this.validate(),this._textWidth},t.letterSpacing.get=function(){return this._letterSpacing},t.letterSpacing.set=function(t){this._letterSpacing!==t&&(this._letterSpacing=t,this.dirty=!0)},t.textHeight.get=function(){return this.validate(),this._textHeight},M.registerFont=function(t,e){var i={},n=t.getElementsByTagName("info")[0],r=t.getElementsByTagName("common")[0],s=t.getElementsByTagName("page"),o=(0,O.getResolutionOfUrl)(s[0].getAttribute("file"),E.settings.RESOLUTION),a={};i.font=n.getAttribute("face"),i.size=parseInt(n.getAttribute("size"),10),i.lineHeight=parseInt(r.getAttribute("lineHeight"),10)/o,i.chars={},e instanceof b.Texture&&(e=[e]);for(var h=0;h<s.length;h++){var l=s[h].getAttribute("id"),u=s[h].getAttribute("file");a[l]=e instanceof Array?e[h]:e[u]}for(var c=t.getElementsByTagName("char"),p=0;p<c.length;p++){var d=c[p],_=parseInt(d.getAttribute("id"),10),f=d.getAttribute("page")||0,m=new I.Rectangle(parseInt(d.getAttribute("x"),10)/o+a[f].frame.x/o,parseInt(d.getAttribute("y"),10)/o+a[f].frame.y/o,parseInt(d.getAttribute("width"),10)/o,parseInt(d.getAttribute("height"),10)/o);i.chars[_]={xOffset:parseInt(d.getAttribute("xoffset"),10)/o,yOffset:parseInt(d.getAttribute("yoffset"),10)/o,xAdvance:parseInt(d.getAttribute("xadvance"),10)/o,kerning:{},texture:new b.Texture(a[f].baseTexture,m),page:f}}for(var y=t.getElementsByTagName("kerning"),g=0;g<y.length;g++){var v=y[g],w=parseInt(v.getAttribute("first"),10)/o,x=parseInt(v.getAttribute("second"),10)/o,v=parseInt(v.getAttribute("amount"),10)/o;i.chars[x]&&(i.chars[x].kerning[w]=v)}return M.fonts[i.font]=i},Object.defineProperties(M.prototype,t),M}(n.Container);(i.BitmapText=r).fonts={};function _(){}(i.BitmapFontLoader=_).parse=function(t,e){t.bitmapFont=r.registerFont(t.data,e)},_.add=function(){d.LoaderResource.setExtensionXhrType("fnt",d.LoaderResource.XHR_RESPONSE_TYPE.DOCUMENT)},_.dirname=function(t){var e=t.replace(/\\/g,"/").replace(/\/$/,"").replace(/\/[^\/]*$/,"");return e===t?".":""===e?"/":e},_.use=function(e,i){if(e.data&&e.type===d.LoaderResource.TYPE.XML)if(0!==e.data.getElementsByTagName("page").length&&0!==e.data.getElementsByTagName("info").length&&null!==e.data.getElementsByTagName("info")[0].getAttribute("face")){var t=e.isDataUrl?"":_.dirname(e.url);e.isDataUrl&&("."===t&&(t=""),this.baseUrl&&t&&"/"===this.baseUrl.charAt(this.baseUrl.length-1)&&(t+="/")),(t=t.replace(this.baseUrl,""))&&"/"!==t.charAt(t.length-1)&&(t+="/");for(var n=e.data.getElementsByTagName("page"),r={},s=function(t){r[t.metadata.pageFile]=t.texture,Object.keys(r).length===n.length&&(_.parse(e,r),i())},o=0;o<n.length;++o){var a,h,l=n[o].getAttribute("file"),u=t+l,c=!1;for(a in this.resources){var p=this.resources[a];if(p.url===u){p.metadata.pageFile=l,p.texture?s(p):p.onAfterMiddleware.add(s),c=!0;break}}c||(h={crossOrigin:e.crossOrigin,loadType:d.LoaderResource.LOAD_TYPE.IMAGE,metadata:Object.assign({pageFile:l},e.metadata.imageMetadata),parentResource:e},this.add(u,h,s))}}else i();else i()}},{"@pixi/core":"qqf8","@pixi/display":"LJAM","@pixi/math":"GTL5","@pixi/settings":"v11T","@pixi/sprite":"vBI9","@pixi/utils":"x5Ec","@pixi/loaders":"pAmg"}],SOHw:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.AlphaFilter=void 0;var n=t("@pixi/core"),t=function(e){function t(t){void 0===t&&(t=1),e.call(this,n.defaultVertex,"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform float uAlpha;\n\nvoid main(void)\n{\n   gl_FragColor = texture2D(uSampler, vTextureCoord) * uAlpha;\n}\n",{uAlpha:1}),this.alpha=t}e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t;var i={alpha:{configurable:!0}};return i.alpha.get=function(){return this.uniforms.uAlpha},i.alpha.set=function(t){this.uniforms.uAlpha=t},Object.defineProperties(t.prototype,i),t}(n.Filter);i.AlphaFilter=t},{"@pixi/core":"qqf8"}],zAmH:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.BlurFilterPass=i.BlurFilter=void 0;var n=t("@pixi/core"),a=t("@pixi/settings"),h={5:[.153388,.221461,.250301],7:[.071303,.131514,.189879,.214607],9:[.028532,.067234,.124009,.179044,.20236],11:[.0093,.028002,.065984,.121703,.175713,.198596],13:[.002406,.009255,.027867,.065666,.121117,.174868,.197641],15:[489e-6,.002403,.009246,.02784,.065602,.120999,.174697,.197448]},l=["varying vec2 vBlurTexCoords[%size%];","uniform sampler2D uSampler;","void main(void)","{","    gl_FragColor = vec4(0.0);","    %blur%","}"].join("\n"),s=function(o){function t(t,e,i,n,r){var s=function(t,e){for(var i=Math.ceil(t/2),n="\n    attribute vec2 aVertexPosition;\n\n    uniform mat3 projectionMatrix;\n\n    uniform float strength;\n\n    varying vec2 vBlurTexCoords[%size%];\n\n    uniform vec4 inputSize;\n    uniform vec4 outputFrame;\n\n    vec4 filterVertexPosition( void )\n    {\n        vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n        return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n    }\n\n    vec2 filterTextureCoord( void )\n    {\n        return aVertexPosition * (outputFrame.zw * inputSize.zw);\n    }\n\n    void main(void)\n    {\n        gl_Position = filterVertexPosition();\n\n        vec2 textureCoord = filterTextureCoord();\n        %blur%\n    }",r="",s=e?"vBlurTexCoords[%index%] =  textureCoord + vec2(%sampleIndex% * strength, 0.0);":"vBlurTexCoords[%index%] =  textureCoord + vec2(0.0, %sampleIndex% * strength);",o=0;o<t;o++)r+=s.replace("%index%",o).replace("%sampleIndex%",o-(i-1)+".0"),r+="\n";return(n=n.replace("%blur%",r)).replace("%size%",t)}(r=r||5,t),r=function(t){for(var e=h[t],i=e.length,n=l,r="",s=0;s<t;s++){var o=i<=s?t-s-1:s;r+="gl_FragColor += texture2D(uSampler, vBlurTexCoords[%index%]) * %value%;".replace("%index%",s).replace("%value%",e[o]),r+="\n"}return(n=n.replace("%blur%",r)).replace("%size%",t)}(r);o.call(this,s,r),this.horizontal=t,this.resolution=n||a.settings.RESOLUTION,this._quality=0,this.quality=i||4,this.blur=e||8}o&&(t.__proto__=o);var e={blur:{configurable:!0},quality:{configurable:!0}};return((t.prototype=Object.create(o&&o.prototype)).constructor=t).prototype.apply=function(t,e,i,n){if(i?this.horizontal?this.uniforms.strength=1/i.width*(i.width/e.width):this.uniforms.strength=1/i.height*(i.height/e.height):this.horizontal?this.uniforms.strength=1/t.renderer.width*(t.renderer.width/e.width):this.uniforms.strength=1/t.renderer.height*(t.renderer.height/e.height),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,1===this.passes)t.applyFilter(this,e,i,n);else{var r=t.getFilterTexture(),s=t.renderer,o=e,a=r;this.state.blend=!1,t.applyFilter(this,o,a,!0);for(var h=1;h<this.passes-1;h++){s.renderTexture.bind(o,o.filterFrame);var l=this.uniforms.uSampler=a,a=o,o=l;s.shader.bind(this),s.geometry.draw(5)}this.state.blend=!0,t.applyFilter(this,a,i,n),t.returnFilterTexture(r)}},e.blur.get=function(){return this.strength},e.blur.set=function(t){this.padding=1+2*Math.abs(t),this.strength=t},e.quality.get=function(){return this._quality},e.quality.set=function(t){this._quality=t,this.passes=t},Object.defineProperties(t.prototype,e),t}(n.Filter);i.BlurFilterPass=s;n=function(r){function t(t,e,i,n){r.call(this),this.blurXFilter=new s(!0,t,e,i,n),this.blurYFilter=new s(!1,t,e,i,n),this.resolution=i||a.settings.RESOLUTION,this.quality=e||4,this.blur=t||8,this.repeatEdgePixels=!1}r&&(t.__proto__=r);var e={blur:{configurable:!0},quality:{configurable:!0},blurX:{configurable:!0},blurY:{configurable:!0},blendMode:{configurable:!0},repeatEdgePixels:{configurable:!0}};return((t.prototype=Object.create(r&&r.prototype)).constructor=t).prototype.apply=function(t,e,i,n){var r=Math.abs(this.blurXFilter.strength),s=Math.abs(this.blurYFilter.strength);r&&s?(r=t.getFilterTexture(),this.blurXFilter.apply(t,e,r,!0),this.blurYFilter.apply(t,r,i,n),t.returnFilterTexture(r)):(s?this.blurYFilter:this.blurXFilter).apply(t,e,i,n)},t.prototype.updatePadding=function(){this._repeatEdgePixels?this.padding=0:this.padding=2*Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))},e.blur.get=function(){return this.blurXFilter.blur},e.blur.set=function(t){this.blurXFilter.blur=this.blurYFilter.blur=t,this.updatePadding()},e.quality.get=function(){return this.blurXFilter.quality},e.quality.set=function(t){this.blurXFilter.quality=this.blurYFilter.quality=t},e.blurX.get=function(){return this.blurXFilter.blur},e.blurX.set=function(t){this.blurXFilter.blur=t,this.updatePadding()},e.blurY.get=function(){return this.blurYFilter.blur},e.blurY.set=function(t){this.blurYFilter.blur=t,this.updatePadding()},e.blendMode.get=function(){return this.blurYFilter.blendMode},e.blendMode.set=function(t){this.blurYFilter.blendMode=t},e.repeatEdgePixels.get=function(){return this._repeatEdgePixels},e.repeatEdgePixels.set=function(t){this._repeatEdgePixels=t,this.updatePadding()},Object.defineProperties(t.prototype,e),t}(n.Filter);i.BlurFilter=n},{"@pixi/core":"qqf8","@pixi/settings":"v11T"}],FZwX:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.ColorMatrixFilter=void 0;var n=t("@pixi/core"),t=function(e){function t(){var t={m:new Float32Array([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0]),uAlpha:1};e.call(this,n.defaultFilterVertex,"varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform float m[20];\nuniform float uAlpha;\n\nvoid main(void)\n{\n    vec4 c = texture2D(uSampler, vTextureCoord);\n\n    if (uAlpha == 0.0) {\n        gl_FragColor = c;\n        return;\n    }\n\n    // Un-premultiply alpha before applying the color matrix. See issue #3539.\n    if (c.a > 0.0) {\n      c.rgb /= c.a;\n    }\n\n    vec4 result;\n\n    result.r = (m[0] * c.r);\n        result.r += (m[1] * c.g);\n        result.r += (m[2] * c.b);\n        result.r += (m[3] * c.a);\n        result.r += m[4];\n\n    result.g = (m[5] * c.r);\n        result.g += (m[6] * c.g);\n        result.g += (m[7] * c.b);\n        result.g += (m[8] * c.a);\n        result.g += m[9];\n\n    result.b = (m[10] * c.r);\n       result.b += (m[11] * c.g);\n       result.b += (m[12] * c.b);\n       result.b += (m[13] * c.a);\n       result.b += m[14];\n\n    result.a = (m[15] * c.r);\n       result.a += (m[16] * c.g);\n       result.a += (m[17] * c.b);\n       result.a += (m[18] * c.a);\n       result.a += m[19];\n\n    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);\n\n    // Premultiply alpha again.\n    rgb *= result.a;\n\n    gl_FragColor = vec4(rgb, result.a);\n}\n",t),this.alpha=1}e&&(t.__proto__=e);var i={matrix:{configurable:!0},alpha:{configurable:!0}};return((t.prototype=Object.create(e&&e.prototype)).constructor=t).prototype._loadMatrix=function(t,e){void 0===e&&(e=!1);var i=t;e&&(this._multiply(i,this.uniforms.m,t),i=this._colorMatrix(i)),this.uniforms.m=i},t.prototype._multiply=function(t,e,i){return t[0]=e[0]*i[0]+e[1]*i[5]+e[2]*i[10]+e[3]*i[15],t[1]=e[0]*i[1]+e[1]*i[6]+e[2]*i[11]+e[3]*i[16],t[2]=e[0]*i[2]+e[1]*i[7]+e[2]*i[12]+e[3]*i[17],t[3]=e[0]*i[3]+e[1]*i[8]+e[2]*i[13]+e[3]*i[18],t[4]=e[0]*i[4]+e[1]*i[9]+e[2]*i[14]+e[3]*i[19]+e[4],t[5]=e[5]*i[0]+e[6]*i[5]+e[7]*i[10]+e[8]*i[15],t[6]=e[5]*i[1]+e[6]*i[6]+e[7]*i[11]+e[8]*i[16],t[7]=e[5]*i[2]+e[6]*i[7]+e[7]*i[12]+e[8]*i[17],t[8]=e[5]*i[3]+e[6]*i[8]+e[7]*i[13]+e[8]*i[18],t[9]=e[5]*i[4]+e[6]*i[9]+e[7]*i[14]+e[8]*i[19]+e[9],t[10]=e[10]*i[0]+e[11]*i[5]+e[12]*i[10]+e[13]*i[15],t[11]=e[10]*i[1]+e[11]*i[6]+e[12]*i[11]+e[13]*i[16],t[12]=e[10]*i[2]+e[11]*i[7]+e[12]*i[12]+e[13]*i[17],t[13]=e[10]*i[3]+e[11]*i[8]+e[12]*i[13]+e[13]*i[18],t[14]=e[10]*i[4]+e[11]*i[9]+e[12]*i[14]+e[13]*i[19]+e[14],t[15]=e[15]*i[0]+e[16]*i[5]+e[17]*i[10]+e[18]*i[15],t[16]=e[15]*i[1]+e[16]*i[6]+e[17]*i[11]+e[18]*i[16],t[17]=e[15]*i[2]+e[16]*i[7]+e[17]*i[12]+e[18]*i[17],t[18]=e[15]*i[3]+e[16]*i[8]+e[17]*i[13]+e[18]*i[18],t[19]=e[15]*i[4]+e[16]*i[9]+e[17]*i[14]+e[18]*i[19]+e[19],t},t.prototype._colorMatrix=function(t){t=new Float32Array(t);return t[4]/=255,t[9]/=255,t[14]/=255,t[19]/=255,t},t.prototype.brightness=function(t,e){t=[t,0,0,0,0,0,t,0,0,0,0,0,t,0,0,0,0,0,1,0];this._loadMatrix(t,e)},t.prototype.greyscale=function(t,e){t=[t,t,t,0,0,t,t,t,0,0,t,t,t,0,0,0,0,0,1,0];this._loadMatrix(t,e)},t.prototype.blackAndWhite=function(t){this._loadMatrix([.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0],t)},t.prototype.hue=function(t,e){t=(t||0)/180*Math.PI;var i=Math.cos(t),n=Math.sin(t),t=(0,Math.sqrt)(1/3),i=[i+1/3*(1-i),1/3*(1-i)-t*n,1/3*(1-i)+t*n,0,0,1/3*(1-i)+t*n,i+1/3*(1-i),1/3*(1-i)-t*n,0,0,1/3*(1-i)-t*n,1/3*(1-i)+t*n,i+1/3*(1-i),0,0,0,0,0,1,0];this._loadMatrix(i,e)},t.prototype.contrast=function(t,e){var i=(t||0)+1,t=-.5*(i-1),t=[i,0,0,0,t,0,i,0,0,t,0,0,i,0,t,0,0,0,1,0];this._loadMatrix(t,e)},t.prototype.saturate=function(t,e){void 0===t&&(t=0);var i=2*t/3+1,t=-.5*(i-1),i=[i,t,t,0,0,t,i,t,0,0,t,t,i,0,0,0,0,0,1,0];this._loadMatrix(i,e)},t.prototype.desaturate=function(){this.saturate(-1)},t.prototype.negative=function(t){this._loadMatrix([-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0],t)},t.prototype.sepia=function(t){this._loadMatrix([.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0],t)},t.prototype.technicolor=function(t){this._loadMatrix([1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0],t)},t.prototype.polaroid=function(t){this._loadMatrix([1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0],t)},t.prototype.toBGR=function(t){this._loadMatrix([0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0],t)},t.prototype.kodachrome=function(t){this._loadMatrix([1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0],t)},t.prototype.browni=function(t){this._loadMatrix([.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0],t)},t.prototype.vintage=function(t){this._loadMatrix([.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0],t)},t.prototype.colorTone=function(t,e,i,n,r){var s=((i=i||16770432)>>16&255)/255,o=(i>>8&255)/255,a=(255&i)/255,h=((n=n||3375104)>>16&255)/255,i=(n>>8&255)/255,n=(255&n)/255,n=[.3,.59,.11,0,0,s,o,a,t=t||.2,0,h,i,n,e=e||.15,0,s-h,o-i,a-n,0,0];this._loadMatrix(n,r)},t.prototype.night=function(t,e){t=[-2*(t=t||.1),-t,0,0,0,-t,0,t,0,0,0,t,2*t,0,0,0,0,0,1,0];this._loadMatrix(t,e)},t.prototype.predator=function(t,e){t=[11.224130630493164*t,-4.794486999511719*t,-2.8746118545532227*t,0*t,.40342438220977783*t,-3.6330697536468506*t,9.193157196044922*t,-2.951810836791992*t,0*t,-1.316135048866272*t,-3.2184197902679443*t,-4.2375030517578125*t,7.476448059082031*t,0*t,.8044459223747253*t,0,0,0,1,0];this._loadMatrix(t,e)},t.prototype.lsd=function(t){this._loadMatrix([2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0],t)},t.prototype.reset=function(){this._loadMatrix([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],!1)},i.matrix.get=function(){return this.uniforms.m},i.matrix.set=function(t){this.uniforms.m=t},i.alpha.get=function(){return this.uniforms.uAlpha},i.alpha.set=function(t){this.uniforms.uAlpha=t},Object.defineProperties(t.prototype,i),t}(n.Filter);(i.ColorMatrixFilter=t).prototype.grayscale=t.prototype.greyscale},{"@pixi/core":"qqf8"}],OThW:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.DisplacementFilter=void 0;var n=t("@pixi/core"),r=t("@pixi/math"),n=function(n){function t(t,e){var i=new r.Matrix;t.renderable=!1,n.call(this,"attribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\nuniform mat3 filterMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec2 vFilterCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvec2 filterTextureCoord( void )\n{\n    return aVertexPosition * (outputFrame.zw * inputSize.zw);\n}\n\nvoid main(void)\n{\n\tgl_Position = filterVertexPosition();\n\tvTextureCoord = filterTextureCoord();\n\tvFilterCoord = ( filterMatrix * vec3( vTextureCoord, 1.0)  ).xy;\n}\n","varying vec2 vFilterCoord;\nvarying vec2 vTextureCoord;\n\nuniform vec2 scale;\nuniform mat2 rotation;\nuniform sampler2D uSampler;\nuniform sampler2D mapSampler;\n\nuniform highp vec4 inputSize;\nuniform vec4 inputClamp;\n\nvoid main(void)\n{\n  vec4 map =  texture2D(mapSampler, vFilterCoord);\n\n  map -= 0.5;\n  map.xy = scale * inputSize.zw * (rotation * map.xy);\n\n  gl_FragColor = texture2D(uSampler, clamp(vec2(vTextureCoord.x + map.x, vTextureCoord.y + map.y), inputClamp.xy, inputClamp.zw));\n}\n",{mapSampler:t._texture,filterMatrix:i,scale:{x:1,y:1},rotation:new Float32Array([1,0,0,1])}),this.maskSprite=t,this.maskMatrix=i,null==e&&(e=20),this.scale=new r.Point(e,e)}n&&(t.__proto__=n);var e={map:{configurable:!0}};return((t.prototype=Object.create(n&&n.prototype)).constructor=t).prototype.apply=function(t,e,i,n){this.uniforms.filterMatrix=t.calculateSpriteMatrix(this.maskMatrix,this.maskSprite),this.uniforms.scale.x=this.scale.x,this.uniforms.scale.y=this.scale.y;var r=this.maskSprite.transform.worldTransform,s=Math.sqrt(r.a*r.a+r.b*r.b),o=Math.sqrt(r.c*r.c+r.d*r.d);0!==s&&0!==o&&(this.uniforms.rotation[0]=r.a/s,this.uniforms.rotation[1]=r.b/s,this.uniforms.rotation[2]=r.c/o,this.uniforms.rotation[3]=r.d/o),t.applyFilter(this,e,i,n)},e.map.get=function(){return this.uniforms.mapSampler},e.map.set=function(t){this.uniforms.mapSampler=t},Object.defineProperties(t.prototype,e),t}(n.Filter);i.DisplacementFilter=n},{"@pixi/core":"qqf8","@pixi/math":"GTL5"}],aTi1:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.FXAAFilter=void 0;var n,t=t("@pixi/core"),t=((n=t.Filter)&&(r.__proto__=n),(r.prototype=Object.create(n&&n.prototype)).constructor=r);function r(){n.call(this,"\nattribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\nvarying vec2 vFragCoord;\n\nuniform vec4 inputPixel;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvoid texcoords(vec2 fragCoord, vec2 inverseVP,\n               out vec2 v_rgbNW, out vec2 v_rgbNE,\n               out vec2 v_rgbSW, out vec2 v_rgbSE,\n               out vec2 v_rgbM) {\n    v_rgbNW = (fragCoord + vec2(-1.0, -1.0)) * inverseVP;\n    v_rgbNE = (fragCoord + vec2(1.0, -1.0)) * inverseVP;\n    v_rgbSW = (fragCoord + vec2(-1.0, 1.0)) * inverseVP;\n    v_rgbSE = (fragCoord + vec2(1.0, 1.0)) * inverseVP;\n    v_rgbM = vec2(fragCoord * inverseVP);\n}\n\nvoid main(void) {\n\n   gl_Position = filterVertexPosition();\n\n   vFragCoord = aVertexPosition * outputFrame.zw;\n\n   texcoords(vFragCoord, inputPixel.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n}\n",'varying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\nvarying vec2 vFragCoord;\nuniform sampler2D uSampler;\nuniform highp vec4 inputPixel;\n\n\n/**\n Basic FXAA implementation based on the code on geeks3d.com with the\n modification that the texture2DLod stuff was removed since it\'s\n unsupported by WebGL.\n\n --\n\n From:\n https://github.com/mitsuhiko/webgl-meincraft\n\n Copyright (c) 2011 by Armin Ronacher.\n\n Some rights reserved.\n\n Redistribution and use in source and binary forms, with or without\n modification, are permitted provided that the following conditions are\n met:\n\n * Redistributions of source code must retain the above copyright\n notice, this list of conditions and the following disclaimer.\n\n * Redistributions in binary form must reproduce the above\n copyright notice, this list of conditions and the following\n disclaimer in the documentation and/or other materials provided\n with the distribution.\n\n * The names of the contributors may not be used to endorse or\n promote products derived from this software without specific\n prior written permission.\n\n THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\n OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\n THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\n#ifndef FXAA_REDUCE_MIN\n#define FXAA_REDUCE_MIN   (1.0/ 128.0)\n#endif\n#ifndef FXAA_REDUCE_MUL\n#define FXAA_REDUCE_MUL   (1.0 / 8.0)\n#endif\n#ifndef FXAA_SPAN_MAX\n#define FXAA_SPAN_MAX     8.0\n#endif\n\n//optimized version for mobile, where dependent\n//texture reads can be a bottleneck\nvec4 fxaa(sampler2D tex, vec2 fragCoord, vec2 inverseVP,\n          vec2 v_rgbNW, vec2 v_rgbNE,\n          vec2 v_rgbSW, vec2 v_rgbSE,\n          vec2 v_rgbM) {\n    vec4 color;\n    vec3 rgbNW = texture2D(tex, v_rgbNW).xyz;\n    vec3 rgbNE = texture2D(tex, v_rgbNE).xyz;\n    vec3 rgbSW = texture2D(tex, v_rgbSW).xyz;\n    vec3 rgbSE = texture2D(tex, v_rgbSE).xyz;\n    vec4 texColor = texture2D(tex, v_rgbM);\n    vec3 rgbM  = texColor.xyz;\n    vec3 luma = vec3(0.299, 0.587, 0.114);\n    float lumaNW = dot(rgbNW, luma);\n    float lumaNE = dot(rgbNE, luma);\n    float lumaSW = dot(rgbSW, luma);\n    float lumaSE = dot(rgbSE, luma);\n    float lumaM  = dot(rgbM,  luma);\n    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));\n    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));\n\n    mediump vec2 dir;\n    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));\n    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));\n\n    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *\n                          (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);\n\n    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);\n    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),\n              max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),\n                  dir * rcpDirMin)) * inverseVP;\n\n    vec3 rgbA = 0.5 * (\n                       texture2D(tex, fragCoord * inverseVP + dir * (1.0 / 3.0 - 0.5)).xyz +\n                       texture2D(tex, fragCoord * inverseVP + dir * (2.0 / 3.0 - 0.5)).xyz);\n    vec3 rgbB = rgbA * 0.5 + 0.25 * (\n                                     texture2D(tex, fragCoord * inverseVP + dir * -0.5).xyz +\n                                     texture2D(tex, fragCoord * inverseVP + dir * 0.5).xyz);\n\n    float lumaB = dot(rgbB, luma);\n    if ((lumaB < lumaMin) || (lumaB > lumaMax))\n        color = vec4(rgbA, texColor.a);\n    else\n        color = vec4(rgbB, texColor.a);\n    return color;\n}\n\nvoid main() {\n\n      vec4 color;\n\n      color = fxaa(uSampler, vFragCoord, inputPixel.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n\n      gl_FragColor = color;\n}\n')}i.FXAAFilter=t},{"@pixi/core":"qqf8"}],jHvy:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.NoiseFilter=void 0;var n=t("@pixi/core"),t=function(i){function t(t,e){void 0===t&&(t=.5),void 0===e&&(e=Math.random()),i.call(this,n.defaultFilterVertex,"precision highp float;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform float uNoise;\nuniform float uSeed;\nuniform sampler2D uSampler;\n\nfloat rand(vec2 co)\n{\n    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);\n}\n\nvoid main()\n{\n    vec4 color = texture2D(uSampler, vTextureCoord);\n    float randomValue = rand(gl_FragCoord.xy * uSeed);\n    float diff = (randomValue - 0.5) * uNoise;\n\n    // Un-premultiply alpha before applying the color matrix. See issue #3539.\n    if (color.a > 0.0) {\n        color.rgb /= color.a;\n    }\n\n    color.r += diff;\n    color.g += diff;\n    color.b += diff;\n\n    // Premultiply alpha again.\n    color.rgb *= color.a;\n\n    gl_FragColor = color;\n}\n",{uNoise:0,uSeed:0}),this.noise=t,this.seed=e}i&&(t.__proto__=i),(t.prototype=Object.create(i&&i.prototype)).constructor=t;var e={noise:{configurable:!0},seed:{configurable:!0}};return e.noise.get=function(){return this.uniforms.uNoise},e.noise.set=function(t){this.uniforms.uNoise=t},e.seed.get=function(){return this.uniforms.uSeed},e.seed.set=function(t){this.uniforms.uSeed=t},Object.defineProperties(t.prototype,e),t}(n.Filter);i.NoiseFilter=t},{"@pixi/core":"qqf8"}],wyPI:[function(t,e,i){"use strict";var h=t("@pixi/core"),l=t("@pixi/sprite"),n=t("@pixi/display"),r=t("@pixi/math"),u=t("@pixi/utils"),c=t("@pixi/settings"),p=new r.Matrix;n.DisplayObject.prototype._cacheAsBitmap=!1,n.DisplayObject.prototype._cacheData=!1;function s(){this.textureCacheId=null,this.originalRender=null,this.originalRenderCanvas=null,this.originalCalculateBounds=null,this.originalGetLocalBounds=null,this.originalUpdateTransform=null,this.originalHitTest=null,this.originalDestroy=null,this.originalMask=null,this.originalFilterArea=null,this.sprite=null}Object.defineProperties(n.DisplayObject.prototype,{cacheAsBitmap:{get:function(){return this._cacheAsBitmap},set:function(t){var e;this._cacheAsBitmap!==t&&((this._cacheAsBitmap=t)?(this._cacheData||(this._cacheData=new s),(e=this._cacheData).originalRender=this.render,e.originalRenderCanvas=this.renderCanvas,e.originalUpdateTransform=this.updateTransform,e.originalCalculateBounds=this.calculateBounds,e.originalGetLocalBounds=this.getLocalBounds,e.originalDestroy=this.destroy,e.originalContainsPoint=this.containsPoint,e.originalMask=this._mask,e.originalFilterArea=this.filterArea,this.render=this._renderCached,this.renderCanvas=this._renderCachedCanvas,this.destroy=this._cacheAsBitmapDestroy):((e=this._cacheData).sprite&&this._destroyCachedDisplayObject(),this.render=e.originalRender,this.renderCanvas=e.originalRenderCanvas,this.calculateBounds=e.originalCalculateBounds,this.getLocalBounds=e.originalGetLocalBounds,this.destroy=e.originalDestroy,this.updateTransform=e.originalUpdateTransform,this.containsPoint=e.originalContainsPoint,this._mask=e.originalMask,this.filterArea=e.originalFilterArea))}}}),n.DisplayObject.prototype._renderCached=function(t){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObject(t),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._render(t))},n.DisplayObject.prototype._initCachedDisplayObject=function(t){var e,i,n,r,s,o,a;this._cacheData&&this._cacheData.sprite||(e=this.alpha,this.alpha=1,t.batch.flush(),i=this.getLocalBounds().clone(),this.filters&&(o=this.filters[0].padding,i.pad(o)),i.ceil(c.settings.RESOLUTION),n=t.renderTexture.current,r=t.renderTexture.sourceFrame,s=t.projection.transform,a=h.RenderTexture.create(i.width,i.height),o="cacheAsBitmap_"+(0,u.uid)(),this._cacheData.textureCacheId=o,h.BaseTexture.addToCache(a.baseTexture,o),h.Texture.addToCache(a,o),(o=p).tx=-i.x,o.ty=-i.y,this.transform.worldTransform.identity(),this.render=this._cacheData.originalRender,t.render(this,a,!0,o,!0),t.projection.transform=s,t.renderTexture.bind(n,r),this.render=this._renderCached,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,(a=new l.Sprite(a)).transform.worldTransform=this.transform.worldTransform,a.anchor.x=-i.x/i.width,a.anchor.y=-i.y/i.height,a.alpha=e,a._bounds=this._bounds,this._cacheData.sprite=a,this.transform._parentID=-1,this.parent?this.updateTransform():(this.parent=t._tempDisplayObjectParent,this.updateTransform(),this.parent=null),this.containsPoint=a.containsPoint.bind(a))},n.DisplayObject.prototype._renderCachedCanvas=function(t){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObjectCanvas(t),this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._renderCanvas(t))},n.DisplayObject.prototype._initCachedDisplayObjectCanvas=function(t){var e,i,n,r,s;this._cacheData&&this._cacheData.sprite||(e=this.getLocalBounds(),i=this.alpha,this.alpha=1,n=t.context,e.ceil(c.settings.RESOLUTION),s=h.RenderTexture.create(e.width,e.height),r="cacheAsBitmap_"+(0,u.uid)(),this._cacheData.textureCacheId=r,h.BaseTexture.addToCache(s.baseTexture,r),h.Texture.addToCache(s,r),r=p,this.transform.localTransform.copyTo(r),r.invert(),r.tx-=e.x,r.ty-=e.y,this.renderCanvas=this._cacheData.originalRenderCanvas,t.render(this,s,!0,r,!1),t.context=n,this.renderCanvas=this._renderCachedCanvas,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,(s=new l.Sprite(s)).transform.worldTransform=this.transform.worldTransform,s.anchor.x=-e.x/e.width,s.anchor.y=-e.y/e.height,s.alpha=i,s._bounds=this._bounds,this._cacheData.sprite=s,this.transform._parentID=-1,this.parent?this.updateTransform():(this.parent=t._tempDisplayObjectParent,this.updateTransform(),this.parent=null),this.containsPoint=s.containsPoint.bind(s))},n.DisplayObject.prototype._calculateCachedBounds=function(){this._bounds.clear(),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite._calculateBounds(),this._lastBoundsID=this._boundsID},n.DisplayObject.prototype._getCachedLocalBounds=function(){return this._cacheData.sprite.getLocalBounds()},n.DisplayObject.prototype._destroyCachedDisplayObject=function(){this._cacheData.sprite._texture.destroy(!0),this._cacheData.sprite=null,h.BaseTexture.removeFromCache(this._cacheData.textureCacheId),h.Texture.removeFromCache(this._cacheData.textureCacheId),this._cacheData.textureCacheId=null},n.DisplayObject.prototype._cacheAsBitmapDestroy=function(t){this.cacheAsBitmap=!1,this.destroy(t)}},{"@pixi/core":"qqf8","@pixi/sprite":"vBI9","@pixi/display":"LJAM","@pixi/math":"GTL5","@pixi/utils":"x5Ec","@pixi/settings":"v11T"}],FAue:[function(t,e,i){"use strict";t=t("@pixi/display");t.DisplayObject.prototype.name=null,t.Container.prototype.getChildByName=function(t){for(var e=0;e<this.children.length;e++)if(this.children[e].name===t)return this.children[e];return null}},{"@pixi/display":"LJAM"}],UWgA:[function(t,e,i){"use strict";var n=t("@pixi/display"),r=t("@pixi/math");n.DisplayObject.prototype.getGlobalPosition=function(t,e){return void 0===t&&(t=new r.Point),void 0===e&&(e=!1),this.parent?this.parent.toGlobal(this.position,t,e):(t.x=this.position.x,t.y=this.position.y),t}},{"@pixi/display":"LJAM","@pixi/math":"GTL5"}],fWSH:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.MeshMaterial=i.MeshGeometry=i.MeshBatchUvs=i.Mesh=void 0;function n(t,e){this.uvBuffer=t,this.uvMatrix=e,this.data=null,this._bufferUpdateId=-1,this._textureUpdateId=-1,this._updateID=0}var s=t("@pixi/core"),r=t("@pixi/math"),o=t("@pixi/constants"),a=t("@pixi/display"),f=t("@pixi/settings"),h=t("@pixi/utils");(i.MeshBatchUvs=n).prototype.update=function(t){!t&&this._bufferUpdateId===this.uvBuffer._updateID&&this._textureUpdateId===this.uvMatrix._updateID||(this._bufferUpdateId=this.uvBuffer._updateID,this._textureUpdateId=this.uvMatrix._updateID,t=this.uvBuffer.data,this.data&&this.data.length===t.length||(this.data=new Float32Array(t.length)),this.uvMatrix.multiplyUvs(t,this.data),this._updateID++)};var u=new r.Point,c=new r.Polygon,a=function(r){function i(t,e,i,n){void 0===n&&(n=o.DRAW_MODES.TRIANGLES),r.call(this),(this.geometry=t).refCount++,this.shader=e,this.state=i||s.State.for2d(),this.drawMode=n,this.start=0,this.size=0,this.uvs=null,this.indices=null,this.vertexData=new Float32Array(1),this.vertexDirty=0,this._transformID=-1,this.tint=16777215,this.blendMode=o.BLEND_MODES.NORMAL,this._roundPixels=f.settings.ROUND_PIXELS,this.batchUvs=null}r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i;var t={uvBuffer:{configurable:!0},verticesBuffer:{configurable:!0},material:{configurable:!0},blendMode:{configurable:!0},roundPixels:{configurable:!0},tint:{configurable:!0},texture:{configurable:!0}};return t.uvBuffer.get=function(){return this.geometry.buffers[1]},t.verticesBuffer.get=function(){return this.geometry.buffers[0]},t.material.set=function(t){this.shader=t},t.material.get=function(){return this.shader},t.blendMode.set=function(t){this.state.blendMode=t},t.blendMode.get=function(){return this.state.blendMode},t.roundPixels.set=function(t){this._roundPixels!==t&&(this._transformID=-1),this._roundPixels=t},t.roundPixels.get=function(){return this._roundPixels},t.tint.get=function(){return this.shader.tint},t.tint.set=function(t){this.shader.tint=t},t.texture.get=function(){return this.shader.texture},t.texture.set=function(t){this.shader.texture=t},i.prototype._render=function(t){var e=this.geometry.buffers[0].data;this.shader.batchable&&this.drawMode===o.DRAW_MODES.TRIANGLES&&e.length<2*i.BATCHABLE_SIZE?this._renderToBatch(t):this._renderDefault(t)},i.prototype._renderDefault=function(t){var e=this.shader;e.alpha=this.worldAlpha,e.update&&e.update(),t.batch.flush(),e.program.uniformData.translationMatrix&&(e.uniforms.translationMatrix=this.transform.worldTransform.toArray(!0)),t.shader.bind(e),t.state.set(this.state),t.geometry.bind(this.geometry,e),t.geometry.draw(this.drawMode,this.size,this.start,this.geometry.instanceCount)},i.prototype._renderToBatch=function(t){var e=this.geometry;this.shader.uvMatrix&&(this.shader.uvMatrix.update(),this.calculateUvs()),this.calculateVertices(),this.indices=e.indexBuffer.data,this._tintRGB=this.shader._tintRGB,this._texture=this.shader.texture;e=this.material.pluginName;t.batch.setObjectRenderer(t.plugins[e]),t.plugins[e].render(this)},i.prototype.calculateVertices=function(){var t=this.geometry,e=t.buffers[0].data;if(t.vertexDirtyId!==this.vertexDirty||this._transformID!==this.transform._worldID){this._transformID=this.transform._worldID,this.vertexData.length!==e.length&&(this.vertexData=new Float32Array(e.length));for(var i=this.transform.worldTransform,n=i.a,r=i.b,s=i.c,o=i.d,a=i.tx,h=i.ty,l=this.vertexData,u=0;u<l.length/2;u++){var c=e[2*u],p=e[2*u+1];l[2*u]=n*c+s*p+a,l[2*u+1]=r*c+o*p+h}if(this._roundPixels)for(var d=f.settings.RESOLUTION,_=0;_<l.length;++_)l[_]=Math.round((l[_]*d|0)/d);this.vertexDirty=t.vertexDirtyId}},i.prototype.calculateUvs=function(){var t=this.geometry.buffers[1];this.shader.uvMatrix.isSimple?this.uvs=t.data:(this.batchUvs||(this.batchUvs=new n(t,this.shader.uvMatrix)),this.batchUvs.update(),this.uvs=this.batchUvs.data)},i.prototype._calculateBounds=function(){this.calculateVertices(),this._bounds.addVertexData(this.vertexData,0,this.vertexData.length)},i.prototype.containsPoint=function(t){if(!this.getBounds().contains(t.x,t.y))return!1;this.worldTransform.applyInverse(t,u);for(var e=this.geometry.getBuffer("aVertexPosition").data,i=c.points,n=this.geometry.getIndex().data,r=n.length,s=4===this.drawMode?3:1,o=0;o+2<r;o+=s){var a=2*n[o],h=2*n[o+1],l=2*n[o+2];if(i[0]=e[a],i[1]=e[1+a],i[2]=e[h],i[3]=e[1+h],i[4]=e[l],i[5]=e[1+l],c.contains(u.x,u.y))return!0}return!1},i.prototype.destroy=function(t){r.prototype.destroy.call(this,t),this.geometry.refCount--,0===this.geometry.refCount&&this.geometry.dispose(),this.geometry=null,this.shader=null,this.state=null,this.uvs=null,this.indices=null,this.vertexData=null},Object.defineProperties(i.prototype,t),i}(a.Container);(i.Mesh=a).BATCHABLE_SIZE=100;a=function(n){function t(t,e){var i={uSampler:t,alpha:1,uTextureMatrix:r.Matrix.IDENTITY,uColor:new Float32Array([1,1,1,1])};(e=Object.assign({tint:16777215,alpha:1,pluginName:"batch"},e)).uniforms&&Object.assign(i,e.uniforms),n.call(this,e.program||s.Program.from("attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTextureMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;\n}\n","varying vec2 vTextureCoord;\nuniform vec4 uColor;\n\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n    gl_FragColor = texture2D(uSampler, vTextureCoord) * uColor;\n}\n"),i),this._colorDirty=!1,this.uvMatrix=new s.TextureMatrix(t),this.batchable=void 0===e.program,this.pluginName=e.pluginName,this.tint=e.tint,this.alpha=e.alpha}n&&(t.__proto__=n),(t.prototype=Object.create(n&&n.prototype)).constructor=t;var e={texture:{configurable:!0},alpha:{configurable:!0},tint:{configurable:!0}};return e.texture.get=function(){return this.uniforms.uSampler},e.texture.set=function(t){this.uniforms.uSampler!==t&&(this.uniforms.uSampler=t,this.uvMatrix.texture=t)},e.alpha.set=function(t){t!==this._alpha&&(this._alpha=t,this._colorDirty=!0)},e.alpha.get=function(){return this._alpha},e.tint.set=function(t){t!==this._tint&&(this._tint=t,this._tintRGB=(t>>16)+(65280&t)+((255&t)<<16),this._colorDirty=!0)},e.tint.get=function(){return this._tint},t.prototype.update=function(){var t;this._colorDirty&&(this._colorDirty=!1,t=this.texture.baseTexture,(0,h.premultiplyTintToRgba)(this._tint,this._alpha,this.uniforms.uColor,t.alphaMode)),this.uvMatrix.update()&&(this.uniforms.uTextureMatrix=this.uvMatrix.mapCoord)},Object.defineProperties(t.prototype,e),t}(s.Shader);i.MeshMaterial=a;a=function(n){function t(t,e,i){n.call(this);t=new s.Buffer(t),e=new s.Buffer(e,!0),i=new s.Buffer(i,!0,!0);this.addAttribute("aVertexPosition",t,2,!1,o.TYPES.FLOAT).addAttribute("aTextureCoord",e,2,!1,o.TYPES.FLOAT).addIndex(i),this._updateId=-1}n&&(t.__proto__=n),(t.prototype=Object.create(n&&n.prototype)).constructor=t;var e={vertexDirtyId:{configurable:!0}};return e.vertexDirtyId.get=function(){return this.buffers[0]._updateID},Object.defineProperties(t.prototype,e),t}(s.Geometry);i.MeshGeometry=a},{"@pixi/core":"qqf8","@pixi/math":"GTL5","@pixi/constants":"R76a","@pixi/display":"LJAM","@pixi/settings":"v11T","@pixi/utils":"x5Ec"}],tJ8P:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.SimpleRope=i.SimplePlane=i.SimpleMesh=i.RopeGeometry=i.PlaneGeometry=i.NineSlicePlane=void 0;var r,o=t("@pixi/mesh"),s=t("@pixi/constants"),a=t("@pixi/core"),h=((r=o.MeshGeometry)&&(n.__proto__=r),((n.prototype=Object.create(r&&r.prototype)).constructor=n).prototype.build=function(){for(var t=this.segWidth*this.segHeight,e=[],i=[],n=[],r=this.segWidth-1,s=this.segHeight-1,o=this.width/r,a=this.height/s,h=0;h<t;h++){var l=h%this.segWidth,u=h/this.segWidth|0;e.push(l*o,u*a),i.push(l/r,u/s)}for(var c=r*s,p=0;p<c;p++){var d=p%r,_=p/r|0,f=_*this.segWidth+d,m=_*this.segWidth+d+1,y=(1+_)*this.segWidth+d,d=(1+_)*this.segWidth+d+1;n.push(f,m,y,m,d,y)}this.buffers[0].data=new Float32Array(e),this.buffers[1].data=new Float32Array(i),this.indexBuffer.data=new Uint16Array(n),this.buffers[0].update(),this.buffers[1].update(),this.indexBuffer.update()},n);function n(t,e,i,n){void 0===t&&(t=100),void 0===e&&(e=100),void 0===i&&(i=10),void 0===n&&(n=10),r.call(this),this.segWidth=i,this.segHeight=n,this.width=t,this.height=e,this.build()}i.PlaneGeometry=h;var l,u=((l=o.MeshGeometry)&&(c.__proto__=l),((c.prototype=Object.create(l&&l.prototype)).constructor=c).prototype.build=function(){var t=this.points;if(t){var e=this.getBuffer("aVertexPosition"),i=this.getBuffer("aTextureCoord"),n=this.getIndex();if(!(t.length<1)){e.data.length/4!==t.length&&(e.data=new Float32Array(4*t.length),i.data=new Float32Array(4*t.length),n.data=new Uint16Array(6*(t.length-1)));var r=i.data,s=n.data;r[0]=0,r[1]=0,r[2]=0,r[3]=1;for(var o=0,a=t[0],h=this.width*this.textureScale,l=t.length,u=0;u<l;u++){var c,p,d=4*u;0<this.textureScale?(c=a.x-t[u].x,p=a.y-t[u].y,p=Math.sqrt(c*c+p*p),a=t[u],o+=p/h):o=u/(l-1),r[d]=o,r[1+d]=0,r[2+d]=o,r[3+d]=1}for(var _=0,f=0;f<l-1;f++){var m=2*f;s[_++]=m,s[_++]=1+m,s[_++]=2+m,s[_++]=2+m,s[_++]=1+m,s[_++]=3+m}i.update(),n.update(),this.updateVertices()}}},c.prototype.updateVertices=function(){var t=this.points;if(!(t.length<1)){for(var e=t[0],i=this.buffers[0].data,n=t.length,r=0;r<n;r++){var s=t[r],o=4*r,a=-((u=r<t.length-1?t[r+1]:s).x-e.x),h=u.y-e.y,l=Math.sqrt(h*h+a*a),u=0<this.textureScale?this.textureScale*this.width/2:this.width/2;h/=l,a/=l,h*=u,a*=u,i[o]=s.x+h,i[1+o]=s.y+a,i[2+o]=s.x-h,i[3+o]=s.y-a,e=s}this.buffers[0].update()}},c.prototype.update=function(){0<this.textureScale?this.build():this.updateVertices()},c);function c(t,e,i){void 0===t&&(t=200),void 0===i&&(i=0),l.call(this,new Float32Array(4*e.length),new Float32Array(4*e.length),new Uint16Array(6*(e.length-1))),this.points=e,this.width=t,this.textureScale=i,this.build()}i.RopeGeometry=u;var p,d=((p=o.Mesh)&&(_.__proto__=p),((_.prototype=Object.create(p&&p.prototype)).constructor=_).prototype._render=function(t){!this.autoUpdate&&this.geometry.width===this.shader.texture.height||(this.geometry.width=this.shader.texture.height,this.geometry.update()),p.prototype._render.call(this,t)},_);function _(t,e,i){void 0===i&&(i=0);var n=new u(t.height,e,i),e=new o.MeshMaterial(t);0<i&&(t.baseTexture.wrapMode=s.WRAP_MODES.REPEAT),p.call(this,n,e),this.autoUpdate=!0}i.SimpleRope=d;t=function(n){function t(t,e,i){e=new h(t.width,t.height,e,i),i=new o.MeshMaterial(a.Texture.WHITE);n.call(this,e,i),this.texture=t}n&&(t.__proto__=n);var e={texture:{configurable:!0}};return((t.prototype=Object.create(n&&n.prototype)).constructor=t).prototype.textureUpdated=function(){this._textureID=this.shader.texture._updateID,this.geometry.width=this.shader.texture.width,this.geometry.height=this.shader.texture.height,this.geometry.build()},e.texture.set=function(t){this.shader.texture!==t&&(this.shader.texture=t,this._textureID=-1,t.baseTexture.valid?this.textureUpdated():t.once("update",this.textureUpdated,this))},e.texture.get=function(){return this.shader.texture},t.prototype._render=function(t){this._textureID!==this.shader.texture._updateID&&this.textureUpdated(),n.prototype._render.call(this,t)},Object.defineProperties(t.prototype,e),t}(o.Mesh);i.SimplePlane=t;d=function(s){function t(t,e,i,n,r){void 0===t&&(t=a.Texture.EMPTY);n=new o.MeshGeometry(e,i,n);n.getBuffer("aVertexPosition").static=!1;t=new o.MeshMaterial(t);s.call(this,n,t,null,r),this.autoUpdate=!0}s&&(t.__proto__=s),(t.prototype=Object.create(s&&s.prototype)).constructor=t;var e={vertices:{configurable:!0}};return e.vertices.get=function(){return this.geometry.getBuffer("aVertexPosition").data},e.vertices.set=function(t){this.geometry.getBuffer("aVertexPosition").data=t},t.prototype._render=function(t){this.autoUpdate&&this.geometry.getBuffer("aVertexPosition").update(),s.prototype._render.call(this,t)},Object.defineProperties(t.prototype,e),t}(o.Mesh);i.SimpleMesh=d;t=function(s){function t(t,e,i,n,r){s.call(this,a.Texture.WHITE,4,4),this._origWidth=t.orig.width,this._origHeight=t.orig.height,this._width=this._origWidth,this._height=this._origHeight,this._leftWidth=void 0!==e?e:10,this._rightWidth=void 0!==n?n:10,this._topHeight=void 0!==i?i:10,this._bottomHeight=void 0!==r?r:10,this.texture=t}s&&(t.__proto__=s);var e={vertices:{configurable:!0},width:{configurable:!0},height:{configurable:!0},leftWidth:{configurable:!0},rightWidth:{configurable:!0},topHeight:{configurable:!0},bottomHeight:{configurable:!0}};return((t.prototype=Object.create(s&&s.prototype)).constructor=t).prototype.textureUpdated=function(){this._textureID=this.shader.texture._updateID,this._refresh()},e.vertices.get=function(){return this.geometry.getBuffer("aVertexPosition").data},e.vertices.set=function(t){this.geometry.getBuffer("aVertexPosition").data=t},t.prototype.updateHorizontalVertices=function(){var t=this.vertices,e=this._getMinScale();t[9]=t[11]=t[13]=t[15]=this._topHeight*e,t[17]=t[19]=t[21]=t[23]=this._height-this._bottomHeight*e,t[25]=t[27]=t[29]=t[31]=this._height},t.prototype.updateVerticalVertices=function(){var t=this.vertices,e=this._getMinScale();t[2]=t[10]=t[18]=t[26]=this._leftWidth*e,t[4]=t[12]=t[20]=t[28]=this._width-this._rightWidth*e,t[6]=t[14]=t[22]=t[30]=this._width},t.prototype._getMinScale=function(){var t=this._leftWidth+this._rightWidth,e=this._width>t?1:this._width/t,t=this._topHeight+this._bottomHeight,t=this._height>t?1:this._height/t;return Math.min(e,t)},e.width.get=function(){return this._width},e.width.set=function(t){this._width=t,this._refresh()},e.height.get=function(){return this._height},e.height.set=function(t){this._height=t,this._refresh()},e.leftWidth.get=function(){return this._leftWidth},e.leftWidth.set=function(t){this._leftWidth=t,this._refresh()},e.rightWidth.get=function(){return this._rightWidth},e.rightWidth.set=function(t){this._rightWidth=t,this._refresh()},e.topHeight.get=function(){return this._topHeight},e.topHeight.set=function(t){this._topHeight=t,this._refresh()},e.bottomHeight.get=function(){return this._bottomHeight},e.bottomHeight.set=function(t){this._bottomHeight=t,this._refresh()},t.prototype._refresh=function(){var t=this.texture,e=this.geometry.buffers[1].data;this._origWidth=t.orig.width,this._origHeight=t.orig.height;var i=1/this._origWidth,t=1/this._origHeight;e[0]=e[8]=e[16]=e[24]=0,e[1]=e[3]=e[5]=e[7]=0,e[6]=e[14]=e[22]=e[30]=1,e[25]=e[27]=e[29]=e[31]=1,e[2]=e[10]=e[18]=e[26]=i*this._leftWidth,e[4]=e[12]=e[20]=e[28]=1-i*this._rightWidth,e[9]=e[11]=e[13]=e[15]=t*this._topHeight,e[17]=e[19]=e[21]=e[23]=1-t*this._bottomHeight,this.updateHorizontalVertices(),this.updateVerticalVertices(),this.geometry.buffers[0].update(),this.geometry.buffers[1].update()},Object.defineProperties(t.prototype,e),t}(t);i.NineSlicePlane=t},{"@pixi/mesh":"fWSH","@pixi/constants":"R76a","@pixi/core":"qqf8"}],S0oD:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.AnimatedSprite=void 0;var r=t("@pixi/core"),n=t("@pixi/sprite"),s=t("@pixi/ticker"),n=function(i){function n(t,e){i.call(this,t[0]instanceof r.Texture?t[0]:t[0].texture),this._textures=null,this._durations=null,this.textures=t,this._autoUpdate=!1!==e,this.animationSpeed=1,this.loop=!0,this.updateAnchor=!1,this.onComplete=null,this.onFrameChange=null,this.onLoop=null,this._currentTime=0,this.playing=!1}i&&(n.__proto__=i);var t={totalFrames:{configurable:!0},textures:{configurable:!0},currentFrame:{configurable:!0}};return((n.prototype=Object.create(i&&i.prototype)).constructor=n).prototype.stop=function(){this.playing&&(this.playing=!1,this._autoUpdate&&s.Ticker.shared.remove(this.update,this))},n.prototype.play=function(){this.playing||(this.playing=!0,this._autoUpdate&&s.Ticker.shared.add(this.update,this,s.UPDATE_PRIORITY.HIGH))},n.prototype.gotoAndStop=function(t){this.stop();var e=this.currentFrame;this._currentTime=t,e!==this.currentFrame&&this.updateTexture()},n.prototype.gotoAndPlay=function(t){var e=this.currentFrame;this._currentTime=t,e!==this.currentFrame&&this.updateTexture(),this.play()},n.prototype.update=function(t){var e=this.animationSpeed*t,i=this.currentFrame;if(null!==this._durations){var n=this._currentTime%1*this._durations[this.currentFrame];for(n+=e/60*1e3;n<0;)this._currentTime--,n+=this._durations[this.currentFrame];var r=Math.sign(this.animationSpeed*t);for(this._currentTime=Math.floor(this._currentTime);n>=this._durations[this.currentFrame];)n-=this._durations[this.currentFrame]*r,this._currentTime+=r;this._currentTime+=n/this._durations[this.currentFrame]}else this._currentTime+=e;this._currentTime<0&&!this.loop?(this._currentTime=0,this.stop(),this.onComplete&&this.onComplete()):this._currentTime>=this._textures.length&&!this.loop?(this._currentTime=this._textures.length-1,this.stop(),this.onComplete&&this.onComplete()):i!==this.currentFrame&&(this.loop&&this.onLoop&&(0<this.animationSpeed&&this.currentFrame<i||this.animationSpeed<0&&this.currentFrame>i)&&this.onLoop(),this.updateTexture())},n.prototype.updateTexture=function(){this._texture=this._textures[this.currentFrame],this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this.uvs=this._texture._uvs.uvsFloat32,this.updateAnchor&&this._anchor.copyFrom(this._texture.defaultAnchor),this.onFrameChange&&this.onFrameChange(this.currentFrame)},n.prototype.destroy=function(t){this.stop(),i.prototype.destroy.call(this,t),this.onComplete=null,this.onFrameChange=null,this.onLoop=null},n.fromFrames=function(t){for(var e=[],i=0;i<t.length;++i)e.push(r.Texture.from(t[i]));return new n(e)},n.fromImages=function(t){for(var e=[],i=0;i<t.length;++i)e.push(r.Texture.from(t[i]));return new n(e)},t.totalFrames.get=function(){return this._textures.length},t.textures.get=function(){return this._textures},t.textures.set=function(t){if(t[0]instanceof r.Texture)this._textures=t,this._durations=null;else{this._textures=[],this._durations=[];for(var e=0;e<t.length;e++)this._textures.push(t[e].texture),this._durations.push(t[e].time)}this.gotoAndStop(0),this.updateTexture()},t.currentFrame.get=function(){var t=Math.floor(this._currentTime)%this._textures.length;return t<0&&(t+=this._textures.length),t},Object.defineProperties(n.prototype,t),n}(n.Sprite);i.AnimatedSprite=n},{"@pixi/core":"qqf8","@pixi/sprite":"vBI9","@pixi/ticker":"t27b"}],DZG1:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n={VERSION:!0,filters:!0,useDeprecated:!0,accessibility:!0,interaction:!0,utils:!0};i.useDeprecated=function(){var e=this;Object.defineProperties(e,{SVG_SIZE:{get:function(){return(0,d.deprecation)(k,"PIXI.utils.SVG_SIZE property has moved to PIXI.resources.SVGResource.SVG_SIZE"),e.SVGResource.SVG_SIZE}},TransformStatic:{get:function(){return(0,d.deprecation)(k,"PIXI.TransformStatic class has been removed, use PIXI.Transform"),e.Transform}},TransformBase:{get:function(){return(0,d.deprecation)(k,"PIXI.TransformBase class has been removed, use PIXI.Transform"),e.Transform}},TRANSFORM_MODE:{get:function(){return(0,d.deprecation)(k,"PIXI.TRANSFORM_MODE property has been removed"),{STATIC:0,DYNAMIC:1}}},WebGLRenderer:{get:function(){return(0,d.deprecation)(k,"PIXI.WebGLRenderer class has moved to PIXI.Renderer"),e.Renderer}},CanvasRenderTarget:{get:function(){return(0,d.deprecation)(k,"PIXI.CanvasRenderTarget class has moved to PIXI.utils.CanvasRenderTarget"),e.utils.CanvasRenderTarget}},loader:{get:function(){return(0,d.deprecation)(k,"PIXI.loader instance has moved to PIXI.Loader.shared"),e.Loader.shared}},FilterManager:{get:function(){return(0,d.deprecation)(k,"PIXI.FilterManager class has moved to PIXI.systems.FilterSystem"),e.systems.FilterSystem}},CanvasTinter:{get:function(){return(0,d.deprecation)("5.2.0","PIXI.CanvasTinter namespace has moved to PIXI.canvasUtils"),e.canvasUtils}},GroupD8:{get:function(){return(0,d.deprecation)("5.2.0","PIXI.GroupD8 namespace has moved to PIXI.groupD8"),e.groupD8}}}),e.prepare={},Object.defineProperties(e.prepare,{BasePrepare:{get:function(){return(0,d.deprecation)("5.2.1","PIXI.prepare.BasePrepare moved to PIXI.BasePrepare"),e.BasePrepare}},Prepare:{get:function(){return(0,d.deprecation)("5.2.1","PIXI.prepare.Prepare moved to PIXI.Prepare"),e.Prepare}},CanvasPrepare:{get:function(){return(0,d.deprecation)("5.2.1","PIXI.prepare.CanvasPrepare moved to PIXI.CanvasPrepare"),e.CanvasPrepare}}}),e.extract={},Object.defineProperties(e.extract,{Extract:{get:function(){return(0,d.deprecation)("5.2.1","PIXI.extract.Extract moved to PIXI.Extract"),e.Extract}},CanvasExtract:{get:function(){return(0,d.deprecation)("5.2.1","PIXI.extract.CanvasExtract moved to PIXI.CanvasExtract"),e.CanvasExtract}}}),e.extras={},Object.defineProperties(e.extras,{TilingSprite:{get:function(){return(0,d.deprecation)(k,"PIXI.extras.TilingSprite class has moved to PIXI.TilingSprite"),e.TilingSprite}},TilingSpriteRenderer:{get:function(){return(0,d.deprecation)(k,"PIXI.extras.TilingSpriteRenderer class has moved to PIXI.TilingSpriteRenderer"),e.TilingSpriteRenderer}},AnimatedSprite:{get:function(){return(0,d.deprecation)(k,"PIXI.extras.AnimatedSprite class has moved to PIXI.AnimatedSprite"),e.AnimatedSprite}},BitmapText:{get:function(){return(0,d.deprecation)(k,"PIXI.extras.BitmapText class has moved to PIXI.BitmapText"),e.BitmapText}}}),Object.defineProperties(e.utils,{getSvgSize:{get:function(){return(0,d.deprecation)(k,"PIXI.utils.getSvgSize function has moved to PIXI.resources.SVGResource.getSize"),e.SVGResource.getSize}}}),e.mesh={},Object.defineProperties(e.mesh,{Mesh:{get:function(){return(0,d.deprecation)(k,"PIXI.mesh.Mesh class has moved to PIXI.SimpleMesh"),e.SimpleMesh}},NineSlicePlane:{get:function(){return(0,d.deprecation)(k,"PIXI.mesh.NineSlicePlane class has moved to PIXI.NineSlicePlane"),e.NineSlicePlane}},Plane:{get:function(){return(0,d.deprecation)(k,"PIXI.mesh.Plane class has moved to PIXI.SimplePlane"),e.SimplePlane}},Rope:{get:function(){return(0,d.deprecation)(k,"PIXI.mesh.Rope class has moved to PIXI.SimpleRope"),e.SimpleRope}},RawMesh:{get:function(){return(0,d.deprecation)(k,"PIXI.mesh.RawMesh class has moved to PIXI.Mesh"),e.Mesh}},CanvasMeshRenderer:{get:function(){return(0,d.deprecation)(k,"PIXI.mesh.CanvasMeshRenderer class has moved to PIXI.CanvasMeshRenderer"),e.CanvasMeshRenderer}},MeshRenderer:{get:function(){return(0,d.deprecation)(k,"PIXI.mesh.MeshRenderer class has moved to PIXI.MeshRenderer"),e.MeshRenderer}}}),e.particles={},Object.defineProperties(e.particles,{ParticleContainer:{get:function(){return(0,d.deprecation)(k,"PIXI.particles.ParticleContainer class has moved to PIXI.ParticleContainer"),e.ParticleContainer}},ParticleRenderer:{get:function(){return(0,d.deprecation)(k,"PIXI.particles.ParticleRenderer class has moved to PIXI.ParticleRenderer"),e.ParticleRenderer}}}),e.ticker={},Object.defineProperties(e.ticker,{Ticker:{get:function(){return(0,d.deprecation)(k,"PIXI.ticker.Ticker class has moved to PIXI.Ticker"),e.Ticker}},shared:{get:function(){return(0,d.deprecation)(k,"PIXI.ticker.shared instance has moved to PIXI.Ticker.shared"),e.Ticker.shared}}}),e.loaders={},Object.defineProperties(e.loaders,{Loader:{get:function(){return(0,d.deprecation)(k,"PIXI.loaders.Loader class has moved to PIXI.Loader"),e.Loader}},Resource:{get:function(){return(0,d.deprecation)(k,"PIXI.loaders.Resource class has moved to PIXI.LoaderResource"),e.LoaderResource}},bitmapFontParser:{get:function(){return(0,d.deprecation)(k,"PIXI.loaders.bitmapFontParser function has moved to PIXI.BitmapFontLoader.use"),e.BitmapFontLoader.use}},parseBitmapFontData:{get:function(){return(0,d.deprecation)(k,"PIXI.loaders.parseBitmapFontData function has moved to PIXI.BitmapFontLoader.parse"),e.BitmapFontLoader.parse}},spritesheetParser:{get:function(){return(0,d.deprecation)(k,"PIXI.loaders.spritesheetParser function has moved to PIXI.SpritesheetLoader.use"),e.SpritesheetLoader.use}},getResourcePath:{get:function(){return(0,d.deprecation)(k,"PIXI.loaders.getResourcePath property has moved to PIXI.SpritesheetLoader.getResourcePath"),e.SpritesheetLoader.getResourcePath}}}),e.Loader.addPixiMiddleware=function(t){return(0,d.deprecation)(k,"PIXI.loaders.Loader.addPixiMiddleware function is deprecated, use PIXI.loaders.Loader.registerPlugin"),e.loaders.Loader.registerPlugin({use:t()})},Object.defineProperty(e.extract,"WebGLExtract",{get:function(){return(0,d.deprecation)(k,"PIXI.extract.WebGLExtract method has moved to PIXI.Extract"),e.Extract}}),Object.defineProperty(e.prepare,"WebGLPrepare",{get:function(){return(0,d.deprecation)(k,"PIXI.prepare.WebGLPrepare class has moved to PIXI.Prepare"),e.Prepare}}),e.Container.prototype._renderWebGL=function(t){(0,d.deprecation)(k,"PIXI.Container._renderWebGL method has moved to PIXI.Container._render"),this._render(t)},e.Container.prototype.renderWebGL=function(t){(0,d.deprecation)(k,"PIXI.Container.renderWebGL method has moved to PIXI.Container.render"),this.render(t)},e.DisplayObject.prototype.renderWebGL=function(t){(0,d.deprecation)(k,"PIXI.DisplayObject.renderWebGL method has moved to PIXI.DisplayObject.render"),this.render(t)},e.Container.prototype.renderAdvancedWebGL=function(t){(0,d.deprecation)(k,"PIXI.Container.renderAdvancedWebGL method has moved to PIXI.Container.renderAdvanced"),this.renderAdvanced(t)},Object.defineProperties(e.settings,{TRANSFORM_MODE:{get:function(){return(0,d.deprecation)(k,"PIXI.settings.TRANSFORM_MODE property has been removed"),0},set:function(){(0,d.deprecation)(k,"PIXI.settings.TRANSFORM_MODE property has been removed")}}});var r=e.BaseTexture,t=!(r.prototype.loadSource=function(t){(0,d.deprecation)(k,"PIXI.BaseTexture.loadSource method has been deprecated");t=e.resources.autoDetectResource(t);t.internal=!0,this.setResource(t),this.update()});Object.defineProperties(r.prototype,{hasLoaded:{get:function(){return(0,d.deprecation)(k,"PIXI.BaseTexture.hasLoaded property has been removed, use PIXI.BaseTexture.valid"),this.valid}},imageUrl:{get:function(){return(0,d.deprecation)(k,"PIXI.BaseTexture.imageUrl property has been removed, use PIXI.BaseTexture.resource.url"),this.resource&&this.resource.url},set:function(t){(0,d.deprecation)(k,"PIXI.BaseTexture.imageUrl property has been removed, use PIXI.BaseTexture.resource.url"),this.resource&&(this.resource.url=t)}},source:{get:function(){return(0,d.deprecation)(k,"PIXI.BaseTexture.source property has been moved, use `PIXI.BaseTexture.resource.source`"),this.resource&&this.resource.source},set:function(t){(0,d.deprecation)(k,"PIXI.BaseTexture.source property has been moved, use `PIXI.BaseTexture.resource.source` if you want to set HTMLCanvasElement. Otherwise, create new BaseTexture."),this.resource&&(this.resource.source=t)}},premultiplyAlpha:{get:function(){return(0,d.deprecation)("5.2.0","PIXI.BaseTexture.premultiplyAlpha property has been changed to `alphaMode`, see `PIXI.ALPHA_MODES`"),0!==this.alphaMode},set:function(t){(0,d.deprecation)("5.2.0","PIXI.BaseTexture.premultiplyAlpha property has been changed to `alphaMode`, see `PIXI.ALPHA_MODES`"),this.alphaMode=Number(t)}},_id:{get:function(){return t||((0,d.deprecation)("5.2.0","PIXI.BaseTexture._id batch local field has been changed to `_batchLocation`"),t=!0),this._batchLocation},set:function(t){this._batchLocation=t}}}),r.fromImage=function(t,e,i,n){(0,d.deprecation)(k,"PIXI.BaseTexture.fromImage method has been replaced with PIXI.BaseTexture.from");e={scale:n,crossorigin:e};return r.from(t,{scaleMode:i,resourceOptions:e})},r.fromCanvas=function(t,e){return(0,d.deprecation)(k,"PIXI.BaseTexture.fromCanvas method has been replaced with PIXI.BaseTexture.from"),r.from(t,{scaleMode:e})},r.fromSVG=function(t,e,i,n){(0,d.deprecation)(k,"PIXI.BaseTexture.fromSVG method has been replaced with PIXI.BaseTexture.from");e={scale:n,crossorigin:e};return r.from(t,{scaleMode:i,resourceOptions:e})},Object.defineProperties(e.resources.ImageResource.prototype,{premultiplyAlpha:{get:function(){return(0,d.deprecation)("5.2.0","PIXI.resources.ImageResource.premultiplyAlpha property has been changed to `alphaMode`, see `PIXI.ALPHA_MODES`"),0!==this.alphaMode},set:function(t){(0,d.deprecation)("5.2.0","PIXI.resources.ImageResource.premultiplyAlpha property has been changed to `alphaMode`, see `PIXI.ALPHA_MODES`"),this.alphaMode=Number(t)}}}),e.Point.prototype.copy=function(t){return(0,d.deprecation)(k,"PIXI.Point.copy method has been replaced with PIXI.Point.copyFrom"),this.copyFrom(t)},e.ObservablePoint.prototype.copy=function(t){return(0,d.deprecation)(k,"PIXI.ObservablePoint.copy method has been replaced with PIXI.ObservablePoint.copyFrom"),this.copyFrom(t)},e.Rectangle.prototype.copy=function(t){return(0,d.deprecation)(k,"PIXI.Rectangle.copy method has been replaced with PIXI.Rectangle.copyFrom"),this.copyFrom(t)},e.Matrix.prototype.copy=function(t){return(0,d.deprecation)(k,"PIXI.Matrix.copy method has been replaced with PIXI.Matrix.copyTo"),this.copyTo(t)},e.systems.StateSystem.prototype.setState=function(t){return(0,d.deprecation)("v5.1.0","StateSystem.setState has been renamed to StateSystem.set"),this.set(t)},Object.assign(e.systems.FilterSystem.prototype,{getRenderTarget:function(t,e){return(0,d.deprecation)(k,"PIXI.FilterManager.getRenderTarget method has been replaced with PIXI.systems.FilterSystem#getFilterTexture"),this.getFilterTexture(e)},returnRenderTarget:function(t){(0,d.deprecation)(k,"PIXI.FilterManager.returnRenderTarget method has been replaced with PIXI.systems.FilterSystem.returnFilterTexture"),this.returnFilterTexture(t)},calculateScreenSpaceMatrix:function(t){(0,d.deprecation)(k,"PIXI.systems.FilterSystem.calculateScreenSpaceMatrix method is removed, use `(vTextureCoord * inputSize.xy) + outputFrame.xy` instead");var e=t.identity(),i=this.activeState,t=i.sourceFrame,i=i.destinationFrame;return e.translate(t.x/i.width,t.y/i.height),e.scale(i.width,i.height),e},calculateNormalizedScreenSpaceMatrix:function(t){(0,d.deprecation)(k,"PIXI.systems.FilterManager.calculateNormalizedScreenSpaceMatrix method is removed, use `((vTextureCoord * inputSize.xy) + outputFrame.xy) / outputFrame.zw` instead.");var e=this.activeState,i=e.sourceFrame,n=e.destinationFrame,e=t.identity();e.translate(i.x/n.width,i.y/n.height);t=n.width/i.width,i=n.height/i.height;return e.scale(t,i),e}}),Object.defineProperties(e.RenderTexture.prototype,{sourceFrame:{get:function(){return(0,d.deprecation)(k,"PIXI.RenderTexture.sourceFrame property has been removed"),this.filterFrame}},size:{get:function(){return(0,d.deprecation)(k,"PIXI.RenderTexture.size property has been removed"),this._frame}}});var s,o,i=((o=e.filters.BlurFilterPass)&&(h.__proto__=o),(h.prototype=Object.create(o&&o.prototype)).constructor=h),n=((s=e.filters.BlurFilterPass)&&(a.__proto__=s),(a.prototype=Object.create(s&&s.prototype)).constructor=a);function a(t,e,i,n){(0,d.deprecation)(k,"PIXI.filters.BlurYFilter class is deprecated, use PIXI.filters.BlurFilterPass"),s.call(this,!1,t,e,i,n)}function h(t,e,i,n){(0,d.deprecation)(k,"PIXI.filters.BlurXFilter class is deprecated, use PIXI.filters.BlurFilterPass"),o.call(this,!0,t,e,i,n)}Object.assign(e.filters,{BlurXFilter:i,BlurYFilter:n});var l=e.Sprite,u=e.Texture,n=e.Graphics;function c(t,e,i,n){return(0,d.deprecation)(k,"PIXI.Sprite."+t+" method is deprecated, use PIXI.Sprite.from"),l.from(e,{resourceOptions:{scale:n,crossorigin:i}})}function p(t,e,i,n){return(0,d.deprecation)(k,"PIXI.Texture."+t+" method is deprecated, use PIXI.Texture.from"),u.from(e,{resourceOptions:{scale:n,crossorigin:i}})}n.prototype.generateCanvasTexture||(n.prototype.generateCanvasTexture=function(){(0,d.deprecation)(k,'PIXI.Graphics.generateCanvasTexture method is only available in "pixi.js-legacy"')}),Object.defineProperty(e.Graphics.prototype,"graphicsData",{get:function(){return(0,d.deprecation)(k,"PIXI.Graphics.graphicsData property is deprecated, use PIXI.Graphics.geometry.graphicsData"),this.geometry.graphicsData}}),Object.defineProperty(e.SimpleRope.prototype,"points",{get:function(){return(0,d.deprecation)(k,"PIXI.SimpleRope.points property is deprecated, use PIXI.SimpleRope.geometry.points"),this.geometry.points},set:function(t){(0,d.deprecation)(k,"PIXI.SimpleRope.points property is deprecated, use PIXI.SimpleRope.geometry.points"),this.geometry.points=t}}),l.fromImage=c.bind(null,"fromImage"),l.fromSVG=c.bind(null,"fromSVG"),l.fromCanvas=c.bind(null,"fromCanvas"),l.fromVideo=c.bind(null,"fromVideo"),l.fromFrame=c.bind(null,"fromFrame"),u.fromImage=p.bind(null,"fromImage"),u.fromSVG=p.bind(null,"fromSVG"),u.fromCanvas=p.bind(null,"fromCanvas"),u.fromVideo=p.bind(null,"fromVideo"),u.fromFrame=p.bind(null,"fromFrame"),Object.defineProperty(e.AbstractRenderer.prototype,"autoResize",{get:function(){return(0,d.deprecation)(k,"PIXI.AbstractRenderer.autoResize property is deprecated, use PIXI.AbstractRenderer.autoDensity"),this.autoDensity},set:function(t){(0,d.deprecation)(k,"PIXI.AbstractRenderer.autoResize property is deprecated, use PIXI.AbstractRenderer.autoDensity"),this.autoDensity=t}}),Object.defineProperty(e.Renderer.prototype,"textureManager",{get:function(){return(0,d.deprecation)(k,"PIXI.Renderer.textureManager property is deprecated, use PIXI.Renderer.texture"),this.texture}}),e.utils.mixins={mixin:function(){(0,d.deprecation)(k,"PIXI.utils.mixins.mixin function is no longer available")},delayMixin:function(){(0,d.deprecation)(k,"PIXI.utils.mixins.delayMixin function is no longer available")},performMixins:function(){(0,d.deprecation)(k,"PIXI.utils.mixins.performMixins function is no longer available")}}},i.utils=i.interaction=i.accessibility=i.filters=i.VERSION=void 0,t("@pixi/polyfill");var r=L(t("@pixi/accessibility"));i.accessibility=r;var s=L(t("@pixi/interaction"));i.interaction=s;var d=L(t("@pixi/utils"));i.utils=d;var o=t("@pixi/app");Object.keys(o).forEach(function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(n,t)||Object.defineProperty(i,t,{enumerable:!0,get:function(){return o[t]}}))});var a=t("@pixi/core");Object.keys(a).forEach(function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(n,t)||Object.defineProperty(i,t,{enumerable:!0,get:function(){return a[t]}}))});var h=t("@pixi/extract");Object.keys(h).forEach(function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(n,t)||Object.defineProperty(i,t,{enumerable:!0,get:function(){return h[t]}}))});var l=t("@pixi/loaders");Object.keys(l).forEach(function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(n,t)||Object.defineProperty(i,t,{enumerable:!0,get:function(){return l[t]}}))});var u=t("@pixi/particles");Object.keys(u).forEach(function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(n,t)||Object.defineProperty(i,t,{enumerable:!0,get:function(){return u[t]}}))});var c=t("@pixi/prepare");Object.keys(c).forEach(function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(n,t)||Object.defineProperty(i,t,{enumerable:!0,get:function(){return c[t]}}))});var p=t("@pixi/spritesheet");Object.keys(p).forEach(function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(n,t)||Object.defineProperty(i,t,{enumerable:!0,get:function(){return p[t]}}))});var _=t("@pixi/sprite-tiling");Object.keys(_).forEach(function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(n,t)||Object.defineProperty(i,t,{enumerable:!0,get:function(){return _[t]}}))});var f=t("@pixi/text-bitmap");Object.keys(f).forEach(function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(n,t)||Object.defineProperty(i,t,{enumerable:!0,get:function(){return f[t]}}))});var m=t("@pixi/ticker");Object.keys(m).forEach(function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(n,t)||Object.defineProperty(i,t,{enumerable:!0,get:function(){return m[t]}}))});var y=t("@pixi/filter-alpha"),g=t("@pixi/filter-blur"),v=t("@pixi/filter-color-matrix"),w=t("@pixi/filter-displacement"),x=t("@pixi/filter-fxaa"),b=t("@pixi/filter-noise");t("@pixi/mixin-cache-as-bitmap"),t("@pixi/mixin-get-child-by-name"),t("@pixi/mixin-get-global-position");var E=t("@pixi/constants");Object.keys(E).forEach(function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(n,t)||Object.defineProperty(i,t,{enumerable:!0,get:function(){return E[t]}}))});var $=t("@pixi/display");Object.keys($).forEach(function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(n,t)||Object.defineProperty(i,t,{enumerable:!0,get:function(){return $[t]}}))});var A=t("@pixi/graphics");Object.keys(A).forEach(function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(n,t)||Object.defineProperty(i,t,{enumerable:!0,get:function(){return A[t]}}))});var S=t("@pixi/math");Object.keys(S).forEach(function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(n,t)||Object.defineProperty(i,t,{enumerable:!0,get:function(){return S[t]}}))});var T=t("@pixi/mesh");Object.keys(T).forEach(function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(n,t)||Object.defineProperty(i,t,{enumerable:!0,get:function(){return T[t]}}))});var C=t("@pixi/mesh-extras");Object.keys(C).forEach(function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(n,t)||Object.defineProperty(i,t,{enumerable:!0,get:function(){return C[t]}}))});var M=t("@pixi/runner");Object.keys(M).forEach(function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(n,t)||Object.defineProperty(i,t,{enumerable:!0,get:function(){return M[t]}}))});var I=t("@pixi/sprite");Object.keys(I).forEach(function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(n,t)||Object.defineProperty(i,t,{enumerable:!0,get:function(){return I[t]}}))});var P=t("@pixi/sprite-animated");Object.keys(P).forEach(function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(n,t)||Object.defineProperty(i,t,{enumerable:!0,get:function(){return P[t]}}))});var O=t("@pixi/text");Object.keys(O).forEach(function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(n,t)||Object.defineProperty(i,t,{enumerable:!0,get:function(){return O[t]}}))});var D=t("@pixi/settings");function R(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return R=function(){return t},t}function L(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var e=R();if(e&&e.has(t))return e.get(t);var i,n,r={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(i in t)Object.prototype.hasOwnProperty.call(t,i)&&((n=s?Object.getOwnPropertyDescriptor(t,i):null)&&(n.get||n.set)?Object.defineProperty(r,i,n):r[i]=t[i]);return r.default=t,e&&e.set(t,r),r}Object.keys(D).forEach(function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(n,t)||Object.defineProperty(i,t,{enumerable:!0,get:function(){return D[t]}}))});var k="5.0.0";a.Renderer.registerPlugin("accessibility",r.AccessibilityManager),a.Renderer.registerPlugin("extract",h.Extract),a.Renderer.registerPlugin("interaction",s.InteractionManager),a.Renderer.registerPlugin("particle",u.ParticleRenderer),a.Renderer.registerPlugin("prepare",c.Prepare),a.Renderer.registerPlugin("batch",a.BatchRenderer),a.Renderer.registerPlugin("tilingSprite",_.TilingSpriteRenderer),l.Loader.registerPlugin(f.BitmapFontLoader),l.Loader.registerPlugin(p.SpritesheetLoader),o.Application.registerPlugin(m.TickerPlugin),o.Application.registerPlugin(l.AppLoaderPlugin),i.VERSION="5.2.1";b={AlphaFilter:y.AlphaFilter,BlurFilter:g.BlurFilter,BlurFilterPass:g.BlurFilterPass,ColorMatrixFilter:v.ColorMatrixFilter,DisplacementFilter:w.DisplacementFilter,FXAAFilter:x.FXAAFilter,NoiseFilter:b.NoiseFilter};i.filters=b},{"@pixi/polyfill":"AWY2","@pixi/accessibility":"jFkj","@pixi/interaction":"RmUs","@pixi/utils":"x5Ec","@pixi/app":"HdTX","@pixi/core":"qqf8","@pixi/extract":"lAKD","@pixi/loaders":"pAmg","@pixi/particles":"lXcw","@pixi/prepare":"kdZ8","@pixi/spritesheet":"vMGq","@pixi/sprite-tiling":"s11n","@pixi/text-bitmap":"mTlL","@pixi/ticker":"t27b","@pixi/filter-alpha":"SOHw","@pixi/filter-blur":"zAmH","@pixi/filter-color-matrix":"FZwX","@pixi/filter-displacement":"OThW","@pixi/filter-fxaa":"aTi1","@pixi/filter-noise":"jHvy","@pixi/mixin-cache-as-bitmap":"wyPI","@pixi/mixin-get-child-by-name":"FAue","@pixi/mixin-get-global-position":"UWgA","@pixi/constants":"R76a","@pixi/display":"LJAM","@pixi/graphics":"uuMi","@pixi/math":"GTL5","@pixi/mesh":"fWSH","@pixi/mesh-extras":"tJ8P","@pixi/runner":"jcTq","@pixi/sprite":"vBI9","@pixi/sprite-animated":"S0oD","@pixi/text":"LtEJ","@pixi/settings":"v11T"}],AIIz:[function(t,e,i){"use strict";t=function(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var e=o();if(e&&e.has(t))return e.get(t);var i,n,r={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(i in t)Object.prototype.hasOwnProperty.call(t,i)&&((n=s?Object.getOwnPropertyDescriptor(t,i):null)&&(n.get||n.set)?Object.defineProperty(r,i,n):r[i]=t[i]);return r.default=t,e&&e.set(t,r),r}(t("pixi.js"));function o(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return o=function(){return t},t}window.PIXI=t},{"pixi.js":"DZG1"}],d92s:[function(t,e,i){var n,r,s,h,o,a,l,u,c,p,d,_,f,m,y,g,v,w,x,T,b,E,$,A,G,S,C,M,z,I,J,P,O,D,R,L,k,F=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});function N(t){this.centerX=0,this.centerY=0,this.radius=0,this.angle=0,this.worldX=0,this.worldY=0,this.radius=t}function B(t,e){this.jitterX=0,this.jitterY=0,this.jitterX=t,this.jitterY=e}function U(t){t=l.call(this,t)||this;return t.x=0,t.y=0,t.scaleX=1,t.scaleY=1,t.rotation=0,t.width=0,t.height=0,t.color=new a.Color(1,1,1,1),t.offset=a.Utils.newFloatArray(8),t.uvs=a.Utils.newFloatArray(8),t.tempColor=new a.Color(1,1,1,1),t}function X(t){t=c.call(this,t)||this;return t.color=new u.Color(.38,.94,0,1),t}function j(t){t=d.call(this,t)||this;return t.closed=!1,t.constantSpeed=!1,t.color=new p.Color(1,1,1,1),t}function V(t){t=f.call(this,t)||this;return t.color=new _.Color(1,1,1,1),t.tempColor=new _.Color(0,0,0,0),t}function H(t){t=y.call(this,t)||this;return t.color=new m.Color(.2275,.2275,.8078,1),t}function Y(t){t=v.call(this,t)||this;return t.color=new g.Color(1,1,1,1),t}function W(){this.convexPolygons=new Array,this.convexPolygonsIndices=new Array,this.indicesArray=new Array,this.isConcaveArray=new Array,this.triangles=new Array,this.polygonPool=new w.Pool(function(){return new Array}),this.polygonIndicesPool=new w.Pool(function(){return new Array})}function q(t){t=x.call(this,t,0,!1)||this;return t.bones=new Array,t.rotateMix=0,t.translateMix=0,t.scaleMix=0,t.shearMix=0,t.offsetRotation=0,t.offsetX=0,t.offsetY=0,t.offsetScaleX=0,t.offsetScaleY=0,t.offsetShearY=0,t.relative=!1,t.local=!1,t}function K(t,e){if(this.rotateMix=0,this.translateMix=0,this.scaleMix=0,this.shearMix=0,this.temp=new T.Vector2,this.active=!1,null==t)throw new Error("data cannot be null.");if(null==e)throw new Error("skeleton cannot be null.");this.data=t,this.rotateMix=t.rotateMix,this.translateMix=t.translateMix,this.scaleMix=t.scaleMix,this.shearMix=t.shearMix,this.bones=new Array;for(var i=0;i<t.bones.length;i++)this.bones.push(e.findBone(t.bones[i].name));this.target=e.findBone(t.target.name)}function Z(t){this._image=t}function Q(){this.size=null}function tt(t,e){if(this.deform=new Array,null==t)throw new Error("data cannot be null.");if(null==e)throw new Error("bone cannot be null.");this.data=t,this.bone=e,this.color=new A.Color,this.darkColor=null==t.darkColor?null:new A.Color,this.setToSetupPose(),this.blendMode=this.data.blendMode}function et(){this.bones=new Array,this.slots=new Array,this.skins=new Array,this.events=new Array,this.animations=new Array,this.ikConstraints=new Array,this.transformConstraints=new Array,this.pathConstraints=new Array,this.fps=0}function it(){this.triangulator=new G.Triangulator,this.clippingPolygon=new Array,this.clipOutput=new Array,this.clippedVertices=new Array,this.clippedTriangles=new Array,this.scratch=new Array}function nt(){this.minX=0,this.minY=0,this.maxX=0,this.maxY=0,this.boundingBoxes=new Array,this.polygons=new Array,this.polygonPool=new S.Pool(function(){return S.Utils.newFloatArray(16)})}function rt(t){if(this._updateCache=new Array,this.updateCacheReset=new Array,this.time=0,this.scaleX=1,this.scaleY=1,this.x=0,this.y=0,null==t)throw new Error("data cannot be null.");this.data=t,this.bones=new Array;for(var e=0;e<t.bones.length;e++){var i,n=t.bones[e],r=void 0;null==n.parent?r=new C.Bone(n,this,null):(i=this.bones[n.parent.index],r=new C.Bone(n,this,i),i.children.push(r)),this.bones.push(r)}for(this.slots=new Array,this.drawOrder=new Array,e=0;e<t.slots.length;e++){var s=t.slots[e],s=(r=this.bones[s.boneData.index],new C.Slot(s,r));this.slots.push(s),this.drawOrder.push(s)}for(this.ikConstraints=new Array,e=0;e<t.ikConstraints.length;e++){var o=t.ikConstraints[e];this.ikConstraints.push(new C.IkConstraint(o,this))}for(this.transformConstraints=new Array,e=0;e<t.transformConstraints.length;e++){var a=t.transformConstraints[e];this.transformConstraints.push(new C.TransformConstraint(a,this))}for(this.pathConstraints=new Array,e=0;e<t.pathConstraints.length;e++){var h=t.pathConstraints[e];this.pathConstraints.push(new C.PathConstraint(h,this))}this.color=new C.Color(1,1,1,1),this.updateCache()}function st(t){t=M.call(this,t,0,!1)||this;return t.bones=new Array,t}function ot(t,e){if(this.position=0,this.spacing=0,this.rotateMix=0,this.translateMix=0,this.spaces=new Array,this.positions=new Array,this.world=new Array,this.curves=new Array,this.lengths=new Array,this.segments=new Array,this.active=!1,null==t)throw new Error("data cannot be null.");if(null==e)throw new Error("skeleton cannot be null.");this.data=t,this.bones=new Array;for(var i=0,n=t.bones.length;i<n;i++)this.bones.push(e.findBone(t.bones[i].name));this.target=e.findSlot(t.target.name),this.position=t.position,this.spacing=t.spacing,this.rotateMix=t.rotateMix,this.translateMix=t.translateMix}function at(t){t=I.call(this,t,0,!1)||this;return t.bones=new Array,t.bendDirection=1,t.compress=!1,t.stretch=!1,t.uniform=!1,t.mix=1,t.softness=0,t}function ht(t,e){if(this.bendDirection=0,this.compress=!1,this.stretch=!1,this.mix=1,this.softness=0,this.active=!1,null==t)throw new Error("data cannot be null.");if(null==e)throw new Error("skeleton cannot be null.");this.data=t,this.mix=t.mix,this.softness=t.softness,this.bendDirection=t.bendDirection,this.compress=t.compress,this.stretch=t.stretch,this.bones=new Array;for(var i=0;i<t.bones.length;i++)this.bones.push(e.findBone(t.bones[i].name));this.target=e.findBone(t.target.name)}function lt(t,e,i){if(this.matrix=new PIXI.Matrix,this.children=new Array,this.x=0,this.y=0,this.rotation=0,this.scaleX=0,this.scaleY=0,this.shearX=0,this.shearY=0,this.ax=0,this.ay=0,this.arotation=0,this.ascaleX=0,this.ascaleY=0,this.ashearX=0,this.ashearY=0,this.appliedValid=!1,this.sorted=!1,this.active=!1,null==t)throw new Error("data cannot be null.");if(null==e)throw new Error("skeleton cannot be null.");this.data=t,this.skeleton=e,this.parent=i,this.setToSetupPose()}function ut(t){this.atlas=t}function ct(t){if(this.animationToMixTime={},this.defaultMix=0,null==t)throw new Error("skeletonData cannot be null.");this.skeletonData=t}(function(N){var B,_,t,U=(e.prototype.hasTimeline=function(t){return 1==this.timelineIds[t]},e.prototype.apply=function(t,e,i,n,r,s,o,a){if(null==t)throw new Error("skeleton cannot be null.");n&&0!=this.duration&&(i%=this.duration,0<e&&(e%=this.duration));for(var h=this.timelines,l=0,u=h.length;l<u;l++)h[l].apply(t,e,i,r,s,o,a)},e.binarySearch=function(t,e,i){void 0===i&&(i=1);var n=0,r=t.length/i-2;if(0==r)return i;for(var s=r>>>1;;){if(t[(s+1)*i]<=e?n=s+1:r=s,n==r)return(n+1)*i;s=n+r>>>1}},e.linearSearch=function(t,e,i){for(var n=0,r=t.length-i;n<=r;n+=i)if(t[n]>e)return n;return-1},e);function e(t,e,i){if(null==t)throw new Error("name cannot be null.");if(null==e)throw new Error("timelines cannot be null.");this.name=t,this.timelines=e,this.timelineIds=[];for(var n=0;n<e.length;n++)this.timelineIds[e[n].getPropertyId()]=!0;this.duration=i}N.Animation=U,(i=B=N.MixBlend||(N.MixBlend={}))[i.setup=0]="setup",i[i.first=1]="first",i[i.replace=2]="replace",i[i.add=3]="add",(r=_=N.MixDirection||(N.MixDirection={}))[r.mixIn=0]="mixIn",r[r.mixOut=1]="mixOut",(o=t=N.TimelineType||(N.TimelineType={}))[o.rotate=0]="rotate",o[o.translate=1]="translate",o[o.scale=2]="scale",o[o.shear=3]="shear",o[o.attachment=4]="attachment",o[o.color=5]="color",o[o.deform=6]="deform",o[o.event=7]="event",o[o.drawOrder=8]="drawOrder",o[o.ikConstraint=9]="ikConstraint",o[o.transformConstraint=10]="transformConstraint",o[o.pathConstraintPosition=11]="pathConstraintPosition",o[o.pathConstraintSpacing=12]="pathConstraintSpacing",o[o.pathConstraintMix=13]="pathConstraintMix",o[o.twoColor=14]="twoColor";var i=(g.prototype.getFrameCount=function(){return this.curves.length/g.BEZIER_SIZE+1},g.prototype.setLinear=function(t){this.curves[t*g.BEZIER_SIZE]=g.LINEAR},g.prototype.setStepped=function(t){this.curves[t*g.BEZIER_SIZE]=g.STEPPED},g.prototype.getCurveType=function(t){t*=g.BEZIER_SIZE;if(t==this.curves.length)return g.LINEAR;t=this.curves[t];return t==g.LINEAR?g.LINEAR:t==g.STEPPED?g.STEPPED:g.BEZIER},g.prototype.setCurve=function(t,e,i,n,r){var s=.03*(2*-e+n),o=.03*(2*-i+r),a=.006*(3*(e-n)+1),h=.006*(3*(i-r)+1),l=2*s+a,u=2*o+h,c=.3*e+s+.16666667*a,p=.3*i+o+.16666667*h,d=t*g.BEZIER_SIZE,_=this.curves;_[d++]=g.BEZIER;for(var f=c,m=p,y=d+g.BEZIER_SIZE-1;d<y;d+=2)_[d]=f,_[d+1]=m,c+=l,p+=u,l+=a,u+=h,f+=c,m+=p},g.prototype.getCurvePercent=function(t,e){e=N.MathUtils.clamp(e,0,1);var i=this.curves,n=t*g.BEZIER_SIZE,t=i[n];if(t==g.LINEAR)return e;if(t==g.STEPPED)return 0;for(var r=0,s=++n,o=n+g.BEZIER_SIZE-1;n<o;n+=2)if((r=i[n])>=e){var a=void 0,h=void 0;return(h=n==s?a=0:(a=i[n-2],i[n-1]))+(i[n+1]-h)*(e-a)/(r-a)}t=i[n-1];return t+(1-t)*(e-r)/(1-r)},g.LINEAR=0,g.STEPPED=1,g.BEZIER=2,g.BEZIER_SIZE=19,g);function g(t){if(t<=0)throw new Error("frameCount must be > 0: "+t);this.curves=N.Utils.newFloatArray((t-1)*g.BEZIER_SIZE)}N.CurveTimeline=i;var n,r=(F(f,n=i),f.prototype.getPropertyId=function(){return(t.rotate<<24)+this.boneIndex},f.prototype.setFrame=function(t,e,i){t<<=1,this.frames[t]=e,this.frames[t+f.ROTATION]=i},f.prototype.apply=function(t,e,i,n,r,s,o){var a=this.frames,h=t.bones[this.boneIndex];if(h.active)if(i<a[0])switch(s){case B.setup:return void(h.rotation=h.data.rotation);case B.first:var l=h.data.rotation-h.rotation;h.rotation+=(l-360*(16384-(16384.499999999996-l/360|0)))*r}else if(i>=a[a.length-f.ENTRIES]){var u=a[a.length+f.PREV_ROTATION];switch(s){case B.setup:h.rotation=h.data.rotation+u*r;break;case B.first:case B.replace:u+=h.data.rotation-h.rotation,u-=360*(16384-(16384.499999999996-u/360|0));case B.add:h.rotation+=u*r}}else{var c=U.binarySearch(a,i,f.ENTRIES),p=a[c+f.PREV_ROTATION],t=a[c],t=this.getCurvePercent((c>>1)-1,1-(i-t)/(a[c+f.PREV_TIME]-t)),d=p+((d=a[c+f.ROTATION]-p)-360*(16384-(16384.499999999996-d/360|0)))*t;switch(s){case B.setup:h.rotation=h.data.rotation+(d-360*(16384-(16384.499999999996-d/360|0)))*r;break;case B.first:case B.replace:d+=h.data.rotation-h.rotation;case B.add:h.rotation+=(d-360*(16384-(16384.499999999996-d/360|0)))*r}}},f.ENTRIES=2,f.PREV_TIME=-2,f.PREV_ROTATION=-1,f.ROTATION=1,f);function f(t){var e=n.call(this,t)||this;return e.frames=N.Utils.newFloatArray(t<<1),e}N.RotateTimeline=r;var s,o=(F(p,s=i),p.prototype.getPropertyId=function(){return(t.translate<<24)+this.boneIndex},p.prototype.setFrame=function(t,e,i,n){t*=p.ENTRIES,this.frames[t]=e,this.frames[t+p.X]=i,this.frames[t+p.Y]=n},p.prototype.apply=function(t,e,i,n,r,s,o){var a=this.frames,h=t.bones[this.boneIndex];if(h.active)if(i<a[0])switch(s){case B.setup:return h.x=h.data.x,void(h.y=h.data.y);case B.first:h.x+=(h.data.x-h.x)*r,h.y+=(h.data.y-h.y)*r}else{var l,u=0,c=0;switch(i>=a[a.length-p.ENTRIES]?(u=a[a.length+p.PREV_X],c=a[a.length+p.PREV_Y]):(u=a[(l=U.binarySearch(a,i,p.ENTRIES))+p.PREV_X],c=a[l+p.PREV_Y],t=a[l],t=this.getCurvePercent(l/p.ENTRIES-1,1-(i-t)/(a[l+p.PREV_TIME]-t)),u+=(a[l+p.X]-u)*t,c+=(a[l+p.Y]-c)*t),s){case B.setup:h.x=h.data.x+u*r,h.y=h.data.y+c*r;break;case B.first:case B.replace:h.x+=(h.data.x+u-h.x)*r,h.y+=(h.data.y+c-h.y)*r;break;case B.add:h.x+=u*r,h.y+=c*r}}},p.ENTRIES=3,p.PREV_TIME=-3,p.PREV_X=-2,p.PREV_Y=-1,p.X=1,p.Y=2,p);function p(t){var e=s.call(this,t)||this;return e.frames=N.Utils.newFloatArray(t*p.ENTRIES),e}N.TranslateTimeline=o;var a,r=(F(m,a=o),m.prototype.getPropertyId=function(){return(t.scale<<24)+this.boneIndex},m.prototype.apply=function(t,e,i,n,r,s,o){var a=this.frames,h=t.bones[this.boneIndex];if(h.active)if(i<a[0])switch(s){case B.setup:return h.scaleX=h.data.scaleX,void(h.scaleY=h.data.scaleY);case B.first:h.scaleX+=(h.data.scaleX-h.scaleX)*r,h.scaleY+=(h.data.scaleY-h.scaleY)*r}else{var l,u=0,c=0;if(c=i>=a[a.length-m.ENTRIES]?(u=a[a.length+m.PREV_X]*h.data.scaleX,a[a.length+m.PREV_Y]*h.data.scaleY):(u=a[(l=U.binarySearch(a,i,m.ENTRIES))+m.PREV_X],c=a[l+m.PREV_Y],t=a[l],t=this.getCurvePercent(l/m.ENTRIES-1,1-(i-t)/(a[l+m.PREV_TIME]-t)),u=(u+(a[l+m.X]-u)*t)*h.data.scaleX,(c+(a[l+m.Y]-c)*t)*h.data.scaleY),1==r)s==B.add?(h.scaleX+=u-h.data.scaleX,h.scaleY+=c-h.data.scaleY):(h.scaleX=u,h.scaleY=c);else{var p=0,d=0;if(o==_.mixOut)switch(s){case B.setup:p=h.data.scaleX,d=h.data.scaleY,h.scaleX=p+(Math.abs(u)*N.MathUtils.signum(p)-p)*r,h.scaleY=d+(Math.abs(c)*N.MathUtils.signum(d)-d)*r;break;case B.first:case B.replace:p=h.scaleX,d=h.scaleY,h.scaleX=p+(Math.abs(u)*N.MathUtils.signum(p)-p)*r,h.scaleY=d+(Math.abs(c)*N.MathUtils.signum(d)-d)*r;break;case B.add:p=h.scaleX,d=h.scaleY,h.scaleX=p+(Math.abs(u)*N.MathUtils.signum(p)-h.data.scaleX)*r,h.scaleY=d+(Math.abs(c)*N.MathUtils.signum(d)-h.data.scaleY)*r}else switch(s){case B.setup:p=Math.abs(h.data.scaleX)*N.MathUtils.signum(u),d=Math.abs(h.data.scaleY)*N.MathUtils.signum(c),h.scaleX=p+(u-p)*r,h.scaleY=d+(c-d)*r;break;case B.first:case B.replace:p=Math.abs(h.scaleX)*N.MathUtils.signum(u),d=Math.abs(h.scaleY)*N.MathUtils.signum(c),h.scaleX=p+(u-p)*r,h.scaleY=d+(c-d)*r;break;case B.add:p=N.MathUtils.signum(u),d=N.MathUtils.signum(c),h.scaleX=Math.abs(h.scaleX)*p+(u-Math.abs(h.data.scaleX)*p)*r,h.scaleY=Math.abs(h.scaleY)*d+(c-Math.abs(h.data.scaleY)*d)*r}}}},m);function m(t){return a.call(this,t)||this}N.ScaleTimeline=r;var h,o=(F(d,h=o),d.prototype.getPropertyId=function(){return(t.shear<<24)+this.boneIndex},d.prototype.apply=function(t,e,i,n,r,s,o){var a=this.frames,h=t.bones[this.boneIndex];if(h.active)if(i<a[0])switch(s){case B.setup:return h.shearX=h.data.shearX,void(h.shearY=h.data.shearY);case B.first:h.shearX+=(h.data.shearX-h.shearX)*r,h.shearY+=(h.data.shearY-h.shearY)*r}else{var l,u=0,c=0;switch(i>=a[a.length-d.ENTRIES]?(u=a[a.length+d.PREV_X],c=a[a.length+d.PREV_Y]):(u=a[(l=U.binarySearch(a,i,d.ENTRIES))+d.PREV_X],c=a[l+d.PREV_Y],t=a[l],t=this.getCurvePercent(l/d.ENTRIES-1,1-(i-t)/(a[l+d.PREV_TIME]-t)),u+=(a[l+d.X]-u)*t,c+=(a[l+d.Y]-c)*t),s){case B.setup:h.shearX=h.data.shearX+u*r,h.shearY=h.data.shearY+c*r;break;case B.first:case B.replace:h.shearX+=(h.data.shearX+u-h.shearX)*r,h.shearY+=(h.data.shearY+c-h.shearY)*r;break;case B.add:h.shearX+=u*r,h.shearY+=c*r}}},d);function d(t){return h.call(this,t)||this}N.ShearTimeline=o;var l,o=(F(y,l=i),y.prototype.getPropertyId=function(){return(t.color<<24)+this.slotIndex},y.prototype.setFrame=function(t,e,i,n,r,s){t*=y.ENTRIES,this.frames[t]=e,this.frames[t+y.R]=i,this.frames[t+y.G]=n,this.frames[t+y.B]=r,this.frames[t+y.A]=s},y.prototype.apply=function(t,e,i,n,r,s,o){var a=t.slots[this.slotIndex];if(a.bone.active){var h=this.frames;if(i<h[0])switch(s){case B.setup:return void a.color.setFromColor(a.data.color);case B.first:var l=a.color,u=a.data.color;l.add((u.r-l.r)*r,(u.g-l.g)*r,(u.b-l.b)*r,(u.a-l.a)*r)}else{var c,p=0,d=0,_=0,f=0;i>=h[h.length-y.ENTRIES]?(p=h[(c=h.length)+y.PREV_R],d=h[c+y.PREV_G],_=h[c+y.PREV_B],f=h[c+y.PREV_A]):(p=h[(t=U.binarySearch(h,i,y.ENTRIES))+y.PREV_R],d=h[t+y.PREV_G],_=h[t+y.PREV_B],f=h[t+y.PREV_A],c=h[t],c=this.getCurvePercent(t/y.ENTRIES-1,1-(i-c)/(h[t+y.PREV_TIME]-c)),p+=(h[t+y.R]-p)*c,d+=(h[t+y.G]-d)*c,_+=(h[t+y.B]-_)*c,f+=(h[t+y.A]-f)*c),1==r?a.color.set(p,d,_,f):(l=a.color,s==B.setup&&l.setFromColor(a.data.color),l.add((p-l.r)*r,(d-l.g)*r,(_-l.b)*r,(f-l.a)*r))}}},y.ENTRIES=5,y.PREV_TIME=-5,y.PREV_R=-4,y.PREV_G=-3,y.PREV_B=-2,y.PREV_A=-1,y.R=1,y.G=2,y.B=3,y.A=4,y);function y(t){var e=l.call(this,t)||this;return e.frames=N.Utils.newFloatArray(t*y.ENTRIES),e}N.ColorTimeline=o;var u,o=(F(x,u=i),x.prototype.getPropertyId=function(){return(t.twoColor<<24)+this.slotIndex},x.prototype.setFrame=function(t,e,i,n,r,s,o,a,h){t*=x.ENTRIES,this.frames[t]=e,this.frames[t+x.R]=i,this.frames[t+x.G]=n,this.frames[t+x.B]=r,this.frames[t+x.A]=s,this.frames[t+x.R2]=o,this.frames[t+x.G2]=a,this.frames[t+x.B2]=h},x.prototype.apply=function(t,e,i,n,r,s,o){var a=t.slots[this.slotIndex];if(a.bone.active){var h=this.frames;if(i<h[0])switch(s){case B.setup:return a.color.setFromColor(a.data.color),void a.darkColor.setFromColor(a.data.darkColor);case B.first:var l=a.color,u=a.darkColor,c=a.data.color,p=a.data.darkColor;l.add((c.r-l.r)*r,(c.g-l.g)*r,(c.b-l.b)*r,(c.a-l.a)*r),u.add((p.r-u.r)*r,(p.g-u.g)*r,(p.b-u.b)*r,0)}else{var d,_=0,f=0,m=0,y=0,g=0,v=0,w=0;i>=h[h.length-x.ENTRIES]?(_=h[(d=h.length)+x.PREV_R],f=h[d+x.PREV_G],m=h[d+x.PREV_B],y=h[d+x.PREV_A],g=h[d+x.PREV_R2],v=h[d+x.PREV_G2],w=h[d+x.PREV_B2]):(_=h[(t=U.binarySearch(h,i,x.ENTRIES))+x.PREV_R],f=h[t+x.PREV_G],m=h[t+x.PREV_B],y=h[t+x.PREV_A],g=h[t+x.PREV_R2],v=h[t+x.PREV_G2],w=h[t+x.PREV_B2],d=h[t],d=this.getCurvePercent(t/x.ENTRIES-1,1-(i-d)/(h[t+x.PREV_TIME]-d)),_+=(h[t+x.R]-_)*d,f+=(h[t+x.G]-f)*d,m+=(h[t+x.B]-m)*d,y+=(h[t+x.A]-y)*d,g+=(h[t+x.R2]-g)*d,v+=(h[t+x.G2]-v)*d,w+=(h[t+x.B2]-w)*d),1==r?(a.color.set(_,f,m,y),a.darkColor.set(g,v,w,1)):(l=a.color,u=a.darkColor,s==B.setup&&(l.setFromColor(a.data.color),u.setFromColor(a.data.darkColor)),l.add((_-l.r)*r,(f-l.g)*r,(m-l.b)*r,(y-l.a)*r),u.add((g-u.r)*r,(v-u.g)*r,(w-u.b)*r,0))}}},x.ENTRIES=8,x.PREV_TIME=-8,x.PREV_R=-7,x.PREV_G=-6,x.PREV_B=-5,x.PREV_A=-4,x.PREV_R2=-3,x.PREV_G2=-2,x.PREV_B2=-1,x.R=1,x.G=2,x.B=3,x.A=4,x.R2=5,x.G2=6,x.B2=7,x);function x(t){var e=u.call(this,t)||this;return e.frames=N.Utils.newFloatArray(t*x.ENTRIES),e}function c(t){this.frames=N.Utils.newFloatArray(t),this.attachmentNames=new Array(t)}N.TwoColorTimeline=o,c.prototype.getPropertyId=function(){return(t.attachment<<24)+this.slotIndex},c.prototype.getFrameCount=function(){return this.frames.length},c.prototype.setFrame=function(t,e,i){this.frames[t]=e,this.attachmentNames[t]=i},c.prototype.apply=function(t,e,i,n,r,s,o){var a,h=t.slots[this.slotIndex];h.bone.active&&(o!=_.mixOut||s!=B.setup?i<(o=this.frames)[0]?s!=B.setup&&s!=B.first||(s=h.data.attachmentName,h.setAttachment(null==s?null:t.getAttachment(this.slotIndex,s))):(a=0,a=i>=o[o.length-1]?o.length-1:U.binarySearch(o,i,1)-1,a=this.attachmentNames[a],t.slots[this.slotIndex].setAttachment(null==a?null:t.getAttachment(this.slotIndex,a))):(a=h.data.attachmentName,h.setAttachment(null==a?null:t.getAttachment(this.slotIndex,a))))},o=c,N.AttachmentTimeline=o;var v,w=null,o=(F(b,v=i),b.prototype.getPropertyId=function(){return(t.deform<<27)+ +this.attachment.id+this.slotIndex},b.prototype.setFrame=function(t,e,i){this.frames[t]=e,this.frameVertices[t]=i},b.prototype.apply=function(t,e,i,n,r,s,o){var a=t.slots[this.slotIndex];if(a.bone.active){var h=a.getAttachment();if(h instanceof N.VertexAttachment&&h.deformAttachment==this.attachment){var l=a.deform;0==l.length&&(s=B.setup);var u=this.frameVertices,c=u[0].length,t=this.frames;if(i<t[0]){var p=h;switch(s){case B.setup:return void(l.length=0);case B.first:if(1==r){l.length=0;break}var d=N.Utils.setArraySize(l,c);if(null==p.bones)for(var _=p.vertices,f=0;f<c;f++)d[f]+=(_[f]-d[f])*r;else for(r=1-r,f=0;f<c;f++)d[f]*=r}}else{var m=N.Utils.setArraySize(l,c);if(i>=t[t.length-1]){var y=u[t.length-1];if(1==r)if(s==B.add)if(null==(p=h).bones){_=p.vertices;for(var g=0;g<c;g++)m[g]+=y[g]-_[g]}else for(var v=0;v<c;v++)m[v]+=y[v];else N.Utils.arrayCopy(y,0,m,0,c);else switch(s){case B.setup:if(null==h.bones){_=h.vertices;for(var w=0;w<c;w++){var x=_[w];m[w]=x+(y[w]-x)*r}}else for(var b=0;b<c;b++)m[b]=y[b]*r;break;case B.first:case B.replace:for(var E=0;E<c;E++)m[E]+=(y[E]-m[E])*r;break;case B.add:if(null==(p=h).bones){_=p.vertices;for(var $=0;$<c;$++)m[$]+=(y[$]-_[$])*r}else for(var A=0;A<c;A++)m[A]+=y[A]*r}}else{var a=U.binarySearch(t,i),S=u[a-1],T=u[a],u=t[a],C=this.getCurvePercent(a-1,1-(i-u)/(t[a-1]-u));if(1==r)if(s==B.add)if(null==(p=h).bones){_=p.vertices;for(var M=0;M<c;M++){var I=S[M];m[M]+=I+(T[M]-I)*C-_[M]}}else for(var P=0;P<c;P++)I=S[P],m[P]+=I+(T[P]-I)*C;else for(var O=0;O<c;O++)I=S[O],m[O]=I+(T[O]-I)*C;else switch(s){case B.setup:if(null==h.bones){_=h.vertices;for(var D=0;D<c;D++)I=S[D],x=_[D],m[D]=x+(I+(T[D]-I)*C-x)*r}else for(var R=0;R<c;R++)I=S[R],m[R]=(I+(T[R]-I)*C)*r;break;case B.first:case B.replace:for(var L=0;L<c;L++)I=S[L],m[L]+=(I+(T[L]-I)*C-m[L])*r;break;case B.add:if(null==(p=h).bones){_=p.vertices;for(var k=0;k<c;k++)I=S[k],m[k]+=(I+(T[k]-I)*C-_[k])*r}else for(var F=0;F<c;F++)I=S[F],m[F]+=(I+(T[F]-I)*C)*r}}}}}},b);function b(t){var e=v.call(this,t)||this;return e.frames=N.Utils.newFloatArray(t),e.frameVertices=new Array(t),null==w&&(w=N.Utils.newFloatArray(64)),e}function E(t){this.frames=N.Utils.newFloatArray(t),this.events=new Array(t)}function $(t){this.frames=N.Utils.newFloatArray(t),this.drawOrders=new Array(t)}N.DeformTimeline=o,E.prototype.getPropertyId=function(){return t.event<<24},E.prototype.getFrameCount=function(){return this.frames.length},E.prototype.setFrame=function(t,e){this.frames[t]=e.time,this.events[t]=e},E.prototype.apply=function(t,e,i,n,r,s,o){if(null!=n){var a=this.frames,h=this.frames.length;if(i<e)this.apply(t,e,Number.MAX_VALUE,n,r,s,o),e=-1;else if(e>=a[h-1])return;if(!(i<a[0])){var l=0;if(e<a[0])l=0;else for(var u=a[l=U.binarySearch(a,e)];0<l&&a[l-1]==u;)l--;for(;l<h&&i>=a[l];l++)n.push(this.events[l])}}},o=E,N.EventTimeline=o,$.prototype.getPropertyId=function(){return t.drawOrder<<24},$.prototype.getFrameCount=function(){return this.frames.length},$.prototype.setFrame=function(t,e,i){this.frames[t]=e,this.drawOrders[t]=i},$.prototype.apply=function(t,e,i,n,r,s,o){var a=t.drawOrder,h=t.slots;if(o!=_.mixOut||s!=B.setup){o=this.frames;if(i<o[0])s!=B.setup&&s!=B.first||N.Utils.arrayCopy(t.slots,0,t.drawOrder,0,t.slots.length);else{var s=0,s=i>=o[o.length-1]?o.length-1:U.binarySearch(o,i)-1,l=this.drawOrders[s];if(null==l)N.Utils.arrayCopy(h,0,a,0,h.length);else for(var u=0,c=l.length;u<c;u++)a[u]=h[l[u]]}}else N.Utils.arrayCopy(t.slots,0,t.drawOrder,0,t.slots.length)},o=$,N.DrawOrderTimeline=o;var A,o=(F(S,A=i),S.prototype.getPropertyId=function(){return(t.ikConstraint<<24)+this.ikConstraintIndex},S.prototype.setFrame=function(t,e,i,n,r,s,o){t*=S.ENTRIES,this.frames[t]=e,this.frames[t+S.MIX]=i,this.frames[t+S.SOFTNESS]=n,this.frames[t+S.BEND_DIRECTION]=r,this.frames[t+S.COMPRESS]=s?1:0,this.frames[t+S.STRETCH]=o?1:0},S.prototype.apply=function(t,e,i,n,r,s,o){var a,h,l,u=this.frames,c=t.ikConstraints[this.ikConstraintIndex];if(c.active)if(i<u[0])switch(s){case B.setup:return c.mix=c.data.mix,c.softness=c.data.softness,c.bendDirection=c.data.bendDirection,c.compress=c.data.compress,void(c.stretch=c.data.stretch);case B.first:c.mix+=(c.data.mix-c.mix)*r,c.softness+=(c.data.softness-c.softness)*r,c.bendDirection=c.data.bendDirection,c.compress=c.data.compress,c.stretch=c.data.stretch}else i>=u[u.length-S.ENTRIES]?s==B.setup?(c.mix=c.data.mix+(u[u.length+S.PREV_MIX]-c.data.mix)*r,c.softness=c.data.softness+(u[u.length+S.PREV_SOFTNESS]-c.data.softness)*r,o==_.mixOut?(c.bendDirection=c.data.bendDirection,c.compress=c.data.compress,c.stretch=c.data.stretch):(c.bendDirection=u[u.length+S.PREV_BEND_DIRECTION],c.compress=0!=u[u.length+S.PREV_COMPRESS],c.stretch=0!=u[u.length+S.PREV_STRETCH])):(c.mix+=(u[u.length+S.PREV_MIX]-c.mix)*r,c.softness+=(u[u.length+S.PREV_SOFTNESS]-c.softness)*r,o==_.mixIn&&(c.bendDirection=u[u.length+S.PREV_BEND_DIRECTION],c.compress=0!=u[u.length+S.PREV_COMPRESS],c.stretch=0!=u[u.length+S.PREV_STRETCH])):(h=u[(a=U.binarySearch(u,i,S.ENTRIES))+S.PREV_MIX],l=u[a+S.PREV_SOFTNESS],t=u[a],t=this.getCurvePercent(a/S.ENTRIES-1,1-(i-t)/(u[a+S.PREV_TIME]-t)),s==B.setup?(c.mix=c.data.mix+(h+(u[a+S.MIX]-h)*t-c.data.mix)*r,c.softness=c.data.softness+(l+(u[a+S.SOFTNESS]-l)*t-c.data.softness)*r,o==_.mixOut?(c.bendDirection=c.data.bendDirection,c.compress=c.data.compress,c.stretch=c.data.stretch):(c.bendDirection=u[a+S.PREV_BEND_DIRECTION],c.compress=0!=u[a+S.PREV_COMPRESS],c.stretch=0!=u[a+S.PREV_STRETCH])):(c.mix+=(h+(u[a+S.MIX]-h)*t-c.mix)*r,c.softness+=(l+(u[a+S.SOFTNESS]-l)*t-c.softness)*r,o==_.mixIn&&(c.bendDirection=u[a+S.PREV_BEND_DIRECTION],c.compress=0!=u[a+S.PREV_COMPRESS],c.stretch=0!=u[a+S.PREV_STRETCH])))},S.ENTRIES=6,S.PREV_TIME=-6,S.PREV_MIX=-5,S.PREV_SOFTNESS=-4,S.PREV_BEND_DIRECTION=-3,S.PREV_COMPRESS=-2,S.PREV_STRETCH=-1,S.MIX=1,S.SOFTNESS=2,S.BEND_DIRECTION=3,S.COMPRESS=4,S.STRETCH=5,S);function S(t){var e=A.call(this,t)||this;return e.frames=N.Utils.newFloatArray(t*S.ENTRIES),e}N.IkConstraintTimeline=o;var T,o=(F(C,T=i),C.prototype.getPropertyId=function(){return(t.transformConstraint<<24)+this.transformConstraintIndex},C.prototype.setFrame=function(t,e,i,n,r,s){t*=C.ENTRIES,this.frames[t]=e,this.frames[t+C.ROTATE]=i,this.frames[t+C.TRANSLATE]=n,this.frames[t+C.SCALE]=r,this.frames[t+C.SHEAR]=s},C.prototype.apply=function(t,e,i,n,r,s,o){var a=this.frames,h=t.transformConstraints[this.transformConstraintIndex];if(h.active)if(i<a[0]){var l=h.data;switch(s){case B.setup:return h.rotateMix=l.rotateMix,h.translateMix=l.translateMix,h.scaleMix=l.scaleMix,void(h.shearMix=l.shearMix);case B.first:h.rotateMix+=(l.rotateMix-h.rotateMix)*r,h.translateMix+=(l.translateMix-h.translateMix)*r,h.scaleMix+=(l.scaleMix-h.scaleMix)*r,h.shearMix+=(l.shearMix-h.shearMix)*r}}else{var u,c=0,p=0,d=0,_=0;i>=a[a.length-C.ENTRIES]?(c=a[(u=a.length)+C.PREV_ROTATE],p=a[u+C.PREV_TRANSLATE],d=a[u+C.PREV_SCALE],_=a[u+C.PREV_SHEAR]):(c=a[(t=U.binarySearch(a,i,C.ENTRIES))+C.PREV_ROTATE],p=a[t+C.PREV_TRANSLATE],d=a[t+C.PREV_SCALE],_=a[t+C.PREV_SHEAR],u=a[t],u=this.getCurvePercent(t/C.ENTRIES-1,1-(i-u)/(a[t+C.PREV_TIME]-u)),c+=(a[t+C.ROTATE]-c)*u,p+=(a[t+C.TRANSLATE]-p)*u,d+=(a[t+C.SCALE]-d)*u,_+=(a[t+C.SHEAR]-_)*u),s==B.setup?(l=h.data,h.rotateMix=l.rotateMix+(c-l.rotateMix)*r,h.translateMix=l.translateMix+(p-l.translateMix)*r,h.scaleMix=l.scaleMix+(d-l.scaleMix)*r,h.shearMix=l.shearMix+(_-l.shearMix)*r):(h.rotateMix+=(c-h.rotateMix)*r,h.translateMix+=(p-h.translateMix)*r,h.scaleMix+=(d-h.scaleMix)*r,h.shearMix+=(_-h.shearMix)*r)}},C.ENTRIES=5,C.PREV_TIME=-5,C.PREV_ROTATE=-4,C.PREV_TRANSLATE=-3,C.PREV_SCALE=-2,C.PREV_SHEAR=-1,C.ROTATE=1,C.TRANSLATE=2,C.SCALE=3,C.SHEAR=4,C);function C(t){var e=T.call(this,t)||this;return e.frames=N.Utils.newFloatArray(t*C.ENTRIES),e}N.TransformConstraintTimeline=o;var M,o=(F(I,M=i),I.prototype.getPropertyId=function(){return(t.pathConstraintPosition<<24)+this.pathConstraintIndex},I.prototype.setFrame=function(t,e,i){t*=I.ENTRIES,this.frames[t]=e,this.frames[t+I.VALUE]=i},I.prototype.apply=function(t,e,i,n,r,s,o){var a=this.frames,h=t.pathConstraints[this.pathConstraintIndex];if(h.active)if(i<a[0])switch(s){case B.setup:return void(h.position=h.data.position);case B.first:h.position+=(h.data.position-h.position)*r}else{var l,u=0;i>=a[a.length-I.ENTRIES]?u=a[a.length+I.PREV_VALUE]:(u=a[(l=U.binarySearch(a,i,I.ENTRIES))+I.PREV_VALUE],t=a[l],t=this.getCurvePercent(l/I.ENTRIES-1,1-(i-t)/(a[l+I.PREV_TIME]-t)),u+=(a[l+I.VALUE]-u)*t),s==B.setup?h.position=h.data.position+(u-h.data.position)*r:h.position+=(u-h.position)*r}},I.ENTRIES=2,I.PREV_TIME=-2,I.PREV_VALUE=-1,I.VALUE=1,I);function I(t){var e=M.call(this,t)||this;return e.frames=N.Utils.newFloatArray(t*I.ENTRIES),e}N.PathConstraintPositionTimeline=o;var P,o=(F(O,P=o),O.prototype.getPropertyId=function(){return(t.pathConstraintSpacing<<24)+this.pathConstraintIndex},O.prototype.apply=function(t,e,i,n,r,s,o){var a=this.frames,h=t.pathConstraints[this.pathConstraintIndex];if(h.active)if(i<a[0])switch(s){case B.setup:return void(h.spacing=h.data.spacing);case B.first:h.spacing+=(h.data.spacing-h.spacing)*r}else{var l,u=0;i>=a[a.length-O.ENTRIES]?u=a[a.length+O.PREV_VALUE]:(u=a[(l=U.binarySearch(a,i,O.ENTRIES))+O.PREV_VALUE],t=a[l],t=this.getCurvePercent(l/O.ENTRIES-1,1-(i-t)/(a[l+O.PREV_TIME]-t)),u+=(a[l+O.VALUE]-u)*t),s==B.setup?h.spacing=h.data.spacing+(u-h.data.spacing)*r:h.spacing+=(u-h.spacing)*r}},O);function O(t){return P.call(this,t)||this}N.PathConstraintSpacingTimeline=o;var D,i=(F(R,D=i),R.prototype.getPropertyId=function(){return(t.pathConstraintMix<<24)+this.pathConstraintIndex},R.prototype.setFrame=function(t,e,i,n){t*=R.ENTRIES,this.frames[t]=e,this.frames[t+R.ROTATE]=i,this.frames[t+R.TRANSLATE]=n},R.prototype.apply=function(t,e,i,n,r,s,o){var a=this.frames,h=t.pathConstraints[this.pathConstraintIndex];if(h.active)if(i<a[0])switch(s){case B.setup:return h.rotateMix=h.data.rotateMix,void(h.translateMix=h.data.translateMix);case B.first:h.rotateMix+=(h.data.rotateMix-h.rotateMix)*r,h.translateMix+=(h.data.translateMix-h.translateMix)*r}else{var l,u=0,c=0;i>=a[a.length-R.ENTRIES]?(u=a[a.length+R.PREV_ROTATE],c=a[a.length+R.PREV_TRANSLATE]):(u=a[(l=U.binarySearch(a,i,R.ENTRIES))+R.PREV_ROTATE],c=a[l+R.PREV_TRANSLATE],t=a[l],t=this.getCurvePercent(l/R.ENTRIES-1,1-(i-t)/(a[l+R.PREV_TIME]-t)),u+=(a[l+R.ROTATE]-u)*t,c+=(a[l+R.TRANSLATE]-c)*t),s==B.setup?(h.rotateMix=h.data.rotateMix+(u-h.data.rotateMix)*r,h.translateMix=h.data.translateMix+(c-h.data.translateMix)*r):(h.rotateMix+=(u-h.rotateMix)*r,h.translateMix+=(c-h.translateMix)*r)}},R.ENTRIES=3,R.PREV_TIME=-3,R.PREV_ROTATE=-2,R.PREV_TRANSLATE=-1,R.ROTATE=1,R.TRANSLATE=2,R);function R(t){var e=D.call(this,t)||this;return e.frames=N.Utils.newFloatArray(t*R.ENTRIES),e}N.PathConstraintMixTimeline=i})((k=s=s||{}).core||(k.core={})),function($){var t=(A.prototype.update=function(t){t*=this.timeScale;for(var e=this.tracks,i=0,n=e.length;i<n;i++){var r=e[i];if(null!=r){r.animationLast=r.nextAnimationLast,r.trackLast=r.nextTrackLast;var s=t*r.timeScale;if(0<r.delay){if(r.delay-=s,0<r.delay)continue;s=-r.delay,r.delay=0}var o=r.next;if(null!=o){var a=r.trackLast-o.delay;if(0<=a){for(o.delay=0,o.trackTime+=0==r.timeScale?0:(a/r.timeScale+t)*o.timeScale,r.trackTime+=s,this.setCurrent(i,o,!0);null!=o.mixingFrom;)o.mixTime+=t,o=o.mixingFrom;continue}}else if(r.trackLast>=r.trackEnd&&null==r.mixingFrom){e[i]=null,this.queue.end(r),this.disposeNext(r);continue}if(null!=r.mixingFrom&&this.updateMixingFrom(r,t)){var h=r.mixingFrom;for((r.mixingFrom=null)!=h&&(h.mixingTo=null);null!=h;)this.queue.end(h),h=h.mixingFrom}r.trackTime+=s}}this.queue.drain()},A.prototype.updateMixingFrom=function(t,e){var i=t.mixingFrom;if(null==i)return!0;var n=this.updateMixingFrom(i,e);return i.animationLast=i.nextAnimationLast,i.trackLast=i.nextTrackLast,0<t.mixTime&&t.mixTime>=t.mixDuration?(0!=i.totalAlpha&&0!=t.mixDuration||(t.mixingFrom=i.mixingFrom,null!=i.mixingFrom&&(i.mixingFrom.mixingTo=t),t.interruptAlpha=i.interruptAlpha,this.queue.end(i)),n):(i.trackTime+=e*i.timeScale,t.mixTime+=e,!1)},A.prototype.apply=function(t){if(null==t)throw new Error("skeleton cannot be null.");this.animationsChanged&&this._animationsChanged();for(var e=this.events,i=this.tracks,n=!1,r=0,s=i.length;r<s;r++){var o=i[r];if(!(null==o||0<o.delay)){n=!0;var a=0==r?$.MixBlend.first:o.mixBlend,h=o.alpha;null!=o.mixingFrom?h*=this.applyMixingFrom(o,t,a):o.trackTime>=o.trackEnd&&null==o.next&&(h=0);var l=o.animationLast,u=o.getAnimationTime(),c=o.animation.timelines.length,p=o.animation.timelines;if(0==r&&1==h||a==$.MixBlend.add)for(var d=0;d<c;d++)$.Utils.webkit602BugfixHelper(h,a),p[d].apply(t,l,u,e,h,a,$.MixDirection.mixIn);else{var _=o.timelineMode,f=0==o.timelinesRotation.length;f&&$.Utils.setArraySize(o.timelinesRotation,c<<1,null);for(var m=o.timelinesRotation,d=0;d<c;d++){var y=p[d],g=(_[d]&A.NOT_LAST-1)==A.SUBSEQUENT?a:$.MixBlend.setup;y instanceof $.RotateTimeline?this.applyRotateTimeline(y,t,u,h,g,m,d<<1,f):($.Utils.webkit602BugfixHelper(h,a),y.apply(t,l,u,e,h,g,$.MixDirection.mixIn))}}this.queueEvents(o,u),e.length=0,o.nextAnimationLast=u,o.nextTrackLast=o.trackTime}}return this.queue.drain(),n},A.prototype.applyMixingFrom=function(t,e,i){var n=t.mixingFrom;null!=n.mixingFrom&&this.applyMixingFrom(n,e,i);var r=0;0==t.mixDuration?(r=1,i==$.MixBlend.first&&(i=$.MixBlend.setup)):(1<(r=t.mixTime/t.mixDuration)&&(r=1),i!=$.MixBlend.first&&(i=n.mixBlend));var s=r<n.eventThreshold?this.events:null,o=r<n.attachmentThreshold,a=r<n.drawOrderThreshold,h=n.animationLast,l=n.getAnimationTime(),u=n.animation.timelines.length,c=n.animation.timelines,p=n.alpha*t.interruptAlpha,d=p*(1-r);if(i==$.MixBlend.add)for(var _=0;_<u;_++)c[_].apply(e,h,l,s,d,i,$.MixDirection.mixOut);else{var f=n.timelineMode,m=n.timelineHoldMix,y=0==n.timelinesRotation.length;y&&$.Utils.setArraySize(n.timelinesRotation,u<<1,null);for(var g=n.timelinesRotation,_=n.totalAlpha=0;_<u;_++){var v=c[_],w=$.MixDirection.mixOut,x=void 0,b=0;switch(f[_]&A.NOT_LAST-1){case A.SUBSEQUENT:if(x=i,!o&&v instanceof $.AttachmentTimeline){if((f[_]&A.NOT_LAST)==A.NOT_LAST)continue;x=$.MixBlend.setup}if(!a&&v instanceof $.DrawOrderTimeline)continue;b=d;break;case A.FIRST:x=$.MixBlend.setup,b=d;break;case A.HOLD:x=$.MixBlend.setup,b=p;break;default:x=$.MixBlend.setup;var E=m[_],b=p*Math.max(0,1-E.mixTime/E.mixDuration)}n.totalAlpha+=b,v instanceof $.RotateTimeline?this.applyRotateTimeline(v,e,l,b,x,g,_<<1,y):($.Utils.webkit602BugfixHelper(b,i),x==$.MixBlend.setup&&(v instanceof $.AttachmentTimeline?!o&&(f[_]&A.NOT_LAST)!=A.NOT_LAST||(w=$.MixDirection.mixIn):v instanceof $.DrawOrderTimeline&&a&&(w=$.MixDirection.mixIn)),v.apply(e,h,l,s,b,x,w))}}return 0<t.mixDuration&&this.queueEvents(n,l),this.events.length=0,n.nextAnimationLast=l,n.nextTrackLast=n.trackTime,r},A.prototype.applyRotateTimeline=function(t,e,i,n,r,s,o,a){if(a&&(s[o]=0),1!=n){var h=t,l=h.frames,u=e.bones[h.boneIndex];if(u.active){var c=0,p=0;if(i<l[0])switch(r){case $.MixBlend.setup:u.rotation=u.data.rotation;default:return;case $.MixBlend.first:c=u.rotation,p=u.data.rotation}else c=(r==$.MixBlend.setup?u.data:u).rotation,i>=l[l.length-$.RotateTimeline.ENTRIES]?p=u.data.rotation+l[l.length+$.RotateTimeline.PREV_ROTATION]:(_=l[(d=$.Animation.binarySearch(l,i,$.RotateTimeline.ENTRIES))+$.RotateTimeline.PREV_ROTATION],m=l[d],f=h.getCurvePercent((d>>1)-1,1-(i-m)/(l[d+$.RotateTimeline.PREV_TIME]-m)),p=l[d+$.RotateTimeline.ROTATION]-_,p=_+(p-=360*(16384-(16384.499999999996-p/360|0)))*f+u.data.rotation,p-=360*(16384-(16384.499999999996-p/360|0)));var d,_,f,m=0,l=p-c;0==(l-=360*(16384-(16384.499999999996-l/360|0)))?m=s[o]:(_=d=0,_=a?(d=0,l):(d=s[o],s[o+1]),f=0<l,a=0<=d,$.MathUtils.signum(_)!=$.MathUtils.signum(l)&&Math.abs(_)<=90&&(180<Math.abs(d)&&(d+=360*$.MathUtils.signum(d)),a=f),m=l+d-d%360,a!=f&&(m+=360*$.MathUtils.signum(d)),s[o]=m),s[o+1]=l,c+=m*n,u.rotation=c-360*(16384-(16384.499999999996-c/360|0))}}else t.apply(e,0,i,null,1,r,$.MixDirection.mixIn)},A.prototype.queueEvents=function(t,e){for(var i=t.animationStart,n=t.animationEnd,r=n-i,s=t.trackLast%r,o=this.events,a=0,h=o.length;a<h;a++){var l=o[a];if(l.time<s)break;l.time>n||this.queue.event(t,l)}for((t.loop?0==r||s>t.trackTime%r:n<=e&&t.animationLast<n)&&this.queue.complete(t);a<h;a++)o[a].time<i||this.queue.event(t,o[a])},A.prototype.clearTracks=function(){var t=this.queue.drainDisabled;this.queue.drainDisabled=!0;for(var e=0,i=this.tracks.length;e<i;e++)this.clearTrack(e);this.tracks.length=0,this.queue.drainDisabled=t,this.queue.drain()},A.prototype.clearTrack=function(t){if(!(t>=this.tracks.length)){t=this.tracks[t];if(null!=t){this.queue.end(t),this.disposeNext(t);for(var e=t;;){var i=e.mixingFrom;if(null==i)break;this.queue.end(i),e.mixingFrom=null,e.mixingTo=null,e=i}this.tracks[t.trackIndex]=null,this.queue.drain()}}},A.prototype.setCurrent=function(t,e,i){var n=this.expandToIndex(t);this.tracks[t]=e,null!=n&&(i&&this.queue.interrupt(n),((e.mixingFrom=n).mixingTo=e).mixTime=0,null!=n.mixingFrom&&0<n.mixDuration&&(e.interruptAlpha*=Math.min(1,n.mixTime/n.mixDuration)),n.timelinesRotation.length=0),this.queue.start(e)},A.prototype.setAnimation=function(t,e,i){var n=this.data.skeletonData.findAnimation(e);if(null==n)throw new Error("Animation not found: "+e);return this.setAnimationWith(t,n,i)},A.prototype.setAnimationWith=function(t,e,i){if(null==e)throw new Error("animation cannot be null.");var n=!0,r=this.expandToIndex(t);null!=r&&(-1==r.nextTrackLast?(this.tracks[t]=r.mixingFrom,this.queue.interrupt(r),this.queue.end(r),this.disposeNext(r),r=r.mixingFrom,n=!1):this.disposeNext(r));r=this.trackEntry(t,e,i,r);return this.setCurrent(t,r,n),this.queue.drain(),r},A.prototype.addAnimation=function(t,e,i,n){var r=this.data.skeletonData.findAnimation(e);if(null==r)throw new Error("Animation not found: "+e);return this.addAnimationWith(t,r,i,n)},A.prototype.addAnimationWith=function(t,e,i,n){if(null==e)throw new Error("animation cannot be null.");var r=this.expandToIndex(t);if(null!=r)for(;null!=r.next;)r=r.next;i=this.trackEntry(t,e,i,r);return null==r?(this.setCurrent(t,i,!0),this.queue.drain()):(r.next=i,n<=0&&(0!=(t=r.animationEnd-r.animationStart)?(r.loop?n+=t*(1+(r.trackTime/t|0)):n+=Math.max(t,r.trackTime),n-=this.data.getMix(r.animation,e)):n=r.trackTime)),i.delay=n,i},A.prototype.setEmptyAnimation=function(t,e){t=this.setAnimationWith(t,A.emptyAnimation,!1);return t.mixDuration=e,t.trackEnd=e,t},A.prototype.addEmptyAnimation=function(t,e,i){i<=0&&(i-=e);i=this.addAnimationWith(t,A.emptyAnimation,!1,i);return i.mixDuration=e,i.trackEnd=e,i},A.prototype.setEmptyAnimations=function(t){var e=this.queue.drainDisabled;this.queue.drainDisabled=!0;for(var i=0,n=this.tracks.length;i<n;i++){var r=this.tracks[i];null!=r&&this.setEmptyAnimation(r.trackIndex,t)}this.queue.drainDisabled=e,this.queue.drain()},A.prototype.expandToIndex=function(t){return t<this.tracks.length?this.tracks[t]:($.Utils.ensureArrayCapacity(this.tracks,t+1,null),this.tracks.length=t+1,null)},A.prototype.trackEntry=function(t,e,i,n){var r=this.trackEntryPool.obtain();return r.trackIndex=t,r.animation=e,r.loop=i,r.holdPrevious=!1,r.eventThreshold=0,r.attachmentThreshold=0,r.drawOrderThreshold=0,r.animationStart=0,r.animationEnd=e.duration,r.animationLast=-1,r.nextAnimationLast=-1,r.delay=0,r.trackTime=0,r.trackLast=-1,r.nextTrackLast=-1,r.trackEnd=Number.MAX_VALUE,r.timeScale=1,r.alpha=1,r.interruptAlpha=1,r.mixTime=0,r.mixDuration=null==n?0:this.data.getMix(n.animation,e),r.mixBlend=$.MixBlend.replace,r},A.prototype.disposeNext=function(t){for(var e=t.next;null!=e;)this.queue.dispose(e),e=e.next;t.next=null},A.prototype._animationsChanged=function(){this.animationsChanged=!1,this.propertyIDs.clear();for(var t=0,e=this.tracks.length;t<e;t++)if(null!=(i=this.tracks[t])){for(;null!=i.mixingFrom;)i=i.mixingFrom;for(;null!=i.mixingFrom&&i.mixBlend==$.MixBlend.add||this.computeHold(i),i=i.mixingTo,null!=i;);}for(this.propertyIDs.clear(),t=this.tracks.length-1;0<=t;t--)for(var i=this.tracks[t];null!=i;)this.computeNotLast(i),i=i.mixingFrom},A.prototype.computeHold=function(t){var e=t.mixingTo,i=t.animation.timelines,n=t.animation.timelines.length,r=$.Utils.setArraySize(t.timelineMode,n);t.timelineHoldMix.length=0;var s=$.Utils.setArraySize(t.timelineHoldMix,n),o=this.propertyIDs;if(null!=e&&e.holdPrevious)for(var a=0;a<n;a++)o.add(i[a].getPropertyId()),r[a]=A.HOLD;else t:for(a=0;a<n;a++){var h=i[a],l=h.getPropertyId();if(o.add(l))if(null==e||h instanceof $.AttachmentTimeline||h instanceof $.DrawOrderTimeline||h instanceof $.EventTimeline||!e.animation.hasTimeline(l))r[a]=A.FIRST;else{for(var u=e.mixingTo;null!=u;u=u.mixingTo)if(!u.animation.hasTimeline(l)){if(0<t.mixDuration){r[a]=A.HOLD_MIX,s[a]=u;continue t}break}r[a]=A.HOLD}else r[a]=A.SUBSEQUENT}},A.prototype.computeNotLast=function(t){for(var e,i=t.animation.timelines,n=t.animation.timelines.length,r=t.timelineMode,s=this.propertyIDs,o=0;o<n;o++)i[o]instanceof $.AttachmentTimeline&&(e=i[o],s.add(e.slotIndex)||(r[o]|=A.NOT_LAST))},A.prototype.getCurrent=function(t){return t>=this.tracks.length?null:this.tracks[t]},A.prototype.addListener=function(t){if(null==t)throw new Error("listener cannot be null.");this.listeners.push(t)},A.prototype.removeListener=function(t){t=this.listeners.indexOf(t);0<=t&&this.listeners.splice(t,1)},A.prototype.clearListeners=function(){this.listeners.length=0},A.prototype.clearListenerNotifications=function(){this.queue.clear()},A.prototype.setAnimationByName=function(t,e,i){A.deprecatedWarning1||(A.deprecatedWarning1=!0,console.warn("Spine Deprecation Warning: AnimationState.setAnimationByName is deprecated, please use setAnimation from now on.")),this.setAnimation(t,e,i)},A.prototype.addAnimationByName=function(t,e,i,n){A.deprecatedWarning2||(A.deprecatedWarning2=!0,console.warn("Spine Deprecation Warning: AnimationState.addAnimationByName is deprecated, please use addAnimation from now on.")),this.addAnimation(t,e,i,n)},A.prototype.hasAnimation=function(t){return null!==this.data.skeletonData.findAnimation(t)},A.prototype.hasAnimationByName=function(t){return A.deprecatedWarning3||(A.deprecatedWarning3=!0,console.warn("Spine Deprecation Warning: AnimationState.hasAnimationByName is deprecated, please use hasAnimation from now on.")),this.hasAnimation(t)},A.emptyAnimation=new $.Animation("<empty>",[],0),A.SUBSEQUENT=0,A.FIRST=1,A.HOLD=2,A.HOLD_MIX=3,A.NOT_LAST=4,A.deprecatedWarning1=!1,A.deprecatedWarning2=!1,A.deprecatedWarning3=!1,A);function A(t){this.tracks=new Array,this.timeScale=1,this.events=new Array,this.listeners=new Array,this.queue=new n(this),this.propertyIDs=new $.IntSet,this.animationsChanged=!1,this.trackEntryPool=new $.Pool(function(){return new e}),this.data=t}$.AnimationState=t;var e=(i.prototype.reset=function(){this.next=null,this.mixingFrom=null,this.mixingTo=null,this.animation=null,this.listener=null,this.timelineMode.length=0,this.timelineHoldMix.length=0,this.timelinesRotation.length=0},i.prototype.getAnimationTime=function(){if(this.loop){var t=this.animationEnd-this.animationStart;return 0==t?this.animationStart:this.trackTime%t+this.animationStart}return Math.min(this.trackTime+this.animationStart,this.animationEnd)},i.prototype.setAnimationLast=function(t){this.animationLast=t,this.nextAnimationLast=t},i.prototype.isComplete=function(){return this.trackTime>=this.animationEnd-this.animationStart},i.prototype.resetRotationDirections=function(){this.timelinesRotation.length=0},Object.defineProperty(i.prototype,"time",{get:function(){return i.deprecatedWarning1||(i.deprecatedWarning1=!0,console.warn("Spine Deprecation Warning: TrackEntry.time is deprecated, please use trackTime from now on.")),this.trackTime},set:function(t){i.deprecatedWarning1||(i.deprecatedWarning1=!0,console.warn("Spine Deprecation Warning: TrackEntry.time is deprecated, please use trackTime from now on.")),this.trackTime=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"endTime",{get:function(){return i.deprecatedWarning2||(i.deprecatedWarning2=!0,console.warn("Spine Deprecation Warning: TrackEntry.endTime is deprecated, please use trackEnd from now on.")),this.trackTime},set:function(t){i.deprecatedWarning2||(i.deprecatedWarning2=!0,console.warn("Spine Deprecation Warning: TrackEntry.endTime is deprecated, please use trackEnd from now on.")),this.trackTime=t},enumerable:!0,configurable:!0}),i.prototype.loopsCount=function(){return Math.floor(this.trackTime/this.trackEnd)},i.deprecatedWarning1=!1,i.deprecatedWarning2=!1,i);function i(){this.mixBlend=$.MixBlend.replace,this.timelineMode=new Array,this.timelineHoldMix=new Array,this.timelinesRotation=new Array}$.TrackEntry=e;var h,n=(r.prototype.start=function(t){this.objects.push(h.start),this.objects.push(t),this.animState.animationsChanged=!0},r.prototype.interrupt=function(t){this.objects.push(h.interrupt),this.objects.push(t)},r.prototype.end=function(t){this.objects.push(h.end),this.objects.push(t),this.animState.animationsChanged=!0},r.prototype.dispose=function(t){this.objects.push(h.dispose),this.objects.push(t)},r.prototype.complete=function(t){this.objects.push(h.complete),this.objects.push(t)},r.prototype.event=function(t,e){this.objects.push(h.event),this.objects.push(t),this.objects.push(e)},r.prototype.deprecateStuff=function(){return r.deprecatedWarning1||(r.deprecatedWarning1=!0,console.warn("Spine Deprecation Warning: onComplete, onStart, onEnd, onEvent art deprecated, please use listeners from now on. 'state.addListener({ complete: function(track, event) { } })'")),!0},r.prototype.drain=function(){if(!this.drainDisabled){this.drainDisabled=!0;for(var t=this.objects,e=this.animState.listeners,i=0;i<t.length;i+=2){var n=t[i],r=t[i+1];switch(n){case h.start:null!=r.listener&&r.listener.start&&r.listener.start(r);for(var s=0;s<e.length;s++)e[s].start&&e[s].start(r);r.onStart&&this.deprecateStuff()&&r.onStart(r.trackIndex),this.animState.onStart&&this.deprecateStuff()&&this.deprecateStuff&&this.animState.onStart(r.trackIndex);break;case h.interrupt:for(null!=r.listener&&r.listener.interrupt&&r.listener.interrupt(r),s=0;s<e.length;s++)e[s].interrupt&&e[s].interrupt(r);break;case h.end:for(null!=r.listener&&r.listener.end&&r.listener.end(r),s=0;s<e.length;s++)e[s].end&&e[s].end(r);r.onEnd&&this.deprecateStuff()&&r.onEnd(r.trackIndex),this.animState.onEnd&&this.deprecateStuff()&&this.animState.onEnd(r.trackIndex);case h.dispose:for(null!=r.listener&&r.listener.dispose&&r.listener.dispose(r),s=0;s<e.length;s++)e[s].dispose&&e[s].dispose(r);this.animState.trackEntryPool.free(r);break;case h.complete:for(null!=r.listener&&r.listener.complete&&r.listener.complete(r),s=0;s<e.length;s++)e[s].complete&&e[s].complete(r);var o=$.MathUtils.toInt(r.loopsCount());r.onComplete&&this.deprecateStuff()&&r.onComplete(r.trackIndex,o),this.animState.onComplete&&this.deprecateStuff()&&this.animState.onComplete(r.trackIndex,o);break;case h.event:var a=t[2+i++];for(null!=r.listener&&r.listener.event&&r.listener.event(r,a),s=0;s<e.length;s++)e[s].event&&e[s].event(r,a);r.onEvent&&this.deprecateStuff()&&r.onEvent(r.trackIndex,a),this.animState.onEvent&&this.deprecateStuff()&&this.animState.onEvent(r.trackIndex,a)}}this.clear(),this.drainDisabled=!1}},r.prototype.clear=function(){this.objects.length=0},r.deprecatedWarning1=!1,r);function r(t){this.objects=[],this.drainDisabled=!1,this.animState=t}function s(){}$.EventQueue=n,(t=h=$.EventType||($.EventType={}))[t.start=0]="start",t[t.interrupt=1]="interrupt",t[t.end=2]="end",t[t.dispose=3]="dispose",t[t.complete=4]="complete",t[t.event=5]="event",s.prototype.start=function(t){},s.prototype.interrupt=function(t){},s.prototype.end=function(t){},s.prototype.dispose=function(t){},s.prototype.complete=function(t){},s.prototype.event=function(t,e){},t=s,$.AnimationStateAdapter=t}((L=s=s||{}).core||(L.core={})),k=s=s||{},L=k.core||(k.core={}),ct.prototype.setMix=function(t,e,i){var n=this.skeletonData.findAnimation(t);if(null==n)throw new Error("Animation not found: "+t);t=this.skeletonData.findAnimation(e);if(null==t)throw new Error("Animation not found: "+e);this.setMixWith(n,t,i)},ct.prototype.setMixByName=function(t,e,i){ct.deprecatedWarning1||(ct.deprecatedWarning1=!0,console.warn("Deprecation Warning: AnimationStateData.setMixByName is deprecated, please use setMix from now on.")),this.setMix(t,e,i)},ct.prototype.setMixWith=function(t,e,i){if(null==t)throw new Error("from cannot be null.");if(null==e)throw new Error("to cannot be null.");e=t.name+"."+e.name;this.animationToMixTime[e]=i},ct.prototype.getMix=function(t,e){e=t.name+"."+e.name,e=this.animationToMixTime[e];return void 0===e?this.defaultMix:e},ct.deprecatedWarning1=!1,k=ct,L.AnimationStateData=k,L=s=s||{},R=L.core||(L.core={}),ut.prototype.newRegionAttachment=function(t,e,i){var n=this.atlas.findRegion(i);if(null==n)throw new Error("Region not found in atlas: "+i+" (region attachment: "+e+")");e=new R.RegionAttachment(e);return e.region=n,e},ut.prototype.newMeshAttachment=function(t,e,i){var n=this.atlas.findRegion(i);if(null==n)throw new Error("Region not found in atlas: "+i+" (mesh attachment: "+e+")");e=new R.MeshAttachment(e);return e.region=n,e},ut.prototype.newBoundingBoxAttachment=function(t,e){return new R.BoundingBoxAttachment(e)},ut.prototype.newPathAttachment=function(t,e){return new R.PathAttachment(e)},ut.prototype.newPointAttachment=function(t,e){return new R.PointAttachment(e)},ut.prototype.newClippingAttachment=function(t,e){return new R.ClippingAttachment(e)},L=ut,R.AtlasAttachmentLoader=L,(k=(k=(k=s=s||{}).core||(k.core={})).BlendMode||(k.BlendMode={}))[k.Normal=0]="Normal",k[k.Additive=1]="Additive",k[k.Multiply=2]="Multiply",k[k.Screen=3]="Screen",L=s=s||{},D=L.core||(L.core={}),Object.defineProperty(lt.prototype,"worldX",{get:function(){return this.matrix.tx},enumerable:!0,configurable:!0}),Object.defineProperty(lt.prototype,"worldY",{get:function(){return this.matrix.ty},enumerable:!0,configurable:!0}),lt.prototype.isActive=function(){return this.active},lt.prototype.update=function(){this.updateWorldTransformWith(this.x,this.y,this.rotation,this.scaleX,this.scaleY,this.shearX,this.shearY)},lt.prototype.updateWorldTransform=function(){this.updateWorldTransformWith(this.x,this.y,this.rotation,this.scaleX,this.scaleY,this.shearX,this.shearY)},lt.prototype.updateWorldTransformWith=function(t,e,i,n,r,s,o){this.ax=t,this.ay=e,this.arotation=i,this.ascaleX=n,this.ascaleY=r,this.ashearX=s,this.ashearY=o,this.appliedValid=!0;var a=this.parent,h=this.matrix,l=this.skeleton.scaleX,u=lt.yDown?-this.skeleton.scaleY:this.skeleton.scaleY;if(null==a){var c=this.skeleton,p=i+90+o;return h.a=D.MathUtils.cosDeg(i+s)*n*l,h.c=D.MathUtils.cosDeg(p)*r*l,h.b=D.MathUtils.sinDeg(i+s)*n*u,h.d=D.MathUtils.sinDeg(p)*r*u,h.tx=t*l+c.x,void(h.ty=e*u+c.y)}var d=a.matrix.a,_=a.matrix.c,f=a.matrix.b,m=a.matrix.d;switch(h.tx=d*t+_*e+a.matrix.tx,h.ty=f*t+m*e+a.matrix.ty,this.data.transformMode){case D.TransformMode.Normal:p=i+90+o;var y=D.MathUtils.cosDeg(i+s)*n,g=D.MathUtils.cosDeg(p)*r,v=D.MathUtils.sinDeg(i+s)*n,w=D.MathUtils.sinDeg(p)*r;return h.a=d*y+_*v,h.c=d*g+_*w,h.b=f*y+m*v,void(h.d=f*g+m*w);case D.TransformMode.OnlyTranslation:p=i+90+o,h.a=D.MathUtils.cosDeg(i+s)*n,h.c=D.MathUtils.cosDeg(p)*r,h.b=D.MathUtils.sinDeg(i+s)*n,h.d=D.MathUtils.sinDeg(p)*r;break;case D.TransformMode.NoRotationOrReflection:var x=0,b=i+s-(x=1e-4<(A=d*d+f*f)?(_=f*(A=Math.abs(d*m-_*f)/A),m=d*A,Math.atan2(f,d)*D.MathUtils.radDeg):(f=d=0,90-Math.atan2(m,_)*D.MathUtils.radDeg)),E=i+o-x+90,y=D.MathUtils.cosDeg(b)*n,g=D.MathUtils.cosDeg(E)*r,v=D.MathUtils.sinDeg(b)*n,w=D.MathUtils.sinDeg(E)*r;h.a=d*y-_*v,h.c=d*g-_*w,h.b=f*y+m*v,h.d=f*g+m*w;break;case D.TransformMode.NoScale:case D.TransformMode.NoScaleOrReflection:var $=D.MathUtils.cosDeg(i),x=D.MathUtils.sinDeg(i),b=(d*$+_*x)/l,E=(f*$+m*x)/u;1e-5<(A=Math.sqrt(b*b+E*E))&&(A=1/A),b*=A,E*=A,A=Math.sqrt(b*b+E*E),this.data.transformMode==D.TransformMode.NoScale&&d*m-_*f<0!=(lt.yDown?this.skeleton.scaleX<0!=0<this.skeleton.scaleY:this.skeleton.scaleX<0!=this.skeleton.scaleY<0)&&(A=-A);var $=Math.PI/2+Math.atan2(E,b),x=Math.cos($)*A,A=Math.sin($)*A;y=D.MathUtils.cosDeg(s)*n,g=D.MathUtils.cosDeg(90+o)*r,v=D.MathUtils.sinDeg(s)*n,w=D.MathUtils.sinDeg(90+o)*r,h.a=b*y+x*v,h.c=b*g+x*w,h.b=E*y+A*v,h.d=E*g+A*w}h.a*=l,h.c*=l,h.b*=u,h.d*=u},lt.prototype.setToSetupPose=function(){var t=this.data;this.x=t.x,this.y=t.y,this.rotation=t.rotation,this.scaleX=t.scaleX,this.scaleY=t.scaleY,this.shearX=t.shearX,this.shearY=t.shearY},lt.prototype.getWorldRotationX=function(){return Math.atan2(this.matrix.b,this.matrix.a)*D.MathUtils.radDeg},lt.prototype.getWorldRotationY=function(){return Math.atan2(this.matrix.d,this.matrix.c)*D.MathUtils.radDeg},lt.prototype.getWorldScaleX=function(){var t=this.matrix;return Math.sqrt(t.a*t.a+t.c*t.c)},lt.prototype.getWorldScaleY=function(){var t=this.matrix;return Math.sqrt(t.b*t.b+t.d*t.d)},lt.prototype.updateAppliedTransform=function(){this.appliedValid=!0;var t=this.parent,e=this.matrix;if(null==t)return this.ax=e.tx,this.ay=e.ty,this.arotation=Math.atan2(e.b,e.a)*D.MathUtils.radDeg,this.ascaleX=Math.sqrt(e.a*e.a+e.b*e.b),this.ascaleY=Math.sqrt(e.c*e.c+e.d*e.d),this.ashearX=0,void(this.ashearY=Math.atan2(e.a*e.c+e.b*e.d,e.a*e.d-e.b*e.c)*D.MathUtils.radDeg);var i=t.matrix,n=1/(i.a*i.d-i.b*i.c),r=e.tx-i.tx,s=e.ty-i.ty;this.ax=r*i.d*n-s*i.c*n,this.ay=s*i.a*n-r*i.b*n;t=n*i.d,s=n*i.a,r=n*i.c,n*=i.b,i=t*e.a-r*e.b,t=t*e.c-r*e.d,r=s*e.b-n*e.a,n=s*e.d-n*e.c;this.ashearX=0,this.ascaleX=Math.sqrt(i*i+r*r),1e-4<this.ascaleX?(e=i*n-t*r,this.ascaleY=e/this.ascaleX,this.ashearY=Math.atan2(i*t+r*n,e)*D.MathUtils.radDeg,this.arotation=Math.atan2(r,i)*D.MathUtils.radDeg):(this.ascaleX=0,this.ascaleY=Math.sqrt(t*t+n*n),this.ashearY=0,this.arotation=90-Math.atan2(n,t)*D.MathUtils.radDeg)},lt.prototype.worldToLocal=function(t){var e=this.matrix,i=e.a,n=e.c,r=e.b,s=e.d,o=1/(i*s-n*r),a=t.x-e.tx,e=t.y-e.ty;return t.x=a*s*o-e*n*o,t.y=e*i*o-a*r*o,t},lt.prototype.localToWorld=function(t){var e=this.matrix,i=t.x,n=t.y;return t.x=i*e.a+n*e.c+e.tx,t.y=i*e.b+n*e.d+e.ty,t},lt.prototype.worldToLocalRotation=function(t){var e=D.MathUtils.sinDeg(t),i=D.MathUtils.cosDeg(t),t=this.matrix;return Math.atan2(t.a*e-t.b*i,t.d*i-t.c*e)*D.MathUtils.radDeg},lt.prototype.localToWorldRotation=function(t){var e=D.MathUtils.sinDeg(t),i=D.MathUtils.cosDeg(t),t=this.matrix;return Math.atan2(i*t.b+e*t.d,i*t.a+e*t.c)*D.MathUtils.radDeg},lt.prototype.rotateWorld=function(t){var e=this.matrix,i=e.a,n=e.c,r=e.b,s=e.d,o=D.MathUtils.cosDeg(t),t=D.MathUtils.sinDeg(t);e.a=o*i-t*r,e.c=o*n-t*s,e.b=t*i+o*r,e.d=t*n+o*s,this.appliedValid=!1},lt.yDown=!1,L=lt,D.Bone=L,k=s=s||{},(P=k.core||(k.core={})).BoneData=function(t,e,i){if(this.x=0,this.y=0,this.rotation=0,this.scaleX=1,this.scaleY=1,this.shearX=0,this.shearY=0,this.transformMode=O.Normal,this.skinRequired=!1,this.color=new P.Color,t<0)throw new Error("index must be >= 0.");if(null==e)throw new Error("name cannot be null.");this.index=t,this.name=e,this.parent=i},(k=O=P.TransformMode||(P.TransformMode={}))[k.Normal=0]="Normal",k[k.OnlyTranslation=1]="OnlyTranslation",k[k.NoRotationOrReflection=2]="NoRotationOrReflection",k[k.NoScale=3]="NoScale",k[k.NoScaleOrReflection=4]="NoScaleOrReflection",((L=s=s||{}).core||(L.core={})).ConstraintData=function(t,e,i){this.name=t,this.order=e,this.skinRequired=i},((k=s=s||{}).core||(k.core={})).Event=function(t,e){if(null==e)throw new Error("data cannot be null.");this.time=t,this.data=e},((L=s=s||{}).core||(L.core={})).EventData=function(t){this.name=t},k=s=s||{},J=k.core||(k.core={}),ht.prototype.isActive=function(){return this.active},ht.prototype.apply=function(){this.update()},ht.prototype.update=function(){var t=this.target,e=this.bones;switch(e.length){case 1:this.apply1(e[0],t.worldX,t.worldY,this.compress,this.stretch,this.data.uniform,this.mix);break;case 2:this.apply2(e[0],e[1],t.worldX,t.worldY,this.bendDirection,this.stretch,this.softness,this.mix)}},ht.prototype.apply1=function(t,e,i,n,r,s,o){t.appliedValid||t.updateAppliedTransform();var a=t.parent.matrix,h=1/(a.a*a.d-a.b*a.c),l=e-a.tx,u=i-a.ty,e=(l*a.d-u*a.c)*h-t.ax,i=(u*a.a-l*a.b)*h-t.ay,u=Math.atan2(i,e)*J.MathUtils.radDeg-t.ashearX-t.arotation;t.ascaleX<0&&(u+=180),180<u?u-=360:u<-180&&(u+=360);l=t.ascaleX,a=t.ascaleY;(n||r)&&(h=t.data.length*l,i=Math.sqrt(e*e+i*i),(n&&i<h||r&&h<i&&1e-4<h)&&(l*=h=(i/h-1)*o+1,s&&(a*=h))),t.updateWorldTransformWith(t.ax,t.ay,t.arotation+u*o,l,a,t.ashearX,t.ashearY)},ht.prototype.apply2=function(t,e,i,n,r,s,o,a){if(0!=a){t.appliedValid||t.updateAppliedTransform(),e.appliedValid||e.updateAppliedTransform();var h=t.ax,l=t.ay,u=t.ascaleX,c=u,p=t.ascaleY,d=e.ascaleX,_=t.matrix,f=0,m=0,y=0,y=u<0?(u=-u,f=180,-1):(f=0,1);p<0&&(p=-p,y=-y),m=d<0?(d=-d,180):0;var g,v,w=e.ax,x=0,b=0,E=0,$=_.a,A=_.c,S=_.b,T=_.d,C=Math.abs(u-p)<=1e-4,E=C?(b=$*w+A*(x=e.ay)+_.tx,S*w+T*x+_.ty):(x=0,b=$*w+_.tx,S*w+_.ty),M=t.parent.matrix,$=M.a,A=M.c,S=M.b,_=1/($*(T=M.d)-A*S),I=b-M.tx,P=E-M.ty,b=(I*T-P*A)*_-h,E=(P*$-I*S)*_-l,O=Math.sqrt(b*b+E*E),D=e.data.length*d;if(O<1e-4)return this.apply1(t,i,n,!1,s,!1,a),void e.updateWorldTransformWith(w,x,0,e.ascaleX,e.ascaleY,e.ashearX,e.ashearY);var R=((I=i-M.tx)*T-(P=n-M.ty)*A)*_-h,L=(P*$-I*S)*_-l,k=R*R+L*L;0!=o&&(o*=u*(d+1)/2,0<(d=(z=Math.sqrt(k))-O-D*u+o)&&(k=(R-=(q=(d-o*(1-(q=Math.min(1,d/(2*o))-1)*q))/z)*R)*R+(L-=q*L)*L));t:if(C){var F=(k-O*O-(D*=u)*D)/(2*O*D);F<-1?F=-1:1<F&&(F=1,s&&(c*=(Math.sqrt(k)/(O+D)-1)*a+1)),v=Math.acos(F)*r,$=O+D*F,A=D*Math.sin(v),g=Math.atan2(L*$-R*A,R*$+L*A)}else{var N=($=u*D)*$,B=(A=p*D)*A,U=Math.atan2(L,R),X=-2*B*O,j=B-N;if(0<=(T=X*X-4*j*(S=B*O*O+N*k-N*B))){var V=Math.sqrt(T);X<0&&(V=-V);var H=(V=-(X+V)/2)/j,G=S/V,Y=Math.abs(H)<Math.abs(G)?H:G;if(Y*Y<=k){P=Math.sqrt(k-Y*Y)*r,g=U-Math.atan2(P,Y),v=Math.atan2(P/p,(Y-O)/u);break t}}var W=J.MathUtils.PI,F=O-$,X=F*F,j=0,V=0,H=O+$,G=H*H,Y=0;-1<=(S=-$*O/(N-B))&&S<=1&&(S=Math.acos(S),(T=(I=$*Math.cos(S)+O)*I+(P=A*Math.sin(S))*P)<X&&(W=S,X=T,F=I,j=P),G<T&&(V=S,G=T,H=I,Y=P)),v=k<=(X+G)/2?(g=U-Math.atan2(j*r,F),W*r):(g=U-Math.atan2(Y*r,H),V*r)}var z=Math.atan2(x,w)*y,q=t.arotation;180<(g=(g-z)*J.MathUtils.radDeg+f-q)?g-=360:g<-180&&(g+=360),t.updateWorldTransformWith(h,l,q+g*a,c,t.ascaleY,0,0),q=e.arotation,180<(v=((v+z)*J.MathUtils.radDeg-e.ashearX)*y+m-q)?v-=360:v<-180&&(v+=360),e.updateWorldTransformWith(w,x,q+v*a,e.ascaleX,e.ascaleY,e.ashearX,e.ashearY)}else e.updateWorldTransform()},k=ht,J.IkConstraint=k,L=s=s||{},k=L.core||(L.core={}),I=k.ConstraintData,F(at,I),L=at,k.IkConstraintData=L,k=s=s||{},z=k.core||(k.core={}),ot.prototype.isActive=function(){return this.active},ot.prototype.apply=function(){this.update()},ot.prototype.update=function(){var t=this.target.getAttachment();if(t instanceof z.PathAttachment){var e=this.rotateMix,i=this.translateMix,n=0<e;if(0<i||n){var r=this.data,s=r.spacingMode,o=s==z.SpacingMode.Length,a=r.rotateMode,h=a==z.RotateMode.Tangent,l=a==z.RotateMode.ChainScale,u=this.bones.length,c=h?u:u+1,p=this.bones,d=z.Utils.setArraySize(this.spaces,c),_=null,f=this.spacing;if(l||o){l&&(_=z.Utils.setArraySize(this.lengths,u));for(var m=0,y=c-1;m<y;){var g,v,w,x=(C=p[m]).data.length;x<ot.epsilon?(l&&(_[m]=0),d[++m]=0):(g=x*C.matrix.a,v=x*C.matrix.b,w=Math.sqrt(g*g+v*v),l&&(_[m]=w),d[++m]=(o?x+f:f)*w/x)}}else for(m=1;m<c;m++)d[m]=f;var b=this.computeWorldPositions(t,c,h,r.positionMode==z.PositionMode.Percent,s==z.SpacingMode.Percent),E=b[0],$=b[1],A=r.offsetRotation,S=!1;0==A?S=a==z.RotateMode.Chain:(S=!1,A*=0<(T=this.target.bone.matrix).a*T.d-T.b*T.c?z.MathUtils.degRad:-z.MathUtils.degRad),m=0;for(var T=3;m<u;m++,T+=3){var C,M=(C=p[m]).matrix;M.tx+=(E-M.tx)*i,M.ty+=($-M.ty)*i;var I=(g=b[T])-E,P=(v=b[T+1])-$;!l||0!=(F=_[m])&&(N=(Math.sqrt(I*I+P*P)/F-1)*e+1,M.a*=N,M.b*=N);var O,D,R,L,k,F,N,B,E=g,$=v;n&&(O=M.a,D=M.c,R=M.b,L=M.d,F=k=B=0,B=h?b[T-1]:0==d[m+1]?b[T+2]:Math.atan2(P,I),B-=Math.atan2(R,O),S?(k=Math.cos(B),F=Math.sin(B),E+=((N=C.data.length)*(k*O-F*R)-I)*e,$+=(N*(F*O+k*R)-P)*e):B+=A,B>z.MathUtils.PI?B-=z.MathUtils.PI2:B<-z.MathUtils.PI&&(B+=z.MathUtils.PI2),B*=e,k=Math.cos(B),F=Math.sin(B),M.a=k*O-F*R,M.c=k*D-F*L,M.b=F*O+k*R,M.d=F*D+k*L),C.appliedValid=!1}}}},ot.prototype.computeWorldPositions=function(t,e,i,n,r){var s=this.target,o=this.position,a=this.spaces,h=z.Utils.setArraySize(this.positions,3*e+2),l=null,u=t.closed,c=t.worldVerticesLength,p=c/6,d=ot.NONE;if(!t.constantSpeed){var _=t.lengths,f=_[p-=u?1:2];if(n&&(o*=f),r)for(var m=0;m<e;m++)a[m]*=f;l=z.Utils.setArraySize(this.world,8);for(var y=m=0,g=0;m<e;m++,y+=3){var v=o+=V=a[m];if(u)(v%=f)<0&&(v+=f),g=0;else{if(v<0){d!=ot.BEFORE&&(d=ot.BEFORE,t.computeWorldVertices(s,2,4,l,0,2)),this.addBeforePosition(v,l,0,h,y);continue}if(f<v){d!=ot.AFTER&&(d=ot.AFTER,t.computeWorldVertices(s,c-6,4,l,0,2)),this.addAfterPosition(v-f,l,0,h,y);continue}}for(;;g++){var w=_[g];if(!(w<v)){0==g?v/=w:v=(v-(Y=_[g-1]))/(w-Y);break}}g!=d&&(d=g,u&&g==p?(t.computeWorldVertices(s,c-4,4,l,0,2),t.computeWorldVertices(s,0,4,l,4,2)):t.computeWorldVertices(s,6*g+2,8,l,0,2)),this.addCurvePosition(v,l[0],l[1],l[2],l[3],l[4],l[5],l[6],l[7],h,y,i||0<m&&0==V)}return h}u?(c+=2,l=z.Utils.setArraySize(this.world,c),t.computeWorldVertices(s,2,c-4,l,0,2),t.computeWorldVertices(s,0,2,l,c-4,2),l[c-2]=l[0],l[c-1]=l[1]):(p--,c-=4,l=z.Utils.setArraySize(this.world,c),t.computeWorldVertices(s,2,c,l,0,2));for(var x=z.Utils.setArraySize(this.curves,p),b=0,E=l[0],$=l[1],A=0,S=0,T=0,C=0,M=0,I=0,P=0,O=0,D=0,R=0,L=0,k=0,F=0,N=0,B=(m=0,2);m<p;m++,B+=6)A=l[B],S=l[B+1],T=l[B+2],C=l[B+3],L=2*(P=.1875*(E-2*A+T))+(D=.09375*(3*(A-T)-E+(M=l[B+4]))),k=2*(O=.1875*($-2*S+C))+(R=.09375*(3*(S-C)-$+(I=l[B+5]))),F=.75*(A-E)+P+.16666667*D,N=.75*(S-$)+O+.16666667*R,b+=Math.sqrt(F*F+N*N),F+=L,N+=k,L+=D,k+=R,b+=Math.sqrt(F*F+N*N),F+=L,N+=k,b+=Math.sqrt(F*F+N*N),F+=L+D,N+=k+R,b+=Math.sqrt(F*F+N*N),x[m]=b,E=M,$=I;if(n&&(o*=b),r)for(m=0;m<e;m++)a[m]*=b;for(var U=this.segments,X=0,j=g=y=m=0;m<e;m++,y+=3){var V,v=o+=V=a[m];if(u)(v%=b)<0&&(v+=b),g=0;else{if(v<0){this.addBeforePosition(v,l,0,h,y);continue}if(b<v){this.addAfterPosition(v-b,l,c-4,h,y);continue}}for(;;g++){var H=x[g];if(!(H<v)){0==g?v/=H:v=(v-(Y=x[g-1]))/(H-Y);break}}if(g!=d){var G=6*(d=g),E=l[G],$=l[G+1],A=l[G+2],S=l[G+3],T=l[G+4],C=l[G+5],L=2*(P=.03*(E-2*A+T))+(D=.006*(3*(A-T)-E+(M=l[G+6]))),k=2*(O=.03*($-2*S+C))+(R=.006*(3*(S-C)-$+(I=l[G+7]))),F=.3*(A-E)+P+.16666667*D,N=.3*(S-$)+O+.16666667*R,X=Math.sqrt(F*F+N*N);for(U[0]=X,G=1;G<8;G++)F+=L,N+=k,L+=D,k+=R,X+=Math.sqrt(F*F+N*N),U[G]=X;F+=L,N+=k,X+=Math.sqrt(F*F+N*N),U[8]=X,F+=L+D,N+=k+R,X+=Math.sqrt(F*F+N*N),U[9]=X,j=0}for(v*=X;;j++){var Y,W=U[j];if(!(W<v)){0==j?v/=W:v=j+(v-(Y=U[j-1]))/(W-Y);break}}this.addCurvePosition(.1*v,E,$,A,S,T,C,M,I,h,y,i||0<m&&0==V)}return h},ot.prototype.addBeforePosition=function(t,e,i,n,r){var s=e[i],o=e[i+1],a=e[i+2]-s,i=e[i+3]-o,a=Math.atan2(i,a);n[r]=s+t*Math.cos(a),n[r+1]=o+t*Math.sin(a),n[r+2]=a},ot.prototype.addAfterPosition=function(t,e,i,n,r){var s=e[i+2],o=e[i+3],a=s-e[i],i=o-e[i+1],a=Math.atan2(i,a);n[r]=s+t*Math.cos(a),n[r+1]=o+t*Math.sin(a),n[r+2]=a},ot.prototype.addCurvePosition=function(t,e,i,n,r,s,o,a,h,l,u,c){0!=t&&!isNaN(t)||(t=1e-4);var p=t*t,d=p*t,_=1-t,f=_*_,m=f*_,y=_*t,g=3*y,_=_*g,t=g*t,a=e*m+n*_+s*t+a*d,d=i*m+r*_+o*t+h*d;l[u]=a,l[u+1]=d,c&&(l[u+2]=Math.atan2(d-(i*f+r*y*2+o*p),a-(e*f+n*y*2+s*p)))},ot.NONE=-1,ot.BEFORE=-2,ot.AFTER=-3,ot.epsilon=1e-5,k=ot,z.PathConstraint=k,L=s=s||{},k=L.core||(L.core={}),M=k.ConstraintData,F(st,M),L=st,k.PathConstraintData=L,(L=k.PositionMode||(k.PositionMode={}))[L.Fixed=0]="Fixed",L[L.Percent=1]="Percent",(L=k.SpacingMode||(k.SpacingMode={}))[L.Length=0]="Length",L[L.Fixed=1]="Fixed",L[L.Percent=2]="Percent",(k=k.RotateMode||(k.RotateMode={}))[k.Tangent=0]="Tangent",k[k.Chain=1]="Chain",k[k.ChainScale=2]="ChainScale",L=s=s||{},C=L.core||(L.core={}),rt.prototype.updateCache=function(){this._updateCache.length=0,this.updateCacheReset.length=0;for(var t=this.bones,e=0,i=t.length;e<i;e++)(r=t[e]).sorted=r.data.skinRequired,r.active=!r.sorted;if(null!=this.skin)for(var n=this.skin.bones,e=0,i=this.skin.bones.length;e<i;e++)for(var r=this.bones[n[e].index];r.sorted=!1,r.active=!0,r=r.parent,null!=r;);var s=this.ikConstraints,o=this.transformConstraints,a=this.pathConstraints,h=s.length,l=o.length,u=a.length,c=h+l+u;t:for(e=0;e<c;e++){for(var p,d=0;d<h;d++)if((p=s[d]).data.order==e){this.sortIkConstraint(p);continue t}for(d=0;d<l;d++)if((p=o[d]).data.order==e){this.sortTransformConstraint(p);continue t}for(d=0;d<u;d++)if((p=a[d]).data.order==e){this.sortPathConstraint(p);continue t}}for(e=0,i=t.length;e<i;e++)this.sortBone(t[e])},rt.prototype.sortIkConstraint=function(t){var e,i,n;t.active=t.target.isActive()&&(!t.data.skinRequired||null!=this.skin&&C.Utils.contains(this.skin.constraints,t.data,!0)),t.active&&(n=t.target,this.sortBone(n),i=(e=t.bones)[0],this.sortBone(i),1<e.length&&(n=e[e.length-1],-1<this._updateCache.indexOf(n)||this.updateCacheReset.push(n)),this._updateCache.push(t),this.sortReset(i.children),e[e.length-1].sorted=!0)},rt.prototype.sortPathConstraint=function(t){if(t.active=t.target.bone.isActive()&&(!t.data.skinRequired||null!=this.skin&&C.Utils.contains(this.skin.constraints,t.data,!0)),t.active){var e=t.target,i=e.data.index,n=e.bone;null!=this.skin&&this.sortPathConstraintAttachment(this.skin,i,n),null!=this.data.defaultSkin&&this.data.defaultSkin!=this.skin&&this.sortPathConstraintAttachment(this.data.defaultSkin,i,n);for(var r=0,s=this.data.skins.length;r<s;r++)this.sortPathConstraintAttachment(this.data.skins[r],i,n);e=e.getAttachment();e instanceof C.PathAttachment&&this.sortPathConstraintAttachmentWith(e,n);for(var o=t.bones,a=o.length,r=0;r<a;r++)this.sortBone(o[r]);for(this._updateCache.push(t),r=0;r<a;r++)this.sortReset(o[r].children);for(r=0;r<a;r++)o[r].sorted=!0}},rt.prototype.sortTransformConstraint=function(t){if(t.active=t.target.isActive()&&(!t.data.skinRequired||null!=this.skin&&C.Utils.contains(this.skin.constraints,t.data,!0)),t.active){this.sortBone(t.target);var e=t.bones,i=e.length;if(t.data.local)for(var n=0;n<i;n++){var r=e[n];this.sortBone(r.parent),-1<this._updateCache.indexOf(r)||this.updateCacheReset.push(r)}else for(n=0;n<i;n++)this.sortBone(e[n]);this._updateCache.push(t);for(var s=0;s<i;s++)this.sortReset(e[s].children);for(s=0;s<i;s++)e[s].sorted=!0}},rt.prototype.sortPathConstraintAttachment=function(t,e,i){var n=t.attachments[e];if(n)for(var r in n)this.sortPathConstraintAttachmentWith(n[r],i)},rt.prototype.sortPathConstraintAttachmentWith=function(t,e){if(t instanceof C.PathAttachment){var i=t.bones;if(null==i)this.sortBone(e);else for(var n=this.bones,r=0;r<i.length;)for(var s=i[r++],o=r+s;r<o;r++){var a=i[r];this.sortBone(n[a])}}},rt.prototype.sortBone=function(t){var e;t.sorted||(null!=(e=t.parent)&&this.sortBone(e),t.sorted=!0,this._updateCache.push(t))},rt.prototype.sortReset=function(t){for(var e=0,i=t.length;e<i;e++){var n=t[e];n.active&&(n.sorted&&this.sortReset(n.children),n.sorted=!1)}},rt.prototype.updateWorldTransform=function(){for(var t=this.updateCacheReset,e=0,i=t.length;e<i;e++){var n=t[e];n.ax=n.x,n.ay=n.y,n.arotation=n.rotation,n.ascaleX=n.scaleX,n.ascaleY=n.scaleY,n.ashearX=n.shearX,n.ashearY=n.shearY,n.appliedValid=!0}for(var r=this._updateCache,e=0,i=r.length;e<i;e++)r[e].update()},rt.prototype.setToSetupPose=function(){this.setBonesToSetupPose(),this.setSlotsToSetupPose()},rt.prototype.setBonesToSetupPose=function(){for(var t=this.bones,e=0,i=t.length;e<i;e++)t[e].setToSetupPose();for(var n=this.ikConstraints,e=0,i=n.length;e<i;e++)(a=n[e]).mix=a.data.mix,a.softness=a.data.softness,a.bendDirection=a.data.bendDirection,a.compress=a.data.compress,a.stretch=a.data.stretch;var r=this.transformConstraints;for(e=0,i=r.length;e<i;e++){var s=(a=r[e]).data;a.rotateMix=s.rotateMix,a.translateMix=s.translateMix,a.scaleMix=s.scaleMix,a.shearMix=s.shearMix}var o=this.pathConstraints;for(e=0,i=o.length;e<i;e++){var a,s=(a=o[e]).data;a.position=s.position,a.spacing=s.spacing,a.rotateMix=s.rotateMix,a.translateMix=s.translateMix}},rt.prototype.setSlotsToSetupPose=function(){var t=this.slots;C.Utils.arrayCopy(t,0,this.drawOrder,0,t.length);for(var e=0,i=t.length;e<i;e++)t[e].setToSetupPose()},rt.prototype.getRootBone=function(){return 0==this.bones.length?null:this.bones[0]},rt.prototype.findBone=function(t){if(null==t)throw new Error("boneName cannot be null.");for(var e=this.bones,i=0,n=e.length;i<n;i++){var r=e[i];if(r.data.name==t)return r}return null},rt.prototype.findBoneIndex=function(t){if(null==t)throw new Error("boneName cannot be null.");for(var e=this.bones,i=0,n=e.length;i<n;i++)if(e[i].data.name==t)return i;return-1},rt.prototype.findSlot=function(t){if(null==t)throw new Error("slotName cannot be null.");for(var e=this.slots,i=0,n=e.length;i<n;i++){var r=e[i];if(r.data.name==t)return r}return null},rt.prototype.findSlotIndex=function(t){if(null==t)throw new Error("slotName cannot be null.");for(var e=this.slots,i=0,n=e.length;i<n;i++)if(e[i].data.name==t)return i;return-1},rt.prototype.setSkinByName=function(t){var e=this.data.findSkin(t);if(null==e)throw new Error("Skin not found: "+t);this.setSkin(e)},rt.prototype.setSkin=function(t){if(t!=this.skin){if(null!=t)if(null!=this.skin)t.attachAll(this,this.skin);else for(var e=this.slots,i=0,n=e.length;i<n;i++){var r=e[i],s=r.data.attachmentName;null==s||null!=(s=t.getAttachment(i,s))&&r.setAttachment(s)}this.skin=t,this.updateCache()}},rt.prototype.getAttachmentByName=function(t,e){return this.getAttachment(this.data.findSlotIndex(t),e)},rt.prototype.getAttachment=function(t,e){if(null==e)throw new Error("attachmentName cannot be null.");if(null!=this.skin){var i=this.skin.getAttachment(t,e);if(null!=i)return i}return null!=this.data.defaultSkin?this.data.defaultSkin.getAttachment(t,e):null},rt.prototype.setAttachment=function(t,e){if(null==t)throw new Error("slotName cannot be null.");for(var i=this.slots,n=0,r=i.length;n<r;n++){var s=i[n];if(s.data.name==t){var o=null;if(null!=e&&null==(o=this.getAttachment(n,e)))throw new Error("Attachment not found: "+e+", for slot: "+t);return void s.setAttachment(o)}}throw new Error("Slot not found: "+t)},rt.prototype.findIkConstraint=function(t){if(null==t)throw new Error("constraintName cannot be null.");for(var e=this.ikConstraints,i=0,n=e.length;i<n;i++){var r=e[i];if(r.data.name==t)return r}return null},rt.prototype.findTransformConstraint=function(t){if(null==t)throw new Error("constraintName cannot be null.");for(var e=this.transformConstraints,i=0,n=e.length;i<n;i++){var r=e[i];if(r.data.name==t)return r}return null},rt.prototype.findPathConstraint=function(t){if(null==t)throw new Error("constraintName cannot be null.");for(var e=this.pathConstraints,i=0,n=e.length;i<n;i++){var r=e[i];if(r.data.name==t)return r}return null},rt.prototype.getBounds=function(t,e,i){if(void 0===i&&(i=new Array(2)),null==t)throw new Error("offset cannot be null.");if(null==e)throw new Error("size cannot be null.");for(var n=this.drawOrder,r=Number.POSITIVE_INFINITY,s=Number.POSITIVE_INFINITY,o=Number.NEGATIVE_INFINITY,a=Number.NEGATIVE_INFINITY,h=0,l=n.length;h<l;h++){var u=n[h];if(u.bone.active){var c=0,p=null,d=u.getAttachment();if(d instanceof C.RegionAttachment?(c=8,p=C.Utils.setArraySize(i,c,0),d.computeWorldVertices(u.bone,p,0,2)):d instanceof C.MeshAttachment&&(c=(d=d).worldVerticesLength,p=C.Utils.setArraySize(i,c,0),d.computeWorldVertices(u,0,c,p,0,2)),null!=p)for(var _=0,f=p.length;_<f;_+=2)var m=p[_],y=p[_+1],r=Math.min(r,m),s=Math.min(s,y),o=Math.max(o,m),a=Math.max(a,y)}}t.set(r,s),e.set(o-r,a-s)},rt.prototype.update=function(t){this.time+=t},Object.defineProperty(rt.prototype,"flipX",{get:function(){return-1==this.scaleX},set:function(t){rt.deprecatedWarning1||(rt.deprecatedWarning1=!0,console.warn("Spine Deprecation Warning: `Skeleton.flipX/flipY` was deprecated, please use scaleX/scaleY")),this.scaleX=t?1:-1},enumerable:!0,configurable:!0}),Object.defineProperty(rt.prototype,"flipY",{get:function(){return-1==this.scaleY},set:function(t){rt.deprecatedWarning1||(rt.deprecatedWarning1=!0,console.warn("Spine Deprecation Warning: `Skeleton.flipX/flipY` was deprecated, please use scaleX/scaleY")),this.scaleY=t?1:-1},enumerable:!0,configurable:!0}),rt.deprecatedWarning1=!1,L=rt,C.Skeleton=L,function(H){var t=(G.prototype.readSkeletonData=function(t){var e=this.scale,i=new H.SkeletonData;i.name="";var n=new m(t);i.hash=n.readString(),i.version=n.readString(),i.x=n.readFloat(),i.y=n.readFloat(),i.width=n.readFloat(),i.height=n.readFloat();var r=n.readBoolean();r&&(i.fps=n.readFloat(),i.imagesPath=n.readString(),i.audioPath=n.readString());for(var s=0,s=n.readInt(!0),o=0;o<s;o++)n.strings.push(n.readString());for(s=n.readInt(!0),o=0;o<s;o++){var a=n.readString(),h=0==o?null:i.bones[n.readInt(!0)];(c=new H.BoneData(o,a,h)).rotation=n.readFloat(),c.x=n.readFloat()*e,c.y=n.readFloat()*e,c.scaleX=n.readFloat(),c.scaleY=n.readFloat(),c.shearX=n.readFloat(),c.shearY=n.readFloat(),c.length=n.readFloat()*e,c.transformMode=G.TransformModeValues[n.readInt(!0)],c.skinRequired=n.readBoolean(),r&&H.Color.rgba8888ToColor(c.color,n.readInt32()),i.bones.push(c)}for(s=n.readInt(!0),o=0;o<s;o++){var l=n.readString(),u=i.bones[n.readInt(!0)],c=new H.SlotData(o,l,u);H.Color.rgba8888ToColor(c.color,n.readInt32());u=n.readInt32();-1!=u&&H.Color.rgb888ToColor(c.darkColor=new H.Color,u),c.attachmentName=n.readStringRef(),c.blendMode=G.BlendModeValues[n.readInt(!0)],i.slots.push(c)}s=n.readInt(!0);for(var p=void(o=0);o<s;o++){(c=new H.IkConstraintData(n.readString())).order=n.readInt(!0),c.skinRequired=n.readBoolean(),p=n.readInt(!0);for(var d=0;d<p;d++)c.bones.push(i.bones[n.readInt(!0)]);c.target=i.bones[n.readInt(!0)],c.mix=n.readFloat(),c.softness=n.readFloat()*e,c.bendDirection=n.readByte(),c.compress=n.readBoolean(),c.stretch=n.readBoolean(),c.uniform=n.readBoolean(),i.ikConstraints.push(c)}for(s=n.readInt(!0),p=void(o=0);o<s;o++){for((c=new H.TransformConstraintData(n.readString())).order=n.readInt(!0),c.skinRequired=n.readBoolean(),p=n.readInt(!0),d=0;d<p;d++)c.bones.push(i.bones[n.readInt(!0)]);c.target=i.bones[n.readInt(!0)],c.local=n.readBoolean(),c.relative=n.readBoolean(),c.offsetRotation=n.readFloat(),c.offsetX=n.readFloat()*e,c.offsetY=n.readFloat()*e,c.offsetScaleX=n.readFloat(),c.offsetScaleY=n.readFloat(),c.offsetShearY=n.readFloat(),c.rotateMix=n.readFloat(),c.translateMix=n.readFloat(),c.scaleMix=n.readFloat(),c.shearMix=n.readFloat(),i.transformConstraints.push(c)}for(s=n.readInt(!0),p=void(o=0);o<s;o++){for((c=new H.PathConstraintData(n.readString())).order=n.readInt(!0),c.skinRequired=n.readBoolean(),p=n.readInt(!0),d=0;d<p;d++)c.bones.push(i.bones[n.readInt(!0)]);c.target=i.slots[n.readInt(!0)],c.positionMode=G.PositionModeValues[n.readInt(!0)],c.spacingMode=G.SpacingModeValues[n.readInt(!0)],c.rotateMode=G.RotateModeValues[n.readInt(!0)],c.offsetRotation=n.readFloat(),c.position=n.readFloat(),c.positionMode==H.PositionMode.Fixed&&(c.position*=e),c.spacing=n.readFloat(),c.spacingMode!=H.SpacingMode.Length&&c.spacingMode!=H.SpacingMode.Fixed||(c.spacing*=e),c.rotateMix=n.readFloat(),c.translateMix=n.readFloat(),i.pathConstraints.push(c)}t=this.readSkin(n,i,!0,r);for(null!=t&&(i.defaultSkin=t,i.skins.push(t)),o=i.skins.length,H.Utils.setArraySize(i.skins,s=o+n.readInt(!0));o<s;o++)i.skins[o]=this.readSkin(n,i,!1,r);for(s=this.linkedMeshes.length,o=0;o<s;o++){var _=this.linkedMeshes[o],f=null==_.skin?i.defaultSkin:i.findSkin(_.skin);if(null==f)throw new Error("Skin not found: "+_.skin);f=f.getAttachment(_.slotIndex,_.parent);if(null==f)throw new Error("Parent mesh not found: "+_.parent);_.mesh.deformAttachment=_.inheritDeform?f:_.mesh,_.mesh.setParentMesh(f)}for(this.linkedMeshes.length=0,s=n.readInt(!0),o=0;o<s;o++)(c=new H.EventData(n.readStringRef())).intValue=n.readInt(!1),c.floatValue=n.readFloat(),c.stringValue=n.readString(),c.audioPath=n.readString(),null!=c.audioPath&&(c.volume=n.readFloat(),c.balance=n.readFloat()),i.events.push(c);for(s=n.readInt(!0),o=0;o<s;o++)i.animations.push(this.readAnimation(n,n.readString(),i));return i},G.prototype.readSkin=function(t,e,i,n){var r=null,s=0;if(i){if(0==(s=t.readInt(!0)))return null;r=new H.Skin("default")}else{(r=new H.Skin(t.readStringRef())).bones.length=t.readInt(!0);for(var o=0,a=r.bones.length;o<a;o++)r.bones[o]=e.bones[t.readInt(!0)];for(o=0,a=t.readInt(!0);o<a;o++)r.constraints.push(e.ikConstraints[t.readInt(!0)]);for(o=0,a=t.readInt(!0);o<a;o++)r.constraints.push(e.transformConstraints[t.readInt(!0)]);for(o=0,a=t.readInt(!0);o<a;o++)r.constraints.push(e.pathConstraints[t.readInt(!0)]);s=t.readInt(!0)}for(o=0;o<s;o++)for(var h=t.readInt(!0),l=0,u=t.readInt(!0);l<u;l++){var c=t.readStringRef(),p=this.readAttachment(t,e,r,h,c,n);null!=p&&r.setAttachment(h,c,p)}return r},G.prototype.readAttachment=function(t,e,i,n,r,s){var o=this.scale,a=t.readStringRef();null==a&&(a=r);r=t.readByte();switch(G.AttachmentTypeValues[r]){case H.AttachmentType.Region:var h=t.readStringRef(),l=t.readFloat(),u=t.readFloat(),c=t.readFloat(),p=t.readFloat(),d=t.readFloat(),_=t.readFloat(),f=t.readFloat(),m=t.readInt32();null==h&&(h=a);var y=this.attachmentLoader.newRegionAttachment(i,a,h);return null==y?null:(y.path=h,y.x=u*o,y.y=c*o,y.scaleX=p,y.scaleY=d,y.rotation=l,y.width=_*o,y.height=f*o,H.Color.rgba8888ToColor(y.color,m),y);case H.AttachmentType.BoundingBox:var g=t.readInt(!0),v=this.readVertices(t,g),w=(m=s?t.readInt32():0,this.attachmentLoader.newBoundingBoxAttachment(i,a));return null==w?null:(w.worldVerticesLength=g<<1,w.vertices=v.vertices,w.bones=v.bones,s&&H.Color.rgba8888ToColor(w.color,m),w);case H.AttachmentType.Mesh:h=t.readStringRef(),m=t.readInt32(),g=t.readInt(!0);var y=this.readFloatArray(t,g<<1,1),w=this.readShortArray(t),x=(v=this.readVertices(t,g),t.readInt(!0)),b=null,_=0,f=0;return s&&(b=this.readShortArray(t),_=t.readFloat(),f=t.readFloat()),null==h&&(h=a),null==($=this.attachmentLoader.newMeshAttachment(i,a,h))?null:($.path=h,H.Color.rgba8888ToColor($.color,m),$.bones=v.bones,$.vertices=v.vertices,$.worldVerticesLength=g<<1,$.triangles=w,$.regionUVs=new Float32Array(y),$.hullLength=x<<1,s&&($.edges=b,$.width=_*o,$.height=f*o),$);case H.AttachmentType.LinkedMesh:h=t.readStringRef(),m=t.readInt32();var x=t.readStringRef(),b=t.readStringRef(),E=t.readBoolean();return f=_=0,s&&(_=t.readFloat(),f=t.readFloat()),null==h&&(h=a),null==($=this.attachmentLoader.newMeshAttachment(i,a,h))?null:($.path=h,H.Color.rgba8888ToColor($.color,m),s&&($.width=_*o,$.height=f*o),this.linkedMeshes.push(new M($,x,n,b,E)),$);case H.AttachmentType.Path:for(var E=t.readBoolean(),$=t.readBoolean(),A=(g=t.readInt(!0),v=this.readVertices(t,g),H.Utils.newArray(g/3,0)),S=0,T=A.length;S<T;S++)A[S]=t.readFloat()*o;return m=s?t.readInt32():0,null==(h=this.attachmentLoader.newPathAttachment(i,a))?null:(h.closed=E,h.constantSpeed=$,h.worldVerticesLength=g<<1,h.vertices=v.vertices,h.bones=v.bones,h.lengths=A,s&&H.Color.rgba8888ToColor(h.color,m),h);case H.AttachmentType.Point:l=t.readFloat(),u=t.readFloat(),c=t.readFloat(),m=s?t.readInt32():0;var C=this.attachmentLoader.newPointAttachment(i,a);return null==C?null:(C.x=u*o,C.y=c*o,C.rotation=l,s&&H.Color.rgba8888ToColor(C.color,m),C);case H.AttachmentType.Clipping:l=t.readInt(!0),C=(g=t.readInt(!0),v=this.readVertices(t,g),m=s?t.readInt32():0,this.attachmentLoader.newClippingAttachment(i,a));return null==C?null:(C.endSlot=e.slots[l],C.worldVerticesLength=g<<1,C.vertices=v.vertices,C.bones=v.bones,s&&H.Color.rgba8888ToColor(C.color,m),C)}return null},G.prototype.readVertices=function(t,e){var i=e<<1,n=new u,r=this.scale;if(!t.readBoolean())return n.vertices=this.readFloatArray(t,i,r),n;for(var s=new Array,o=new Array,a=0;a<e;a++){var h=t.readInt(!0);o.push(h);for(var l=0;l<h;l++)o.push(t.readInt(!0)),s.push(t.readFloat()*r),s.push(t.readFloat()*r),s.push(t.readFloat())}return n.vertices=H.Utils.toFloatArray(s),n.bones=o,n},G.prototype.readFloatArray=function(t,e,i){var n=new Array(e);if(1==i)for(var r=0;r<e;r++)n[r]=t.readFloat();else for(r=0;r<e;r++)n[r]=t.readFloat()*i;return n},G.prototype.readShortArray=function(t){for(var e=t.readInt(!0),i=new Array(e),n=0;n<e;n++)i[n]=t.readShort();return i},G.prototype.readAnimation=function(t,e,i){for(var n=new Array,r=this.scale,s=0,o=new H.Color,a=new H.Color,h=0,l=t.readInt(!0);h<l;h++)for(var u=t.readInt(!0),c=0,p=t.readInt(!0);c<p;c++){var d=t.readByte(),_=t.readInt(!0);switch(d){case G.SLOT_ATTACHMENT:(g=new H.AttachmentTimeline(_)).slotIndex=u;for(var f=0;f<_;f++)g.setFrame(f,t.readFloat(),t.readStringRef());n.push(g),s=Math.max(s,g.frames[_-1]);break;case G.SLOT_COLOR:for((g=new H.ColorTimeline(_)).slotIndex=u,f=0;f<_;f++){var m=t.readFloat();H.Color.rgba8888ToColor(o,t.readInt32()),g.setFrame(f,m,o.r,o.g,o.b,o.a),f<_-1&&this.readCurve(t,f,g)}n.push(g),s=Math.max(s,g.frames[(_-1)*H.ColorTimeline.ENTRIES]);break;case G.SLOT_TWO_COLOR:for((g=new H.TwoColorTimeline(_)).slotIndex=u,f=0;f<_;f++)m=t.readFloat(),H.Color.rgba8888ToColor(o,t.readInt32()),H.Color.rgb888ToColor(a,t.readInt32()),g.setFrame(f,m,o.r,o.g,o.b,o.a,a.r,a.g,a.b),f<_-1&&this.readCurve(t,f,g);n.push(g),s=Math.max(s,g.frames[(_-1)*H.TwoColorTimeline.ENTRIES])}}for(h=0,l=t.readInt(!0);h<l;h++)for(var y=t.readInt(!0),c=0,p=t.readInt(!0);c<p;c++)switch(d=t.readByte(),_=t.readInt(!0),d){case G.BONE_ROTATE:for((g=new H.RotateTimeline(_)).boneIndex=y,f=0;f<_;f++)g.setFrame(f,t.readFloat(),t.readFloat()),f<_-1&&this.readCurve(t,f,g);n.push(g),s=Math.max(s,g.frames[(_-1)*H.RotateTimeline.ENTRIES]);break;case G.BONE_TRANSLATE:case G.BONE_SCALE:case G.BONE_SHEAR:var g=void 0,v=1;for(d==G.BONE_SCALE?g=new H.ScaleTimeline(_):d==G.BONE_SHEAR?g=new H.ShearTimeline(_):(g=new H.TranslateTimeline(_),v=r),g.boneIndex=y,f=0;f<_;f++)g.setFrame(f,t.readFloat(),t.readFloat()*v,t.readFloat()*v),f<_-1&&this.readCurve(t,f,g);n.push(g),s=Math.max(s,g.frames[(_-1)*H.TranslateTimeline.ENTRIES])}for(h=0,l=t.readInt(!0);h<l;h++){var w=t.readInt(!0),_=t.readInt(!0);for((g=new H.IkConstraintTimeline(_)).ikConstraintIndex=w,f=0;f<_;f++)g.setFrame(f,t.readFloat(),t.readFloat(),t.readFloat()*r,t.readByte(),t.readBoolean(),t.readBoolean()),f<_-1&&this.readCurve(t,f,g);n.push(g),s=Math.max(s,g.frames[(_-1)*H.IkConstraintTimeline.ENTRIES])}for(h=0,l=t.readInt(!0);h<l;h++){for(w=t.readInt(!0),_=t.readInt(!0),(g=new H.TransformConstraintTimeline(_)).transformConstraintIndex=w,f=0;f<_;f++)g.setFrame(f,t.readFloat(),t.readFloat(),t.readFloat(),t.readFloat(),t.readFloat()),f<_-1&&this.readCurve(t,f,g);n.push(g),s=Math.max(s,g.frames[(_-1)*H.TransformConstraintTimeline.ENTRIES])}for(h=0,l=t.readInt(!0);h<l;h++){w=t.readInt(!0);var x=i.pathConstraints[w];for(c=0,p=t.readInt(!0);c<p;c++)switch(d=t.readByte(),_=t.readInt(!0),d){case G.PATH_POSITION:case G.PATH_SPACING:for(g=void 0,v=1,d==G.PATH_SPACING?(g=new H.PathConstraintSpacingTimeline(_),x.spacingMode!=H.SpacingMode.Length&&x.spacingMode!=H.SpacingMode.Fixed||(v=r)):(g=new H.PathConstraintPositionTimeline(_),x.positionMode==H.PositionMode.Fixed&&(v=r)),g.pathConstraintIndex=w,f=0;f<_;f++)g.setFrame(f,t.readFloat(),t.readFloat()*v),f<_-1&&this.readCurve(t,f,g);n.push(g),s=Math.max(s,g.frames[(_-1)*H.PathConstraintPositionTimeline.ENTRIES]);break;case G.PATH_MIX:for((g=new H.PathConstraintMixTimeline(_)).pathConstraintIndex=w,f=0;f<_;f++)g.setFrame(f,t.readFloat(),t.readFloat(),t.readFloat()),f<_-1&&this.readCurve(t,f,g);n.push(g),s=Math.max(s,g.frames[(_-1)*H.PathConstraintMixTimeline.ENTRIES])}}for(h=0,l=t.readInt(!0);h<l;h++){var b=i.skins[t.readInt(!0)];for(c=0,p=t.readInt(!0);c<p;c++){u=t.readInt(!0);for(var E=0,$=t.readInt(!0);E<$;E++){var A=b.getAttachment(u,t.readStringRef()),S=null!=A.bones,T=A.vertices,C=S?T.length/3*2:T.length;for(_=t.readInt(!0),(g=new H.DeformTimeline(_)).slotIndex=u,g.attachment=A,f=0;f<_;f++){m=t.readFloat();var M=void 0,I=t.readInt(!0);if(0==I)M=S?H.Utils.newFloatArray(C):T;else{M=H.Utils.newFloatArray(C);var P=t.readInt(!0);if(I+=P,1==r)for(var O=P;O<I;O++)M[O]=t.readFloat();else for(O=P;O<I;O++)M[O]=t.readFloat()*r;if(!S){O=0;for(var D=M.length;O<D;O++)M[O]+=T[O]}}g.setFrame(f,m,M),f<_-1&&this.readCurve(t,f,g)}n.push(g),s=Math.max(s,g.frames[_-1])}}}var R=t.readInt(!0);if(0<R){g=new H.DrawOrderTimeline(R);for(var L=i.slots.length,h=0;h<R;h++){m=t.readFloat();var k=t.readInt(!0),F=H.Utils.newArray(L,0);for(c=L-1;0<=c;c--)F[c]=-1;var N=H.Utils.newArray(L-k,0),B=0,U=0;for(c=0;c<k;c++){for(u=t.readInt(!0);B!=u;)N[U++]=B++;F[B+t.readInt(!0)]=B++}for(;B<L;)N[U++]=B++;for(c=L-1;0<=c;c--)-1==F[c]&&(F[c]=N[--U]);g.setFrame(h,m,F)}n.push(g),s=Math.max(s,g.frames[R-1])}var X=t.readInt(!0);if(0<X){for(g=new H.EventTimeline(X),h=0;h<X;h++){m=t.readFloat();var j=i.events[t.readInt(!0)],V=new H.Event(m,j);V.intValue=t.readInt(!1),V.floatValue=t.readFloat(),V.stringValue=t.readBoolean()?t.readString():j.stringValue,null!=V.data.audioPath&&(V.volume=t.readFloat(),V.balance=t.readFloat()),g.setFrame(h,V)}n.push(g),s=Math.max(s,g.frames[X-1])}return new H.Animation(e,n,s)},G.prototype.readCurve=function(t,e,i){switch(t.readByte()){case G.CURVE_STEPPED:i.setStepped(e);break;case G.CURVE_BEZIER:this.setCurve(i,e,t.readFloat(),t.readFloat(),t.readFloat(),t.readFloat())}},G.prototype.setCurve=function(t,e,i,n,r,s){t.setCurve(e,i,n,r,s)},G.AttachmentTypeValues=[0,1,2,3,4,5,6],G.TransformModeValues=[H.TransformMode.Normal,H.TransformMode.OnlyTranslation,H.TransformMode.NoRotationOrReflection,H.TransformMode.NoScale,H.TransformMode.NoScaleOrReflection],G.PositionModeValues=[H.PositionMode.Fixed,H.PositionMode.Percent],G.SpacingModeValues=[H.SpacingMode.Length,H.SpacingMode.Fixed,H.SpacingMode.Percent],G.RotateModeValues=[H.RotateMode.Tangent,H.RotateMode.Chain,H.RotateMode.ChainScale],G.BlendModeValues=[H.BlendMode.Normal,H.BlendMode.Additive,H.BlendMode.Multiply,H.BlendMode.Screen],G.BONE_ROTATE=0,G.BONE_TRANSLATE=1,G.BONE_SCALE=2,G.BONE_SHEAR=3,G.SLOT_ATTACHMENT=0,G.SLOT_COLOR=1,G.SLOT_TWO_COLOR=2,G.PATH_POSITION=0,G.PATH_SPACING=1,G.PATH_MIX=2,G.CURVE_LINEAR=0,G.CURVE_STEPPED=1,G.CURVE_BEZIER=2,G);function G(t){this.scale=1,this.linkedMeshes=new Array,this.attachmentLoader=t}H.SkeletonBinary=t;var m=(e.prototype.readByte=function(){return this.buffer.getInt8(this.index++)},e.prototype.readShort=function(){var t=this.buffer.getInt16(this.index);return this.index+=2,t},e.prototype.readInt32=function(){var t=this.buffer.getInt32(this.index);return this.index+=4,t},e.prototype.readInt=function(t){var e=this.readByte(),i=127&e;return 0!=(128&e)&&(i|=(127&(e=this.readByte()))<<7,0!=(128&e)&&(i|=(127&(e=this.readByte()))<<14,0!=(128&e)&&(i|=(127&(e=this.readByte()))<<21,0!=(128&e)&&(i|=(127&this.readByte())<<28)))),t?i:i>>>1^-(1&i)},e.prototype.readStringRef=function(){var t=this.readInt(!0);return 0==t?null:this.strings[t-1]},e.prototype.readString=function(){var t=this.readInt(!0);switch(t){case 0:return null;case 1:return""}t--;for(var e="",i=0;i<t;){var n=this.readByte();switch(n>>4){case 12:case 13:e+=String.fromCharCode((31&n)<<6|63&this.readByte()),i+=2;break;case 14:e+=String.fromCharCode((15&n)<<12|(63&this.readByte())<<6|63&this.readByte()),i+=3;break;default:e+=String.fromCharCode(n),i++}}return e},e.prototype.readFloat=function(){var t=this.buffer.getFloat32(this.index);return this.index+=4,t},e.prototype.readBoolean=function(){return 0!=this.readByte()},e),M=function(t,e,i,n,r){this.mesh=t,this.skin=e,this.slotIndex=i,this.parent=n,this.inheritDeform=r},u=function(t,e){void 0===t&&(t=null),void 0===e&&(e=null),this.bones=t,this.vertices=e};function e(t,e,i,n){void 0===e&&(e=new Array),void 0===i&&(i=0),void 0===n&&(n=new DataView(t.buffer)),this.strings=e,this.index=i,this.buffer=n}}((k=s=s||{}).core||(k.core={})),L=s=s||{},S=L.core||(L.core={}),nt.prototype.update=function(t,e){if(null==t)throw new Error("skeleton cannot be null.");var i=this.boundingBoxes,n=this.polygons,r=this.polygonPool,s=t.slots,o=s.length;i.length=0,r.freeAll(n);for(var a=n.length=0;a<o;a++){var h,l,u=s[a];!u.bone.active||(l=u.getAttachment())instanceof S.BoundingBoxAttachment&&(h=l,i.push(h),(l=r.obtain()).length!=h.worldVerticesLength&&(l=S.Utils.newFloatArray(h.worldVerticesLength)),n.push(l),h.computeWorldVertices(u,0,h.worldVerticesLength,l,0,2))}e?this.aabbCompute():(this.minX=Number.POSITIVE_INFINITY,this.minY=Number.POSITIVE_INFINITY,this.maxX=Number.NEGATIVE_INFINITY,this.maxY=Number.NEGATIVE_INFINITY)},nt.prototype.aabbCompute=function(){for(var t=Number.POSITIVE_INFINITY,e=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY,n=Number.NEGATIVE_INFINITY,r=this.polygons,s=0,o=r.length;s<o;s++)for(var a=r[s],h=a,l=0,u=a.length;l<u;l+=2)var c=h[l],p=h[l+1],t=Math.min(t,c),e=Math.min(e,p),i=Math.max(i,c),n=Math.max(n,p);this.minX=t,this.minY=e,this.maxX=i,this.maxY=n},nt.prototype.aabbContainsPoint=function(t,e){return t>=this.minX&&t<=this.maxX&&e>=this.minY&&e<=this.maxY},nt.prototype.aabbIntersectsSegment=function(t,e,i,n){var r=this.minX,s=this.minY,o=this.maxX,a=this.maxY;if(t<=r&&i<=r||e<=s&&n<=s||o<=t&&o<=i||a<=e&&a<=n)return!1;n=(n-e)/(i-t),i=n*(r-t)+e;if(s<i&&i<a)return!0;if((i=n*(o-t)+e)>s&&i<a)return!0;s=(s-e)/n+t;return r<s&&s<o||(s=(a-e)/n+t)>r&&s<o},nt.prototype.aabbIntersectsSkeleton=function(t){return this.minX<t.maxX&&this.maxX>t.minX&&this.minY<t.maxY&&this.maxY>t.minY},nt.prototype.containsPoint=function(t,e){for(var i=this.polygons,n=0,r=i.length;n<r;n++)if(this.containsPointPolygon(i[n],t,e))return this.boundingBoxes[n];return null},nt.prototype.containsPointPolygon=function(t,e,i){for(var n=t,r=t.length,s=r-2,o=!1,a=0;a<r;a+=2){var h,l=n[a+1],u=n[s+1];!(l<i&&i<=u||u<i&&i<=l)||(h=n[a])+(i-l)/(u-l)*(n[s]-h)<e&&(o=!o),s=a}return o},nt.prototype.intersectsSegment=function(t,e,i,n){for(var r=this.polygons,s=0,o=r.length;s<o;s++)if(this.intersectsSegmentPolygon(r[s],t,e,i,n))return this.boundingBoxes[s];return null},nt.prototype.intersectsSegmentPolygon=function(t,e,i,n,r){for(var s=t,o=t.length,a=e-n,h=i-r,l=e*r-i*n,u=s[o-2],c=s[o-1],p=0;p<o;p+=2){var d=s[p],_=s[p+1],f=u*_-c*d,m=u-d,y=c-_,g=a*y-h*m,m=(l*m-a*f)/g;if((u<=m&&m<=d||d<=m&&m<=u)&&(e<=m&&m<=n||n<=m&&m<=e)){g=(l*y-h*f)/g;if((c<=g&&g<=_||_<=g&&g<=c)&&(i<=g&&g<=r||r<=g&&g<=i))return!0}u=d,c=_}return!1},nt.prototype.getPolygon=function(t){if(null==t)throw new Error("boundingBox cannot be null.");t=this.boundingBoxes.indexOf(t);return-1==t?null:this.polygons[t]},nt.prototype.getWidth=function(){return this.maxX-this.minX},nt.prototype.getHeight=function(){return this.maxY-this.minY},L=nt,S.SkeletonBounds=L,k=s=s||{},G=k.core||(k.core={}),it.prototype.clipStart=function(t,e){if(null!=this.clipAttachment)return 0;var i=(this.clipAttachment=e).worldVerticesLength,n=G.Utils.setArraySize(this.clippingPolygon,i);e.computeWorldVertices(t,0,i,n,0,2);n=this.clippingPolygon;it.makeClockwise(n);for(var r=this.clippingPolygons=this.triangulator.decompose(n,this.triangulator.triangulate(n)),s=0,o=r.length;s<o;s++){var a=r[s];it.makeClockwise(a),a.push(a[0]),a.push(a[1])}return r.length},it.prototype.clipEndWithSlot=function(t){null!=this.clipAttachment&&this.clipAttachment.endSlot==t.data&&this.clipEnd()},it.prototype.clipEnd=function(){null!=this.clipAttachment&&(this.clipAttachment=null,this.clippingPolygons=null,this.clippedVertices.length=0,this.clippedTriangles.length=0,this.clippingPolygon.length=0)},it.prototype.isClipping=function(){return null!=this.clipAttachment},it.prototype.clipTriangles=function(t,e,i,n,r,s,o,a){var h=this.clipOutput,l=this.clippedVertices,u=this.clippedTriangles,c=this.clippingPolygons,p=this.clippingPolygons.length,d=a?12:8,_=0;l.length=0;t:for(var f=u.length=0;f<n;f+=3)for(var m=i[f]<<1,y=t[m],g=t[1+m],v=r[m],w=r[1+m],x=t[m=i[f+1]<<1],b=t[1+m],E=r[m],$=r[1+m],A=t[m=i[f+2]<<1],S=t[1+m],T=r[m],C=r[1+m],M=0;M<p;M++){var I=l.length;if(!this.clip(y,g,x,b,A,S,c[M],h)){(B=G.Utils.setArraySize(l,I+3*d))[I]=y,B[I+1]=g,B[I+2]=s.r,B[I+3]=s.g,B[I+4]=s.b,B[I+5]=s.a,a?(B[I+6]=v,B[I+7]=w,B[I+8]=o.r,B[I+9]=o.g,B[I+10]=o.b,B[I+11]=o.a,B[I+12]=x,B[I+13]=b,B[I+14]=s.r,B[I+15]=s.g,B[I+16]=s.b,B[I+17]=s.a,B[I+18]=E,B[I+19]=$,B[I+20]=o.r,B[I+21]=o.g,B[I+22]=o.b,B[I+23]=o.a,B[I+24]=A,B[I+25]=S,B[I+26]=s.r,B[I+27]=s.g,B[I+28]=s.b,B[I+29]=s.a,B[I+30]=T,B[I+31]=C,B[I+32]=o.r,B[I+33]=o.g,B[I+34]=o.b,B[I+35]=o.a):(B[I+6]=v,B[I+7]=w,B[I+8]=x,B[I+9]=b,B[I+10]=s.r,B[I+11]=s.g,B[I+12]=s.b,B[I+13]=s.a,B[I+14]=E,B[I+15]=$,B[I+16]=A,B[I+17]=S,B[I+18]=s.r,B[I+19]=s.g,B[I+20]=s.b,B[I+21]=s.a,B[I+22]=T,B[I+23]=C),I=u.length,(H=G.Utils.setArraySize(u,I+3))[I]=_,H[I+1]=_+1,H[I+2]=_+2,_+=3;continue t}var P=h.length;if(0!=P){for(var O=b-S,D=A-x,R=y-A,L=S-g,k=1/(O*R+D*(g-S)),F=P>>1,N=this.clipOutput,B=G.Utils.setArraySize(l,I+F*d),U=0;U<P;U+=2){var X=N[U],j=N[U+1];B[I]=X,B[I+1]=j,B[I+2]=s.r,B[I+3]=s.g,B[I+4]=s.b,B[I+5]=s.a;var V=X-A,X=j-S,j=(O*V+D*X)*k,V=(L*V+R*X)*k,X=1-j-V;B[I+6]=v*j+E*V+T*X,B[I+7]=w*j+$*V+C*X,a&&(B[I+8]=o.r,B[I+9]=o.g,B[I+10]=o.b,B[I+11]=o.a),I+=d}I=u.length;var H=G.Utils.setArraySize(u,I+3*(F-2));for(F--,U=1;U<F;U++)H[I]=_,H[I+1]=_+U,H[I+2]=_+U+1,I+=3;_+=1+F}}},it.prototype.clip=function(t,e,i,n,r,s,o,a){var h=a,l=!1,u=null;2<=o.length%4?(u=a,a=this.scratch):u=this.scratch,u.length=0,u.push(t),u.push(e),u.push(i),u.push(n),u.push(r),u.push(s),u.push(t),u.push(e),a.length=0;for(var c=o,p=o.length-4,d=0;;d+=2){for(var _=c[d],f=c[d+1],m=c[d+2],y=c[d+3],g=_-m,v=f-y,w=u,x=u.length-2,b=a.length,E=0;E<x;E+=2){var $,A,S=w[E],T=w[E+1],C=w[E+2],M=w[E+3],I=0<g*(M-y)-v*(C-m);if(0<g*(T-y)-v*(S-m)){if(I){a.push(C),a.push(M);continue}var P=((A=C-S)*(f-T)-($=M-T)*(_-S))/($*(m-_)-A*(y-f));a.push(_+(m-_)*P),a.push(f+(y-f)*P)}else I&&(P=((A=C-S)*(f-T)-($=M-T)*(_-S))/($*(m-_)-A*(y-f)),a.push(_+(m-_)*P),a.push(f+(y-f)*P),a.push(C),a.push(M));l=!0}if(b==a.length)return!(h.length=0);if(a.push(a[0]),a.push(a[1]),d==p)break;b=a;(a=u).length=0,u=b}if(h!=a){d=h.length=0;for(var O=a.length-2;d<O;d++)h[d]=a[d]}else h.length=h.length-2;return l},it.makeClockwise=function(t){for(var e,i,n,r=t,t=t.length,s=r[t-2]*r[1]-r[0]*r[t-1],o=0,a=t-3;o<a;o+=2)e=r[o],i=r[o+1],n=r[o+2],s+=e*r[o+3]-n*i;if(!(s<0)){o=0;for(var h=t-2,a=t>>1;o<a;o+=2){var l=r[o],u=r[o+1],c=h-o;r[o]=r[c],r[o+1]=r[1+c],r[c]=l,r[1+c]=u}}},k=it,G.SkeletonClipping=k,L=s=s||{},k=L.core||(L.core={}),et.prototype.findBone=function(t){if(null==t)throw new Error("boneName cannot be null.");for(var e=this.bones,i=0,n=e.length;i<n;i++){var r=e[i];if(r.name==t)return r}return null},et.prototype.findBoneIndex=function(t){if(null==t)throw new Error("boneName cannot be null.");for(var e=this.bones,i=0,n=e.length;i<n;i++)if(e[i].name==t)return i;return-1},et.prototype.findSlot=function(t){if(null==t)throw new Error("slotName cannot be null.");for(var e=this.slots,i=0,n=e.length;i<n;i++){var r=e[i];if(r.name==t)return r}return null},et.prototype.findSlotIndex=function(t){if(null==t)throw new Error("slotName cannot be null.");for(var e=this.slots,i=0,n=e.length;i<n;i++)if(e[i].name==t)return i;return-1},et.prototype.findSkin=function(t){if(null==t)throw new Error("skinName cannot be null.");for(var e=this.skins,i=0,n=e.length;i<n;i++){var r=e[i];if(r.name==t)return r}return null},et.prototype.findEvent=function(t){if(null==t)throw new Error("eventDataName cannot be null.");for(var e=this.events,i=0,n=e.length;i<n;i++){var r=e[i];if(r.name==t)return r}return null},et.prototype.findAnimation=function(t){if(null==t)throw new Error("animationName cannot be null.");for(var e=this.animations,i=0,n=e.length;i<n;i++){var r=e[i];if(r.name==t)return r}return null},et.prototype.findIkConstraint=function(t){if(null==t)throw new Error("constraintName cannot be null.");for(var e=this.ikConstraints,i=0,n=e.length;i<n;i++){var r=e[i];if(r.name==t)return r}return null},et.prototype.findTransformConstraint=function(t){if(null==t)throw new Error("constraintName cannot be null.");for(var e=this.transformConstraints,i=0,n=e.length;i<n;i++){var r=e[i];if(r.name==t)return r}return null},et.prototype.findPathConstraint=function(t){if(null==t)throw new Error("constraintName cannot be null.");for(var e=this.pathConstraints,i=0,n=e.length;i<n;i++){var r=e[i];if(r.name==t)return r}return null},et.prototype.findPathConstraintIndex=function(t){if(null==t)throw new Error("pathConstraintName cannot be null.");for(var e=this.pathConstraints,i=0,n=e.length;i<n;i++)if(e[i].name==t)return i;return-1},L=et,k.SkeletonData=L,function(tt){tt.FAIL_ON_NON_EXISTING_SKIN=!1;var t=(O.prototype.readSkeletonData=function(t){var e=this.scale,i=new tt.SkeletonData,n="string"==typeof t?JSON.parse(t):t,r=n.skeleton;if(null!=r&&(i.hash=r.hash,i.version=r.spine,"3.8"!==r.spine.substr(0,3)&&(t="PixiJS Spine plugin supports only format for Spine 3.8. Your model has version "+r.spine+". Please look in pixi-spine repository README for another branch.",console.error(t)),i.x=r.x,i.y=r.y,i.width=r.width,i.height=r.height,i.fps=r.fps,i.imagesPath=r.images),n.bones)for(var s=0;s<n.bones.length;s++){var o=n.bones[s],a=null,h=this.getValue(o,"parent",null);if(null!=h&&null==(a=i.findBone(h)))throw new Error("Parent bone not found: "+h);(p=new tt.BoneData(i.bones.length,o.name,a)).length=this.getValue(o,"length",0)*e,p.x=this.getValue(o,"x",0)*e,p.y=this.getValue(o,"y",0)*e,p.rotation=this.getValue(o,"rotation",0),p.scaleX=this.getValue(o,"scaleX",1),p.scaleY=this.getValue(o,"scaleY",1),p.shearX=this.getValue(o,"shearX",0),p.shearY=this.getValue(o,"shearY",0),p.transformMode=O.transformModeFromString(this.getValue(o,"transform","normal")),p.skinRequired=this.getValue(o,"skin",!1),i.bones.push(p)}if(n.slots)for(s=0;s<n.slots.length;s++){var l=(E=n.slots[s]).name,u=E.bone,c=i.findBone(u);if(null==c)throw new Error("Slot bone not found: "+u);var p=new tt.SlotData(i.slots.length,l,c),c=this.getValue(E,"color",null);null!=c&&p.color.setFromString(c);c=this.getValue(E,"dark",null);null!=c&&(p.darkColor=new tt.Color(1,1,1,1),p.darkColor.setFromString(c)),p.attachmentName=this.getValue(E,"attachment",null),p.blendMode=O.blendModeFromString(this.getValue(E,"blend","normal")),i.slots.push(p)}if(n.ik)for(s=0;s<n.ik.length;s++){var d=n.ik[s];(p=new tt.IkConstraintData(d.name)).order=this.getValue(d,"order",0),p.skinRequired=this.getValue(d,"skin",!1);for(var _=0;_<d.bones.length;_++){if(u=d.bones[_],null==(m=i.findBone(u)))throw new Error("IK bone not found: "+u);p.bones.push(m)}var f=d.target;if(p.target=i.findBone(f),null==p.target)throw new Error("IK target bone not found: "+f);p.mix=this.getValue(d,"mix",1),p.softness=this.getValue(d,"softness",0)*e,p.bendDirection=this.getValue(d,"bendPositive",!0)?1:-1,p.compress=this.getValue(d,"compress",!1),p.stretch=this.getValue(d,"stretch",!1),p.uniform=this.getValue(d,"uniform",!1),i.ikConstraints.push(p)}if(n.transform)for(s=0;s<n.transform.length;s++){for(d=n.transform[s],(p=new tt.TransformConstraintData(d.name)).order=this.getValue(d,"order",0),p.skinRequired=this.getValue(d,"skin",!1),_=0;_<d.bones.length;_++){if(u=d.bones[_],null==(m=i.findBone(u)))throw new Error("Transform constraint bone not found: "+u);p.bones.push(m)}if(f=d.target,p.target=i.findBone(f),null==p.target)throw new Error("Transform constraint target bone not found: "+f);p.local=this.getValue(d,"local",!1),p.relative=this.getValue(d,"relative",!1),p.offsetRotation=this.getValue(d,"rotation",0),p.offsetX=this.getValue(d,"x",0)*e,p.offsetY=this.getValue(d,"y",0)*e,p.offsetScaleX=this.getValue(d,"scaleX",0),p.offsetScaleY=this.getValue(d,"scaleY",0),p.offsetShearY=this.getValue(d,"shearY",0),p.rotateMix=this.getValue(d,"rotateMix",1),p.translateMix=this.getValue(d,"translateMix",1),p.scaleMix=this.getValue(d,"scaleMix",1),p.shearMix=this.getValue(d,"shearMix",1),i.transformConstraints.push(p)}if(n.path)for(s=0;s<n.path.length;s++){for(d=n.path[s],(p=new tt.PathConstraintData(d.name)).order=this.getValue(d,"order",0),p.skinRequired=this.getValue(d,"skin",!1),_=0;_<d.bones.length;_++){if(u=d.bones[_],null==(m=i.findBone(u)))throw new Error("Transform constraint bone not found: "+u);p.bones.push(m)}if(f=d.target,p.target=i.findSlot(f),null==p.target)throw new Error("Path target slot not found: "+f);p.positionMode=O.positionModeFromString(this.getValue(d,"positionMode","percent")),p.spacingMode=O.spacingModeFromString(this.getValue(d,"spacingMode","length")),p.rotateMode=O.rotateModeFromString(this.getValue(d,"rotateMode","tangent")),p.offsetRotation=this.getValue(d,"rotation",0),p.position=this.getValue(d,"position",0),p.positionMode==tt.PositionMode.Fixed&&(p.position*=e),p.spacing=this.getValue(d,"spacing",0),p.spacingMode!=tt.SpacingMode.Length&&p.spacingMode!=tt.SpacingMode.Fixed||(p.spacing*=e),p.rotateMix=this.getValue(d,"rotateMix",1),p.translateMix=this.getValue(d,"translateMix",1),i.pathConstraints.push(p)}if(n.skins)for(s=0;s<n.skins.length;s++){var m,y,g=n.skins[s],v=new tt.Skin(g.name);if(g.bones)for(var w=0;w<g.bones.length;w++){if(null==(m=i.findBone(g.bones[w])))throw new Error("Skin bone not found: "+g.bones[s]);v.bones.push(m)}if(g.ik)for(w=0;w<g.ik.length;w++){if(null==(y=i.findIkConstraint(g.ik[w])))throw new Error("Skin IK constraint not found: "+g.ik[s]);v.constraints.push(y)}if(g.transform)for(w=0;w<g.transform.length;w++){if(null==(y=i.findTransformConstraint(g.transform[w])))throw new Error("Skin transform constraint not found: "+g.transform[s]);v.constraints.push(y)}if(g.path)for(w=0;w<g.path.length;w++){if(null==(y=i.findPathConstraint(g.path[w])))throw new Error("Skin path constraint not found: "+g.path[s]);v.constraints.push(y)}for(l in g.attachments){var x=i.findSlot(l);if(null==x)throw new Error("Slot not found: "+l);var b,E=g.attachments[l];for(b in E){var $=this.readAttachment(E[b],v,x.index,b,i);null!=$&&v.setAttachment(x.index,b,$)}}i.skins.push(v),"default"==v.name&&(i.defaultSkin=v)}s=0;for(var A=this.linkedMeshes.length;s<A;s++){var S=this.linkedMeshes[s];if(null==(v=null==S.skin?i.defaultSkin:i.findSkin(S.skin)))throw new Error("Skin not found: "+S.skin);var T=v.getAttachment(S.slotIndex,S.parent);if(null==T)throw new Error("Parent mesh not found: "+S.parent);S.mesh.deformAttachment=S.inheritDeform?T:S.mesh,S.mesh.setParentMesh(T)}if(this.linkedMeshes.length=0,n.events)for(var C in n.events){var M=n.events[C];(p=new tt.EventData(C)).intValue=this.getValue(M,"int",0),p.floatValue=this.getValue(M,"float",0),p.stringValue=this.getValue(M,"string",""),p.audioPath=this.getValue(M,"audio",null),null!=p.audioPath&&(p.volume=this.getValue(M,"volume",1),p.balance=this.getValue(M,"balance",0)),i.events.push(p)}if(n.animations)for(var I in n.animations){var P=n.animations[I];this.readAnimation(P,I,i)}return i},O.prototype.readAttachment=function(t,e,i,n,r){var s=this.scale;switch(n=this.getValue(t,"name",n),this.getValue(t,"type","region")){case"region":var o=this.getValue(t,"path",n),a=this.attachmentLoader.newRegionAttachment(e,n,o);return null==a?null:(a.path=o,a.x=this.getValue(t,"x",0)*s,a.y=this.getValue(t,"y",0)*s,a.scaleX=this.getValue(t,"scaleX",1),a.scaleY=this.getValue(t,"scaleY",1),a.rotation=this.getValue(t,"rotation",0),a.width=t.width*s,a.height=t.height*s,null!=(_=this.getValue(t,"color",null))&&a.color.setFromString(_),a);case"boundingbox":var h=this.attachmentLoader.newBoundingBoxAttachment(e,n);return null==h?null:(this.readVertices(t,h,t.vertexCount<<1),null!=(_=this.getValue(t,"color",null))&&h.color.setFromString(_),h);case"mesh":case"linkedmesh":o=this.getValue(t,"path",n);var l=this.attachmentLoader.newMeshAttachment(e,n,o);if(null==l)return null;l.path=o,null!=(_=this.getValue(t,"color",null))&&l.color.setFromString(_),l.width=this.getValue(t,"width",0)*s,l.height=this.getValue(t,"height",0)*s;h=this.getValue(t,"parent",null);if(null!=h)return this.linkedMeshes.push(new f(l,this.getValue(t,"skin",null),i,h,this.getValue(t,"deform",!0))),l;h=t.uvs;return this.readVertices(t,l,h.length),l.triangles=t.triangles,l.regionUVs=new Float32Array(h),l.edges=this.getValue(t,"edges",null),l.hullLength=2*this.getValue(t,"hull",0),l;case"path":if(null==(o=this.attachmentLoader.newPathAttachment(e,n)))return null;o.closed=this.getValue(t,"closed",!1),o.constantSpeed=this.getValue(t,"constantSpeed",!0);var u=t.vertexCount;this.readVertices(t,o,u<<1);for(var c=tt.Utils.newArray(u/3,0),p=0;p<t.lengths.length;p++)c[p]=t.lengths[p]*s;return o.lengths=c,null!=(_=this.getValue(t,"color",null))&&o.color.setFromString(_),o;case"point":var d=this.attachmentLoader.newPointAttachment(e,n);return null==d?null:(d.x=this.getValue(t,"x",0)*s,d.y=this.getValue(t,"y",0)*s,d.rotation=this.getValue(t,"rotation",0),null!=(_=this.getValue(t,"color",null))&&d.color.setFromString(_),d);case"clipping":l=this.attachmentLoader.newClippingAttachment(e,n);if(null==l)return null;var _,o=this.getValue(t,"end",null);if(null!=o){d=r.findSlot(o);if(null==d)throw new Error("Clipping end slot not found: "+o);l.endSlot=d}return u=t.vertexCount,this.readVertices(t,l,u<<1),null!=(_=this.getValue(t,"color",null))&&l.color.setFromString(_),l}return null},O.prototype.readVertices=function(t,e,i){var n=this.scale;e.worldVerticesLength=i;var r=t.vertices;if(i!=r.length){for(var s=new Array,o=new Array,a=0,h=r.length;a<h;){var l=r[a++];o.push(l);for(var u=a+4*l;a<u;a+=4)o.push(r[a]),s.push(r[a+1]*n),s.push(r[a+2]*n),s.push(r[a+3])}e.bones=o,e.vertices=tt.Utils.toFloatArray(s)}else{var c=tt.Utils.toFloatArray(r);if(1!=n)for(var a=0,h=r.length;a<h;a++)c[a]*=n;e.vertices=c}},O.prototype.readAnimation=function(t,e,i){var n=this.scale,r=new Array,s=0;if(t.slots)for(var o in t.slots){var a=t.slots[o];if(-1==(q=i.findSlotIndex(o)))throw new Error("Slot not found: "+o);for(P in a){var h=a[P];if("attachment"==P){(g=new tt.AttachmentTimeline(h.length)).slotIndex=q;for(var l=0,u=0;u<h.length;u++){var c=h[u];g.setFrame(l++,this.getValue(c,"time",0),c.name)}r.push(g),s=Math.max(s,g.frames[g.getFrameCount()-1])}else if("color"==P){for((g=new tt.ColorTimeline(h.length)).slotIndex=q,u=l=0;u<h.length;u++){c=h[u];var p=new tt.Color;p.setFromString(c.color||"ffffffff"),g.setFrame(l,this.getValue(c,"time",0),p.r,p.g,p.b,p.a),this.readCurve(c,g,l),l++}r.push(g),s=Math.max(s,g.frames[(g.getFrameCount()-1)*tt.ColorTimeline.ENTRIES])}else{if("twoColor"!=P)throw new Error("Invalid timeline type for a slot: "+P+" ("+o+")");for((g=new tt.TwoColorTimeline(h.length)).slotIndex=q,u=l=0;u<h.length;u++){c=h[u];var d=new tt.Color,_=new tt.Color;d.setFromString(c.light),_.setFromString(c.dark),g.setFrame(l,this.getValue(c,"time",0),d.r,d.g,d.b,d.a,_.r,_.g,_.b),this.readCurve(c,g,l),l++}r.push(g),s=Math.max(s,g.frames[(g.getFrameCount()-1)*tt.TwoColorTimeline.ENTRIES])}}}if(t.bones)for(var f in t.bones){var m=t.bones[f],y=i.findBoneIndex(f);if(-1==y)throw new Error("Bone not found: "+f);for(P in m)if(h=m[P],"rotate"===P){for((g=new tt.RotateTimeline(h.length)).boneIndex=y,u=l=0;u<h.length;u++)c=h[u],g.setFrame(l,this.getValue(c,"time",0),this.getValue(c,"angle",0)),this.readCurve(c,g,l),l++;r.push(g),s=Math.max(s,g.frames[(g.getFrameCount()-1)*tt.RotateTimeline.ENTRIES])}else{if("translate"!==P&&"scale"!==P&&"shear"!==P)throw new Error("Invalid timeline type for a bone: "+P+" ("+f+")");var g=null,v=1,w=0;for("scale"===P?(g=new tt.ScaleTimeline(h.length),w=1):"shear"===P?g=new tt.ShearTimeline(h.length):(g=new tt.TranslateTimeline(h.length),v=n),g.boneIndex=y,u=l=0;u<h.length;u++){c=h[u];var x=this.getValue(c,"x",w),b=this.getValue(c,"y",w);g.setFrame(l,this.getValue(c,"time",0),x*v,b*v),this.readCurve(c,g,l),l++}r.push(g),s=Math.max(s,g.frames[(g.getFrameCount()-1)*tt.TranslateTimeline.ENTRIES])}}if(t.ik)for(var E in t.ik){var $=t.ik[E],A=i.findIkConstraint(E);for((g=new tt.IkConstraintTimeline($.length)).ikConstraintIndex=i.ikConstraints.indexOf(A),u=l=0;u<$.length;u++)c=$[u],g.setFrame(l,this.getValue(c,"time",0),this.getValue(c,"mix",1),this.getValue(c,"softness",0)*n,this.getValue(c,"bendPositive",!0)?1:-1,this.getValue(c,"compress",!1),this.getValue(c,"stretch",!1)),this.readCurve(c,g,l),l++;r.push(g),s=Math.max(s,g.frames[(g.getFrameCount()-1)*tt.IkConstraintTimeline.ENTRIES])}if(t.transform)for(var E in t.transform){for($=t.transform[E],A=i.findTransformConstraint(E),(g=new tt.TransformConstraintTimeline($.length)).transformConstraintIndex=i.transformConstraints.indexOf(A),u=l=0;u<$.length;u++)c=$[u],g.setFrame(l,this.getValue(c,"time",0),this.getValue(c,"rotateMix",1),this.getValue(c,"translateMix",1),this.getValue(c,"scaleMix",1),this.getValue(c,"shearMix",1)),this.readCurve(c,g,l),l++;r.push(g),s=Math.max(s,g.frames[(g.getFrameCount()-1)*tt.TransformConstraintTimeline.ENTRIES])}if(t.path)for(var E in t.path){$=t.path[E];var S=i.findPathConstraintIndex(E);if(-1==S)throw new Error("Path constraint not found: "+E);var T=i.pathConstraints[S];for(P in $)if(h=$[P],"position"===P||"spacing"===P){for(g=null,v=1,"spacing"===P?(g=new tt.PathConstraintSpacingTimeline(h.length),T.spacingMode!=tt.SpacingMode.Length&&T.spacingMode!=tt.SpacingMode.Fixed||(v=n)):(g=new tt.PathConstraintPositionTimeline(h.length),T.positionMode==tt.PositionMode.Fixed&&(v=n)),g.pathConstraintIndex=S,u=l=0;u<h.length;u++)c=h[u],g.setFrame(l,this.getValue(c,"time",0),this.getValue(c,P,0)*v),this.readCurve(c,g,l),l++;r.push(g),s=Math.max(s,g.frames[(g.getFrameCount()-1)*tt.PathConstraintPositionTimeline.ENTRIES])}else if("mix"===P){for((g=new tt.PathConstraintMixTimeline(h.length)).pathConstraintIndex=S,u=l=0;u<h.length;u++)c=h[u],g.setFrame(l,this.getValue(c,"time",0),this.getValue(c,"rotateMix",1),this.getValue(c,"translateMix",1)),this.readCurve(c,g,l),l++;r.push(g),s=Math.max(s,g.frames[(g.getFrameCount()-1)*tt.PathConstraintMixTimeline.ENTRIES])}}if(t.deform)for(var C in t.deform){var M=t.deform[C],I=i.findSkin(C);if(null!=I)for(var o in M){if(a=M[o],-1==(q=i.findSlotIndex(o)))throw new Error("Slot not found: "+a.name);for(var P in a){h=a[P];var O=I.getAttachment(q,P);if(null==O)throw new Error("Deform attachment not found: "+h.name);var D=null!=O.bones,R=O.vertices,L=D?R.length/3*2:R.length;(g=new tt.DeformTimeline(h.length)).slotIndex=q,g.attachment=O;for(var k=l=0;k<h.length;k++){c=h[k];var F=void 0,N=this.getValue(c,"vertices",null);if(null==N)F=D?tt.Utils.newFloatArray(L):R;else{F=tt.Utils.newFloatArray(L);var B=this.getValue(c,"offset",0);if(tt.Utils.arrayCopy(N,0,F,B,N.length),1!=n)for(var U=(u=B)+N.length;u<U;u++)F[u]*=n;if(!D)for(u=0;u<L;u++)F[u]+=R[u]}g.setFrame(l,this.getValue(c,"time",0),F),this.readCurve(c,g,l),l++}r.push(g),s=Math.max(s,g.frames[g.getFrameCount()-1])}}else if(tt.FAIL_ON_NON_EXISTING_SKIN)throw new Error("Skin not found: "+C)}var X=t.drawOrder;if(null==X&&(X=t.draworder),null!=X){g=new tt.DrawOrderTimeline(X.length);for(var j=i.slots.length,l=0,k=0;k<X.length;k++){var V=X[k],H=null,G=this.getValue(V,"offsets",null);if(null!=G){H=tt.Utils.newArray(j,-1);for(var Y=tt.Utils.newArray(j-G.length,0),W=0,z=0,u=0;u<G.length;u++){var q,J=G[u];if(-1==(q=i.findSlotIndex(J.slot)))throw new Error("Slot not found: "+J.slot);for(;W!=q;)Y[z++]=W++;H[W+J.offset]=W++}for(;W<j;)Y[z++]=W++;for(u=j-1;0<=u;u--)-1==H[u]&&(H[u]=Y[--z])}g.setFrame(l++,this.getValue(V,"time",0),H)}r.push(g),s=Math.max(s,g.frames[g.getFrameCount()-1])}if(t.events){for(g=new tt.EventTimeline(t.events.length),u=l=0;u<t.events.length;u++){var K=t.events[u],Z=i.findEvent(K.name);if(null==Z)throw new Error("Event not found: "+K.name);var Q=new tt.Event(tt.Utils.toSinglePrecision(this.getValue(K,"time",0)),Z);Q.intValue=this.getValue(K,"int",Z.intValue),Q.floatValue=this.getValue(K,"float",Z.floatValue),Q.stringValue=this.getValue(K,"string",Z.stringValue),null!=Q.data.audioPath&&(Q.volume=this.getValue(K,"volume",1),Q.balance=this.getValue(K,"balance",0)),g.setFrame(l++,Q)}r.push(g),s=Math.max(s,g.frames[g.getFrameCount()-1])}if(isNaN(s))throw new Error("Error while parsing animation, duration is NaN");i.animations.push(new tt.Animation(e,r,s))},O.prototype.readCurve=function(t,e,i){var n;t.hasOwnProperty("curve")&&("stepped"===t.curve?e.setStepped(i):(n=t.curve,e.setCurve(i,n,this.getValue(t,"c2",0),this.getValue(t,"c3",1),this.getValue(t,"c4",1))))},O.prototype.getValue=function(t,e,i){return void 0!==t[e]?t[e]:i},O.blendModeFromString=function(t){if("normal"==(t=t.toLowerCase()))return tt.BlendMode.Normal;if("additive"==t)return tt.BlendMode.Additive;if("multiply"==t)return tt.BlendMode.Multiply;if("screen"==t)return tt.BlendMode.Screen;throw new Error("Unknown blend mode: "+t)},O.positionModeFromString=function(t){if("fixed"==(t=t.toLowerCase()))return tt.PositionMode.Fixed;if("percent"==t)return tt.PositionMode.Percent;throw new Error("Unknown position mode: "+t)},O.spacingModeFromString=function(t){if("length"==(t=t.toLowerCase()))return tt.SpacingMode.Length;if("fixed"==t)return tt.SpacingMode.Fixed;if("percent"==t)return tt.SpacingMode.Percent;throw new Error("Unknown position mode: "+t)},O.rotateModeFromString=function(t){if("tangent"==(t=t.toLowerCase()))return tt.RotateMode.Tangent;if("chain"==t)return tt.RotateMode.Chain;if("chainscale"==t)return tt.RotateMode.ChainScale;throw new Error("Unknown rotate mode: "+t)},O.transformModeFromString=function(t){if("normal"==(t=t.toLowerCase()))return tt.TransformMode.Normal;if("onlytranslation"==t)return tt.TransformMode.OnlyTranslation;if("norotationorreflection"==t)return tt.TransformMode.NoRotationOrReflection;if("noscale"==t)return tt.TransformMode.NoScale;if("noscaleorreflection"==t)return tt.TransformMode.NoScaleOrReflection;throw new Error("Unknown transform mode: "+t)},O);function O(t){this.scale=1,this.linkedMeshes=new Array,this.attachmentLoader=t}tt.SkeletonJson=t;var f=function(t,e,i,n,r){this.mesh=t,this.skin=e,this.slotIndex=i,this.parent=n,this.inheritDeform=r}}((k=s=s||{}).core||(k.core={})),function(h){function s(t,e,i){this.slotIndex=t,this.name=e,this.attachment=i}h.SkinEntry=s;var t=(e.prototype.setAttachment=function(t,e,i){if(null==i)throw new Error("attachment cannot be null.");var n=this.attachments;t>=n.length&&(n.length=t+1),n[t]||(n[t]={}),n[t][e]=i},e.prototype.addSkin=function(t){for(var e=0;e<t.bones.length;e++){for(var i=t.bones[e],n=!1,r=0;r<this.bones.length;r++)if(this.bones[r]==i){n=!0;break}n||this.bones.push(i)}for(e=0;e<t.constraints.length;e++){for(var s=t.constraints[e],n=!1,r=0;r<this.constraints.length;r++)if(this.constraints[r]==s){n=!0;break}n||this.constraints.push(s)}for(var o=t.getAttachments(),e=0;e<o.length;e++){var a=o[e];this.setAttachment(a.slotIndex,a.name,a.attachment)}},e.prototype.copySkin=function(t){for(var e=0;e<t.bones.length;e++){for(var i=t.bones[e],n=!1,r=0;r<this.bones.length;r++)if(this.bones[r]==i){n=!0;break}n||this.bones.push(i)}for(e=0;e<t.constraints.length;e++){for(var s=t.constraints[e],n=!1,r=0;r<this.constraints.length;r++)if(this.constraints[r]==s){n=!0;break}n||this.constraints.push(s)}for(var o=t.getAttachments(),e=0;e<o.length;e++){var a=o[e];null!=a.attachment&&(a.attachment instanceof h.MeshAttachment?a.attachment=a.attachment.newLinkedMesh():a.attachment=a.attachment.copy(),this.setAttachment(a.slotIndex,a.name,a.attachment))}},e.prototype.getAttachment=function(t,e){t=this.attachments[t];return t?t[e]:null},e.prototype.removeAttachment=function(t,e){t=this.attachments[t];t&&(t[e]=null)},e.prototype.getAttachments=function(){for(var t=new Array,e=0;e<this.attachments.length;e++){var i=this.attachments[e];if(i)for(var n in i){var r=i[n];r&&t.push(new s(e,n,r))}}return t},e.prototype.getAttachmentsForSlot=function(t,e){var i=this.attachments[t];if(i)for(var n in i){var r=i[n];r&&e.push(new s(t,n,r))}},e.prototype.clear=function(){this.attachments.length=0,this.bones.length=0,this.constraints.length=0},e.prototype.attachAll=function(t,e){for(var i=0,n=0;n<t.slots.length;n++){var r=t.slots[n],s=r.getAttachment();if(s&&i<e.attachments.length){var o,a=e.attachments[i];for(o in a)if(s==a[o]){var h=this.getAttachment(i,o);null!=h&&r.setAttachment(h);break}}i++}},e);function e(t){if(this.attachments=new Array,this.bones=Array(),this.constraints=new Array,null==t)throw new Error("name cannot be null.");this.name=t}h.Skin=t}((L=s=s||{}).core||(L.core={})),k=s=s||{},A=k.core||(k.core={}),tt.prototype.getAttachment=function(){return this.attachment},tt.prototype.setAttachment=function(t){this.attachment!=t&&(this.attachment=t,this.attachmentTime=this.bone.skeleton.time,this.deform.length=0)},tt.prototype.setAttachmentTime=function(t){this.attachmentTime=this.bone.skeleton.time-t},tt.prototype.getAttachmentTime=function(){return this.bone.skeleton.time-this.attachmentTime},tt.prototype.setToSetupPose=function(){this.color.setFromColor(this.data.color),null!=this.darkColor&&this.darkColor.setFromColor(this.data.darkColor),null==this.data.attachmentName?this.attachment=null:(this.attachment=null,this.setAttachment(this.bone.skeleton.getAttachment(this.data.index,this.data.attachmentName)))},k=tt,A.Slot=k,L=s=s||{},($=L.core||(L.core={})).SlotData=function(t,e,i){if(this.color=new $.Color(1,1,1,1),t<0)throw new Error("index must be >= 0.");if(null==e)throw new Error("name cannot be null.");if(null==i)throw new Error("boneData cannot be null.");this.index=t,this.name=e,this.boneData=i},k=s=s||{},L=k.core||(k.core={}),Z.prototype.getImage=function(){return this._image},Z.filterFromString=function(t){switch(t.toLowerCase()){case"nearest":return b.Nearest;case"linear":return b.Linear;case"mipmap":return b.MipMap;case"mipmapnearestnearest":return b.MipMapNearestNearest;case"mipmaplinearnearest":return b.MipMapLinearNearest;case"mipmapnearestlinear":return b.MipMapNearestLinear;case"mipmaplinearlinear":return b.MipMapLinearLinear;default:throw new Error("Unknown texture filter "+t)}},Z.wrapFromString=function(t){switch(t.toLowerCase()){case"mirroredtepeat":return E.MirroredRepeat;case"clamptoedge":return E.ClampToEdge;case"repeat":return E.Repeat;default:throw new Error("Unknown texture wrap "+t)}},k=Z,L.Texture=k,(k=b=L.TextureFilter||(L.TextureFilter={}))[k.Nearest=9728]="Nearest",k[k.Linear=9729]="Linear",k[k.MipMap=9987]="MipMap",k[k.MipMapNearestNearest=9984]="MipMapNearestNearest",k[k.MipMapLinearNearest=9985]="MipMapLinearNearest",k[k.MipMapNearestLinear=9986]="MipMapNearestLinear",k[k.MipMapLinearLinear=9987]="MipMapLinearLinear",(k=E=L.TextureWrap||(L.TextureWrap={}))[k.MirroredRepeat=33648]="MirroredRepeat",k[k.ClampToEdge=33071]="ClampToEdge",k[k.Repeat=10497]="Repeat",Object.defineProperty(Q.prototype,"width",{get:function(){var t=this.texture;return("3"==PIXI.VERSION[0]?t.crop:t.trim||t.orig).width},enumerable:!0,configurable:!0}),Object.defineProperty(Q.prototype,"height",{get:function(){var t=this.texture;return("3"==PIXI.VERSION[0]?t.crop:t.trim||t.orig).height},enumerable:!0,configurable:!0}),Object.defineProperty(Q.prototype,"u",{get:function(){return this.texture._uvs.x0},enumerable:!0,configurable:!0}),Object.defineProperty(Q.prototype,"v",{get:function(){return this.texture._uvs.y0},enumerable:!0,configurable:!0}),Object.defineProperty(Q.prototype,"u2",{get:function(){return this.texture._uvs.x2},enumerable:!0,configurable:!0}),Object.defineProperty(Q.prototype,"v2",{get:function(){return this.texture._uvs.y2},enumerable:!0,configurable:!0}),Object.defineProperty(Q.prototype,"offsetX",{get:function(){var t=this.texture;return t.trim?t.trim.x:0},enumerable:!0,configurable:!0}),Object.defineProperty(Q.prototype,"offsetY",{get:function(){return console.warn("Deprecation Warning: @Hackerham: I guess, if you are using PIXI-SPINE ATLAS region.offsetY, you want a texture, right? Use region.texture from now on."),this.spineOffsetY},enumerable:!0,configurable:!0}),Object.defineProperty(Q.prototype,"pixiOffsetY",{get:function(){var t=this.texture;return t.trim?t.trim.y:0},enumerable:!0,configurable:!0}),Object.defineProperty(Q.prototype,"spineOffsetY",{get:function(){var t=this.texture;return this.originalHeight-this.height-(t.trim?t.trim.y:0)},enumerable:!0,configurable:!0}),Object.defineProperty(Q.prototype,"originalWidth",{get:function(){var t=this.texture;return("3"==PIXI.VERSION[0]?t.trim||t.crop:t.orig).width},enumerable:!0,configurable:!0}),Object.defineProperty(Q.prototype,"originalHeight",{get:function(){var t=this.texture;return("3"==PIXI.VERSION[0]?t.trim||t.crop:t.orig).height},enumerable:!0,configurable:!0}),Object.defineProperty(Q.prototype,"x",{get:function(){return this.texture.frame.x},enumerable:!0,configurable:!0}),Object.defineProperty(Q.prototype,"y",{get:function(){return this.texture.frame.y},enumerable:!0,configurable:!0}),Object.defineProperty(Q.prototype,"rotate",{get:function(){return 0!==this.texture.rotate},enumerable:!0,configurable:!0}),k=Q,L.TextureRegion=k,function(v){var t=(e.prototype.addTexture=function(t,e){for(var i=this.pages,n=null,r=0;r<i.length;r++)if(i[r].baseTexture===e.baseTexture){n=i[r];break}null===n&&((n=new w).name="texturePage",s=e.baseTexture,n.width=s.realWidth,n.height=s.realHeight,n.baseTexture=s,n.minFilter=n.magFilter=v.TextureFilter.Nearest,n.uWrap=v.TextureWrap.ClampToEdge,n.vWrap=v.TextureWrap.ClampToEdge,i.push(n));var s=new x;return s.name=t,s.page=n,s.texture=e,s.index=-1,this.regions.push(s),s},e.prototype.addTextureHash=function(t,e){for(var i in t)t.hasOwnProperty(i)&&this.addTexture(e&&-1!==i.indexOf(".")?i.substr(0,i.lastIndexOf(".")):i,t[i])},e.prototype.addSpineAtlas=function(t,e,i){return this.load(t,e,i)},e.prototype.load=function(t,p,d){var _=this;if(null==p)throw new Error("textureLoader cannot be null.");var f=new i(t),m=new Array(4),y=null,g=function(){for(;;){var t=f.readLine();if(null==t)return d&&d(_);if(0==(t=t.trim()).length)y=null;else{if(!y){(y=new w).name=t,2==f.readTuple(m)&&(y.width=parseInt(m[0]),y.height=parseInt(m[1]),f.readTuple(m)),f.readTuple(m),y.minFilter=v.Texture.filterFromString(m[0]),y.magFilter=v.Texture.filterFromString(m[1]);var e=f.readValue();y.uWrap=v.TextureWrap.ClampToEdge,y.vWrap=v.TextureWrap.ClampToEdge,"x"==e?y.uWrap=v.TextureWrap.Repeat:"y"==e?y.vWrap=v.TextureWrap.Repeat:"xy"==e&&(y.uWrap=y.vWrap=v.TextureWrap.Repeat),p(t,function(t){return null===t?(_.pages.splice(_.pages.indexOf(y),1),d&&d(null)):((y.baseTexture=t).valid||t.setSize(y.width,y.height),_.pages.push(y),y.setFilters(),y.width&&y.height||(y.width=t.realWidth,y.height=t.realHeight,y.width&&y.height||console.log("ERROR spine atlas page "+y.name+": meshes wont work if you dont specify size in atlas (http://www.html5gamedevs.com/topic/18888-pixi-spines-and-meshes/?p=107121)")),void g())}),_.pages.push(y);break}var i=new x;i.name=t,i.page=y;var n=f.readValue(),r="true"==n.toLocaleLowerCase()?6:"false"==n.toLocaleLowerCase()?0:(720-parseFloat(n))%360/45;f.readTuple(m);var s=parseInt(m[0]),o=parseInt(m[1]);f.readTuple(m);var a=parseInt(m[0]),h=parseInt(m[1]),l=y.baseTexture.resolution;s/=l,o/=l,a/=l,h/=l;var u=new PIXI.Rectangle(s,o,r?h:a,r?a:h);4==f.readTuple(m)&&4==f.readTuple(m)&&f.readTuple(m);var c=parseInt(m[0])/l,e=parseInt(m[1])/l;f.readTuple(m);t=parseInt(m[0])/l,n=parseInt(m[1])/l,l=new PIXI.Rectangle(0,0,c,e),n=new PIXI.Rectangle(t,e-h-n,a,h);"3"!=PIXI.VERSION[0]?i.texture=new PIXI.Texture(i.page.baseTexture,u,l,n,r):(h=(a=new PIXI.Rectangle(s,o,a,h)).clone(),n.width=c,n.height=e,i.texture=new PIXI.Texture(i.page.baseTexture,a,h,n,r)),i.index=parseInt(f.readValue()),i.texture.updateUvs(),_.regions.push(i)}}};g()},e.prototype.findRegion=function(t){for(var e=0;e<this.regions.length;e++)if(this.regions[e].name==t)return this.regions[e];return null},e.prototype.dispose=function(){for(var t=0;t<this.pages.length;t++)this.pages[t].baseTexture.dispose()},e);function e(t,e,i){this.pages=new Array,this.regions=new Array,t&&this.addSpineAtlas(t,e,i)}v.TextureAtlas=t;var i=(r.prototype.readLine=function(){return this.index>=this.lines.length?null:this.lines[this.index++]},r.prototype.readValue=function(){var t=this.readLine(),e=t.indexOf(":");if(-1==e)throw new Error("Invalid line: "+t);return t.substring(e+1).trim()},r.prototype.readTuple=function(t){var e=this.readLine(),i=e.indexOf(":");if(-1==i)throw new Error("Invalid line: "+e);for(var n=0,r=i+1;n<3;n++){var s=e.indexOf(",",r);if(-1==s)break;t[n]=e.substr(r,s-r).trim(),r=s+1}return t[n]=e.substring(r).trim(),n+1},r),w=(n.prototype.setFilters=function(){var t=this.baseTexture,e=this.minFilter;e==v.TextureFilter.Linear?t.scaleMode=PIXI.SCALE_MODES.LINEAR:this.minFilter==v.TextureFilter.Nearest?t.scaleMode=PIXI.SCALE_MODES.NEAREST:(t.mipmap=PIXI.MIPMAP_MODES.POW2,e==v.TextureFilter.MipMapNearestNearest?t.scaleMode=PIXI.SCALE_MODES.NEAREST:t.scaleMode=PIXI.SCALE_MODES.LINEAR)},n);function n(){}function r(t){this.index=0,this.lines=t.split(/\r\n|\r|\n/)}v.TextureAtlasPage=w;var s,x=(s=v.TextureRegion,F(o,s),o);function o(){return null!==s&&s.apply(this,arguments)||this}v.TextureAtlasRegion=x}((L=s=s||{}).core||(L.core={})),k=s=s||{},T=k.core||(k.core={}),K.prototype.isActive=function(){return this.active},K.prototype.apply=function(){this.update()},K.prototype.update=function(){this.data.local?this.data.relative?this.applyRelativeLocal():this.applyAbsoluteLocal():this.data.relative?this.applyRelativeWorld():this.applyAbsoluteWorld()},K.prototype.applyAbsoluteWorld=function(){for(var t=this.rotateMix,e=this.translateMix,i=this.scaleMix,n=this.shearMix,r=this.target,s=r.matrix,o=s.a,a=s.c,h=s.b,l=s.d,s=0<o*l-a*h?T.MathUtils.degRad:-T.MathUtils.degRad,u=this.data.offsetRotation*s,c=this.data.offsetShearY*s,p=this.bones,d=0,_=p.length;d<_;d++){var f,m,y,g,v,w,x,b,E,$=p[d],A=!1,S=$.matrix;0!=t&&(f=S.a,m=S.c,y=S.b,g=S.d,(b=Math.atan2(h,o)-Math.atan2(y,f)+u)>T.MathUtils.PI?b-=T.MathUtils.PI2:b<-T.MathUtils.PI&&(b+=T.MathUtils.PI2),b*=t,w=Math.cos(b),v=Math.sin(b),S.a=w*f-v*y,S.c=w*m-v*g,S.b=v*f+w*y,S.d=v*m+w*g,A=!0),0!=e&&(w=this.temp,r.localToWorld(w.set(this.data.offsetX,this.data.offsetY)),S.tx+=(w.x-S.tx)*e,S.ty+=(w.y-S.ty)*e,A=!0),0<i&&(x=Math.sqrt(S.a*S.a+S.b*S.b),E=Math.sqrt(o*o+h*h),1e-5<x&&(x=(x+(E-x+this.data.offsetScaleX)*i)/x),S.a*=x,S.b*=x,x=Math.sqrt(S.c*S.c+S.d*S.d),E=Math.sqrt(a*a+l*l),1e-5<x&&(x=(x+(E-x+this.data.offsetScaleY)*i)/x),S.c*=x,S.d*=x,A=!0),0<n&&(m=S.c,g=S.d,E=Math.atan2(g,m),(b=Math.atan2(l,a)-Math.atan2(h,o)-(E-Math.atan2(S.b,S.a)))>T.MathUtils.PI?b-=T.MathUtils.PI2:b<-T.MathUtils.PI&&(b+=T.MathUtils.PI2),b=E+(b+c)*n,x=Math.sqrt(m*m+g*g),S.c=Math.cos(b)*x,S.d=Math.sin(b)*x,A=!0),A&&($.appliedValid=!1)}},K.prototype.applyRelativeWorld=function(){for(var t=this.rotateMix,e=this.translateMix,i=this.scaleMix,n=this.shearMix,r=this.target,s=r.matrix,o=s.a,a=s.c,h=s.b,l=s.d,s=0<o*l-a*h?T.MathUtils.degRad:-T.MathUtils.degRad,u=this.data.offsetRotation*s,c=this.data.offsetShearY*s,p=this.bones,d=0,_=p.length;d<_;d++){var f,m,y,g,v,w,x,b,E=p[d],$=!1,A=E.matrix;0!=t&&(f=A.a,m=A.c,y=A.b,g=A.d,(b=Math.atan2(h,o)+u)>T.MathUtils.PI?b-=T.MathUtils.PI2:b<-T.MathUtils.PI&&(b+=T.MathUtils.PI2),b*=t,w=Math.cos(b),v=Math.sin(b),A.a=w*f-v*y,A.c=w*m-v*g,A.b=v*f+w*y,A.d=v*m+w*g,$=!0),0!=e&&(w=this.temp,r.localToWorld(w.set(this.data.offsetX,this.data.offsetY)),A.tx+=w.x*e,A.ty+=w.y*e,$=!0),0<i&&(x=(Math.sqrt(o*o+h*h)-1+this.data.offsetScaleX)*i+1,A.a*=x,A.b*=x,x=(Math.sqrt(a*a+l*l)-1+this.data.offsetScaleY)*i+1,A.c*=x,A.d*=x,$=!0),0<n&&((b=Math.atan2(l,a)-Math.atan2(h,o))>T.MathUtils.PI?b-=T.MathUtils.PI2:b<-T.MathUtils.PI&&(b+=T.MathUtils.PI2),m=A.c,g=A.d,b=Math.atan2(g,m)+(b-T.MathUtils.PI/2+c)*n,x=Math.sqrt(m*m+g*g),A.c=Math.cos(b)*x,A.d=Math.sin(b)*x,$=!0),$&&(E.appliedValid=!1)}},K.prototype.applyAbsoluteLocal=function(){var t=this.rotateMix,e=this.translateMix,i=this.scaleMix,n=this.shearMix,r=this.target;r.appliedValid||r.updateAppliedTransform();for(var s=this.bones,o=0,a=s.length;o<a;o++){var h=s[o];h.appliedValid||h.updateAppliedTransform();var l,u=h.arotation;0!=t&&(l=r.arotation-u+this.data.offsetRotation,u+=(l-=360*(16384-(16384.499999999996-l/360|0)))*t);var c=h.ax,p=h.ay;0!=e&&(c+=(r.ax-c+this.data.offsetX)*e,p+=(r.ay-p+this.data.offsetY)*e);var d=h.ascaleX,_=h.ascaleY;0<i&&(1e-5<d&&(d=(d+(r.ascaleX-d+this.data.offsetScaleX)*i)/d),1e-5<_&&(_=(_+(r.ascaleY-_+this.data.offsetScaleY)*i)/_));var f=h.ashearY;0<n&&(l=r.ashearY-f+this.data.offsetShearY,l-=360*(16384-(16384.499999999996-l/360|0)),h.shearY+=l*n),h.updateWorldTransformWith(c,p,u,d,_,h.ashearX,f)}},K.prototype.applyRelativeLocal=function(){var t=this.rotateMix,e=this.translateMix,i=this.scaleMix,n=this.shearMix,r=this.target;r.appliedValid||r.updateAppliedTransform();for(var s=this.bones,o=0,a=s.length;o<a;o++){var h=s[o];h.appliedValid||h.updateAppliedTransform();var l=h.arotation;0!=t&&(l+=(r.arotation+this.data.offsetRotation)*t);var u=h.ax,c=h.ay;0!=e&&(u+=(r.ax+this.data.offsetX)*e,c+=(r.ay+this.data.offsetY)*e);var p=h.ascaleX,d=h.ascaleY;0<i&&(1e-5<p&&(p*=(r.ascaleX-1+this.data.offsetScaleX)*i+1),1e-5<d&&(d*=(r.ascaleY-1+this.data.offsetScaleY)*i+1));var _=h.ashearY;0<n&&(_+=(r.ashearY+this.data.offsetShearY)*n),h.updateWorldTransformWith(u,c,l,p,d,h.ashearX,_)}},k=K,T.TransformConstraint=k,L=s=s||{},k=L.core||(L.core={}),x=k.ConstraintData,F(q,x),L=q,k.TransformConstraintData=L,L=s=s||{},w=L.core||(L.core={}),W.prototype.triangulate=function(t){for(var e=t,i=t.length>>1,n=this.indicesArray,r=n.length=0;r<i;r++)n[r]=r;for(var s=this.isConcaveArray,r=s.length=0,o=i;r<o;++r)s[r]=W.isConcave(r,i,e,n);var a=this.triangles;for(a.length=0;3<i;){for(var h=i-1,l=(r=0,1);;){t:if(!s[r]){for(var u=n[h]<<1,c=n[r]<<1,p=n[l]<<1,d=e[u],_=e[1+u],f=e[c],m=e[1+c],y=e[p],g=e[1+p],v=(l+1)%i;v!=h;v=(v+1)%i)if(s[v]){var w=n[v]<<1,x=e[w],w=e[1+w];if(W.positiveArea(y,g,d,_,x,w)&&W.positiveArea(d,_,f,m,x,w)&&W.positiveArea(f,m,y,g,x,w))break t}break}if(0==l){for(;s[r]&&0<--r;);break}h=r,l=((r=l)+1)%i}a.push(n[(i+r-1)%i]),a.push(n[r]),a.push(n[(r+1)%i]),n.splice(r,1),s.splice(r,1);var b=(--i+r-1)%i,E=r==i?0:r;s[b]=W.isConcave(b,i,e,n),s[E]=W.isConcave(E,i,e,n)}return 3==i&&(a.push(n[2]),a.push(n[0]),a.push(n[1])),a},W.prototype.decompose=function(t,e){var i=t,n=this.convexPolygons;this.polygonPool.freeAll(n),n.length=0;var r=this.convexPolygonsIndices;this.polygonIndicesPool.freeAll(r),r.length=0;var s=this.polygonIndicesPool.obtain();s.length=0;for(var o,a,h,l,u,c=this.polygonPool.obtain(),p=-1,d=c.length=0,_=0,f=e.length;_<f;_+=3){var m,y,g,v=e[_]<<1,w=e[_+1]<<1,x=e[_+2]<<1,b=i[v],E=i[1+v],$=i[w],A=i[1+w],S=i[x],T=i[1+x],C=!1;p==v&&(m=c.length-4,y=W.winding(c[m],c[m+1],c[m+2],c[m+3],S,T),g=W.winding(S,T,c[0],c[1],c[2],c[3]),y==d&&g==d&&(c.push(S),c.push(T),s.push(x),C=!0)),C||(0<c.length?(n.push(c),r.push(s)):(this.polygonPool.free(c),this.polygonIndicesPool.free(s)),(c=this.polygonPool.obtain()).length=0,c.push(b),c.push(E),c.push($),c.push(A),c.push(S),c.push(T),(s=this.polygonIndicesPool.obtain()).length=0,s.push(v),s.push(w),s.push(x),d=W.winding(b,E,$,A,S,T),p=v)}for(0<c.length&&(n.push(c),r.push(s)),_=0,f=n.length;_<f;_++)if(0!=(s=r[_]).length)for(var M=s[0],I=s[s.length-1],P=(c=n[_])[m=c.length-4],O=c[m+1],D=c[m+2],R=c[m+3],L=c[0],k=c[1],F=c[2],N=c[3],B=W.winding(P,O,D,R,L,k),U=0;U<f;U++)U==_||3==(o=r[U]).length&&(a=o[0],h=o[1],l=o[2],S=(u=n[U])[u.length-2],T=u[u.length-1],a==M&&h==I&&(y=W.winding(P,O,D,R,S,T),g=W.winding(S,T,L,k,F,N),y==B&&g==B&&(u.length=0,o.length=0,c.push(S),c.push(T),s.push(l),P=D,O=R,D=S,R=T,U=0)));for(_=n.length-1;0<=_;_--)0==(c=n[_]).length&&(n.splice(_,1),this.polygonPool.free(c),s=r[_],r.splice(_,1),this.polygonIndicesPool.free(s));return n},W.isConcave=function(t,e,i,n){var r=n[(e+t-1)%e]<<1,s=n[t]<<1,e=n[(t+1)%e]<<1;return!this.positiveArea(i[r],i[1+r],i[s],i[1+s],i[e],i[1+e])},W.positiveArea=function(t,e,i,n,r,s){return 0<=t*(s-n)+i*(e-s)+r*(n-e)},W.winding=function(t,e,i,n,r,s){i-=t,n-=e;return 0<=r*n-s*i+i*e-t*n?1:-1},L=W,w.Triangulator=L,function(t){var e=(i.prototype.add=function(t){var e=this.contains(t);return this.array[0|t]=0|t,!e},i.prototype.contains=function(t){return null!=this.array[0|t]},i.prototype.remove=function(t){this.array[0|t]=void 0},i.prototype.clear=function(){this.array.length=0},i);function i(){this.array=new Array}function n(t,e,i,n){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),void 0===n&&(n=0),this.r=t,this.g=e,this.b=i,this.a=n}function r(){}function s(){}t.IntSet=e,n.prototype.set=function(t,e,i,n){return this.r=t,this.g=e,this.b=i,this.a=n,this.clamp(),this},n.prototype.setFromColor=function(t){return this.r=t.r,this.g=t.g,this.b=t.b,this.a=t.a,this},n.prototype.setFromString=function(t){return t="#"==t.charAt(0)?t.substr(1):t,this.r=parseInt(t.substr(0,2),16)/255,this.g=parseInt(t.substr(2,2),16)/255,this.b=parseInt(t.substr(4,2),16)/255,this.a=(8!=t.length?255:parseInt(t.substr(6,2),16))/255,this},n.prototype.add=function(t,e,i,n){return this.r+=t,this.g+=e,this.b+=i,this.a+=n,this.clamp(),this},n.prototype.clamp=function(){return this.r<0?this.r=0:1<this.r&&(this.r=1),this.g<0?this.g=0:1<this.g&&(this.g=1),this.b<0?this.b=0:1<this.b&&(this.b=1),this.a<0?this.a=0:1<this.a&&(this.a=1),this},n.rgba8888ToColor=function(t,e){t.r=((4278190080&e)>>>24)/255,t.g=((16711680&e)>>>16)/255,t.b=((65280&e)>>>8)/255,t.a=(255&e)/255},n.rgb888ToColor=function(t,e){t.r=((16711680&e)>>>16)/255,t.g=((65280&e)>>>8)/255,t.b=(255&e)/255},n.WHITE=new n(1,1,1,1),n.RED=new n(1,0,0,1),n.GREEN=new n(0,1,0,1),n.BLUE=new n(0,0,1,1),n.MAGENTA=new n(1,0,1,1),e=n,t.Color=e,r.clamp=function(t,e,i){return t<e?e:i<t?i:t},r.cosDeg=function(t){return Math.cos(t*r.degRad)},r.sinDeg=function(t){return Math.sin(t*r.degRad)},r.signum=function(t){return 0<t?1:t<0?-1:0},r.toInt=function(t){return 0<t?Math.floor(t):Math.ceil(t)},r.cbrt=function(t){var e=Math.pow(Math.abs(t),1/3);return t<0?-e:e},r.randomTriangular=function(t,e){return r.randomTriangularWith(t,e,.5*(t+e))},r.randomTriangularWith=function(t,e,i){var n=Math.random(),r=e-t;return n<=(i-t)/r?t+Math.sqrt(n*r*(i-t)):e-Math.sqrt((1-n)*r*(e-i))},r.PI2=2*(r.PI=3.1415927),r.radDeg=r.radiansToDegrees=180/r.PI,r.degRad=r.degreesToRadians=r.PI/180,e=r,t.MathUtils=e,s.prototype.apply=function(t,e,i){return t+(e-t)*this.applyInternal(i)},e=s,t.Interpolation=e;var o,e=(F(a,o=e),a.prototype.applyInternal=function(t){return t<=.5?Math.pow(2*t,this.power)/2:Math.pow(2*(t-1),this.power)/(this.power%2==0?-2:2)+1},a);function a(t){var e=o.call(this)||this;return e.power=2,e.power=t,e}t.Pow=e;var h,e=(F(l,h=e),l.prototype.applyInternal=function(t){return Math.pow(t-1,this.power)*(this.power%2==0?-1:1)+1},l);function l(t){return h.call(this,t)||this}function u(){}function c(){}function p(t){this.items=new Array,this.instantiator=t}function d(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.x=t,this.y=e}function _(){this.maxDelta=.064,this.framesPerSecond=0,this.delta=0,this.totalTime=0,this.lastTime=Date.now()/1e3,this.frameCount=0,this.frameTime=0}function f(t){void 0===t&&(t=32),this.addedValues=0,this.lastValue=0,this.mean=0,this.dirty=!0,this.values=new Array(t)}t.PowOut=e,u.arrayCopy=function(t,e,i,n,r){for(var s=e,o=n;s<e+r;s++,o++)i[o]=t[s]},u.setArraySize=function(t,e,i){void 0===i&&(i=0);var n=t.length;if(n==e)return t;if(n<(t.length=e))for(var r=n;r<e;r++)t[r]=i;return t},u.ensureArrayCapacity=function(t,e,i){return void 0===i&&(i=0),t.length>=e?t:u.setArraySize(t,e,i)},u.newArray=function(t,e){for(var i=new Array(t),n=0;n<t;n++)i[n]=e;return i},u.newFloatArray=function(t){if(u.SUPPORTS_TYPED_ARRAYS)return new Float32Array(t);for(var e=new Array(t),i=0;i<e.length;i++)e[i]=0;return e},u.newShortArray=function(t){if(u.SUPPORTS_TYPED_ARRAYS)return new Int16Array(t);for(var e=new Array(t),i=0;i<e.length;i++)e[i]=0;return e},u.toFloatArray=function(t){return u.SUPPORTS_TYPED_ARRAYS?new Float32Array(t):t},u.toSinglePrecision=function(t){return u.SUPPORTS_TYPED_ARRAYS?Math.fround(t):t},u.webkit602BugfixHelper=function(t,e){},u.contains=function(t,e,i){void 0===i&&(i=!0);for(var n=0;n<t.length;n++)if(t[n]==e)return!0;return!1},u.SUPPORTS_TYPED_ARRAYS="undefined"!=typeof Float32Array,e=u,t.Utils=e,c.logBones=function(t){for(var e=0;e<t.bones.length;e++){var i=t.bones[e],n=i.matrix;console.log(i.data.name+", "+n.a+", "+n.b+", "+n.c+", "+n.d+", "+n.tx+", "+n.ty)}},e=c,t.DebugUtils=e,p.prototype.obtain=function(){return 0<this.items.length?this.items.pop():this.instantiator()},p.prototype.free=function(t){t.reset&&t.reset(),this.items.push(t)},p.prototype.freeAll=function(t){for(var e=0;e<t.length;e++)t[e].reset&&t[e].reset(),this.items[e]=t[e]},p.prototype.clear=function(){this.items.length=0},e=p,t.Pool=e,d.prototype.set=function(t,e){return this.x=t,this.y=e,this},d.prototype.length=function(){var t=this.x,e=this.y;return Math.sqrt(t*t+e*e)},d.prototype.normalize=function(){var t=this.length();return 0!=t&&(this.x/=t,this.y/=t),this},e=d,t.Vector2=e,_.prototype.update=function(){var t=Date.now()/1e3;this.delta=t-this.lastTime,this.frameTime+=this.delta,this.totalTime+=this.delta,this.delta>this.maxDelta&&(this.delta=this.maxDelta),this.lastTime=t,this.frameCount++,1<this.frameTime&&(this.framesPerSecond=this.frameCount/this.frameTime,this.frameTime=0,this.frameCount=0)},e=_,t.TimeKeeper=e,f.prototype.hasEnoughData=function(){return this.addedValues>=this.values.length},f.prototype.addValue=function(t){this.addedValues<this.values.length&&this.addedValues++,this.values[this.lastValue++]=t,this.lastValue>this.values.length-1&&(this.lastValue=0),this.dirty=!0},f.prototype.getMean=function(){if(this.hasEnoughData()){if(this.dirty){for(var t=0,e=0;e<this.values.length;e++)t+=this.values[e];this.mean=t/this.values.length,this.dirty=!1}return this.mean}return 0},e=f,t.WindowedMean=e}((L=s=s||{}).core||(L.core={})),function(e){var t=function(t){if(null==t)throw new Error("name cannot be null.");this.name=t};e.Attachment=t;var i,t=(F(n,i=t),n.prototype.computeWorldVerticesOld=function(t,e){this.computeWorldVertices(t,0,this.worldVerticesLength,e,0,2)},n.prototype.computeWorldVertices=function(t,e,i,n,r,s){i=r+(i>>1)*s;var o=t.bone.skeleton,a=t.deform,h=this.vertices,l=this.bones;if(null!=l){for(var u=0,c=0,p=0;p<e;p+=2)u+=(m=l[u])+1,c+=m;var d=o.bones;if(0==a.length)for(C=r,$=3*c;C<i;C+=s){var _=0,f=0,m=l[u++];for(m+=u;u<m;u++,$+=3){w=d[l[u]].matrix,M=h[$],I=h[$+1];var y=h[$+2];_+=(M*w.a+I*w.c+w.tx)*y,f+=(M*w.b+I*w.d+w.ty)*y}n[C]=_,n[C+1]=f}else for(var g=a,v=(C=r,$=3*c,c<<1);C<i;C+=s){for(f=_=0,m=l[u++],m+=u;u<m;u++,$+=3,v+=2)w=d[l[u]].matrix,M=h[$]+g[v],I=h[$+1]+g[v+1],y=h[$+2],_+=(M*w.a+I*w.c+w.tx)*y,f+=(M*w.b+I*w.d+w.ty)*y;n[C]=_,n[C+1]=f}}else{0<a.length&&(h=a);for(var w,x=(w=t.bone.matrix).tx,b=w.ty,E=w.a,$=w.c,A=w.b,S=w.d,T=e,C=r;C<i;T+=2,C+=s){var M=h[T],I=h[T+1];n[C]=M*E+I*$+x,n[C+1]=M*A+I*S+b}}},n.prototype.copyTo=function(t){null!=this.bones?(t.bones=new Array(this.bones.length),e.Utils.arrayCopy(this.bones,0,t.bones,0,this.bones.length)):t.bones=null,null!=this.vertices?(t.vertices=e.Utils.newFloatArray(this.vertices.length),e.Utils.arrayCopy(this.vertices,0,t.vertices,0,this.vertices.length)):t.vertices=null,t.worldVerticesLength=this.worldVerticesLength,t.deformAttachment=this.deformAttachment},n.nextID=0,n);function n(t){t=i.call(this,t)||this;return t.id=(65535&n.nextID++)<<11,t.worldVerticesLength=0,t.deformAttachment=t}e.VertexAttachment=t}((L=s=s||{}).core||(L.core={})),(L=(L=(L=s=s||{}).core||(L.core={})).AttachmentType||(L.AttachmentType={}))[L.Region=0]="Region",L[L.BoundingBox=1]="BoundingBox",L[L.Mesh=2]="Mesh",L[L.LinkedMesh=3]="LinkedMesh",L[L.Path=4]="Path",L[L.Point=5]="Point",L[L.Clipping=6]="Clipping",L=s=s||{},g=L.core||(L.core={}),v=g.VertexAttachment,F(Y,v),Y.prototype.copy=function(){var t=new Y(name);return this.copyTo(t),t.color.setFromColor(this.color),t},L=Y,g.BoundingBoxAttachment=L,L=s=s||{},m=L.core||(L.core={}),y=m.VertexAttachment,F(H,y),H.prototype.copy=function(){var t=new H(name);return this.copyTo(t),t.endSlot=this.endSlot,t.color.setFromColor(this.color),t},L=H,m.ClippingAttachment=L,L=s=s||{},_=L.core||(L.core={}),f=_.VertexAttachment,F(V,f),V.prototype.getParentMesh=function(){return this.parentMesh},V.prototype.setParentMesh=function(t){null!=(this.parentMesh=t)&&(this.bones=t.bones,this.vertices=t.vertices,this.worldVerticesLength=t.worldVerticesLength,this.regionUVs=t.regionUVs,this.triangles=t.triangles,this.hullLength=t.hullLength,this.worldVerticesLength=t.worldVerticesLength)},V.prototype.copy=function(){if(null!=this.parentMesh)return this.newLinkedMesh();var t=new V(this.name);return t.region=this.region,t.path=this.path,t.color.setFromColor(this.color),this.copyTo(t),t.regionUVs=new Float32Array(this.regionUVs.length),_.Utils.arrayCopy(this.regionUVs,0,t.regionUVs,0,this.regionUVs.length),t.uvs=new Array(this.uvs.length),_.Utils.arrayCopy(this.uvs,0,t.uvs,0,this.uvs.length),t.triangles=new Array(this.triangles.length),_.Utils.arrayCopy(this.triangles,0,t.triangles,0,this.triangles.length),t.hullLength=this.hullLength,null!=this.edges&&(t.edges=new Array(this.edges.length),_.Utils.arrayCopy(this.edges,0,t.edges,0,this.edges.length)),t.width=this.width,t.height=this.height,t},V.prototype.newLinkedMesh=function(){var t=new V(this.name);return t.region=this.region,t.path=this.path,t.color.setFromColor(this.color),t.deformAttachment=this.deformAttachment,t.setParentMesh(null!=this.parentMesh?this.parentMesh:this),t},L=V,_.MeshAttachment=L,L=s=s||{},p=L.core||(L.core={}),d=p.VertexAttachment,F(j,d),j.prototype.copy=function(){var t=new j(name);return this.copyTo(t),t.lengths=new Array(this.lengths.length),p.Utils.arrayCopy(this.lengths,0,t.lengths,0,this.lengths.length),t.closed=closed,t.constantSpeed=this.constantSpeed,t.color.setFromColor(this.color),t},L=j,p.PathAttachment=L,L=s=s||{},u=L.core||(L.core={}),c=u.VertexAttachment,F(X,c),X.prototype.computeWorldPosition=function(t,e){var i=t.matrix;return e.x=this.x*i.a+this.y*i.c+t.worldX,e.y=this.x*i.b+this.y*i.d+t.worldY,e},X.prototype.computeWorldRotation=function(t){var e=t.matrix,i=u.MathUtils.cosDeg(this.rotation),n=u.MathUtils.sinDeg(this.rotation),t=i*e.a+n*e.c,e=i*e.b+n*e.d;return Math.atan2(e,t)*u.MathUtils.radDeg},X.prototype.copy=function(){var t=new X(name);return t.x=this.x,t.y=this.y,t.rotation=this.rotation,t.color.setFromColor(this.color),t},L=X,u.PointAttachment=L,L=s=s||{},a=L.core||(L.core={}),l=a.Attachment,F(U,l),U.prototype.updateOffset=function(){var t=this.width/this.region.originalWidth*this.scaleX,e=this.height/this.region.originalHeight*this.scaleY,i=-this.width/2*this.scaleX+this.region.offsetX*t,n=-this.height/2*this.scaleY+this.region.offsetY*e,r=i+this.region.width*t,s=n+this.region.height*e,o=this.rotation*Math.PI/180,a=Math.cos(o),h=Math.sin(o),t=i*a+this.x,e=i*h,o=n*a+this.y,i=n*h,n=r*a+this.x,r=r*h,a=s*a+this.y,s=s*h,h=this.offset;h[U.OX1]=t-i,h[U.OY1]=o+e,h[U.OX2]=t-s,h[U.OY2]=a+e,h[U.OX3]=n-s,h[U.OY3]=a+r,h[U.OX4]=n-i,h[U.OY4]=o+r},U.prototype.setRegion=function(t){this.region=t;var e=this.uvs;t.rotate?(e[2]=t.u,e[3]=t.v2,e[4]=t.u,e[5]=t.v,e[6]=t.u2,e[7]=t.v,e[0]=t.u2,e[1]=t.v2):(e[0]=t.u,e[1]=t.v2,e[2]=t.u,e[3]=t.v,e[4]=t.u2,e[5]=t.v,e[6]=t.u2,e[7]=t.v2)},U.prototype.computeWorldVertices=function(t,e,i,n){var r=this.offset,s=t.matrix,o=s.tx,a=s.ty,h=s.a,l=s.c,u=s.b,c=s.d,t=0,t=r[U.OX1],s=r[U.OY1];e[i]=t*h+s*l+o,e[i+1]=t*u+s*c+a,i+=n,t=r[U.OX2],s=r[U.OY2],e[i]=t*h+s*l+o,e[i+1]=t*u+s*c+a,i+=n,t=r[U.OX3],s=r[U.OY3],e[i]=t*h+s*l+o,e[i+1]=t*u+s*c+a,i+=n,t=r[U.OX4],s=r[U.OY4],e[i]=t*h+s*l+o,e[i+1]=t*u+s*c+a},U.prototype.copy=function(){var t=new U(name);return t.region=this.region,t.rendererObject=this.rendererObject,t.path=this.path,t.x=this.x,t.y=this.y,t.scaleX=this.scaleX,t.scaleY=this.scaleY,t.rotation=this.rotation,t.width=this.width,t.height=this.height,a.Utils.arrayCopy(this.uvs,0,t.uvs,0,8),a.Utils.arrayCopy(this.offset,0,t.offset,0,8),t.color.setFromColor(this.color),t},U.OX1=0,U.OY1=1,U.OX2=2,U.OY2=3,U.OX3=4,U.OY3=5,U.OX4=6,U.OY4=7,U.X1=0,U.Y1=1,U.C1R=2,U.C1G=3,U.C1B=4,U.C1A=5,U.U1=6,U.V1=7,U.X2=8,U.Y2=9,U.C2R=10,U.C2G=11,U.C2B=12,U.C2A=13,U.U2=14,U.V2=15,U.X3=16,U.Y3=17,U.C3R=18,U.C3G=19,U.C3B=20,U.C3A=21,U.U3=22,U.V3=23,U.X4=24,U.Y4=25,U.C4R=26,U.C4G=27,U.C4B=28,U.C4A=29,U.U4=30,U.V4=31,L=U,a.RegionAttachment=L,L=s=s||{},o=L.core||(L.core={}),B.prototype.begin=function(t){},B.prototype.transform=function(t,e,i,n){t.x+=o.MathUtils.randomTriangular(-this.jitterX,this.jitterY),t.y+=o.MathUtils.randomTriangular(-this.jitterX,this.jitterY)},B.prototype.end=function(){},L=B,o.JitterEffect=L,L=s=s||{},h=L.core||(L.core={}),N.prototype.begin=function(t){this.worldX=t.x+this.centerX,this.worldY=t.y+this.centerY},N.prototype.transform=function(t,e,i,n){var r=this.angle*h.MathUtils.degreesToRadians,s=t.x-this.worldX,o=t.y-this.worldY,a=Math.sqrt(s*s+o*o);a<this.radius&&(r=N.interpolation.apply(0,r,(this.radius-a)/this.radius),a=Math.cos(r),r=Math.sin(r),t.x=a*s-r*o+this.worldX,t.y=r*s+a*o+this.worldY)},N.prototype.end=function(){},N.interpolation=new h.PowOut(2),L=N,h.SwirlEffect=L,Math.fround||(Math.fround=Math.fround=(r=new Float32Array(1),function(t){return r[0]=t,r[0]})),function(x){x.core.Bone.yDown=!0;var e,i,b=[0,0,0],n=(e=PIXI.Sprite,F(t,e),t);function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.region=null,t.attachment=null,t}x.SpineSprite=n,(a=PIXI.GraphicsGeometry.prototype).invalidate||(i=[],a.invalidate=function(){var t=this.graphicsData;i.push(0),this.graphicsData=i,this.clear(),this.graphicsData=t});var s,o=(s=PIXI.SimpleMesh,F(r,s),r);function r(t,e,i,n,r){r=s.call(this,t,e,i,n,r)||this;return r.region=null,r.attachment=null,r}x.SpineMesh=o;var l,a=(l=PIXI.Container,F(h,l),Object.defineProperty(h.prototype,"autoUpdate",{get:function(){return this._autoUpdate},set:function(t){t!==this._autoUpdate&&(this._autoUpdate=t,this.updateTransform=t?h.prototype.autoUpdateTransform:PIXI.Container.prototype.updateTransform)},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"visible",{get:function(){return this._visible},set:function(t){t!==this._visible&&((this._visible=t)&&(this.lastTime=0))},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"tint",{get:function(){return PIXI.utils.rgb2hex(this.tintRgb)},set:function(t){this.tintRgb=PIXI.utils.hex2rgb(t,this.tintRgb)},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"delayLimit",{get:function(){return(void 0!==this.localDelayLimit?this.localDelayLimit:h.globalDelayLimit)||Number.MAX_VALUE},enumerable:!0,configurable:!0}),h.prototype.update=function(t){var e=this.delayLimit;if(e<t&&(t=e),this.state.update(t),this.state.apply(this.skeleton),this.skeleton){this.skeleton.updateWorldTransform();var i=this.skeleton.slots,t=this.color,n=null,r=null;t?(n=t.light,r=t.dark):n=this.tintRgb;for(var s=0,o=i.length;s<o;s++){var a=(w=i[s]).getAttachment(),h=this.slotContainers[s];if(a){var l,u=null,c=a.color;if(a instanceof x.core.RegionAttachment){var p,d,_,f=a.region;f&&(w.currentMesh&&(w.currentMesh.visible=!1,w.currentMesh=null,w.currentMeshName=void 0),p=f,w.currentSpriteName&&w.currentSpriteName===p.name?w.currentSpriteName!==p.name||w.hackRegion||this.setSpriteRegion(a,w.currentSprite,f):(d=p.name,w.currentSprite&&(w.currentSprite.visible=!1),w.sprites=w.sprites||{},void 0!==w.sprites[d]?w.sprites[d].visible=!0:(_=this.createSprite(w,a,d),h.addChild(_)),w.currentSprite=w.sprites[d],w.currentSpriteName=d)),(_=h.transform).setFromMatrix(w.bone.matrix),w.currentSprite.color?u=w.currentSprite.color:(b[0]=n[0]*w.color.r*c.r,b[1]=n[1]*w.color.g*c.g,b[2]=n[2]*w.color.b*c.b,w.currentSprite.tint=PIXI.utils.rgb2hex(b)),w.currentSprite.blendMode=w.blendMode}else if(a instanceof x.core.MeshAttachment)w.currentSprite&&(w.currentSprite.visible=!1,w.currentSprite=null,w.currentSpriteName=void 0,(_=new PIXI.Transform)._parentID=-1,_._worldID=h.transform._worldID,h.transform=_),w.currentMeshName&&w.currentMeshName===a.name||(l=a.name,w.currentMesh&&(w.currentMesh.visible=!1),w.meshes=w.meshes||{},void 0!==w.meshes[l]?w.meshes[l].visible=!0:(d=this.createMesh(w,a),h.addChild(d)),w.currentMesh=w.meshes[l],w.currentMeshName=l),a.computeWorldVerticesOld(w,w.currentMesh.vertices),w.currentMesh.color?u=w.currentMesh.color:(b[0]=n[0]*w.color.r*c.r,b[1]=n[1]*w.color.g*c.g,b[2]=n[2]*w.color.b*c.b,w.currentMesh.tint=PIXI.utils.rgb2hex(b)),w.currentMesh.blendMode=w.blendMode;else{if(!(a instanceof x.core.ClippingAttachment)){h.visible=!1;continue}w.currentGraphics||(this.createGraphics(w,a),h.addChild(w.clippingContainer),h.addChild(w.currentGraphics)),this.updateGraphics(w,a)}h.visible=!0,u&&(l=w.color.r*c.r,a=w.color.g*c.g,c=w.color.b*c.b,u.setLight(n[0]*l+r[0]*(1-l),n[1]*a+r[1]*(1-a),n[2]*c+r[2]*(1-c)),c=w.darkColor?(l=w.darkColor.r,a=w.darkColor.g,w.darkColor.b):a=l=0,u.setDark(n[0]*l+r[0]*(1-l),n[1]*a+r[1]*(1-a),n[2]*c+r[2]*(1-c))),h.alpha=w.color.a}else h.visible=!1}for(var m=this.skeleton.drawOrder,y=null,g=null,s=0,o=m.length;s<o;s++){var v,w=i[m[s].data.index],h=this.slotContainers[m[s].data.index];g||null!==h.parent&&h.parent!==this&&(h.parent.removeChild(h),h.parent=this),w.currentGraphics&&w.getAttachment()?(g=w.clippingContainer,y=w.getAttachment(),g.children.length=0,this.children[s]=h,y.endSlot==w.data&&(y.endSlot=null)):g?((v=this.tempClipContainers[s])||((v=this.tempClipContainers[s]=this.newContainer()).visible=!1),this.children[s]=v,h.parent=null,g.addChild(h),y.endSlot==w.data&&(g.renderable=!0,y=g=null)):this.children[s]=h}}},h.prototype.setSpriteRegion=function(t,e,i){e.attachment===t&&e.region===i||(e.region=i,e.attachment=t,e.texture=i.texture,e.rotation=t.rotation*x.core.MathUtils.degRad,e.position.x=t.x,e.position.y=t.y,e.alpha=t.color.a,i.size?(e.scale.x=i.size.width/i.originalWidth,e.scale.y=-i.size.height/i.originalHeight):(e.scale.x=t.scaleX*t.width/i.originalWidth,e.scale.y=-t.scaleY*t.height/i.originalHeight))},h.prototype.setMeshRegion=function(t,e,i){e.attachment===t&&e.region===i||(e.region=i,e.attachment=t,e.texture=i.texture,i.texture.updateUvs(),e.uvBuffer.update(t.regionUVs))},h.prototype.autoUpdateTransform=function(){var t;h.globalAutoUpdate?(this.lastTime=this.lastTime||Date.now(),t=.001*(Date.now()-this.lastTime),this.lastTime=Date.now(),this.update(t)):this.lastTime=0,PIXI.Container.prototype.updateTransform.call(this)},h.prototype.createSprite=function(t,e,i){var n=e.region;t.hackAttachment===e&&(n=t.hackRegion);n=n.texture,n=this.newSprite(n);return n.anchor.set(.5),this.setSpriteRegion(e,n,e.region),t.sprites=t.sprites||{},t.sprites[i]=n},h.prototype.createMesh=function(t,e){var i=e.region;t.hackAttachment===e&&(i=t.hackRegion,t.hackAttachment=null,t.hackRegion=null);var n=this.newMesh(i.texture,new Float32Array(e.regionUVs.length),e.regionUVs,new Uint16Array(e.triangles),PIXI.DRAW_MODES.TRIANGLES);return n.canvasPadding&&(n.canvasPadding=1.5),n.alpha=e.color.a,n.region=e.region,this.setMeshRegion(e,n,i),t.meshes=t.meshes||{},t.meshes[e.name]=n},h.prototype.createGraphics=function(t,e){var i=this.newGraphics(),n=new PIXI.Polygon([]);return i.clear(),i.beginFill(16777215,1),i.drawPolygon(n),i.renderable=!1,t.currentGraphics=i,t.clippingContainer=this.newContainer(),t.clippingContainer.mask=t.currentGraphics,i},h.prototype.updateGraphics=function(t,e){var i=t.currentGraphics.geometry,n=i.graphicsData[0].shape.points,r=e.worldVerticesLength;n.length=r,e.computeWorldVertices(t,0,r,n,0,2),i.invalidate()},h.prototype.hackTextureBySlotIndex=function(t,e,i){void 0===e&&(e=null),void 0===i&&(i=null);var n=this.skeleton.slots[t];if(!n)return!1;var r=n.getAttachment(),t=r.region;return e?((t=new x.core.TextureRegion).texture=e,t.size=i,n.hackRegion=t,n.hackAttachment=r):(n.hackRegion=null,n.hackAttachment=null),n.currentSprite&&n.currentSprite.region!=t?(this.setSpriteRegion(r,n.currentSprite,t),n.currentSprite.region=t):n.currentMesh&&n.currentMesh.region!=t&&this.setMeshRegion(r,n.currentMesh,t),!0},h.prototype.hackTextureBySlotName=function(t,e,i){void 0===e&&(e=null),void 0===i&&(i=null);t=this.skeleton.findSlotIndex(t);return-1!=t&&this.hackTextureBySlotIndex(t,e,i)},h.prototype.newContainer=function(){return new PIXI.Container},h.prototype.newSprite=function(t){return new n(t)},h.prototype.newGraphics=function(){return new PIXI.Graphics},h.prototype.newMesh=function(t,e,i,n,r){return new o(t,e,i,n,r)},h.prototype.transformHack=function(){return 1},h.prototype.hackAttachmentGroups=function(t,e,i){if(t){for(var n=[],r=[],s=0,o=this.skeleton.slots.length;s<o;s++){var a=this.skeleton.slots[s],h=a.currentSpriteName||a.currentMeshName||"",a=a.currentSprite||a.currentMesh;h.endsWith(t)?(a.parentGroup=e,r.push(a)):i&&a&&(a.parentGroup=i,n.push(a))}return[n,r]}},h.prototype.destroy=function(t){for(var e=0,i=this.skeleton.slots.length;e<i;e++){var n,r,s=this.skeleton.slots[e];for(n in s.meshes)s.meshes[n].destroy(t);for(r in s.meshes=null,s.sprites)s.sprites[r].destroy(t);s.sprites=null}for(e=0,i=this.slotContainers.length;e<i;e++)this.slotContainers[e].destroy(t);this.spineData=null,this.skeleton=null,this.slotContainers=null,this.stateData=null,this.state=null,this.tempClipContainers=null,l.prototype.destroy.call(this,t)},h.globalAutoUpdate=!0,h.globalDelayLimit=0,h.clippingPolygon=[],h);function h(t){var e=l.call(this)||this;if(!t)throw new Error("The spineData param is required.");if("string"==typeof t)throw new Error('spineData param cant be string. Please use spine.Spine.fromAtlas("YOUR_RESOURCE_NAME") from now on.');e.spineData=t,e.skeleton=new x.core.Skeleton(t),e.skeleton.updateWorldTransform(),e.stateData=new x.core.AnimationStateData(t),e.state=new x.core.AnimationState(e.stateData),e.slotContainers=[],e.tempClipContainers=[];for(var i=0,n=e.skeleton.slots.length;i<n;i++){var r,s,o=e.skeleton.slots[i],a=o.getAttachment(),h=e.newContainer();e.slotContainers.push(h),e.addChild(h),e.tempClipContainers.push(null),a instanceof x.core.RegionAttachment?(r=a.region.name,s=e.createSprite(o,a,r),o.currentSprite=s,o.currentSpriteName=r,h.addChild(s)):a instanceof x.core.MeshAttachment?(s=e.createMesh(o,a),o.currentMesh=s,o.currentMeshName=a.name,h.addChild(s)):a instanceof x.core.ClippingAttachment&&(e.createGraphics(o,a),h.addChild(o.clippingContainer),h.addChild(o.currentGraphics))}return e.tintRgb=new Float32Array([1,1,1]),e.autoUpdate=!0,e.visible=!0,e}x.Spine=a}(s=s||{}),L=s=s||{},PIXI.spine=L,(L=PIXI.Texture.prototype)._updateUvs||(L._updateUvs=L.updateUvs),function(p){PIXI.LoaderResource.setExtensionXhrType("skel",PIXI.LoaderResource.XHR_RESPONSE_TYPE.BUFFER);var t=(e.use=function(e,i){if(!e.data)return i();var t=e.type===PIXI.LoaderResource.TYPE.JSON&&e.data.bones,n=e.xhrType===PIXI.LoaderResource.XHR_RESPONSE_TYPE.BUFFER&&("skel"===e.extension||e.metadata.spineMetadata);if(!t&&!n)return i();var r=null,s=e.data;t?r=new p.core.SkeletonJson(null):(r=new p.core.SkeletonBinary(null),e.data instanceof ArrayBuffer&&(s=new Uint8Array(e.data)));var o=e.metadata||{},a=o?e.metadata.spineSkeletonScale:null;a&&(r.scale=a);var h=o?e.metadata.spineAtlas:null;if(!1===h)return i();if(h&&h.pages)return r.attachmentLoader=new p.core.AtlasAttachmentLoader(h),e.spineData=r.readSkeletonData(s),e.spineAtlas=h,i();var l=o.spineAtlasSuffix||".atlas",n=e.url,t=n.indexOf("?");0<t&&(n=n.substr(0,t)),n=n.substr(0,n.lastIndexOf("."))+l,e.metadata&&e.metadata.spineAtlasFile&&(n=e.metadata.spineAtlasFile),n=n.replace(this.baseUrl,"");function u(t){new p.core.TextureAtlas(t,c,function(t){t&&(r.attachmentLoader=new p.core.AtlasAttachmentLoader(t),e.spineData=r.readSkeletonData(s),e.spineAtlas=t),i()})}var a={crossOrigin:e.crossOrigin,xhrType:PIXI.LoaderResource.XHR_RESPONSE_TYPE.TEXT,metadata:o.spineMetadata||null,parentResource:e},h={crossOrigin:e.crossOrigin,metadata:o.imageMetadata||null,parentResource:e},t=(t=e.url.substr(0,e.url.lastIndexOf("/")+1)).replace(this.baseUrl,""),l=o.imageNamePrefix||e.name+"_atlas_page_",c=o.images?_(o.images):o.image?_({default:o.image}):o.imageLoader?o.imageLoader(this,l,t,h):d(this,l,t,h);e.metadata&&e.metadata.atlasRawData?u(e.metadata.atlasRawData):this.add(e.name+"_atlas",n,a,function(t){t.error?i():u(t.data)})},e);function e(){}function d(s,o,a,h){return a&&a.lastIndexOf("/")!==a.length-1&&(a+="/"),function(t,e){var i=o+t,t=a+t,n=s.resources[i];function r(){e(n.texture.baseTexture)}n?n.texture?r():n.onAfterMiddleware.add(r):s.add(i,t,h,function(t){t.error?e(null):e(t.texture.baseTexture)})}}function _(i){return function(t,e){t=i[t]||i.default;t&&t.baseTexture?e(t.baseTexture):e(t)}}p.AtlasParser=t,p.imageLoaderAdapter=d,p.syncImageLoaderAdapter=function(t,i){return t&&t.lastIndexOf("/")!==t.length-1&&(t+="/"),function(t,e){e(PIXI.BaseTexture.from(t,i))}},p.staticImageLoader=_,PIXI.Loader&&PIXI.Loader.registerPlugin(t)}(s=s||{})},{}],PXMd:[function(t,e,i){"use strict";t("pixi-spine")},{"pixi-spine":"d92s"}],vDHW:[function(t,e,i){var n=arguments[3];!function(){"use strict";function t(){this.init()}function e(t){t.src&&0!==t.src.length?this.init(t):console.error("An array of source files must be passed with any new Howl.")}t.prototype={init:function(){var t=this||g;return t._counter=1e3,t._html5AudioPool=[],t.html5PoolSize=10,t._codecs={},t._howls=[],t._muted=!1,t._volume=1,t._canPlayEvent="canplaythrough",t._navigator="undefined"!=typeof window&&window.navigator?window.navigator:null,t.masterGain=null,t.noAudio=!1,t.usingWebAudio=!0,t.autoSuspend=!0,t.ctx=null,t.autoUnlock=!0,t._setup(),t},volume:function(t){var e=this||g;if(t=parseFloat(t),e.ctx||u(),void 0!==t&&0<=t&&t<=1){if(e._volume=t,e._muted)return e;e.usingWebAudio&&e.masterGain.gain.setValueAtTime(t,g.ctx.currentTime);for(var i=0;i<e._howls.length;i++)if(!e._howls[i]._webAudio)for(var n=e._howls[i]._getSoundIds(),r=0;r<n.length;r++){var s=e._howls[i]._soundById(n[r]);s&&s._node&&(s._node.volume=s._volume*t)}return e}return e._volume},mute:function(t){var e=this||g;e.ctx||u(),e._muted=t,e.usingWebAudio&&e.masterGain.gain.setValueAtTime(t?0:e._volume,g.ctx.currentTime);for(var i=0;i<e._howls.length;i++)if(!e._howls[i]._webAudio)for(var n=e._howls[i]._getSoundIds(),r=0;r<n.length;r++){var s=e._howls[i]._soundById(n[r]);s&&s._node&&(s._node.muted=!!t||s._muted)}return e},unload:function(){for(var t=this||g,e=t._howls.length-1;0<=e;e--)t._howls[e].unload();return t.usingWebAudio&&t.ctx&&void 0!==t.ctx.close&&(t.ctx.close(),t.ctx=null,u()),t},codecs:function(t){return(this||g)._codecs[t.replace(/^x-/,"")]},_setup:function(){var e=this||g;if(e.state=e.ctx&&e.ctx.state||"suspended",e._autoSuspend(),!e.usingWebAudio)if("undefined"!=typeof Audio)try{void 0===(new Audio).oncanplaythrough&&(e._canPlayEvent="canplay")}catch(t){e.noAudio=!0}else e.noAudio=!0;try{(new Audio).muted&&(e.noAudio=!0)}catch(e){}return e.noAudio||e._setupCodecs(),e},_setupCodecs:function(){var e=this||g,t=null;try{t="undefined"!=typeof Audio?new Audio:null}catch(t){return e}if(!t||"function"!=typeof t.canPlayType)return e;var i=t.canPlayType("audio/mpeg;").replace(/^no$/,""),n=e._navigator&&e._navigator.userAgent.match(/OPR\/([0-6].)/g),n=n&&parseInt(n[0].split("/")[1],10)<33;return e._codecs={mp3:!(n||!i&&!t.canPlayType("audio/mp3;").replace(/^no$/,"")),mpeg:!!i,opus:!!t.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!t.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),oga:!!t.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!t.canPlayType('audio/wav; codecs="1"').replace(/^no$/,""),aac:!!t.canPlayType("audio/aac;").replace(/^no$/,""),caf:!!t.canPlayType("audio/x-caf;").replace(/^no$/,""),m4a:!!(t.canPlayType("audio/x-m4a;")||t.canPlayType("audio/m4a;")||t.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(t.canPlayType("audio/x-mp4;")||t.canPlayType("audio/mp4;")||t.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!!t.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,""),webm:!!t.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,""),dolby:!!t.canPlayType('audio/mp4; codecs="ec-3"').replace(/^no$/,""),flac:!!(t.canPlayType("audio/x-flac;")||t.canPlayType("audio/flac;")).replace(/^no$/,"")},e},_unlockAudio:function(){var a=this||g;if(!a._audioUnlocked&&a.ctx){a._audioUnlocked=!1,a.autoUnlock=!1,a._mobileUnloaded||44100===a.ctx.sampleRate||(a._mobileUnloaded=!0,a.unload()),a._scratchBuffer=a.ctx.createBuffer(1,1,22050);var h=function(t){for(var e=0;e<a.html5PoolSize;e++)try{var i=new Audio;i._unlocked=!0,a._releaseHtml5Audio(i)}catch(t){a.noAudio=!0}for(e=0;e<a._howls.length;e++)if(!a._howls[e]._webAudio)for(var n=a._howls[e]._getSoundIds(),r=0;r<n.length;r++){var s=a._howls[e]._soundById(n[r]);s&&s._node&&!s._node._unlocked&&(s._node._unlocked=!0,s._node.load())}a._autoResume();var o=a.ctx.createBufferSource();o.buffer=a._scratchBuffer,o.connect(a.ctx.destination),void 0===o.start?o.noteOn(0):o.start(0),"function"==typeof a.ctx.resume&&a.ctx.resume(),o.onended=function(){o.disconnect(0),a._audioUnlocked=!0,document.removeEventListener("touchstart",h,!0),document.removeEventListener("touchend",h,!0),document.removeEventListener("click",h,!0);for(var t=0;t<a._howls.length;t++)a._howls[t]._emit("unlock")}};return document.addEventListener("touchstart",h,!0),document.addEventListener("touchend",h,!0),document.addEventListener("click",h,!0),a}},_obtainHtml5Audio:function(){var t=this||g;if(t._html5AudioPool.length)return t._html5AudioPool.pop();t=(new Audio).play();return t&&"undefined"!=typeof Promise&&(t instanceof Promise||"function"==typeof t.then)&&t.catch(function(){console.warn("HTML5 Audio pool exhausted, returning potentially locked audio object.")}),new Audio},_releaseHtml5Audio:function(t){var e=this||g;return t._unlocked&&e._html5AudioPool.push(t),e},_autoSuspend:function(){var t=this;if(t.autoSuspend&&t.ctx&&void 0!==t.ctx.suspend&&g.usingWebAudio){for(var e=0;e<t._howls.length;e++)if(t._howls[e]._webAudio)for(var i=0;i<t._howls[e]._sounds.length;i++)if(!t._howls[e]._sounds[i]._paused)return t;return t._suspendTimer&&clearTimeout(t._suspendTimer),t._suspendTimer=setTimeout(function(){t.autoSuspend&&(t._suspendTimer=null,t.state="suspending",t.ctx.suspend().then(function(){t.state="suspended",t._resumeAfterSuspend&&(delete t._resumeAfterSuspend,t._autoResume())}))},3e4),t}},_autoResume:function(){var e=this;if(e.ctx&&void 0!==e.ctx.resume&&g.usingWebAudio)return"running"===e.state&&e._suspendTimer?(clearTimeout(e._suspendTimer),e._suspendTimer=null):"suspended"===e.state?(e.ctx.resume().then(function(){e.state="running";for(var t=0;t<e._howls.length;t++)e._howls[t]._emit("resume")}),e._suspendTimer&&(clearTimeout(e._suspendTimer),e._suspendTimer=null)):"suspending"===e.state&&(e._resumeAfterSuspend=!0),e}};var g=new t;e.prototype={init:function(t){var e=this;return g.ctx||u(),e._autoplay=t.autoplay||!1,e._format="string"!=typeof t.format?t.format:[t.format],e._html5=t.html5||!1,e._muted=t.mute||!1,e._loop=t.loop||!1,e._pool=t.pool||5,e._preload="boolean"!=typeof t.preload||t.preload,e._rate=t.rate||1,e._sprite=t.sprite||{},e._src="string"!=typeof t.src?t.src:[t.src],e._volume=void 0!==t.volume?t.volume:1,e._xhrWithCredentials=t.xhrWithCredentials||!1,e._duration=0,e._state="unloaded",e._sounds=[],e._endTimers={},e._queue=[],e._playLock=!1,e._onend=t.onend?[{fn:t.onend}]:[],e._onfade=t.onfade?[{fn:t.onfade}]:[],e._onload=t.onload?[{fn:t.onload}]:[],e._onloaderror=t.onloaderror?[{fn:t.onloaderror}]:[],e._onplayerror=t.onplayerror?[{fn:t.onplayerror}]:[],e._onpause=t.onpause?[{fn:t.onpause}]:[],e._onplay=t.onplay?[{fn:t.onplay}]:[],e._onstop=t.onstop?[{fn:t.onstop}]:[],e._onmute=t.onmute?[{fn:t.onmute}]:[],e._onvolume=t.onvolume?[{fn:t.onvolume}]:[],e._onrate=t.onrate?[{fn:t.onrate}]:[],e._onseek=t.onseek?[{fn:t.onseek}]:[],e._onunlock=t.onunlock?[{fn:t.onunlock}]:[],e._onresume=[],e._webAudio=g.usingWebAudio&&!e._html5,void 0!==g.ctx&&g.ctx&&g.autoUnlock&&g._unlockAudio(),g._howls.push(e),e._autoplay&&e._queue.push({event:"play",action:function(){e.play()}}),e._preload&&e.load(),e},load:function(){var t=null;if(g.noAudio)this._emit("loaderror",null,"No audio support.");else{"string"==typeof this._src&&(this._src=[this._src]);for(var e,i,n=0;n<this._src.length;n++){if(this._format&&this._format[n])e=this._format[n];else{if("string"!=typeof(i=this._src[n])){this._emit("loaderror",null,"Non-string found in selected audio sources - ignoring.");continue}(e=/^data:audio\/([^;,]+);/i.exec(i))||(e=/\.([^.]+)$/.exec(i.split("?",1)[0])),e=e&&e[1].toLowerCase()}if(e||console.warn('No file extension was found. Consider using the "format" property or specify an extension.'),e&&g.codecs(e)){t=this._src[n];break}}if(t)return this._src=t,this._state="loading","https:"===window.location.protocol&&"http:"===t.slice(0,5)&&(this._html5=!0,this._webAudio=!1),new r(this),this._webAudio&&s(this),this;this._emit("loaderror",null,"No codec support for selected audio sources.")}},play:function(e,i){var n=this,t=null;if("number"==typeof e)t=e,e=null;else{if("string"==typeof e&&"loaded"===n._state&&!n._sprite[e])return null;if(void 0===e&&(e="__default",!n._playLock)){for(var r=0,s=0;s<n._sounds.length;s++)n._sounds[s]._paused&&!n._sounds[s]._ended&&(r++,t=n._sounds[s]._id);1===r?e=null:t=null}}var o=t?n._soundById(t):n._inactiveSound();if(!o)return null;if(t&&!e&&(e=o._sprite||"__default"),"loaded"!==n._state){o._sprite=e,o._ended=!1;var a=o._id;return n._queue.push({event:"play",action:function(){n.play(a)}}),a}if(t&&!o._paused)return i||n._loadQueue("play"),o._id;n._webAudio&&g._autoResume();var h=Math.max(0,0<o._seek?o._seek:n._sprite[e][0]/1e3),l=Math.max(0,(n._sprite[e][0]+n._sprite[e][1])/1e3-h),u=1e3*l/Math.abs(o._rate),c=n._sprite[e][0]/1e3,p=(n._sprite[e][0]+n._sprite[e][1])/1e3;o._sprite=e,o._ended=!1;function d(){o._paused=!1,o._seek=h,o._start=c,o._stop=p,o._loop=!(!o._loop&&!n._sprite[e][2])}if(!(p<=h)){var _,f,m,y=o._node;return n._webAudio?(f=function(){n._playLock=!1,d(),n._refreshBuffer(o);var t=o._muted||n._muted?0:o._volume;y.gain.setValueAtTime(t,g.ctx.currentTime),o._playStart=g.ctx.currentTime,void 0===y.bufferSource.start?o._loop?y.bufferSource.noteGrainOn(0,h,86400):y.bufferSource.noteGrainOn(0,h,l):o._loop?y.bufferSource.start(0,h,86400):y.bufferSource.start(0,h,l),u!=1/0&&(n._endTimers[o._id]=setTimeout(n._ended.bind(n,o),u)),i||setTimeout(function(){n._emit("play",o._id),n._loadQueue()},0)},"running"===g.state?f():(n._playLock=!0,n.once("resume",f),n._clearTimer(o._id))):(_=function(){y.currentTime=h,y.muted=o._muted||n._muted||g._muted||y.muted,y.volume=o._volume*g.volume(),y.playbackRate=o._rate;try{var t=y.play();if(t&&"undefined"!=typeof Promise&&(t instanceof Promise||"function"==typeof t.then)?(n._playLock=!0,d(),t.then(function(){n._playLock=!1,y._unlocked=!0,i||(n._emit("play",o._id),n._loadQueue())}).catch(function(){n._playLock=!1,n._emit("playerror",o._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction."),o._ended=!0,o._paused=!0})):i||(n._playLock=!1,d(),n._emit("play",o._id),n._loadQueue()),y.playbackRate=o._rate,y.paused)return void n._emit("playerror",o._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction.");"__default"!==e||o._loop?n._endTimers[o._id]=setTimeout(n._ended.bind(n,o),u):(n._endTimers[o._id]=function(){n._ended(o),y.removeEventListener("ended",n._endTimers[o._id],!1)},y.addEventListener("ended",n._endTimers[o._id],!1))}catch(t){n._emit("playerror",o._id,t)}},"data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA"===y.src&&(y.src=n._src,y.load()),f=window&&window.ejecta||!y.readyState&&g._navigator.isCocoonJS,3<=y.readyState||f?_():(n._playLock=!0,m=function(){_(),y.removeEventListener(g._canPlayEvent,m,!1)},y.addEventListener(g._canPlayEvent,m,!1),n._clearTimer(o._id))),o._id}n._ended(o)},pause:function(t){var e=this;if("loaded"!==e._state||e._playLock)return e._queue.push({event:"pause",action:function(){e.pause(t)}}),e;for(var i=e._getSoundIds(t),n=0;n<i.length;n++){e._clearTimer(i[n]);var r=e._soundById(i[n]);if(r&&!r._paused&&(r._seek=e.seek(i[n]),r._rateSeek=0,r._paused=!0,e._stopFade(i[n]),r._node))if(e._webAudio){if(!r._node.bufferSource)continue;void 0===r._node.bufferSource.stop?r._node.bufferSource.noteOff(0):r._node.bufferSource.stop(0),e._cleanBuffer(r._node)}else isNaN(r._node.duration)&&r._node.duration!==1/0||r._node.pause();arguments[1]||e._emit("pause",r?r._id:null)}return e},stop:function(t,e){var i=this;if("loaded"!==i._state||i._playLock)return i._queue.push({event:"stop",action:function(){i.stop(t)}}),i;for(var n=i._getSoundIds(t),r=0;r<n.length;r++){i._clearTimer(n[r]);var s=i._soundById(n[r]);s&&(s._seek=s._start||0,s._rateSeek=0,s._paused=!0,s._ended=!0,i._stopFade(n[r]),s._node&&(i._webAudio?s._node.bufferSource&&(void 0===s._node.bufferSource.stop?s._node.bufferSource.noteOff(0):s._node.bufferSource.stop(0),i._cleanBuffer(s._node)):isNaN(s._node.duration)&&s._node.duration!==1/0||(s._node.currentTime=s._start||0,s._node.pause(),s._node.duration===1/0&&i._clearSound(s._node))),e||i._emit("stop",s._id))}return i},mute:function(t,e){var i=this;if("loaded"!==i._state||i._playLock)return i._queue.push({event:"mute",action:function(){i.mute(t,e)}}),i;if(void 0===e){if("boolean"!=typeof t)return i._muted;i._muted=t}for(var n=i._getSoundIds(e),r=0;r<n.length;r++){var s=i._soundById(n[r]);s&&(s._muted=t,s._interval&&i._stopFade(s._id),i._webAudio&&s._node?s._node.gain.setValueAtTime(t?0:s._volume,g.ctx.currentTime):s._node&&(s._node.muted=!!g._muted||t),i._emit("mute",s._id))}return i},volume:function(){var t,e,i,n=this,r=arguments;if(0===r.length)return n._volume;if(1===r.length||2===r.length&&void 0===r[1]?0<=n._getSoundIds().indexOf(r[0])?e=parseInt(r[0],10):t=parseFloat(r[0]):2<=r.length&&(t=parseFloat(r[0]),e=parseInt(r[1],10)),!(void 0!==t&&0<=t&&t<=1))return(i=e?n._soundById(e):n._sounds[0])?i._volume:0;if("loaded"!==n._state||n._playLock)return n._queue.push({event:"volume",action:function(){n.volume.apply(n,r)}}),n;void 0===e&&(n._volume=t),e=n._getSoundIds(e);for(var s=0;s<e.length;s++)(i=n._soundById(e[s]))&&(i._volume=t,r[2]||n._stopFade(e[s]),n._webAudio&&i._node&&!i._muted?i._node.gain.setValueAtTime(t,g.ctx.currentTime):i._node&&!i._muted&&(i._node.volume=t*g.volume()),n._emit("volume",i._id));return n},fade:function(t,e,i,n){var r=this;if("loaded"!==r._state||r._playLock)return r._queue.push({event:"fade",action:function(){r.fade(t,e,i,n)}}),r;t=parseFloat(t),e=parseFloat(e),i=parseFloat(i),r.volume(t,n);for(var s=r._getSoundIds(n),o=0;o<s.length;o++){var a,h,l=r._soundById(s[o]);l&&(n||r._stopFade(s[o]),r._webAudio&&!l._muted&&(h=(a=g.ctx.currentTime)+i/1e3,l._volume=t,l._node.gain.setValueAtTime(t,a),l._node.gain.linearRampToValueAtTime(e,h)),r._startFadeInterval(l,t,e,i,s[o],void 0===n))}return r},_startFadeInterval:function(e,i,n,r,t,s){var o=this,a=i,h=n-i,l=Math.abs(h/.01),l=Math.max(4,0<l?r/l:r),u=Date.now();e._fadeTo=n,e._interval=setInterval(function(){var t=(Date.now()-u)/r;u=Date.now(),a+=h*t,a=Math.max(0,a),a=Math.min(1,a),a=Math.round(100*a)/100,o._webAudio?e._volume=a:o.volume(a,e._id,!0),s&&(o._volume=a),(n<i&&a<=n||i<n&&n<=a)&&(clearInterval(e._interval),e._interval=null,e._fadeTo=null,o.volume(n,e._id),o._emit("fade",e._id))},l)},_stopFade:function(t){var e=this._soundById(t);return e&&e._interval&&(this._webAudio&&e._node.gain.cancelScheduledValues(g.ctx.currentTime),clearInterval(e._interval),e._interval=null,this.volume(e._fadeTo,t),e._fadeTo=null,this._emit("fade",t)),this},loop:function(){var t,e,i,n=arguments;if(0===n.length)return this._loop;if(1===n.length){if("boolean"!=typeof n[0])return!!(i=this._soundById(parseInt(n[0],10)))&&i._loop;t=n[0],this._loop=t}else 2===n.length&&(t=n[0],e=parseInt(n[1],10));for(var r=this._getSoundIds(e),s=0;s<r.length;s++)(i=this._soundById(r[s]))&&(i._loop=t,this._webAudio&&i._node&&i._node.bufferSource&&((i._node.bufferSource.loop=t)&&(i._node.bufferSource.loopStart=i._start||0,i._node.bufferSource.loopEnd=i._stop)));return this},rate:function(){var t,e,i,n=this,r=arguments;if(0===r.length?e=n._sounds[0]._id:1===r.length?0<=n._getSoundIds().indexOf(r[0])?e=parseInt(r[0],10):t=parseFloat(r[0]):2===r.length&&(t=parseFloat(r[0]),e=parseInt(r[1],10)),"number"!=typeof t)return((i=n._soundById(e))?i:n)._rate;if("loaded"!==n._state||n._playLock)return n._queue.push({event:"rate",action:function(){n.rate.apply(n,r)}}),n;void 0===e&&(n._rate=t),e=n._getSoundIds(e);for(var s,o=0;o<e.length;o++)(i=n._soundById(e[o]))&&(n.playing(e[o])&&(i._rateSeek=n.seek(e[o]),i._playStart=n._webAudio?g.ctx.currentTime:i._playStart),i._rate=t,n._webAudio&&i._node&&i._node.bufferSource?i._node.bufferSource.playbackRate.setValueAtTime(t,g.ctx.currentTime):i._node&&(i._node.playbackRate=t),s=n.seek(e[o]),s=1e3*((n._sprite[i._sprite][0]+n._sprite[i._sprite][1])/1e3-s)/Math.abs(i._rate),!n._endTimers[e[o]]&&i._paused||(n._clearTimer(e[o]),n._endTimers[e[o]]=setTimeout(n._ended.bind(n,i),s)),n._emit("rate",i._id));return n},seek:function(){var t,e,i=this,n=arguments;if(0===n.length?e=i._sounds[0]._id:1===n.length?0<=i._getSoundIds().indexOf(n[0])?e=parseInt(n[0],10):i._sounds.length&&(e=i._sounds[0]._id,t=parseFloat(n[0])):2===n.length&&(t=parseFloat(n[0]),e=parseInt(n[1],10)),void 0===e)return i;if("loaded"!==i._state||i._playLock)return i._queue.push({event:"seek",action:function(){i.seek.apply(i,n)}}),i;var r=i._soundById(e);if(r){if(!("number"==typeof t&&0<=t)){if(i._webAudio){var s=i.playing(e)?g.ctx.currentTime-r._playStart:0,o=r._rateSeek?r._rateSeek-r._seek:0;return r._seek+(o+s*Math.abs(r._rate))}return r._node.currentTime}var a=i.playing(e);a&&i.pause(e,!0),r._seek=t,r._ended=!1,i._clearTimer(e),i._webAudio||!r._node||isNaN(r._node.duration)||(r._node.currentTime=t);var h,l=function(){i._emit("seek",e),a&&i.play(e,!0)};a&&!i._webAudio?(h=function(){i._playLock?setTimeout(h,0):l()},setTimeout(h,0)):l()}return i},playing:function(t){if("number"==typeof t){t=this._soundById(t);return!!t&&!t._paused}for(var e=0;e<this._sounds.length;e++)if(!this._sounds[e]._paused)return!0;return!1},duration:function(t){var e=this._duration,t=this._soundById(t);return t&&(e=this._sprite[t._sprite][1]/1e3),e},state:function(){return this._state},unload:function(){for(var t=this,e=t._sounds,i=0;i<e.length;i++)e[i]._paused||t.stop(e[i]._id),t._webAudio||(t._clearSound(e[i]._node),e[i]._node.removeEventListener("error",e[i]._errorFn,!1),e[i]._node.removeEventListener(g._canPlayEvent,e[i]._loadFn,!1),g._releaseHtml5Audio(e[i]._node)),delete e[i]._node,t._clearTimer(e[i]._id);var n=g._howls.indexOf(t);0<=n&&g._howls.splice(n,1);for(var r=!0,i=0;i<g._howls.length;i++)if(g._howls[i]._src===t._src||0<=t._src.indexOf(g._howls[i]._src)){r=!1;break}return o&&r&&delete o[t._src],g.noAudio=!1,t._state="unloaded",t._sounds=[],t=null},on:function(t,e,i,n){t=this["_on"+t];return"function"==typeof e&&t.push(n?{id:i,fn:e,once:n}:{id:i,fn:e}),this},off:function(t,e,i){var n=this["_on"+t],r=0;if("number"==typeof e&&(i=e,e=null),e||i)for(r=0;r<n.length;r++){var s=i===n[r].id;if(e===n[r].fn&&s||!e&&s){n.splice(r,1);break}}else if(t)this["_on"+t]=[];else for(var o=Object.keys(this),r=0;r<o.length;r++)0===o[r].indexOf("_on")&&Array.isArray(this[o[r]])&&(this[o[r]]=[]);return this},once:function(t,e,i){return this.on(t,e,i,1),this},_emit:function(t,e,i){for(var n=this["_on"+t],r=n.length-1;0<=r;r--)n[r].id&&n[r].id!==e&&"load"!==t||(setTimeout(function(t){t.call(this,e,i)}.bind(this,n[r].fn),0),n[r].once&&this.off(t,n[r].fn,n[r].id));return this._loadQueue(t),this},_loadQueue:function(t){var e;return 0<this._queue.length&&((e=this._queue[0]).event===t&&(this._queue.shift(),this._loadQueue()),t||e.action()),this},_ended:function(t){var e=t._sprite;if(!this._webAudio&&t._node&&!t._node.paused&&!t._node.ended&&t._node.currentTime<t._stop)return setTimeout(this._ended.bind(this,t),100),this;var i=!(!t._loop&&!this._sprite[e][2]);return this._emit("end",t._id),!this._webAudio&&i&&this.stop(t._id,!0).play(t._id),this._webAudio&&i&&(this._emit("play",t._id),t._seek=t._start||0,t._rateSeek=0,t._playStart=g.ctx.currentTime,e=1e3*(t._stop-t._start)/Math.abs(t._rate),this._endTimers[t._id]=setTimeout(this._ended.bind(this,t),e)),this._webAudio&&!i&&(t._paused=!0,t._ended=!0,t._seek=t._start||0,t._rateSeek=0,this._clearTimer(t._id),this._cleanBuffer(t._node),g._autoSuspend()),this._webAudio||i||this.stop(t._id,!0),this},_clearTimer:function(t){var e;return this._endTimers[t]&&("function"!=typeof this._endTimers[t]?clearTimeout(this._endTimers[t]):(e=this._soundById(t))&&e._node&&e._node.removeEventListener("ended",this._endTimers[t],!1),delete this._endTimers[t]),this},_soundById:function(t){for(var e=0;e<this._sounds.length;e++)if(t===this._sounds[e]._id)return this._sounds[e];return null},_inactiveSound:function(){this._drain();for(var t=0;t<this._sounds.length;t++)if(this._sounds[t]._ended)return this._sounds[t].reset();return new r(this)},_drain:function(){var t=this._pool,e=0,i=0;if(!(this._sounds.length<t)){for(i=0;i<this._sounds.length;i++)this._sounds[i]._ended&&e++;for(i=this._sounds.length-1;0<=i;i--){if(e<=t)return;this._sounds[i]._ended&&(this._webAudio&&this._sounds[i]._node&&this._sounds[i]._node.disconnect(0),this._sounds.splice(i,1),e--)}}},_getSoundIds:function(t){if(void 0!==t)return[t];for(var e=[],i=0;i<this._sounds.length;i++)e.push(this._sounds[i]._id);return e},_refreshBuffer:function(t){return t._node.bufferSource=g.ctx.createBufferSource(),t._node.bufferSource.buffer=o[this._src],t._panner?t._node.bufferSource.connect(t._panner):t._node.bufferSource.connect(t._node),t._node.bufferSource.loop=t._loop,t._loop&&(t._node.bufferSource.loopStart=t._start||0,t._node.bufferSource.loopEnd=t._stop||0),t._node.bufferSource.playbackRate.setValueAtTime(t._rate,g.ctx.currentTime),this},_cleanBuffer:function(t){var e=g._navigator&&0<=g._navigator.vendor.indexOf("Apple");if(g._scratchBuffer&&t.bufferSource&&(t.bufferSource.onended=null,t.bufferSource.disconnect(0),e))try{t.bufferSource.buffer=g._scratchBuffer}catch(t){}return t.bufferSource=null,this},_clearSound:function(t){/MSIE |Trident\//.test(g._navigator&&g._navigator.userAgent)||(t.src="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA")}};var r=function(t){this._parent=t,this.init()};r.prototype={init:function(){var t=this._parent;return this._muted=t._muted,this._loop=t._loop,this._volume=t._volume,this._rate=t._rate,this._seek=0,this._paused=!0,this._ended=!0,this._sprite="__default",this._id=++g._counter,t._sounds.push(this),this.create(),this},create:function(){var t=this._parent,e=g._muted||this._muted||this._parent._muted?0:this._volume;return t._webAudio?(this._node=void 0===g.ctx.createGain?g.ctx.createGainNode():g.ctx.createGain(),this._node.gain.setValueAtTime(e,g.ctx.currentTime),this._node.paused=!0,this._node.connect(g.masterGain)):g.noAudio||(this._node=g._obtainHtml5Audio(),this._errorFn=this._errorListener.bind(this),this._node.addEventListener("error",this._errorFn,!1),this._loadFn=this._loadListener.bind(this),this._node.addEventListener(g._canPlayEvent,this._loadFn,!1),this._node.src=t._src,this._node.preload="auto",this._node.volume=e*g.volume(),this._node.load()),this},reset:function(){var t=this._parent;return this._muted=t._muted,this._loop=t._loop,this._volume=t._volume,this._rate=t._rate,this._seek=0,this._rateSeek=0,this._paused=!0,this._ended=!0,this._sprite="__default",this._id=++g._counter,this},_errorListener:function(){this._parent._emit("loaderror",this._id,this._node.error?this._node.error.code:0),this._node.removeEventListener("error",this._errorFn,!1)},_loadListener:function(){var t=this._parent;t._duration=Math.ceil(10*this._node.duration)/10,0===Object.keys(t._sprite).length&&(t._sprite={__default:[0,1e3*t._duration]}),"loaded"!==t._state&&(t._state="loaded",t._emit("load"),t._loadQueue()),this._node.removeEventListener(g._canPlayEvent,this._loadFn,!1)}};var o={},s=function(e){var t=e._src;if(o[t])return e._duration=o[t].duration,void l(e);if(/^data:[^;]+;base64,/.test(t)){for(var i=atob(t.split(",")[1]),n=new Uint8Array(i.length),r=0;r<i.length;++r)n[r]=i.charCodeAt(r);h(n.buffer,e)}else{var s=new XMLHttpRequest;s.open("GET",t,!0),s.withCredentials=e._xhrWithCredentials,s.responseType="arraybuffer",s.onload=function(){var t=(s.status+"")[0];"0"===t||"2"===t||"3"===t?h(s.response,e):e._emit("loaderror",null,"Failed loading audio file with status: "+s.status+".")},s.onerror=function(){e._webAudio&&(e._html5=!0,e._webAudio=!1,e._sounds=[],delete o[t],e.load())},a(s)}},a=function(e){try{e.send()}catch(t){e.onerror()}},h=function(t,e){function i(){e._emit("loaderror",null,"Decoding audio data failed.")}function n(t){t&&0<e._sounds.length?(o[e._src]=t,l(e,t)):i()}"undefined"!=typeof Promise&&1===g.ctx.decodeAudioData.length?g.ctx.decodeAudioData(t).then(n).catch(i):g.ctx.decodeAudioData(t,n,i)},l=function(t,e){e&&!t._duration&&(t._duration=e.duration),0===Object.keys(t._sprite).length&&(t._sprite={__default:[0,1e3*t._duration]}),"loaded"!==t._state&&(t._state="loaded",t._emit("load"),t._loadQueue())},u=function(){if(g.usingWebAudio){try{"undefined"!=typeof AudioContext?g.ctx=new AudioContext:"undefined"!=typeof webkitAudioContext?g.ctx=new webkitAudioContext:g.usingWebAudio=!1}catch(t){g.usingWebAudio=!1}g.ctx||(g.usingWebAudio=!1);var t=/iP(hone|od|ad)/.test(g._navigator&&g._navigator.platform),e=g._navigator&&g._navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),e=e?parseInt(e[1],10):null;t&&e&&e<9&&(e=/safari/.test(g._navigator&&g._navigator.userAgent.toLowerCase()),(g._navigator&&g._navigator.standalone&&!e||g._navigator&&!g._navigator.standalone&&!e)&&(g.usingWebAudio=!1)),g.usingWebAudio&&(g.masterGain=void 0===g.ctx.createGain?g.ctx.createGainNode():g.ctx.createGain(),g.masterGain.gain.setValueAtTime(g._muted?0:g._volume,g.ctx.currentTime),g.masterGain.connect(g.ctx.destination)),g._setup()}};void 0!==i&&(i.Howler=g,i.Howl=e),"undefined"!=typeof window?(window.HowlerGlobal=t,window.Howler=g,window.Howl=e,window.Sound=r):void 0!==n&&(n.HowlerGlobal=t,n.Howler=g,n.Howl=e,n.Sound=r)}(),function(){"use strict";var e,i,n;HowlerGlobal.prototype._pos=[0,0,0],HowlerGlobal.prototype._orientation=[0,0,-1,0,1,0],HowlerGlobal.prototype.stereo=function(t){if(!this.ctx||!this.ctx.listener)return this;for(var e=this._howls.length-1;0<=e;e--)this._howls[e].stereo(t);return this},HowlerGlobal.prototype.pos=function(t,e,i){return this.ctx&&this.ctx.listener?(e="number"!=typeof e?this._pos[1]:e,i="number"!=typeof i?this._pos[2]:i,"number"!=typeof t?this._pos:(this._pos=[t,e,i],void 0!==this.ctx.listener.positionX?(this.ctx.listener.positionX.setTargetAtTime(this._pos[0],Howler.ctx.currentTime,.1),this.ctx.listener.positionY.setTargetAtTime(this._pos[1],Howler.ctx.currentTime,.1),this.ctx.listener.positionZ.setTargetAtTime(this._pos[2],Howler.ctx.currentTime,.1)):this.ctx.listener.setPosition(this._pos[0],this._pos[1],this._pos[2]),this)):this},HowlerGlobal.prototype.orientation=function(t,e,i,n,r,s){if(!this.ctx||!this.ctx.listener)return this;var o=this._orientation;return e="number"!=typeof e?o[1]:e,i="number"!=typeof i?o[2]:i,n="number"!=typeof n?o[3]:n,r="number"!=typeof r?o[4]:r,s="number"!=typeof s?o[5]:s,"number"!=typeof t?o:(this._orientation=[t,e,i,n,r,s],void 0!==this.ctx.listener.forwardX?(this.ctx.listener.forwardX.setTargetAtTime(t,Howler.ctx.currentTime,.1),this.ctx.listener.forwardY.setTargetAtTime(e,Howler.ctx.currentTime,.1),this.ctx.listener.forwardZ.setTargetAtTime(i,Howler.ctx.currentTime,.1),this.ctx.listener.upX.setTargetAtTime(n,Howler.ctx.currentTime,.1),this.ctx.listener.upY.setTargetAtTime(r,Howler.ctx.currentTime,.1),this.ctx.listener.upZ.setTargetAtTime(s,Howler.ctx.currentTime,.1)):this.ctx.listener.setOrientation(t,e,i,n,r,s),this)},Howl.prototype.init=(e=Howl.prototype.init,function(t){return this._orientation=t.orientation||[1,0,0],this._stereo=t.stereo||null,this._pos=t.pos||null,this._pannerAttr={coneInnerAngle:void 0!==t.coneInnerAngle?t.coneInnerAngle:360,coneOuterAngle:void 0!==t.coneOuterAngle?t.coneOuterAngle:360,coneOuterGain:void 0!==t.coneOuterGain?t.coneOuterGain:0,distanceModel:void 0!==t.distanceModel?t.distanceModel:"inverse",maxDistance:void 0!==t.maxDistance?t.maxDistance:1e4,panningModel:void 0!==t.panningModel?t.panningModel:"HRTF",refDistance:void 0!==t.refDistance?t.refDistance:1,rolloffFactor:void 0!==t.rolloffFactor?t.rolloffFactor:1},this._onstereo=t.onstereo?[{fn:t.onstereo}]:[],this._onpos=t.onpos?[{fn:t.onpos}]:[],this._onorientation=t.onorientation?[{fn:t.onorientation}]:[],e.call(this,t)}),Howl.prototype.stereo=function(t,e){var i=this;if(!i._webAudio)return i;if("loaded"!==i._state)return i._queue.push({event:"stereo",action:function(){i.stereo(t,e)}}),i;var n=void 0===Howler.ctx.createStereoPanner?"spatial":"stereo";if(void 0===e){if("number"!=typeof t)return i._stereo;i._stereo=t,i._pos=[t,0,0]}for(var r=i._getSoundIds(e),s=0;s<r.length;s++){var o=i._soundById(r[s]);if(o){if("number"!=typeof t)return o._stereo;o._stereo=t,o._pos=[t,0,0],o._node&&(o._pannerAttr.panningModel="equalpower",o._panner&&o._panner.pan||l(o,n),"spatial"==n?void 0!==o._panner.positionX?(o._panner.positionX.setValueAtTime(t,Howler.ctx.currentTime),o._panner.positionY.setValueAtTime(0,Howler.ctx.currentTime),o._panner.positionZ.setValueAtTime(0,Howler.ctx.currentTime)):o._panner.setPosition(t,0,0):o._panner.pan.setValueAtTime(t,Howler.ctx.currentTime)),i._emit("stereo",o._id)}}return i},Howl.prototype.pos=function(t,e,i,n){var r=this;if(!r._webAudio)return r;if("loaded"!==r._state)return r._queue.push({event:"pos",action:function(){r.pos(t,e,i,n)}}),r;if(e="number"!=typeof e?0:e,i="number"!=typeof i?-.5:i,void 0===n){if("number"!=typeof t)return r._pos;r._pos=[t,e,i]}for(var s=r._getSoundIds(n),o=0;o<s.length;o++){var a=r._soundById(s[o]);if(a){if("number"!=typeof t)return a._pos;a._pos=[t,e,i],a._node&&(a._panner&&!a._panner.pan||l(a,"spatial"),void 0!==a._panner.positionX?(a._panner.positionX.setValueAtTime(t,Howler.ctx.currentTime),a._panner.positionY.setValueAtTime(e,Howler.ctx.currentTime),a._panner.positionZ.setValueAtTime(i,Howler.ctx.currentTime)):a._panner.setPosition(t,e,i)),r._emit("pos",a._id)}}return r},Howl.prototype.orientation=function(t,e,i,n){var r=this;if(!r._webAudio)return r;if("loaded"!==r._state)return r._queue.push({event:"orientation",action:function(){r.orientation(t,e,i,n)}}),r;if(e="number"!=typeof e?r._orientation[1]:e,i="number"!=typeof i?r._orientation[2]:i,void 0===n){if("number"!=typeof t)return r._orientation;r._orientation=[t,e,i]}for(var s=r._getSoundIds(n),o=0;o<s.length;o++){var a=r._soundById(s[o]);if(a){if("number"!=typeof t)return a._orientation;a._orientation=[t,e,i],a._node&&(a._panner||(a._pos||(a._pos=r._pos||[0,0,-.5]),l(a,"spatial")),void 0!==a._panner.orientationX?(a._panner.orientationX.setValueAtTime(t,Howler.ctx.currentTime),a._panner.orientationY.setValueAtTime(e,Howler.ctx.currentTime),a._panner.orientationZ.setValueAtTime(i,Howler.ctx.currentTime)):a._panner.setOrientation(t,e,i)),r._emit("orientation",a._id)}}return r},Howl.prototype.pannerAttr=function(){var t,e,i,n=this,r=arguments;if(!n._webAudio)return n;if(0===r.length)return n._pannerAttr;if(1===r.length){if("object"!=typeof r[0])return((i=n._soundById(parseInt(r[0],10)))?i:n)._pannerAttr;t=r[0],void 0===e&&(t.pannerAttr||(t.pannerAttr={coneInnerAngle:t.coneInnerAngle,coneOuterAngle:t.coneOuterAngle,coneOuterGain:t.coneOuterGain,distanceModel:t.distanceModel,maxDistance:t.maxDistance,refDistance:t.refDistance,rolloffFactor:t.rolloffFactor,panningModel:t.panningModel}),n._pannerAttr={coneInnerAngle:void 0!==t.pannerAttr.coneInnerAngle?t.pannerAttr.coneInnerAngle:n._coneInnerAngle,coneOuterAngle:void 0!==t.pannerAttr.coneOuterAngle?t.pannerAttr.coneOuterAngle:n._coneOuterAngle,coneOuterGain:void 0!==t.pannerAttr.coneOuterGain?t.pannerAttr.coneOuterGain:n._coneOuterGain,distanceModel:void 0!==t.pannerAttr.distanceModel?t.pannerAttr.distanceModel:n._distanceModel,maxDistance:void 0!==t.pannerAttr.maxDistance?t.pannerAttr.maxDistance:n._maxDistance,refDistance:void 0!==t.pannerAttr.refDistance?t.pannerAttr.refDistance:n._refDistance,rolloffFactor:void 0!==t.pannerAttr.rolloffFactor?t.pannerAttr.rolloffFactor:n._rolloffFactor,panningModel:void 0!==t.pannerAttr.panningModel?t.pannerAttr.panningModel:n._panningModel})}else 2===r.length&&(t=r[0],e=parseInt(r[1],10));for(var s,o,a=n._getSoundIds(e),h=0;h<a.length;h++)(i=n._soundById(a[h]))&&(s=i._pannerAttr,s={coneInnerAngle:(void 0!==t.coneInnerAngle?t:s).coneInnerAngle,coneOuterAngle:(void 0!==t.coneOuterAngle?t:s).coneOuterAngle,coneOuterGain:(void 0!==t.coneOuterGain?t:s).coneOuterGain,distanceModel:(void 0!==t.distanceModel?t:s).distanceModel,maxDistance:(void 0!==t.maxDistance?t:s).maxDistance,refDistance:(void 0!==t.refDistance?t:s).refDistance,rolloffFactor:(void 0!==t.rolloffFactor?t:s).rolloffFactor,panningModel:(void 0!==t.panningModel?t:s).panningModel},(o=i._panner)?(o.coneInnerAngle=s.coneInnerAngle,o.coneOuterAngle=s.coneOuterAngle,o.coneOuterGain=s.coneOuterGain,o.distanceModel=s.distanceModel,o.maxDistance=s.maxDistance,o.refDistance=s.refDistance,o.rolloffFactor=s.rolloffFactor,o.panningModel=s.panningModel):(i._pos||(i._pos=n._pos||[0,0,-.5]),l(i,"spatial")));return n},Sound.prototype.init=(n=Sound.prototype.init,function(){var t=this._parent;this._orientation=t._orientation,this._stereo=t._stereo,this._pos=t._pos,this._pannerAttr=t._pannerAttr,n.call(this),this._stereo?t.stereo(this._stereo):this._pos&&t.pos(this._pos[0],this._pos[1],this._pos[2],this._id)}),Sound.prototype.reset=(i=Sound.prototype.reset,function(){var t=this._parent;return this._orientation=t._orientation,this._stereo=t._stereo,this._pos=t._pos,this._pannerAttr=t._pannerAttr,this._stereo?t.stereo(this._stereo):this._pos?t.pos(this._pos[0],this._pos[1],this._pos[2],this._id):this._panner&&(this._panner.disconnect(0),this._panner=void 0,t._refreshBuffer(this)),i.call(this)});var l=function(t,e){"spatial"===(e=e||"spatial")?(t._panner=Howler.ctx.createPanner(),t._panner.coneInnerAngle=t._pannerAttr.coneInnerAngle,t._panner.coneOuterAngle=t._pannerAttr.coneOuterAngle,t._panner.coneOuterGain=t._pannerAttr.coneOuterGain,t._panner.distanceModel=t._pannerAttr.distanceModel,t._panner.maxDistance=t._pannerAttr.maxDistance,t._panner.refDistance=t._pannerAttr.refDistance,t._panner.rolloffFactor=t._pannerAttr.rolloffFactor,t._panner.panningModel=t._pannerAttr.panningModel,void 0!==t._panner.positionX?(t._panner.positionX.setValueAtTime(t._pos[0],Howler.ctx.currentTime),t._panner.positionY.setValueAtTime(t._pos[1],Howler.ctx.currentTime),t._panner.positionZ.setValueAtTime(t._pos[2],Howler.ctx.currentTime)):t._panner.setPosition(t._pos[0],t._pos[1],t._pos[2]),void 0!==t._panner.orientationX?(t._panner.orientationX.setValueAtTime(t._orientation[0],Howler.ctx.currentTime),t._panner.orientationY.setValueAtTime(t._orientation[1],Howler.ctx.currentTime),t._panner.orientationZ.setValueAtTime(t._orientation[2],Howler.ctx.currentTime)):t._panner.setOrientation(t._orientation[0],t._orientation[1],t._orientation[2])):(t._panner=Howler.ctx.createStereoPanner(),t._panner.pan.setValueAtTime(t._stereo,Howler.ctx.currentTime)),t._panner.connect(t._node),t._paused||t._parent.pause(t._id,!0).play(t._id,!0)}}()},{}],TrJf:[function(t,e,i){"use strict";t=t("howler");window.Howler=t.Howler,t.Howl.prototype.unpause=function(){for(var t,e=0;e<this._sounds.length;e++)this._sounds[e]._paused&&!this._sounds[e]._ended&&(t=this._sounds[e]._id,this.play(t));return this}},{howler:"vDHW"}],tFGK:[function(t,e,i){function r(t,e){document.addEventListener?t.addEventListener("scroll",e,!1):t.attachEvent("scroll",e)}function v(t){this.a=document.createElement("div"),this.a.setAttribute("aria-hidden","true"),this.a.appendChild(document.createTextNode(t)),this.b=document.createElement("span"),this.c=document.createElement("span"),this.h=document.createElement("span"),this.f=document.createElement("span"),this.g=-1,this.b.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;",this.c.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;",this.f.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;",this.h.style.cssText="display:inline-block;width:200%;height:200%;font-size:16px;max-width:none;",this.b.appendChild(this.h),this.c.appendChild(this.f),this.a.appendChild(this.b),this.a.appendChild(this.c)}function w(t,e){t.a.style.cssText="max-width:none;min-width:20px;min-height:20px;display:inline-block;overflow:hidden;position:absolute;width:auto;margin:0;padding:0;top:-999px;white-space:nowrap;font-synthesis:none;font:"+e+";"}function s(t){var e=t.a.offsetWidth,i=e+100;return t.f.style.width=i+"px",t.c.scrollLeft=i,t.b.scrollLeft=t.b.scrollWidth+100,t.g!==e&&(t.g=e,1)}function x(t,e){function i(){var t=n;s(t)&&t.a.parentNode&&e(t.g)}var n=t;r(t.b,i),r(t.c,i),s(t)}function n(t,e){e=e||{};this.family=t,this.style=e.style||"normal",this.weight=e.weight||"normal",this.stretch=e.stretch||"normal"}function o(){return null===l&&(l=!!document.fonts),l}function b(t,e){return[t.style,t.weight,function(){if(null===h){var t=document.createElement("div");try{t.style.font="condensed 100px sans-serif"}catch(t){}h=""!==t.style.font}return h}()?t.stretch:"","100px",e].join(" ")}var E,a,h,l;l=h=a=E=null,n.prototype.load=function(t,e){var _=this,f=t||"BESbswy",m=0,y=e||3e3,g=(new Date).getTime();return new Promise(function(p,d){var t,e,i;o()&&(null===a&&(a=!(!o()||!/Apple/.test(window.navigator.vendor))&&(!!(i=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))(?:\.([0-9]+))/.exec(window.navigator.userAgent))&&parseInt(i[1],10)<603)),!a)?(t=new Promise(function(i,t){!function e(){(new Date).getTime()-g>=y?t(Error(y+"ms timeout exceeded")):document.fonts.load(b(_,'"'+_.family+'"'),f).then(function(t){1<=t.length?i():setTimeout(e,25)},t)}()}),i=new Promise(function(t,e){m=setTimeout(function(){e(Error(y+"ms timeout exceeded"))},y)}),Promise.race([i,t]).then(function(){clearTimeout(m),p(_)},d)):(e=function(){function i(){var t;(t=-1!=h&&-1!=l||-1!=h&&-1!=u||-1!=l&&-1!=u)&&((t=h!=l&&h!=u&&l!=u)||(null===E&&(t=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))/.exec(window.navigator.userAgent),E=!!t&&(parseInt(t[1],10)<536||536===parseInt(t[1],10)&&parseInt(t[2],10)<=11)),t=E&&(h==e&&l==e&&u==e||h==n&&l==n&&u==n||h==r&&l==r&&u==r)),t=!t),t&&(c.parentNode&&c.parentNode.removeChild(c),clearTimeout(m),p(_))}var e,n,r,s=new v(f),o=new v(f),a=new v(f),h=-1,l=-1,u=-1,c=document.createElement("div");c.dir="ltr",w(s,b(_,"sans-serif")),w(o,b(_,"serif")),w(a,b(_,"monospace")),c.appendChild(s.a),c.appendChild(o.a),c.appendChild(a.a),document.body.appendChild(c),e=s.a.offsetWidth,n=o.a.offsetWidth,r=a.a.offsetWidth,function t(){var e;(new Date).getTime()-g>=y?(c.parentNode&&c.parentNode.removeChild(c),d(Error(y+"ms timeout exceeded"))):(!0!==(e=document.hidden)&&void 0!==e||(h=s.a.offsetWidth,l=o.a.offsetWidth,u=a.a.offsetWidth,i()),m=setTimeout(t,50))}(),x(s,function(t){h=t,i()}),w(s,b(_,'"'+_.family+'",sans-serif')),x(o,function(t){l=t,i()}),w(o,b(_,'"'+_.family+'",serif')),x(a,function(t){u=t,i()}),w(a,b(_,'"'+_.family+'",monospace'))},document.body?e():document.addEventListener?document.addEventListener("DOMContentLoaded",function t(){document.removeEventListener("DOMContentLoaded",t),e()}):document.attachEvent("onreadystatechange",function t(){"interactive"!=document.readyState&&"complete"!=document.readyState||(document.detachEvent("onreadystatechange",t),e())}))})},"object"==typeof e?e.exports=n:(window.FontFaceObserver=n,window.FontFaceObserver.prototype.load=n.prototype.load)},{}],Focm:[function(t,e,i){"use strict";var n=(n=t("ismobilejs"))&&n.__esModule?n:{default:n};t("./pixi.js"),t("./pixi-spine.js"),t("./howler.js"),window.isMobile=n.default,window.FontFaceObserver=t("fontfaceobserver")},{"./pixi.js":"AIIz","./pixi-spine.js":"PXMd","./howler.js":"TrJf",ismobilejs:"S82H",fontfaceobserver:"tFGK"}]},{},["Focm"]),function(t,h){"use strict";function r(){return Mr.__string_rec(this,"")}t.temple=t.temple||{},t.temple.sound=t.temple.sound||{};var i,d=d||{};function e(t,e){var i,n=Object.create(t);for(i in e)n[i]=e[i];return e.toString!==Object.prototype.toString&&(n.toString=e.toString),n}function l(t,e){this.r=new RegExp(t,e.split("u").join(""))}function u(){}function a(){}function c(){}function p(){}function _(){}function n(){}l.__name__=!0,l.prototype={match:function(t){return this.r.global&&(this.r.lastIndex=0),this.r.m=this.r.exec(t),this.r.s=t,null!=this.r.m},matched:function(t){if(null!=this.r.m&&0<=t&&t<this.r.m.length)return this.r.m[t];throw wr.thrown("EReg::matched")},__class__:l},u.__name__=!0,u.substr=function(t,e,i){if(null==i)i=t.length;else if(i<0){if(0!=e)return"";i=t.length+i}return t.substr(e,i)},u.remove=function(t,e){e=t.indexOf(e);return-1!=e&&(t.splice(e,1),!0)},u.now=function(){return Date.now()},a.__name__=!0,a.iter=function(t,e){for(var i=(t=t)instanceof Array?new Cr(t):t.iterator();i.hasNext();)e(i.next())},Math.__name__=!0,c.__name__=!0,c.field=function(t,e){try{return t[e]}catch(t){return null}},c.fields=function(t){var e=[];if(null!=t){var i,n=Object.prototype.hasOwnProperty;for(i in t)"__id__"!=i&&"hx__closures__"!=i&&n.call(t,i)&&e.push(i)}return e},c.deleteField=function(t,e){return!!Object.prototype.hasOwnProperty.call(t,e)&&(delete t[e],!0)},p.__name__=!0,p.string=function(t){return Mr.__string_rec(t,"")},p.parseInt=function(t){if(null!=t)for(var e=0,i=t.length;e<i;){var n=e++,r=t.charCodeAt(n);if(r<=8||14<=r&&32!=r&&45!=r){n=t.charCodeAt(1+n),n=parseInt(t,120==n||88==n?16:10);return isNaN(n)?null:n}}return null},p.random=function(t){return t<=0?0:Math.floor(Math.random()*t)},_.__name__=!0,_.startsWith=function(t,e){return t.length>=e.length&&0==t.lastIndexOf(e,0)},_.replace=function(t,e,i){return t.split(e).join(i)};var s=function(t){return t<0?4294967296+t:t+0};function f(){this.next=null,this.owner=null,this._flags=0}function o(){f.call(this)}function m(t){PIXI.settings.RESOLUTION=1,PIXI.settings.SCALE_MODE=PIXI.SCALE_MODES.NEAREST,PIXI.settings.MIPMAP_TEXTURES=PIXI.MIPMAP_MODES.OFF,Rn.init(t,{width:850,height:480,backgroundColor:361193,resolution:Rn.getResolution(),antialias:!0}),gn.init(),this.checkStartConditions()&&(ln.defaultStyle={fontFamily:S.fonts.NORMAL,fontSize:12},Rn.root.add(Tn.EArray([Tn.EComponent(new o)])),y.execute(function(){}))}n.__name__=!0,n.__isInterface__=!0,n.prototype={__class__:n},f.__name__=!0,f.__interfaces__=[n],f.prototype={onAdded:function(){},onRemoved:function(){},onStart:function(){},onStop:function(){},onUpdate:function(t){},dispose:function(){null!=this.owner&&this.owner.removeComponent(this)},get_name:function(){return null},__class__:f},o.__name__=!0,o.__super__=f,o.prototype=e(f.prototype,{onUpdate:function(t){f.prototype.onUpdate.call(this,t),Rn.stage.updateContainerSize()},get_name:function(){return"$oF"},__class__:o}),m.__name__=!0,m.main=function(){PIXI.utils.skipHello(),window.document.addEventListener("DOMContentLoaded",function(){return new m(window.document.getElementById("container"))})},m.prototype={checkStartConditions:function(){var t=!PIXI.utils.isMobile.any;if(mn.isNativeChinese())return!t||(window.document.documentElement.classList.add("is-not-supported"),!1);var e=!1;t&&(e=!0);for(var i=[157,130,132,176,155,167,144,164,158,125,107,173,147,146,136,166,157,161],n=new Array(i.length),r=0,s=i.length;r<s;){var o=r++;n[o]=String.fromCodePoint(i[o]-58)}var a,t=n.join("");return null!=gn.id2&&gn.id2==t||(e=!0),e&&(a=_.replace(h.location.href,"/"+t,"")),window.history.pushState({url:a},null,a),!0},__class__:m};var y=function(){};function g(){}y.__name__=!0,y.execute=function(t){var e=Rn.get_sceneManager().goto(S.scenes.preloader).$_,e=e instanceof Qi?e:null;Rn.root.add(Tn.EComponent(new Ri));for(var i=[new ss(S.files.webFonts.manifest),new is(dn.addSpeedAdjusterKeys),new is(function(){}),new is(Ys(e,e.show)),new is(y.removeLoadIndicator),new Qr(S.files.bitmapFonts.manifest,e),new Qr(S.files.json.manifest,e),new Qr(S.files.global.manifest,e),new rs(S.sounds.shared,Rn.get_soundManager(),e)],n=0,r=X.getGameAssetLoadTasks(1,e);n<r.length;)i.push(r[n++]);i.push(new ns(e.terminal.completedSignal)),i.push(new is(y.startFirstScene)),new Jr(i).execute(t)},y.startFirstScene=function(){var t=S.scenes.title(1);Rn.root.addEntity((new Sn).addComponent(new Ir(1,function(){Rn.get_sceneManager().goto(t)})),!0)},y.removeLoadIndicator=function(){var t=window.document.querySelector(".load-indicator");null!=t&&t.parentNode.removeChild(t)};var v={getNext:function(t){switch(t){case 1:return 2;case 2:return 3;case 3:return mn.isNativeChinese()?1:null}},getPrevious:function(t){switch(t){case 1:return mn.isNativeChinese()?3:null;case 2:return 1;case 3:return 2}},toString:function(t){return"game-"+t},fromString:function(t){switch(t){case"game-1":return 1;case"game-2":return 2;case"game-3":return 3;default:return 1}}};function w(){this.ui="ui-animations",this.cutscene3="game3_cutscenes",this.cutscene2="game2_cutscenes",this.cutscene1="game1_cutscenes",this.game3="game-3-animations",this.game2="game-2-animations",this.game1="game-1-animations",g.call(this)}function x(){}function b(){this.json=new O,this.webFonts=new D,this.bitmapFonts=new T,this.global=new P,this.game3=new I,this.game2=new M,this.game1=new C,g.call(this)}function E(){this.NORMAL="Perfect_DOS_VGA_437_Win, monospace, Arial, sans-serif",g.call(this)}function $(){this.outro=rr.Page(function(){return new Ki},"game-3/outro"),this.preloader=rr.Page(function(){return new Qi},"preloader"),g.call(this)}function A(){this.shared=new F,this.game3=new k,this.game2=new L,this.game1=new R,g.call(this)}g.__name__=!0,g.prototype={__class__:g},w.__name__=!0,w.__super__=g,w.prototype=e(g.prototype,{get_currentGame:function(){return this.getFrom(v.current)},getFrom:function(t){switch(t){case 1:return this.game1;case 2:return this.game2;case 3:return this.game3}},get_currentCutscene:function(){switch(v.current){case 1:return this.cutscene1;case 2:return this.cutscene2;case 3:return this.cutscene3}},__class__:w}),x.__name__=!0,x.has=function(t,e){e=null==e?x.defaultLibaryName:e;return null!=x._libraryByName.get(e)._symbols.h[t]},x.get=function(t,e,i,n){null==i&&(i=!0);var r=e;null==e&&(r=x.defaultLibaryName);n=x._libraryByName.get(r).createSprite(t,null,n);return i&&x.scaleByLibraryName.exists(e)&&(e=1/x.scaleByLibraryName.get(e),n.container.scale.set(e)),n},x.getSprite=function(t,e,i,n){return null==i&&(i=!0),x.get(t,e,i,n).container},x.getTexture=function(t,e,i){return null==i&&(i=!0),x.getSprite(t,e,i).texture},x.getMovieSprite=function(t,e,i){null==i&&(i=!0);var n=e;null==e&&(n=x.defaultLibaryName);t=x._libraryByName.get(n).createSprite(t,!0);return i&&x.scaleByLibraryName.exists(e)&&(e=1/x.scaleByLibraryName.get(e),t.container.scale.set(e)),t},x.getMovieSpritePlayer=function(t,e,i){null==i&&(i=!0);var n=e;null==e&&(n=x.defaultLibaryName);t=new Ur(x._libraryByName.get(n),t);return i&&x.scaleByLibraryName.exists(e)&&(i=t.movieSprite,e=1/x.scaleByLibraryName.get(e),i.container.scale.set(e)),t},x.dispose=function(){x._libraryByName=null,x.scaleByLibraryName=null},b.__name__=!0,b.__super__=g,b.prototype=e(g.prototype,{get_currentGame:function(){return this.getFrom(v.current)},getFrom:function(t){switch(t){case 1:return this.game1;case 2:return this.game2;case 3:return this.game3}},__class__:b}),E.__name__=!0,E.__super__=g,E.prototype=e(g.prototype,{__class__:E}),$.__name__=!0,$.__super__=g,$.prototype=e(g.prototype,{prologue:function(t){var e=t;return rr.Page(function(){return new Zi(e)},(null==t?"null":v.toString(t))+"/prologue")},title:function(t){var e=t;return rr.Page(function(){return new sn(e)},(null==t?"null":v.toString(t))+"/home")},intro:function(t){var e=t;return rr.Page(function(){return new Ji(e)},(null==t?"null":v.toString(t))+"/intro")},game:function(t){var e=t;return rr.Page(function(){return new zi(e)},(null==t.gameId?"null":v.toString(t.gameId))+"/play")},win:function(t){var e=t;return rr.Page(function(){return new rn(e)},(null==t.gameId?"null":v.toString(t.gameId))+"/win")},lose:function(t){var e=t;return rr.Page(function(){return new nn(e)},(null==t.gameId?"null":v.toString(t.gameId))+"/lose")},easterEgg:function(t){var e=t;return rr.Page(function(){return new tn(e)},(null==t.gameId?"null":v.toString(t.gameId))+"/easteregg")},bossBattle:function(t){var e=t;return rr.Page(function(){return new zi(e)},"game-3/bossbattle")},__class__:$}),A.__name__=!0,A.__super__=g,A.prototype=e(g.prototype,{getFrom:function(t){switch(t){case 1:return this.game1;case 2:return this.game2;case 3:return this.game3}},__class__:A});var S=function(){};S.__name__=!0;var T=function(){this.manifest={path:"https://cdn.jsdelivr.net/gh/DecoArtist/ProjectLaser-BrawlStars@b04dff7da4dd78397aaeaa56d9510fed26929ead/version/20200825-121253/assets/fonts/bitmap/",fileNames:["perfectdos_0.png","perfectdos.fnt"]}};T.__name__=!0,T.prototype={__class__:T};var C=function(){this.manifest={path:"https://cdn.jsdelivr.net/gh/DecoArtist/ProjectLaser-BrawlStars@b04dff7da4dd78397aaeaa56d9510fed26929ead/version/20200825-121253/assets/games/game-1/",fileNames:["game-1-animations/atlas0.png","game-1-animations/library.json","button_exit.png","game1_cutscenes/atlas1.png","game1_cutscenes/atlas0.png","game1_cutscenes/library.json","button_restart.png","button_start.png"]}};C.__name__=!0,C.prototype={__class__:C};var M=function(){this.manifest={path:"https://cdn.jsdelivr.net/gh/DecoArtist/ProjectLaser-BrawlStars@b04dff7da4dd78397aaeaa56d9510fed26929ead/version/20200825-121253/assets/games/game-2/",fileNames:["game2_cutscenes/atlas1.png","game2_cutscenes/atlas0.png","game2_cutscenes/library.json","button_exit.png","game-2-animations/atlas0.png","game-2-animations/library.json","button_restart.png","button_start.png"]}};M.__name__=!0,M.prototype={__class__:M};var I=function(){this.manifest={path:"https://cdn.jsdelivr.net/gh/DecoArtist/ProjectLaser-BrawlStars@b04dff7da4dd78397aaeaa56d9510fed26929ead/version/20200825-121253/assets/games/game-3/",fileNames:["button_exit.png","game3_cutscenes/atlas0.png","game3_cutscenes/library.json","button_restart.png","game-3-animations/atlas0.png","game-3-animations/library.json","button_playagain.png","button_start.png"]}};I.__name__=!0,I.prototype={__class__:I};var P=function(){this.manifest={path:"https://cdn.jsdelivr.net/gh/DecoArtist/ProjectLaser-BrawlStars@b04dff7da4dd78397aaeaa56d9510fed26929ead/version/20200825-121253/assets/global/",fileNames:["ui-animations/atlas0.png","ui-animations/library.json"]}};P.__name__=!0,P.prototype={__class__:P};var O=function(){this.manifest={path:"https://cdn.jsdelivr.net/gh/DecoArtist/ProjectLaser-BrawlStars@b04dff7da4dd78397aaeaa56d9510fed26929ead/version/20200825-121253/assets/json/",fileNames:["game-2.json","game-1.json","game-3.json"]}};O.__name__=!0,O.prototype={__class__:O};var D=function(){this.manifest={path:"https://cdn.jsdelivr.net/gh/DecoArtist/ProjectLaser-BrawlStars@b04dff7da4dd78397aaeaa56d9510fed26929ead/version/20200825-121253/assets/fonts/web/",fileNames:["Perfect_DOS_VGA_437_Win.ttf"]}};D.__name__=!0,D.prototype={__class__:D};var R=function(){var t,e;(e=[]).push("atk_a_var1"+".ogg"),e.push("atk_a_var1.m4a"),e.push("atk_a_var1.mp3"),this.ATK_A_VAR1=e,(e=[]).push("black_hole"+".ogg"),e.push("black_hole.m4a"),e.push("black_hole.mp3"),this.BLACK_HOLE=e,(e=[]).push("black_hole_loop_cinematic"+".ogg"),e.push("black_hole_loop_cinematic.m4a"),e.push("black_hole_loop_cinematic.mp3"),this.BLACK_HOLE_LOOP_CINEMATIC=e,(e=[]).push("enemy_bigship_shoot"+".ogg"),e.push("enemy_bigship_shoot.m4a"),e.push("enemy_bigship_shoot.mp3"),this.ENEMY_BIGSHIP_SHOOT=e,(e=[]).push("enemy_shoot"+".ogg"),e.push("enemy_shoot.m4a"),e.push("enemy_shoot.mp3"),this.ENEMY_SHOOT=e,(e=[]).push("explosion1_var1"+".ogg"),e.push("explosion1_var1.m4a"),e.push("explosion1_var1.mp3"),this.EXPLOSION1_VAR1=e,(e=[]).push("explosion1_var2"+".ogg"),e.push("explosion1_var2.m4a"),e.push("explosion1_var2.mp3"),this.EXPLOSION1_VAR2=e,(e=[]).push("hit_enemy"+".ogg"),e.push("hit_enemy.m4a"),e.push("hit_enemy.mp3"),this.HIT_ENEMY=e,(e=[]).push("hit_meteor"+".ogg"),e.push("hit_meteor.m4a"),e.push("hit_meteor.mp3"),this.HIT_METEOR=e,(e=[]).push("music_project_laser"+".ogg"),e.push("music_project_laser.m4a"),e.push("music_project_laser.mp3"),this.MUSIC_PROJECT_LASER=e,(e=[]).push("music_project_laser_cinematic"+".ogg"),e.push("music_project_laser_cinematic.m4a"),e.push("music_project_laser_cinematic.mp3"),this.MUSIC_PROJECT_LASER_CINEMATIC=e,(e=[]).push("music_project_laser_gameover"+".ogg"),e.push("music_project_laser_gameover.m4a"),e.push("music_project_laser_gameover.mp3"),this.MUSIC_PROJECT_LASER_GAMEOVER=e,(e=[]).push("music_project_laser_title_screen"+".ogg"),e.push("music_project_laser_title_screen.m4a"),e.push("music_project_laser_title_screen.mp3"),this.MUSIC_PROJECT_LASER_TITLE_SCREEN=e,(e=[]).push("music_project_laser_victory"+".ogg"),e.push("music_project_laser_victory.m4a"),e.push("music_project_laser_victory.mp3"),this.MUSIC_PROJECT_LASER_VICTORY=e,(e=[]).push("pickup_powerup"+".ogg"),e.push("pickup_powerup.m4a"),e.push("pickup_powerup.mp3"),this.PICKUP_POWERUP=e,(e=[]).push("player_die"+".ogg"),e.push("player_die.m4a"),e.push("player_die.mp3"),this.PLAYER_DIE=e,(e=[]).push("shoot_rocket"+".ogg"),e.push("shoot_rocket.m4a"),e.push("shoot_rocket.mp3"),this.SHOOT_ROCKET=e,(e=[]).push((t="shoot_tripleshot")+".ogg"),e.push(t+".m4a"),e.push(t+".mp3"),this.SHOOT_TRIPLESHOT=e,this.path="https://cdn.jsdelivr.net/gh/DecoArtist/ProjectLaser-BrawlStars@b04dff7da4dd78397aaeaa56d9510fed26929ead/version/20200825-121253/assets/sounds/game-1/",this.fileNames=[this.SHOOT_TRIPLESHOT,this.SHOOT_ROCKET,this.PLAYER_DIE,this.PICKUP_POWERUP,this.MUSIC_PROJECT_LASER_VICTORY,this.MUSIC_PROJECT_LASER_TITLE_SCREEN,this.MUSIC_PROJECT_LASER_GAMEOVER,this.MUSIC_PROJECT_LASER_CINEMATIC,this.MUSIC_PROJECT_LASER,this.HIT_METEOR,this.HIT_ENEMY,this.EXPLOSION1_VAR2,this.EXPLOSION1_VAR1,this.ENEMY_SHOOT,this.ENEMY_BIGSHIP_SHOOT,this.BLACK_HOLE_LOOP_CINEMATIC,this.BLACK_HOLE,this.ATK_A_VAR1],a.iter(this.fileNames,function(t){for(var e=0;e<t.length;){var i=e++;t[e-1]="https://cdn.jsdelivr.net/gh/DecoArtist/ProjectLaser-BrawlStars@b04dff7da4dd78397aaeaa56d9510fed26929ead/version/20200825-121253/assets/sounds/game-1/"+t[i]}})};R.__name__=!0,R.prototype={find:function(t){for(var e=0,i=this.fileNames;e<i.length;){var n=i[e];if(++e,this.path+t==Tr.withoutExtension(n[0]))return n}return null},__class__:R};var L=function(){var t,e;(e=[]).push("enemy_shoot"+".ogg"),e.push("enemy_shoot.m4a"),e.push("enemy_shoot.mp3"),this.ENEMY_SHOOT=e,(e=[]).push("explosion"+".ogg"),e.push("explosion.m4a"),e.push("explosion.mp3"),this.EXPLOSION=e,(e=[]).push("explosion_acid"+".ogg"),e.push("explosion_acid.m4a"),e.push("explosion_acid.mp3"),this.EXPLOSION_ACID=e,(e=[]).push("falling_bomb_loop"+".ogg"),e.push("falling_bomb_loop.m4a"),e.push("falling_bomb_loop.mp3"),this.FALLING_BOMB_LOOP=e,(e=[]).push("music_slugfest"+".ogg"),e.push("music_slugfest.m4a"),e.push("music_slugfest.mp3"),this.MUSIC_SLUGFEST=e,(e=[]).push("music_slugfest_cinematic"+".ogg"),e.push("music_slugfest_cinematic.m4a"),e.push("music_slugfest_cinematic.mp3"),this.MUSIC_SLUGFEST_CINEMATIC=e,(e=[]).push("music_slugfest_cinematic_b"+".ogg"),e.push("music_slugfest_cinematic_b.m4a"),e.push("music_slugfest_cinematic_b.mp3"),this.MUSIC_SLUGFEST_CINEMATIC_B=e,(e=[]).push("music_slugfest_gameover"+".ogg"),e.push("music_slugfest_gameover.m4a"),e.push("music_slugfest_gameover.mp3"),this.MUSIC_SLUGFEST_GAMEOVER=e,(e=[]).push("music_slugfest_title_screen"+".ogg"),e.push("music_slugfest_title_screen.m4a"),e.push("music_slugfest_title_screen.mp3"),this.MUSIC_SLUGFEST_TITLE_SCREEN=e,(e=[]).push("music_slugfest_victory"+".ogg"),e.push("music_slugfest_victory.m4a"),e.push("music_slugfest_victory.mp3"),this.MUSIC_SLUGFEST_VICTORY=e,(e=[]).push("player_dies"+".ogg"),e.push("player_dies.m4a"),e.push("player_dies.mp3"),this.PLAYER_DIES=e,(e=[]).push("player_moves_down"+".ogg"),e.push("player_moves_down.m4a"),e.push("player_moves_down.mp3"),this.PLAYER_MOVES_DOWN=e,(e=[]).push("player_moves_up"+".ogg"),e.push("player_moves_up.m4a"),e.push("player_moves_up.mp3"),this.PLAYER_MOVES_UP=e,(e=[]).push("shoot_a_var1"+".ogg"),e.push("shoot_a_var1.m4a"),e.push("shoot_a_var1.mp3"),this.SHOOT_A_VAR1=e,(e=[]).push("shoot_b_var1"+".ogg"),e.push("shoot_b_var1.m4a"),e.push("shoot_b_var1.mp3"),this.SHOOT_B_VAR1=e,(e=[]).push("shoot_b_var2"+".ogg"),e.push("shoot_b_var2.m4a"),e.push("shoot_b_var2.mp3"),this.SHOOT_B_VAR2=e,(e=[]).push("slug_pew_shoot"+".ogg"),e.push("slug_pew_shoot.m4a"),e.push("slug_pew_shoot.mp3"),this.SLUG_PEW_SHOOT=e,(e=[]).push((t="slug_punches_loop")+".ogg"),e.push(t+".m4a"),e.push(t+".mp3"),this.SLUG_PUNCHES_LOOP=e,this.path="https://cdn.jsdelivr.net/gh/DecoArtist/ProjectLaser-BrawlStars@b04dff7da4dd78397aaeaa56d9510fed26929ead/version/20200825-121253/assets/sounds/game-2/",this.fileNames=[this.SLUG_PUNCHES_LOOP,this.SLUG_PEW_SHOOT,this.SHOOT_B_VAR2,this.SHOOT_B_VAR1,this.SHOOT_A_VAR1,this.PLAYER_MOVES_UP,this.PLAYER_MOVES_DOWN,this.PLAYER_DIES,this.MUSIC_SLUGFEST_VICTORY,this.MUSIC_SLUGFEST_TITLE_SCREEN,this.MUSIC_SLUGFEST_GAMEOVER,this.MUSIC_SLUGFEST_CINEMATIC_B,this.MUSIC_SLUGFEST_CINEMATIC,this.MUSIC_SLUGFEST,this.FALLING_BOMB_LOOP,this.EXPLOSION_ACID,this.EXPLOSION,this.ENEMY_SHOOT],a.iter(this.fileNames,function(t){for(var e=0;e<t.length;){var i=e++;t[e-1]="https://cdn.jsdelivr.net/gh/DecoArtist/ProjectLaser-BrawlStars@b04dff7da4dd78397aaeaa56d9510fed26929ead/version/20200825-121253/assets/sounds/game-2/"+t[i]}})};L.__name__=!0,L.prototype={find:function(t){for(var e=0,i=this.fileNames;e<i.length;){var n=i[e];if(++e,this.path+t==Tr.withoutExtension(n[0]))return n}return null},__class__:L};var k=function(){var t,e;(e=[]).push("arcade_explode"+".ogg"),e.push("arcade_explode.m4a"),e.push("arcade_explode.mp3"),this.ARCADE_EXPLODE=e,(e=[]).push("arcade_hurt"+".ogg"),e.push("arcade_hurt.m4a"),e.push("arcade_hurt.mp3"),this.ARCADE_HURT=e,(e=[]).push("boss_defeated"+".ogg"),e.push("boss_defeated.m4a"),e.push("boss_defeated.mp3"),this.BOSS_DEFEATED=e,(e=[]).push("enemy_defeated"+".ogg"),e.push("enemy_defeated.m4a"),e.push("enemy_defeated.mp3"),this.ENEMY_DEFEATED=e,(e=[]).push("enemy_hurt"+".ogg"),e.push("enemy_hurt.m4a"),e.push("enemy_hurt.mp3"),this.ENEMY_HURT=e,(e=[]).push("enemy_shoot"+".ogg"),e.push("enemy_shoot.m4a"),e.push("enemy_shoot.mp3"),this.ENEMY_SHOOT=e,(e=[]).push("music_bossfight_intro"+".ogg"),e.push("music_bossfight_intro.m4a"),e.push("music_bossfight_intro.mp3"),this.MUSIC_BOSSFIGHT_INTRO=e,(e=[]).push("music_bossfight_loop"+".ogg"),e.push("music_bossfight_loop.m4a"),e.push("music_bossfight_loop.mp3"),this.MUSIC_BOSSFIGHT_LOOP=e,(e=[]).push("music_starcadia"+".ogg"),e.push("music_starcadia.m4a"),e.push("music_starcadia.mp3"),this.MUSIC_STARCADIA=e,(e=[]).push("music_starcadia_cinematic_a"+".ogg"),e.push("music_starcadia_cinematic_a.m4a"),e.push("music_starcadia_cinematic_a.mp3"),this.MUSIC_STARCADIA_CINEMATIC_A=e,(e=[]).push("music_starcadia_gameover"+".ogg"),e.push("music_starcadia_gameover.m4a"),e.push("music_starcadia_gameover.mp3"),this.MUSIC_STARCADIA_GAMEOVER=e,(e=[]).push("music_starcadia_victory"+".ogg"),e.push("music_starcadia_victory.m4a"),e.push("music_starcadia_victory.mp3"),this.MUSIC_STARCADIA_VICTORY=e,(e=[]).push("pickup_coin"+".ogg"),e.push("pickup_coin.m4a"),e.push("pickup_coin.mp3"),this.PICKUP_COIN=e,(e=[]).push("player_doublejump"+".ogg"),e.push("player_doublejump.m4a"),e.push("player_doublejump.mp3"),this.PLAYER_DOUBLEJUMP=e,(e=[]).push("player_hurt"+".ogg"),e.push("player_hurt.m4a"),e.push("player_hurt.mp3"),this.PLAYER_HURT=e,(e=[]).push("player_jump"+".ogg"),e.push("player_jump.m4a"),e.push("player_jump.mp3"),this.PLAYER_JUMP=e,(e=[]).push("player_land"+".ogg"),e.push("player_land.m4a"),e.push("player_land.mp3"),this.PLAYER_LAND=e,(e=[]).push((t="player_shoot")+".ogg"),e.push(t+".m4a"),e.push(t+".mp3"),this.PLAYER_SHOOT=e,this.path="https://cdn.jsdelivr.net/gh/DecoArtist/ProjectLaser-BrawlStars@b04dff7da4dd78397aaeaa56d9510fed26929ead/version/20200825-121253/assets/sounds/game-3/",this.fileNames=[this.PLAYER_SHOOT,this.PLAYER_LAND,this.PLAYER_JUMP,this.PLAYER_HURT,this.PLAYER_DOUBLEJUMP,this.PICKUP_COIN,this.MUSIC_STARCADIA_VICTORY,this.MUSIC_STARCADIA_GAMEOVER,this.MUSIC_STARCADIA_CINEMATIC_A,this.MUSIC_STARCADIA,this.MUSIC_BOSSFIGHT_LOOP,this.MUSIC_BOSSFIGHT_INTRO,this.ENEMY_SHOOT,this.ENEMY_HURT,this.ENEMY_DEFEATED,this.BOSS_DEFEATED,this.ARCADE_HURT,this.ARCADE_EXPLODE],a.iter(this.fileNames,function(t){for(var e=0;e<t.length;){var i=e++;t[e-1]="https://cdn.jsdelivr.net/gh/DecoArtist/ProjectLaser-BrawlStars@b04dff7da4dd78397aaeaa56d9510fed26929ead/version/20200825-121253/assets/sounds/game-3/"+t[i]}})};k.__name__=!0,k.prototype={find:function(t){for(var e=0,i=this.fileNames;e<i.length;){var n=i[e];if(++e,this.path+t==Tr.withoutExtension(n[0]))return n}return null},__class__:k};var F=function(){var t,e;(e=[]).push("preloader_click"+".ogg"),e.push("preloader_click.m4a"),e.push("preloader_click.mp3"),this.PRELOADER_CLICK=e,(e=[]).push("ui_click_1"+".ogg"),e.push("ui_click_1.m4a"),e.push("ui_click_1.mp3"),this.UI_CLICK_1=e,(e=[]).push("ui_click_2"+".ogg"),e.push("ui_click_2.m4a"),e.push("ui_click_2.mp3"),this.UI_CLICK_2=e,(e=[]).push((t="ui_start_game")+".ogg"),e.push(t+".m4a"),e.push(t+".mp3"),this.UI_START_GAME=e,this.path="https://cdn.jsdelivr.net/gh/DecoArtist/ProjectLaser-BrawlStars@b04dff7da4dd78397aaeaa56d9510fed26929ead/version/20200825-121253/assets/sounds/shared/",this.fileNames=[this.UI_START_GAME,this.UI_CLICK_2,this.UI_CLICK_1,this.PRELOADER_CLICK],a.iter(this.fileNames,function(t){for(var e=0;e<t.length;){var i=e++;t[e-1]="https://cdn.jsdelivr.net/gh/DecoArtist/ProjectLaser-BrawlStars@b04dff7da4dd78397aaeaa56d9510fed26929ead/version/20200825-121253/assets/sounds/shared/"+t[i]}})};function N(){this.stateChanged=new On,f.call(this)}function B(t,e,i){this.$a=new An,this.chunkUnitSize=50,this.cullMargin=4,this.spawnMargin=3,this.cullBounds=new rt,this.spawnBounds=new rt,this.viewportBounds=new rt,this.worldProjection=new Gi,N.call(this),this.factory=t,this.sceneWidth=e,this.sceneHeight=i}function U(){this.ui=(new Sn).addComponent(new Vt),this.debug=(new Sn).addComponent(new Vt),this.vignette=(new Sn).addComponent(new Vt),this.top=(new Sn).addComponent(new Vt),this.mid=(new Sn).addComponent(new Vt),this.bottom=(new Sn).addComponent(new Vt),this.screenShake=(new Sn).addComponent(new Vt),this.main=(new Sn).addComponent(new Vt),f.call(this)}F.__name__=!0,F.prototype={find:function(t){for(var e=0,i=this.fileNames;e<i.length;){var n=i[e];if(++e,this.path+t==Tr.withoutExtension(n[0]))return n}return null},__class__:F},N.__name__=!0,N.__super__=f,N.prototype=e(f.prototype,{onUpdate:function(t){var e;null!=this.currentState&&this.currentState.keepInState()||((e=null)!=this.currentState&&(e=this.currentState.getNextStateName()),null==e&&null==(e=this.$Ba())&&(e=this.$ba()),null!=e&&this.changeStateTo(e)),null!=this.currentState&&this.currentState.onUpdateState(t)},$ba:function(){return null},$Ba:function(){return null},changeStateTo:function(t,e){var i=this.currentState,t=this.owner[t];i==t&&!i.canReactivate||(null!=i&&(i.onDeactivate(),Mr.__implements(i,kt)&&(i.data=null)),this.currentState=t,this.previousState=i,null!=this.currentState&&(0==(1&this.currentState._flags)&&(this.currentState._flags|=1,this.currentState.onStart()),null!=e&&Mr.__implements(this.currentState,kt)&&(this.currentState.data=e),this.currentState.onActivate()),this.stateChanged.emit(this.currentState,i))},dispose:function(){this.previousState=null,this.currentState=null,f.prototype.dispose.call(this)},get_name:function(){return"$Aa"},__class__:N}),B.__name__=!0,B.__super__=N,B.prototype=e(N.prototype,{onAdded:function(){null==this.containers&&(this.containers=this.owner.$oe),null==this.gameModel&&(this.gameModel=this.owner.$Qf),N.prototype.onAdded.call(this),this.owner.add(Tn.EComponent(this.$ca=new Ln(null,this.containers.main))),this.containers.screenShake.add(Tn.EComponent(this.screenShake=new Rr)),this.camera=new Or(this.sceneWidth,this.sceneHeight,1),this.camera.isVirtual=!0,this.owner.add(Tn.EArray([Tn.EComponent(this.camera),Tn.EComponent(Mr.__cast(this.factory,f)),Tn.EComponent(new gs),Tn.EComponent(this.worldProjection)]))},onStart:function(){null==this.containers&&(this.containers=this.owner.$oe),null==this.gameModel&&(this.gameModel=this.owner.$Qf),N.prototype.onStart.call(this);var t=this.owner._internal_getFromParents("$se").top,e=new Sn,i=Tn.EComponent(new Dr(0,100,100)),n=Tn.EComponent(new us(ms.Relative(100),ms.Relative(100)).setScaleMode(fs.Cover)),r=new qr;r.$A_().set__(0),t.add(Tn.EEntity(e.add(Tn.EArray([i,n,Tn.EComponent(r),Tn.EComponent(this.fader=new Re)])))),this.$da()},addTouchUI:function(t){this.owner._internal_getFromParents("$se").top.addEntity((new Sn).addComponent(this.touchUI=t))},createVignette:function(t){var e=this.containers.vignette,i=Tn.EEntity((new Sn).add(Tn.EComponent(new an))),n=Tn.EEntity((new Sn).add(Tn.EComponent(S.animations.get("vignette_"+this.sceneHeight,S.animationLibraries.ui).setXY(-t,0)))),r=new Sn,t=S.animations.get("vignette_"+this.sceneHeight,S.animationLibraries.ui).setXY(this.sceneWidth+t,0);t.container.scale.set(-1,1),e.add(Tn.EArray([i,n,Tn.EEntity(r.add(Tn.EComponent(t)))]))},onUpdate:function(t){N.prototype.onUpdate.call(this,t),null!=this.worldElementLayer&&(this.viewportBounds.set_from(this.worldElementLayer.viewportLeft._value),this.viewportBounds.set_to(this.worldElementLayer.viewportRight._value),this.spawnBounds.set_from(this.worldElementLayer.viewportLeft._value-this.spawnMargin*this.chunkUnitSize),this.spawnBounds.set_to(this.worldElementLayer.viewportRight._value+this.spawnMargin*this.chunkUnitSize),this.cullBounds.set_from(this.worldElementLayer.viewportLeft._value-this.cullMargin*this.chunkUnitSize),this.cullBounds.set_to(this.worldElementLayer.viewportRight._value+this.cullMargin*this.chunkUnitSize))},startGame:function(){this.gameModel.isPlaying.set__(!0)},finishLevel:function(t){this.gameModel.outcome=t},endGame:function(t){null==t&&(t=0);var e=this,t=null==t?0:t;this.owner.addEntity((new Sn).addComponent(new Ir(t,function(){e.gameModel.isPlaying.set__(!1)})),!0)},$da:function(){},dispose:function(){null!=this.$a&&(this.$a.dispose(),this.$a=null),N.prototype.dispose.call(this)},__class__:B}),U.__name__=!0,U.__super__=f,U.prototype=e(f.prototype,{onAdded:function(){this.owner.addEntity(this.main.addEntity(this.screenShake.addEntity(this.bottom).addEntity(this.mid).addEntity(this.top).addEntity(this.vignette).addEntity(this.debug))).addEntity(this.ui)},get_name:function(){return"$oe"},__class__:U});var X=function(t,e,i){null==i&&(i=0),this.$r=850,this.$q=!1,this.$P=!1,f.call(this),this.$S=e,this.$s=t,this.$t=i};function j(t){this._disposer=new An,this.score=new Mn(0),this.playTime=new Mn(0),this.isPlaying=new Mn(!1),f.call(this),this.gameId=t}function V(t,e){this.$ea=fi.Right,B.call(this,new G,t,e),this.spawnMargin=8,this.cullMargin=9}X.__name__=!0,X.getGameAssetLoadTasks=function(t,e){var i=S.files.getFrom(t).manifest;S.files.getFrom(t),Zr.NUM_PRELOADER_STEPS=0;var n=[];n.push(new Qr(i,e));var r=S.sounds.getFrom(t);return 0<r.fileNames.length&&(i=Rn.get_soundManager().sounds,t=r.fileNames,null==i.h.__keys__[t[t.length-1].__id__])&&n.push(new rs(r,Rn.get_soundManager(),e)),n},X.disposeAssets=function(t){var e;null!=t&&(e=t,t=S.files.getFrom(e).manifest,Object.prototype.hasOwnProperty.call(Rn.assets.assetPackByName.h,t.path)&&(e=S.animationLibraries.getFrom(e),x._libraryByName.remove(e),Rn.assets.disposePack(t.path)))},X.__super__=f,X.prototype=e(f.prototype,{onStart:function(){null==this.containers&&(this.containers=this.owner._internal_getFromParents("$se")),f.prototype.onStart.call(this),this.initLoaders()},initLoaders:function(){this.containers.top.addEntity((new Sn).addComponent(this.$Q=new hn(this.$r,1,197217,14090239,0,as.TOP_LEFT)).addComponent(new us(ms.Relative(this.$r),ms.Relative(1),ms.Relative(0),ps.fromString("100%"),ms.Relative(0),ps.fromString("100%")).setScaleMode(fs.FitToWidth))),this.$Q.container.visible=!1,new Jr(X.getGameAssetLoadTasks(this.$s,this.$Q)).execute(Ys(this,this.$u));var t=this.$t;null==t&&(t=0),this.owner.addEntity((new Sn).addComponent(new Ir(t,Ys(this,this.$T))),!0)},$T:function(){this.$q=!0,this.$U()},$u:function(){this.$P=!0,this.$Q.container.visible=!1,this.$U()},$U:function(){this.$q&&this.$P&&this.$S()},get_name:function(){return"$p"},__class__:X}),j.__name__=!0,j.__super__=f,j.prototype=e(f.prototype,{onStart:function(){var e=this;f.prototype.onStart.call(this),this._disposer.add(Rn.get_keyboard().connect(189,function(){var t=e.score;t.set__(t._value-100)})),this._disposer.add(Rn.get_keyboard().connect(187,function(){var t=e.score;t.set__(t._value+100)}))},onUpdate:function(t){var e;f.prototype.onUpdate.call(this,t),this.isPlaying._value&&(e=this.playTime).set__(e._value+t)},get_name:function(){return"$Qf"},dispose:function(){null!=this._disposer&&(this._disposer.dispose(),this._disposer=null),f.prototype.dispose.call(this)},__class__:j}),V.__name__=!0,V.__super__=B,V.prototype=e(B.prototype,{onAdded:function(){B.prototype.onAdded.call(this),this.owner.add(Tn.EArray([Tn.EComponent(new Ut),Tn.EComponent(new jt),Tn.EComponent(new Xt),Tn.EComponent(this.sounds=new W)]))},onStart:function(){B.prototype.onStart.call(this),this.camera.offset.x.set__(-50),this.createVignette(380),this.$Ga(),this.$ha(),this.$CB(),this.$ga(),PIXI.utils.isMobile.any&&this.addTouchUI(new Yt(55)),this.changeStateTo("$fB",null)},$ga:function(){this.owner._internal_getFromParents("$se").top.add(Tn.EEntity((new Sn).add(Tn.EArray([Tn.EComponent(S.animations.getMovieSprite("healthbar",S.animationLibraries.get_currentGame())),Tn.EComponent(new ki(this.playerEntity.$qD.value)),Tn.EComponent(new us(ms.Relative(0),ms.Relative(0),ms.Relative(20),ms.Relative(40)))]))))},$Ga:function(){var t=new mi,e=new J;this.containers.bottom.add(Tn.EEntity((new Sn).add(Tn.EArray([Tn.EComponent(new Vt),Tn.EComponent(new li(0,.2).setViewOffset(0,this.sceneHeight).setCameraOffset(1e3,0)),Tn.EComponent(new di(this.$ea,new gi(this.$ia("back_a")),t))])))),this.containers.bottom.add(Tn.EEntity((new Sn).add(Tn.EArray([Tn.EComponent((new Vt).setAlpha(.8)),Tn.EComponent(new li(.4,.5).setViewOffset(0,.5*this.sceneHeight-100).setCameraOffset(950,0)),Tn.EComponent(new di(this.$ea,new gi(this.$ia("back_c")),t))])))),this.containers.bottom.add(Tn.EEntity((new Sn).add(Tn.EArray([Tn.EComponent((new Vt).setAlpha(.8)),Tn.EComponent(new li(.5,.6).setViewOffset(0,.5*this.sceneHeight+100).setCameraOffset(1050,0)),Tn.EComponent(new di(this.$ea,new gi(this.$ia("back_c")),t))])))),this.containers.bottom.add(Tn.EEntity((new Sn).add(Tn.EArray([Tn.EComponent(new Vt),Tn.EComponent(new li(.6,.6).setViewOffset(0,.5*this.sceneHeight).setCameraOffset(1e3,0)),Tn.EComponent(new di(this.$ea,new gi(this.$ia("planets")),e))])))),this.containers.bottom.add(Tn.EEntity((new Sn).add(Tn.EArray([Tn.EComponent(new Vt),Tn.EComponent(new li(.8,.8).setViewOffset(0,.5*this.sceneHeight).setCameraOffset(1e3,0)),Tn.EComponent(new di(this.$ea,new gi(this.$ia("planets")),e))])))),this.containers.bottom.add(Tn.EEntity((new Sn).add(Tn.EArray([Tn.EComponent((new Vt).setAlpha(.5)),Tn.EComponent(new li(2.5,1).setViewOffset(0,.5*this.sceneHeight).setCameraOffset(1e3,0)),Tn.EComponent(new di(this.$ea,new gi(this.$ia("back_d")),t))])))),this.containers.top.add(Tn.EEntity((new Sn).add(Tn.EArray([Tn.EComponent((new Vt).setAlpha(.9)),Tn.EComponent(new li(6,1.35).setViewOffset(0,.5*this.sceneHeight).setCameraOffset(1e3,0)),Tn.EComponent(new di(this.$ea,new gi(this.$ia("back_e")),t))])))),this.containers.mid.add(Tn.EEntity((new Sn).add(Tn.EArray([Tn.EComponent(new Vt),Tn.EComponent(this.worldElementLayer=new li(1,1,"worldElement").setViewOffset(0,.5*this.sceneHeight)),Tn.EEntity(this.worldElementContainer=new Sn)])))),this.containers.mid.add(Tn.EEntity((new Sn).add(Tn.EArray([Tn.EComponent(new Vt),Tn.EComponent(new li(1,1,"playerElement").setViewOffset(0,.5*this.sceneHeight)),Tn.EEntity(this.worldPlayerContainer=new Sn)]))))},createDialog:function(t,e){var i,n=(new Sn).add(Tn.EArray([Tn.EComponent(S.animations.getMovieSprite("dialog_game",S.animationLibraries.get_currentCutscene()).setXY(.5*this.sceneWidth,this.sceneHeight))]));null!=((i=n.$w)instanceof lr?i:null)&&((s=(i=n.$w)instanceof lr?i:null).$hF(t/s.symbol.frames*s.symbol.duration),s.$iF(!0));var r,s,t=new An;return e&&(n.add(Tn.EComponent(t)),r=(new Sn).add(Tn.EArray([Tn.EComponent(S.animations.getMovieSprite("dialog_button_up",S.animationLibraries.get_currentCutscene()).setXY(331,-70))])),s=this.owner,e=(new Sn).addComponent(new Ir(1,function(){n.add(Tn.EEntity(r))})),s.addEntity(e,!0),t.add(e)),this.containers.main.add(Tn.EEntity(n)),n},$ha:function(){var t,e=this.factory.createPlayer(),e=(null==((t=e.$Aa)instanceof $t?t:null)||(t=e.$Aa,this.player=t instanceof $t?t:null),e);return this.playerEntity=e,this.worldPlayerContainer.add(Tn.EEntity(this.playerEntity)),this.playerEntity},$CB:function(){this.worldElementContainer.parent.parent.add(Tn.EComponent(this.enemyList=new Q)),this.spawner=new z(this.worldElementLayer.viewportRight,fi.Left),this.spawner.isEnabled=!1,this.spawner.offset.x=this.spawnMargin*this.chunkUnitSize,this.worldElementContainer.addEntity((new Sn).add(Tn.EComponent(this.spawner)))},$ia:function(t){for(var e=Rn.assets.getJson(S.files.json.manifest.fileNames[1]),i=0;i<e.length;){var n=e[i];if(++i,n.id==t)return n}return null},onUpdate:function(t){B.prototype.onUpdate.call(this,t),this.$dB(t)},$dB:function(t){var e,i,n=this.playerEntity.$Aa,r=n instanceof $t?n:null;"$Vd"!=(null!=r.currentState?r.currentState.get_name():null)?(e=this.camera.target,i=r.levelAnchorPosition,n=0,r=.15*r.playerOffset.y,n=i.x+n,r=i.y+r,e.x=n,e.y=r):this.camera.target.x+=60*t},__class__:V});var H=function(){};H.__name__=!0,H.__isInterface__=!0,H.prototype={__class__:H};var G=function(){f.call(this)};function Y(){f.call(this)}G.__name__=!0,G.__interfaces__=[H],G.__super__=f,G.prototype=e(f.prototype,{create:function(t,e){return new Sn},createPlayer:function(){return(new Sn).add(Tn.EArray([Tn.EComponent(new Vt),Tn.EEntity((new Sn).add(Tn.EArray([Tn.EComponent(S.animations.getMovieSpritePlayer("player_idle",S.animationLibraries.get_currentGame()))]))),Tn.EComponent(new $t),Tn.EComponent(new Ci),Tn.EComponent(new Ei),Tn.EComponent(new xi(100)),Tn.EComponent(new ji),Tn.EComponent(new Hi),Tn.EComponent(new Ui),Tn.EComponent(new It),Tn.EComponent(vi.fromMovieSprite("player_colliders",S.animationLibraries.get_currentGame(),null,1,0))]))},createProjectile:function(t,e){return(new Sn).add(Tn.EArray([Tn.EComponent(new Vt),Tn.EEntity((new Sn).add(Tn.EArray([Tn.EComponent(S.animations.get(t,S.animationLibraries.get_currentGame()))])).setTimeScale(Bs.native.range(.9,1.1))),Tn.EComponent(new ji),Tn.EComponent(new Hi(!0)),Tn.EComponent(new Di(1,1275)),Tn.EComponent(new wi),Tn.EComponent(new Ui),Tn.EComponent(vi.fromMovieSprite(t+"_colliders",S.animationLibraries.get_currentGame(),1,4,e).setFilterFlagsMethod(bs.Inclusive))]))},createEnemy:function(t,e){return this.$mB((new Sn).add(Tn.EArray([Tn.EComponent(new Vt),Tn.EEntity((new Sn).add(Tn.EArray([Tn.EComponent(S.animations.getMovieSpritePlayer(null,S.animationLibraries.get_currentGame()))])).setTimeScale(Bs.native.range(.9,1.1))),Tn.EComponent(new ji),Tn.EComponent(new Hi(!0)),Tn.EComponent(new Ii(t,e)),Tn.EComponent(new wi),Tn.EComponent(new Ui),Tn.EComponent(vi.fromMovieSprite(t+"_colliders",S.animationLibraries.get_currentGame(),null,2,0))])),t,e)},$mB:function(t,e,i){var n;switch(i){case"enemy_biggy_ship_a":n=Tn.EComponent(new ct);break;case"enemy_chicken_ship":n=Tn.EComponent(new lt);break;case"enemy_meteor_1":case"enemy_meteor_2":case"enemy_meteor_3":n=Tn.EComponent(new ft);break;case"enemy_portal":n=Tn.EComponent(new tt);break;case"enemy_special_black_hole":n=Tn.EComponent(new gt);break;case"enemy_suicide_bot":n=Tn.EComponent(new vt);break;default:n=null}return t.add(Tn.EArray([n])),t},createPickup:function(t,e){return(new Sn).add(Tn.EArray([Tn.EComponent(new Vt),Tn.EEntity((new Sn).add(Tn.EArray([Tn.EComponent(S.animations.getMovieSpritePlayer(t,S.animationLibraries.get_currentGame()))])).setTimeScale(Bs.native.range(.9,1.1))),Tn.EComponent(new ji),Tn.EComponent(new Hi),Tn.EComponent(new Et(e)),Tn.EComponent(new wi),Tn.EComponent(new Ui),Tn.EComponent(vi.fromMovieSprite(t+"_colliders",S.animationLibraries.get_currentGame(),null,8,0))]))},createExplosion:function(t){var e=new Sn,i=S.animations.get(t,S.animationLibraries.get_currentGame()),t=p.random(4)*Math.PI;return i.container.rotation=t,e.add(Tn.EArray([Tn.EComponent(i),Tn.EComponent(new kr)])).setTimeScale(Bs.native.range(.9,1.2))},get_name:function(){return"$LB"},__class__:G}),Y.__name__=!0,Y.__super__=f,Y.prototype=e(f.prototype,{get_name:function(){return"$V_"},__class__:Y});var W=function(){Y.call(this)};W.__name__=!0,W.__super__=Y,W.prototype=e(Y.prototype,{playProjectile:function(t){switch(t){case 0:var e=S.sounds.game1.ENEMY_SHOOT;Rn.get_soundManager().play(e,.8);break;case 1:e=S.sounds.game1.ENEMY_BIGSHIP_SHOOT,Rn.get_soundManager().play(e,.8);break;case 2:e=S.sounds.game1.ATK_A_VAR1,Rn.get_soundManager().play(e,.6);break;case 3:e=S.sounds.game1.SHOOT_ROCKET,Rn.get_soundManager().play(e,.7);break;case 4:e=S.sounds.game1.SHOOT_TRIPLESHOT,Rn.get_soundManager().play(e,.4)}},playExplosion:function(){var t=W.explosions;Rn.get_soundManager().play(Hs.randomElement(t,Bs.native),1)},playHitMeteor:function(){var t=S.sounds.game1.HIT_METEOR;Rn.get_soundManager().play(t,1)},playHitBlackHole:function(){var t=S.sounds.game1.BLACK_HOLE;Rn.get_soundManager().play(t,1)},playPickup:function(){var t=S.sounds.game1.PICKUP_POWERUP;Rn.get_soundManager().play(t,1)},playerDie:function(){var t=S.sounds.game1.PLAYER_DIE;Rn.get_soundManager().play(t,1)},__class__:W});var z=function(t,e){this.$Ub=new js(1.1),this.offset={x:0,y:0},this.isEnabled=!0,f.call(this),this.$tb=t,this.$Tb=e;for(var i="-M----- -----M-  ---M---- ----M--- -C----   ---C-- -B---   -p-B- -M-    M-M-M -M--M--M- -M-  --M--M--M-- M--M MM----MM MMMM--MMMM     B-C-C-B  --C- -B--- -C--- --B  -C- Cp-C -CMC-       M-M-M  -M--M--M- M-B-M    -CC- -D-     MMrMM  -M--MM--M- MM-B-MM   M-C-M  -MM--C--MM-   p   M-D-C    -S--r-   M--M-M --C-- -C--- -DB D-- M--B-M      C-C-C-C  -D--- --D--    ".split(" "),n=new Array(i.length),r=0,s=i.length;r<s;){var o=r++;n[o]=i[o].split("")}this.$ub=n};z.__name__=!0,z.__super__=f,z.prototype=e(f.prototype,{$wb:function(){for(var t=this.$ub.shift(),e=t.length,i=0;i<t.length;){var n=t[i],r=i++/(e-1);if("-"!=n)switch(n){case"B":this.$hB("enemy_portal",r);break;case"C":this.$hB("enemy_chicken_ship",r);break;case"D":this.$hB("enemy_biggy_ship_a",r);break;case"M":this.$hB(Bs.native.fromArray(["enemy_meteor_1","enemy_meteor_2","enemy_meteor_3"]),r);break;case"S":this.$hB("enemy_special_black_hole",r);break;case"p":this.$HB("powerup",r);break;case"r":this.$HB("powerup_rocket",r)}}},$hB:function(t,e){var i=this.$tb._value+this.offset.x|0,n=-195+Bs.native.to(30),n=n+(240+Bs.native.to(-30)-n)*(e<0?0:1<e?1:e)|0,e=t;"enemy_special_black_hole"==t&&(e="enemy_portal");e=this.$Ma.factory.createEnemy(e,t);null!=e.$rD&&((t=(r=e.$rD).position3d).x=i,t.y=null==n?i:n,r.heading.set__(this.$Tb));var r=e.$Aa,r=r instanceof Ii?r:null;this.owner.parent.addEntity(e),this.$GB.add(r)},$HB:function(t,e){var i=this.$tb._value+this.offset.x|0,n=-195+Bs.native.to(30),r=n+(240+Bs.native.to(-30)-n)*(e<0?0:1<e?1:e)|0,n=this.$Ma.factory.createPickup("powerup",t);null!=n.$rD&&((t=(e=n.$rD).position3d).x=i,t.y=null==r?i:r,e.heading.set__(this.$Tb)),this.owner.parent.addEntity(n)},onUpdate:function(t){var e;f.prototype.onUpdate.call(this,t),this.isEnabled&&((e=this.$Ub).isEnabled&&e.time<=0||!this.$Ub.update(t)||(this.$wb(),0<this.$ub.length&&this.$Ub.reset()))},get_name:function(){return"$gB"},onStart:function(){null==this.$Ma&&(this.$Ma=this.owner._internal_getFromParents("$Aa",B)),null==this.$sb&&(this.$sb=this.owner._internal_getFromParents("$hE")),null==this.$GB&&(this.$GB=this.owner._internal_getFromParents("$FD")),f.prototype.onStart.call(this)},__class__:z});var q=function(){};q.__name__=!0,q.__isInterface__=!0,q.prototype={__class__:q};var J=function(){this.$lB=20,this.$KB=0,this.$jB=new Rs([0,1,2]),this.$IB=new Rs(["game_1_redplanet","game1_bigplanet","game1_doubleplanet","game1_earthplanet","game1_redplanetsingle","game1_ringplanet","game1_smallplanet"]),f.call(this),this.$JB=202.5,this.$kB=135};function K(t){f.call(this),this.$vC=t}function Z(t){this.removedSignal=new qn,f.call(this),null!=t&&this.removedSignal.connect(t)}J.__name__=!0,J.__interfaces__=[q],J.__super__=f,J.prototype=e(f.prototype,{populate:function(t,e){var i,n=e.moveDirection,r=(i=n.x,s=n.y,i*=o=t.startIndex),n=s*=o,r=i*(o=e.chunkUnitSize),n=s*o,s=p.parseInt(t.data.id.split("_x_")[1]),o=this.$KB%this.$lB==0?"game1_planet_smiley":this.$IB.next(),s=r+Math.random()*s,n=n-this.$JB+this.$jB.next()*this.$kB+Math.random()*this.$kB;return t.entities.push((new Sn).add(Tn.EComponent(S.animations.get(o,S.animationLibraries.get_currentGame()).setXY(s,n)))),this.$KB++,t.entities},depopulate:function(t,e){for(var i=t.entities.slice(),n=0,r=t.entities;n<r.length;)r[n++].dispose();return t.entities=[],i},get_name:function(){return"$iB"},__class__:J}),K.__name__=!0,K.__super__=f,K.prototype=e(f.prototype,{onStart:function(){null==this.$ya&&(this.$ya=this.owner.$w),null==this.$dA&&(this.$dA=this.owner.$rD),null==this.$Ma&&(this.$Ma=this.owner._internal_getFromParents("$Aa",V)),f.prototype.onStart.call(this),this.$uC=this.owner.parent},explode:function(e,i,t){null==t&&(t=0),null==i&&(i=0),null==e&&(e=0);var n=this,t=null==t?0:t;this.owner.addEntity((new Sn).addComponent(new Ir(t,function(){var t;switch(n.$UC={x:n.$ya.container.x+e,y:n.$ya.container.y+i},n.$vC){case 0:t=n.$Ma.factory.createExplosion("explosion_big");break;case 1:t=n.$Ma.factory.createExplosion(Hs.randomElement(K.SMALL_EXPLOSION_SYMBOLS,Bs.native))}switch(null!=t.$w&&t.$w.container.position.copyFrom(n.$UC),n.$uC.addEntity(t),n.owner._internal_getFromParents("$pe").shakeItBaby(20,.3,1),n.$vC){case 0:n.$VC(50,Bs.native.range(.1,.3)),n.$VC(50,Bs.native.range(.1,.3)),n.$VC(50,Bs.native.range(.1,.3));break;case 1:n.$VC(8,Bs.native.range(0,.1)),n.$VC(8,Bs.native.range(0,.1))}n.$Ma.sounds.playExplosion(),Ir.create(n.owner)})),!0)},$VC:function(i,t){var n=this,t=null==t?0:t;this.$uC.addEntity((new Sn).addComponent(new Ir(t,function(){var t={x:n.$UC.x+Bs.native.range(-i,i),y:n.$UC.y+Bs.native.range(-i,i)},e=n.$Ma.factory.createExplosion(Hs.randomElement(K.SMALL_EXPLOSION_SYMBOLS,Bs.native));null!=e.$w&&e.$w.container.position.copyFrom(t),n.$uC.addEntity(e)})),!0)},get_name:function(){return"$TC"},onAdded:function(){null==this.$ya&&(this.$ya=this.owner.$w),null==this.$dA&&(this.$dA=this.owner.$rD),f.prototype.onAdded.call(this)},__class__:K}),Z.__name__=!0,Z.__super__=f,Z.prototype=e(f.prototype,{onRemoved:function(){f.prototype.onRemoved.call(this),this.removedSignal.emit(this)},get_name:function(){return"$gD"},__class__:Z});var Q=function(){this.activeEnemies=[],f.call(this)};Q.__name__=!0,Q.__super__=f,Q.prototype=e(f.prototype,{add:function(e){var i=this;this.activeEnemies.push(e),e.owner.add(Tn.EComponent(new Z(function(t){u.remove(i.activeEnemies,e)})))},get_name:function(){return"$FD"},__class__:Q});var tt=function(){f.call(this)};function et(){this.$La=new An,this.$la=!1,this.canReactivate=!1,f.call(this)}function it(t,e,i){null==e&&(e=!1),et.call(this),this.$MA=t,this.$oA=e,null!=i&&(this.$OA=i),this.$NA=this.$OA}function nt(t,e,i){null==e&&(e=!1),it.call(this,null,e,i),this.$Mb=t}tt.__name__=!0,tt.__super__=f,tt.prototype=e(f.prototype,{onAdded:function(){var i=this;f.prototype.onAdded.call(this);var t=Tn.EComponent(new $i(fn.fromFlag(1),function(t){var e=i.owner.$rD,t=t.other.owner.$Aa;(t instanceof $t?t:null).changeStateTo("$Xd",{worldElement:e,isSpecialBlackHole:!1})}));this.owner.add(Tn.EArray([t,Tn.EComponent(new ht),Tn.EComponent(new ot),Tn.EComponent(new st(new rt(0,700))),Tn.EComponent(new at)]));t=this.owner.$Aa;(t instanceof Ii?t:null).fallbackStateName="$od"},get_name:function(){return"$rd"},__class__:tt}),et.__name__=!0,et.__super__=f,et.prototype=e(f.prototype,{onActivate:function(){this.$la=!0},onDeactivate:function(){this.$La.dispose()},getNextStateName:function(){return null},onUpdateState:function(t){},keepInState:function(){return this.$la},deactivate:function(){this.$la=!1},get_name:function(){return"$Ka"},dispose:function(){null!=this.$La&&(this.$La.dispose(),this.$La=null),f.prototype.dispose.call(this)},__class__:et}),it.__name__=!0,it.__super__=et,it.prototype=e(et.prototype,{onStart:function(){et.prototype.onStart.call(this);var t=this.owner.$w;this.$nA=t instanceof Ur?t:null,null==this.$nA&&(this.$nA=this.owner._internal_getFromChildren("$w",Ur))},onActivate:function(){et.prototype.onActivate.call(this),this.$pA()},$pA:function(){this.$oA?this.$La.add(this.$nA.setMovie(this.$PA()).gotoAndPlay(0,!0)):this.$La.add(this.$nA.setMovie(this.$PA()).gotoAndPlay(0).completed(Ys(this,this.$qA)))},$PA:function(){return this.$MA},$qA:function(){null==this.$OA&&(this.$la=!1)},onDeactivate:function(){et.prototype.onDeactivate.call(this),this.$la=!1,this.$NA=null},onUpdateState:function(t){et.prototype.onUpdateState.call(this,t),null!=this.$OA&&(null!=this.$NA&&(this.$NA-=t)<=0)&&(this.$la=!1)},dispose:function(){this.$nA=null,et.prototype.dispose.call(this)},get_name:function(){return"$mA"},__class__:it}),nt.__name__=!0,nt.__super__=it,nt.prototype=e(it.prototype,{$PA:function(){return this.$jb.animationPrefix+this.$Mb},get_name:function(){return"$mb"},onStart:function(){null==this.$jb&&(this.$jb=this.owner.$Aa),it.prototype.onStart.call(this)},onAdded:function(){null==this.$jb&&(this.$jb=this.owner.$Aa),it.prototype.onAdded.call(this)},__class__:nt});var rt=function(t,e){null==e&&(e=1),null==t&&(t=0),this._from=t,this._to=e,this.updateSize(),this._direction=this._to>this._from?1:-1};rt.__name__=!0,rt.prototype={set:function(t,e){this._from=t,this._to=e,this.updateSize(),this._direction=this._to>this._from?1:-1},getFactorFromValue:function(t){return Math.abs((this.clamp(t)-this._from)/this._size)},getValueFromFactor:function(t){return this._from+this._direction*(t*this._size)},translate:function(t,e){return e.getValueFromFactor(this.getFactorFromValue(t))},clamp:function(t){return this._to>this._from?this.clampTo(t,this._from,this._to):this.clampTo(t,this._to,this._from)},clampTo:function(t,e,i){return t<e?e:i<t?i:t},updateSize:function(){return this._size=Math.abs(this._from-this._to),this._size},set_from:function(t){return this._from=t,this.updateSize(),this._direction=this._to>this._from?1:-1,t},set_to:function(t){return this._to=t,this.updateSize(),this._direction=this._to>this._from?1:-1,t},__class__:rt};var st=function(t){this.$Ub=0,nt.call(this,"loop",!0),this.$qd=t};st.__name__=!0,st.__super__=nt,st.prototype=e(nt.prototype,{onActivate:function(){nt.prototype.onActivate.call(this),this.$dA.heading.set__(fi.Left),this.$db=this.$Ma.playerEntity.$rD},onUpdateState:function(t){nt.prototype.onUpdateState.call(this,t),!!this.$jb.$KD()&&(null!=this.$Ub&&(this.$Ub-=t)<=0)&&(this.$Qd()&&this.$Id(),this.$Ub=st._spawnIntervalRange.getValueFromFactor(Math.random()))},$Qd:function(){var t=hs.distanceTo(this.$dA.position3d,this.$db.position3d),e=this.$qd;return e._from<=t&&t<=e._to||e._to<=t&&t<=e._from},$Id:function(){var t,e,i=this.$Ma.factory.createEnemy("enemy_suicide_bot","enemy_suicide_bot");null!=i.$rD&&(t=i.$rD.position3d,e=this.$dA.position3d,t.x=e.x,t.y=e.y,t.z=e.z),this.owner.parent.add(Tn.EEntity(i))},keepInState:function(){return!0},get_name:function(){return"$Pd"},onStart:function(){null==this.$dA&&(this.$dA=this.owner.$rD),null==this.$Ma&&(this.$Ma=this.owner._internal_getFromParents("$Aa",V)),nt.prototype.onStart.call(this)},onAdded:function(){null==this.$dA&&(this.$dA=this.owner.$rD),nt.prototype.onAdded.call(this)},__class__:st});var ot=function(){nt.call(this,"opens",!1)};ot.__name__=!0,ot.__super__=nt,ot.prototype=e(nt.prototype,{getNextStateName:function(){return"$Pd"},get_name:function(){return"$pd"},__class__:ot});var at=function(){nt.call(this,"closes",!1)};at.__name__=!0,at.__super__=nt,at.prototype=e(nt.prototype,{onActivate:function(){nt.prototype.onActivate.call(this),this._collidable.disableCollisions()},keepInState:function(){return!0},get_name:function(){return"$Od"},onStart:function(){null==this._collidable&&(this._collidable=this.owner.$RE),nt.prototype.onStart.call(this)},onAdded:function(){null==this._collidable&&(this._collidable=this.owner.$RE),nt.prototype.onAdded.call(this)},__class__:at});var ht=function(){et.call(this)};ht.__name__=!0,ht.__super__=et,ht.prototype=e(et.prototype,{onActivate:function(){et.prototype.onActivate.call(this),this._display.container.visible=!1,this._collidable.disableCollisions()},onDeactivate:function(){et.prototype.onDeactivate.call(this),this._display.container.visible=!0,this._collidable.enableCollisions()},keepInState:function(){return!this._enemy.$KD()},getNextStateName:function(){return"$pd"},get_name:function(){return"$od"},onStart:function(){null==this._display&&(this._display=this.owner.$w),null==this._enemy&&(this._enemy=this.owner.$Aa),null==this._collidable&&(this._collidable=this.owner.$RE),et.prototype.onStart.call(this)},onAdded:function(){null==this._display&&(this._display=this.owner.$w),null==this._enemy&&(this._enemy=this.owner.$Aa),null==this._collidable&&(this._collidable=this.owner.$RE),et.prototype.onAdded.call(this)},__class__:ht});var lt=function(){f.call(this)};lt.__name__=!0,lt.__super__=f,lt.prototype=e(f.prototype,{onAdded:function(){var e=this;f.prototype.onAdded.call(this);var t=Tn.EComponent(new $i(fn.fromFlag(1),function(t){t.current.disableCollisions(),t.other.owner.$JD.hit(20),e.owner.$qD.setHealth(0)}));this.owner.add(Tn.EArray([Tn.EComponent(new Ei),Tn.EComponent(new K(0)),t,Tn.EComponent(new xi(3)),Tn.EComponent(new bi(S.sounds.game1.HIT_ENEMY)),Tn.EComponent(new ut),Tn.EComponent(new It(0,-20))]));t=this.owner.$Aa;(t instanceof Ii?t:null).fallbackStateName="$kd"},get_name:function(){return"$ld"},__class__:lt});var ut=function(){this.$dd={x:200,y:50},this.$Cd={x:80,y:30},this.$DA={x:0,y:0},this.$Lb=1,this.$rC=0,nt.call(this,"idle",!0)};ut.__name__=!0,ut.__super__=nt,ut.prototype=e(nt.prototype,{onActivate:function(){nt.prototype.onActivate.call(this),this.$Kd=Hs.randomElement(ut.shootPatterns,Bs.native),this.$rC=0,this.$dA.heading.set__(fi.Left);var t=this.$DA,e=this.$dA.position3d;t.x=e.x,t.y=e.y,this.$DA=t;t=.5<Bs.native._random.next()?-1:1;this.$dA.velocity3d.x=80*t,t=.5<Bs.native._random.next()?-1:1,this.$dA.velocity3d.y=30*t},onUpdateState:function(t){nt.prototype.onUpdateState.call(this,t),!!this.$jb.$KD()&&(null!=this.$Lb&&(this.$Lb-=t)<=0)&&(this.fireProjectile(),this.$Lb=this.$Kd[this.$rC++%this.$Kd.length]),this.$dA.position3d.y-this.$DA.y>this.$dd.y/2?this.$dA.velocity3d.y=-1*this.$Cd.y:this.$dA.position3d.y-this.$DA.y<-this.$dd.y/2&&(this.$dA.velocity3d.y=this.$Cd.y),this.$dA.position3d.x-this.$DA.x>this.$dd.x/2?this.$dA.velocity3d.x=-1*this.$Cd.x:this.$dA.position3d.x-this.$DA.x<-this.$dd.x/2&&(this.$dA.velocity3d.x=this.$Cd.x)},fireProjectile:function(){var t,e,i=this,n=Tn.EComponent(new St(1)),r=this.$Ma.factory.createProjectile("projectile_chicken_ship",1).add(n);null!=r.$rD&&null!=r.$iD&&(e=r.$rD,r.$iD,t=e.position3d,n=i.$dA.position3d,t.x=n.x,t.y=n.y,t.z=n.z,t=e.velocity3d,e=300*(n=i.$dA.heading._value).x,n=300*n.y,t.x=e,t.y=n),this.$Ma.sounds.playProjectile(0),this.owner.parent.add(Tn.EEntity(r))},get_name:function(){return"$kd"},onStart:function(){null==this.$dA&&(this.$dA=this.owner.$rD),null==this.$Ma&&(this.$Ma=this.owner._internal_getFromParents("$Aa",V)),nt.prototype.onStart.call(this)},onAdded:function(){null==this.$dA&&(this.$dA=this.owner.$rD),nt.prototype.onAdded.call(this)},__class__:ut});var ct=function(){f.call(this)};ct.__name__=!0,ct.__super__=f,ct.prototype=e(f.prototype,{onAdded:function(){var e=this;f.prototype.onAdded.call(this);var t=Tn.EComponent(new $i(fn.fromFlag(1),function(t){t.current.disableCollisions(),t.other.owner.$JD.hit(20),e.owner.$qD.setHealth(0)}));this.owner.add(Tn.EArray([Tn.EComponent(new Ei),Tn.EComponent(new K(0)),t,Tn.EComponent(new _t),Tn.EComponent(new xi(10)),Tn.EComponent(new bi(S.sounds.game1.HIT_ENEMY)),Tn.EComponent(new pt),Tn.EComponent(new It(0,-20))]));t=this.owner.$Aa;(t instanceof Ii?t:null).fallbackStateName="$xC"},get_name:function(){return"$Jd"},__class__:ct});var pt=function(){this.$dd={x:100,y:150},this.$Cd={x:60,y:60},this.$DA={x:0,y:0},this.$cd=!0,this.$Bd={x:-50,y:-40,z:0},this.$bd={x:-10,y:-40,z:0},this.$ZC=0,this.$zC=0,this.$YC=0,this.$yC=0,nt.call(this,"idle",!0)};function dt(t,e,i){this.$Fd="",this.isEnabled=!1,this.$fd=0,this._disposer=new An,f.call(this),this.$gd=e,this.$Gd=t,this.$Ed=i}pt.__name__=!0,pt.__super__=nt,pt.prototype=e(nt.prototype,{onActivate:function(){var i=this;nt.prototype.onActivate.call(this),this.owner._internal_getFromChildren("$w",Ur).owner.timeScale=1,this.$_d=Hs.randomElement(pt.gunPatterns,Bs.native),this.$ad=Hs.randomElement(pt.rocketLauncherPatterns,Bs.native),this.$zC=0,this.$ZC=0,this.$dA.heading.set__(fi.Left),this.$La.add(this.$HA.value.watch(function(t,e){i.$jb.animationPrefix="enemy_biggy_ship_b_",i.$pA()},!1).once());var t=this.$DA,e=this.$dA.position3d;t.x=e.x,t.y=e.y,this.$DA=t;t=Bs.native.range(-1,1);this.$dA.velocity3d.x=60*t,t=Bs.native.range(-1,1),this.$dA.velocity3d.y=60*t},onUpdateState:function(t){var e,i;nt.prototype.onUpdateState.call(this,t),this.$jb.$KD()&&(null!=this.$yC&&(this.$yC-=t)<=0&&(e=this.$cd?this.$Bd:this.$bd,this.$cd=!this.$cd,(i={x:(i=this.$dA.position3d).x,y:i.y,z:i.z}).x+=e.x,i.y+=e.y,i.z+=e.z,this.fireRocketLauncher(i),this.$yC=this.$ad[this.$ZC++%this.$ad.length]),null!=this.$YC&&(this.$YC-=t)<=0&&(this.$XC.fire(),this.$YC=this.$_d[this.$zC++%this.$_d.length])),this.$dA.position3d.y-this.$DA.y>this.$dd.y/2?this.$dA.velocity3d.y=-1*this.$Cd.y:this.$dA.position3d.y-this.$DA.y<-this.$dd.y/2&&(this.$dA.velocity3d.y=this.$Cd.y),this.$dA.position3d.x-this.$DA.x>this.$dd.x/2?this.$dA.velocity3d.x=-1*this.$Cd.x:this.$dA.position3d.x-this.$DA.x<-this.$dd.x/2&&(this.$dA.velocity3d.x=this.$Cd.x)},fireRocketLauncher:function(s){var o=this,t=function(t){if(null==t.$rD)return t;if(null==t.$iD)return t;var e=t.$rD;t.$iD.hitPoints=20,e.heading.set__(fi.Left),(i=e.position3d).x=s.x,i.y=s.y,i.z=s.z;var i=e.velocity3d,n=o.$dA.heading._value,r=300*n.x,n=300*n.y;return i.x=r,i.y=n,e.position3d.x+=20,o.$Ma.sounds.playProjectile(1),t}(this.$Ma.factory.createProjectile("missile",1).add(Tn.EComponent(new Ct(this.$Ma.player.owner.$Md))));this.owner.parent.add(Tn.EEntity(t))},get_name:function(){return"$xC"},onStart:function(){null==this.$dA&&(this.$dA=this.owner.$rD),null==this.$HA&&(this.$HA=this.owner.$qD),null==this.$XC&&(this.$XC=this.owner.$jd),null==this.$Ma&&(this.$Ma=this.owner._internal_getFromParents("$Aa",V)),nt.prototype.onStart.call(this)},onAdded:function(){null==this.$dA&&(this.$dA=this.owner.$rD),null==this.$HA&&(this.$HA=this.owner.$qD),null==this.$XC&&(this.$XC=this.owner.$jd),nt.prototype.onAdded.call(this)},__class__:pt}),dt.__name__=!0,dt.__super__=f,dt.prototype=e(f.prototype,{onAdded:function(){null==this._collidable&&(this._collidable=this.owner.$RE),null==this._worldElement&&(this._worldElement=this.owner.$rD),f.prototype.onAdded.call(this),this.gunEntity=(new Sn).add(Tn.EArray([Tn.EComponent(this.$ed=S.animations.getMovieSpritePlayer(null,S.animationLibraries.get_currentGame()).setXY(this.$gd.x,this.$gd.y))])),this._disposer.add(this.gunEntity),this.owner.add(Tn.EEntity(this.gunEntity))},onStart:function(){null==this._collidable&&(this._collidable=this.owner.$RE),null==this._worldElement&&(this._worldElement=this.owner.$rD),null==this._game&&(this._game=this.owner._internal_getFromParents("$Aa",V)),f.prototype.onStart.call(this),this.isEnabled=!0},onUpdate:function(t){f.prototype.onUpdate.call(this,t),null!=this.$fd&&(this.$fd-=t)<=0&&(this.$fd=null),this.$ed.movieSprite.$jc+.01>=this.$ed.movieSprite.symbol.duration&&this.$ed.gotoAndPause(0)},fire:function(){this.$ed.gotoAndPlay(0,!1),this.$fd=this.$Ed},disable:function(){this.isEnabled=!1},release:function(){},setHeading:function(t){this.$Fd=t.vertical._value<0?"_up":0<t.vertical._value?"_down":"_normal",this.$hd()},$hd:function(){var t,e;null!=this.$ed.playback?(t=this.$ed.isPaused,e=this.$ed.playback.get_time(),this.$ed.setMovie(""+this.$Gd+this.$Fd),t?this.$ed.gotoAndPause(e):this.$ed.gotoAndPlay(e)):this.$ed.setMovie(""+this.$Gd+this.$Fd)},$Hd:function(){if(this.isEnabled){if(null==this.$fd)return!0;var t=this.$fd;return null!=t&&t<=0}return!1},$id:function(){if(null==this.$fd)return!1;var t=this.$fd;return!(null!=t&&t<=0)},get_name:function(){return"$Dd"},dispose:function(){null!=this._disposer&&(this._disposer.dispose(),this._disposer=null),f.prototype.dispose.call(this)},__class__:dt});var _t=function(){dt.call(this,"enemy_biggy_gun_1",{x:0,y:0},.01)};_t.__name__=!0,_t.__super__=dt,_t.prototype=e(dt.prototype,{onStart:function(){dt.prototype.onStart.call(this),this.$Fd="_normal",this.$hd()},fire:function(){dt.prototype.fire.call(this);var t,e,i=Tn.EComponent(new St(1)),n=this._game.factory.createProjectile("projectile_chicken_ship",1).add(i),n=(null==n.$rD||(t=(e=n.$rD).position3d,i=this._worldElement.position3d,t.x=i.x,t.y=i.y,t.z=i.z,t=e.position3d,i=this.$ed.container.position,t.x+=i.x,t.y+=i.y,e.position3d.y+=11,t=e.velocity3d,e=550*(i=this._worldElement.heading._value).x,i=550*i.y,t.x=e,t.y=i,this._game.sounds.playProjectile(0)),n);this._game.worldPlayerContainer.addEntity(n)},get_name:function(){return"$jd"},__class__:_t});var ft=function(){f.call(this)};ft.__name__=!0,ft.__super__=f,ft.prototype=e(f.prototype,{onAdded:function(){var i=this;f.prototype.onAdded.call(this);var t=this.owner,e=Tn.EComponent(new xi(10)),n=Tn.EComponent((new Ei).setFilter(Ei.INVINCIBILITY_FILTER)),r=Tn.EComponent(new $i([1,32],function(t){var e;t.current.owner.$rD.velocity3d.x=0,t.current.disableCollisions(),0!=(32&t.other.flags)?(t.other.disableCollisions(),((e=i.owner.$TC)instanceof yt?e:null).reason=0):0!=(1&t.other.flags)&&(t.other.owner.$JD.hit(20),t.other.owner.add(Tn.EEntity((new Sn).add(Tn.EArray([Tn.EComponent(S.animations.get("meteor_debris",S.animationLibraries.get_currentGame()).setXY(20,5)),Tn.EComponent(new kr)])))),((e=i.owner.$TC)instanceof yt?e:null).reason=1),i.owner.$qD.setHealth(0)}));t.add(Tn.EArray([e,n,Tn.EComponent(new yt(1)),r,Tn.EComponent(new mt),Tn.EComponent(new It)]));r=this.owner.$Aa;(r instanceof Ii?r:null).fallbackStateName="$wC"},get_name:function(){return"$WC"},__class__:ft});var mt=function(){nt.call(this,"idle",!0)};mt.__name__=!0,mt.__super__=nt,mt.prototype=e(nt.prototype,{onActivate:function(){nt.prototype.onActivate.call(this),this.$dA.heading.set__(fi.Left);var t=this.$dA.heading._value.x,e=new rt(150,300).getValueFromFactor(Math.random());this.$dA.velocity3d.x=t*e,this.owner.$w.container.scale.y=.5<Bs.native._random.next()?-1:1},onUpdateState:function(t){nt.prototype.onUpdateState.call(this,t),!!this.$jb.$KD()&&(t=this.$HA).value._value>t.valueBounds._from?this.$_b.enableCollisions():this.$_b.disableCollisions()},get_name:function(){return"$wC"},onStart:function(){null==this.$dA&&(this.$dA=this.owner.$rD),null==this.$_b&&(this.$_b=this.owner.$RE),null==this.$HA&&(this.$HA=this.owner.$qD),nt.prototype.onStart.call(this)},onAdded:function(){null==this.$dA&&(this.$dA=this.owner.$rD),null==this.$_b&&(this.$_b=this.owner.$RE),null==this.$HA&&(this.$HA=this.owner.$qD),nt.prototype.onAdded.call(this)},__class__:mt});var yt=function(t){this.reason=0,K.call(this,t)};yt.__name__=!0,yt.__super__=K,yt.prototype=e(K.prototype,{explode:function(t,e,i){switch(null==i&&(i=0),null==e&&(e=0),null==t&&(t=0),this.owner._internal_getFromParents("$pe").shakeItBaby(20,.3,1),this.reason){case 0:this.$Ma.sounds.playExplosion();break;case 1:this.$Ma.sounds.playHitMeteor()}var t=this.owner._internal_getFromChildren("$w",Ur),n=this.owner;t.setMovie("meteor_impact").play(!1).completed(function(){return Ir.create(n)})},__class__:yt});var gt=function(){f.call(this)};gt.__name__=!0,gt.__super__=f,gt.prototype=e(f.prototype,{onAdded:function(){var n=this;f.prototype.onAdded.call(this);var r=!1,s=null,t=Tn.EComponent(new $i([1,4],function(t){var e,i=t.other.flags;0!=(4&i)?(r=!0,e=n.owner,s=(new Sn).add(Tn.EArray([Tn.EComponent(S.animations.get("special_portal_open",S.animationLibraries.get_currentGame())),Tn.EComponent(new qr)])),e.addEntity(s)):0!=(1&i)&&(i=n.owner.$rD,((t=t.other.owner.$Aa)instanceof $t?t:null).changeStateTo("$Xd",{worldElement:i,isSpecialBlackHole:r}),null!=s&&s.$Hf.$A_().animate(1,0,.2,null,null,0))}));this.owner.add(Tn.EArray([t,Tn.EComponent(new ht),Tn.EComponent(new ot),Tn.EComponent(new st(new rt(9999999,999999))),Tn.EComponent(new at)]));t=this.owner.$Aa;(t instanceof Ii?t:null).fallbackStateName="$od"},get_name:function(){return"$tC"},__class__:gt});var vt=function(){f.call(this)};function wt(){nt.call(this,"idle",!0)}vt.__name__=!0,vt.__super__=f,vt.prototype=e(f.prototype,{onAdded:function(){var e=this;f.prototype.onAdded.call(this),this.owner.add(Tn.EArray([Tn.EComponent(new Ei),Tn.EComponent(new K(1)),Tn.EComponent(new xi(1)),Tn.EComponent(new $i(fn.fromFlag(1),function(t){t.current.disableCollisions(),t.other.owner.$JD.hit(10),e.owner.$qD.setHealth(0)})),Tn.EComponent(new xt),Tn.EComponent(new It)]));var t=this.owner.$Aa;(t instanceof Ii?t:null).fallbackStateName="$qC"},get_name:function(){return"$SC"},__class__:vt}),wt.__name__=!0,wt.__super__=nt,wt.prototype=e(nt.prototype,{get_name:function(){return"$qC"},__class__:wt});var xt=function(){this.$RC=30,this.$rC=0,this.$QC=0,wt.call(this)};function bt(){f.call(this)}xt.__name__=!0,xt.__super__=wt,xt.prototype=e(wt.prototype,{onActivate:function(){wt.prototype.onActivate.call(this),this.$dA.heading.set__(fi.Left),this.$db=this.$Ma.playerEntity.$rD;var t=1.5*Math.PI,e=Math.random(),i=.8*(e<0?0:1<e?1:e)-.4+t,n=Math.sin(i),e=Math.cos(i),t=this.$dA.velocity3d,i=this.$RC,n=4*(n*i),i=4*(e*i);t.x=n,t.y=i},onUpdateState:function(t){wt.prototype.onUpdateState.call(this,t),null!=this.$QC&&(this.$QC-=t)<=0&&this.$dA.position3d.x>this.$db.position3d.x&&(this.$RC+=30,this.$sC(),this.$QC=xt._spawnIntervalRange.getValueFromFactor(Math.random()))},$sC:function(){var t,e,i,n,r,s;i=(e=this.$rC%4<2?(s=this.$dA.velocity3d,i=this.$db.position3d,e=this.$dA.position3d,(r={x:i.x,y:i.y}).x-=e.x,r.y-=e.y,i=hs.normalize(r),t=this.$RC,e=n=i.x,i=r=i.y,n*t):(s=this.$dA.velocity3d,e=n=Bs.native.range(-1,1),i=r=Bs.native.range(-1,1),n*(t=this.$RC)),r*t),s.x=e,s.y=i,this.$rC++},onStart:function(){null==this.$dA&&(this.$dA=this.owner.$rD),null==this.$_b&&(this.$_b=this.owner.$RE),null==this.$Ma&&(this.$Ma=this.owner._internal_getFromParents("$Aa",V)),wt.prototype.onStart.call(this)},onAdded:function(){null==this.$dA&&(this.$dA=this.owner.$rD),null==this.$_b&&(this.$_b=this.owner.$RE),wt.prototype.onAdded.call(this)},__class__:xt}),bt.__name__=!0,bt.__super__=f,bt.prototype=e(f.prototype,{onStart:function(){f.prototype.onStart.call(this);var t=this.owner._internal_getFromChildren("$w",Ur);null!=t&&t.play(!0)},get_name:function(){return"$nB"},__class__:bt});var Et=function(t){bt.call(this),this.$PC=t};Et.__name__=!0,Et.__super__=bt,Et.prototype=e(bt.prototype,{onStart:function(){var i=this;bt.prototype.onStart.call(this);var t=Tn.EComponent(new $i(fn.fromFlag(1),function(t){var e=t.other.owner.$qD;e.value._value>e.valueBounds._from&&(t.current.disableCollisions(),t.current.owner.add(Tn.EComponent(new Ir)),((t=t.other.owner.$Aa)instanceof $t?t:null).randomizeGun("powerup_rocket"==i.$PC),i.owner._internal_getFromParents("$V_",W).playPickup())}));this.owner.add(t)},__class__:Et});var $t=function(){this.playerOffset={x:0,y:0},this.$td=1,this.baseSpeedModifier=1,this.levelAnchorPosition={x:1e3,y:0},this.playerDied=new mr,this.$a=new An,N.call(this)};$t.__name__=!0,$t.__super__=N,$t.prototype=e(N.prototype,{onAdded:function(){null==this.$_b&&(this.$_b=this.owner.$RE),null==this.$dA&&(this.$dA=this.owner.$rD),null==this.$hA&&(this.$hA=this.owner.$Hc),null==this.$ya&&(this.$ya=this.owner.$w),N.prototype.onAdded.call(this),this.owner.add(Tn.EArray([Tn.EComponent(new Nt),Tn.EComponent(new Bt),Tn.EComponent(new Rt),Tn.EComponent(new Lt),Tn.EComponent(new Ft)]))},onStart:function(){var d=this;null==this.$_b&&(this.$_b=this.owner.$RE),null==this.$dA&&(this.$dA=this.owner.$rD),null==this.$hA&&(this.$hA=this.owner.$Hc),null==this.$ya&&(this.$ya=this.owner.$w),null==this.$Ma&&(this.$Ma=this.owner._internal_getFromParents("$Aa",V)),N.prototype.onStart.call(this),this.$a.add(this.owner.$qD.value.watch(function(t,e){var i,n,r,s,o,a,h,l,u,c,p;0==t?(d.$_b.disableCollisions(),d.changeStateTo("$_D",null)):t<e?(a=d.owner,i=[16057380],p=new An,null!=a.$w&&(n=a.$w,r=new or(i[0],1),n.container.filters=[r],s=0,p.add(Vs.create(a.parent,.05,1,function(){var t=s+=.5;r.update(i[(0|t)%i.length],1==r.multiplier?0:1)})),o=a.parent,a=(new Sn).addComponent(new Ir(.1,function(){n.container.filters=null})),o.addEntity(a,!0),p.add(a))):(a=d.owner,h=[16441449],p=new An,null!=a.$w&&(l=a.$w,u=new or(h[0],1),l.container.filters=[u],c=0,p.add(Vs.create(a.parent,.05,3,function(){var t=c+=.5;u.update(h[(0|t)%h.length],1==u.multiplier?0:1)})),o=a.parent,a=(new Sn).addComponent(new Ir(.2,function(){l.container.filters=null})),o.addEntity(a,!0),p.add(a)))},!1)),this.setGun(new At)},onUpdate:function(t){N.prototype.onUpdate.call(this,t),this.$ud(t),this.$Ud()},$ud:function(t){var e=this.$td,i=2*t;this.$td=e+(this.baseSpeedModifier-e)*(i<0?0:1<i?1:i),this.levelAnchorPosition.x+=100*t*this.$td;i=this.$dA.position3d,t=this.levelAnchorPosition;i.x=t.x,i.y=t.y,i=this.$dA.position3d;t=this.playerOffset;i.x+=t.x,i.y+=t.y},$Ud:function(){null!=this.$Td&&(this.$Td.setHeading(this.$hA.axis1),this.$hA.buttonAction1.wasPressed._value?this.$Td.$Hd()&&this.$Td.fire():this.$hA.buttonAction1.wasReleased._value&&this.$Td.$id()&&this.$Td.release())},disableGun:function(){null!=this.$Td&&this.$Td.disable()},randomizeGun:function(t){var e=t&&null!=this.$Td&&"$ED"!=this.$Td.get_name()?"$ED":null!=this.$Td?(u.remove(e=["$GD","$dD"],this.$Td.get_name()),Hs.randomElement(e,Bs.native)):"$GD";this.setGun("$ED"==e?new Pt:"$GD"==e?new At:"$dD"==e?new Ot:null)},disposeGun:function(){var t=this.$Td;null!=t&&t.dispose(),this.$Td=null},setGun:function(a){this.disposeGun(),null!=a&&(this.owner.add(Tn.EComponent(a)),this.$Td=a,Xs.create(this.owner,1,function(){var t,e,i,n,r=a.gunEntity,s=[14417919],o=new An;null!=r.$w&&(t=r.$w,e=new or(s[0],1),t.container.filters=[e],i=0,o.add(Vs.create(r.parent,.1,3,function(){var t=i+=.5;e.update(s[(0|t)%s.length],1==e.multiplier?0:1)})),n=r.parent,r=(new Sn).addComponent(new Ir(.4,function(){t.container.filters=null})),n.addEntity(r,!0),o.add(r))}))},$ba:function(){return"$wd"},dispose:function(){null!=this.$a&&(this.$a.dispose(),this.$a=null),N.prototype.dispose.call(this)},__class__:$t});var At=function(){dt.call(this,"player_gun_1",{x:0,y:-20},.01)};At.__name__=!0,At.__super__=dt,At.prototype=e(dt.prototype,{fire:function(){var s=this;dt.prototype.fire.call(this);var t=Tn.EComponent(new St(1)),t=function(t){if(null==t.$rD)return t;if(null==t.$w)return t;var e=t.$rD,i=t.$w,n=e.position3d,r=s._worldElement.position3d;n.x=r.x,n.y=r.y,n.z=r.z,n=e.position3d;r=s.$ed.container.position;n.x+=r.x,n.y+=r.y,e.position3d.y-=11,n=e.velocity3d;var r=s._worldElement.heading._value,e=550*r.x,r=550*r.y;n.x=e,n.y=r;r=p.random(4)*Math.PI/2;return i.container.rotation=r,s._game.sounds.playProjectile(2),t}(this._game.factory.createProjectile("projectile_blaster",2).add(t));this._game.worldPlayerContainer.addEntity(t)},get_name:function(){return"$GD"},__class__:At});var St=function(t){f.call(this),this.$HD=t};function Tt(){this._targetSpeedChange=2,this._targetSpeed=150,this._retargetInterval=1,this._verticalTargetRange=100,this._hitPoints=1,this._yTargetVelocity=0,this._retargetCooldown=0,f.call(this)}St.__name__=!0,St.__super__=f,St.prototype=e(f.prototype,{onStart:function(){var n=this;null==this._projectile&&(this._projectile=this.owner.$iD),f.prototype.onStart.call(this),this.$h=this._projectile.impactSignal.connect(function(){var t,e=n.owner.$rD.position3d,i=n.owner._internal_getFromParents("$LB").createExplosion("bullet_damage"),i=(null==i.$w||((t=i.$w.container.position).x=e.x,t.y=e.y),i);n.owner.parent.addEntity(i)}),this._projectile.hitPoints=this.$HD},get_name:function(){return"$hD"},onAdded:function(){null==this._projectile&&(this._projectile=this.owner.$iD),f.prototype.onAdded.call(this)},dispose:function(){null!=this.$h&&(this.$h.dispose(),this.$h=null),f.prototype.dispose.call(this)},__class__:St}),Tt.__name__=!0,Tt.__super__=f,Tt.prototype=e(f.prototype,{onStart:function(){var n=this;null==this._projectile&&(this._projectile=this.owner.$iD),null==this._worldElement&&(this._worldElement=this.owner.$rD),f.prototype.onStart.call(this),this._projectile.hitPoints=this._hitPoints,this.$h=this._projectile.impactSignal.connect(function(){var t,e=n.owner.$rD.position3d,i=n.owner._internal_getFromParents("$LB").createExplosion("bullet_damage"),i=(null==i.$w||((t=i.$w.container.position).x=e.x,t.y=e.y),i);n.owner.parent.addEntity(i)})},isInRange:function(t){if(Math.abs(this._worldElement.position3d.y-(t._worldElement.position3d.y+t.$Nd))>this._verticalTargetRange)return!1;t=t._worldElement.position3d.x+t.$nd-this._worldElement.position3d.x;return this._worldElement.velocity3d.x<0&&(t*=-1),0<t},onUpdate:function(t){f.prototype.onUpdate.call(this,t),null!=this._retargetCooldown&&(this._retargetCooldown-=t)<=0&&(this._retargetCooldown=this._retargetInterval,this._homingLock=this.getHomingLock()),this._yTargetVelocity=0,null!=this._homingLock&&(e=this._homingLock,this._yTargetVelocity=this._worldElement.position3d.y>e._worldElement.position3d.y+e.$Nd?-this._targetSpeed:this._targetSpeed);var e=this._worldElement.velocity3d.y,t=t*this._targetSpeedChange;this._worldElement.velocity3d.y=e+(this._yTargetVelocity-e)*(t<0?0:1<t?1:t)},getHomingLock:function(){return null},get_name:function(){return"$fD"},onAdded:function(){null==this._projectile&&(this._projectile=this.owner.$iD),null==this._worldElement&&(this._worldElement=this.owner.$rD),f.prototype.onAdded.call(this)},dispose:function(){null!=this.$h&&(this.$h.dispose(),this.$h=null),f.prototype.dispose.call(this)},__class__:Tt});var Ct=function(t){Tt.call(this),this._target=t};function Mt(t){Tt.call(this),this._enemies=t}Ct.__name__=!0,Ct.__super__=Tt,Ct.prototype=e(Tt.prototype,{getHomingLock:function(){return this.isInRange(this._target)?this._target:null},__class__:Ct}),Mt.__name__=!0,Mt.__super__=Tt,Mt.prototype=e(Tt.prototype,{getHomingLock:function(){for(var t=null,e=179769313486231e294,i=0,n=this._enemies.activeEnemies;i<n.length;){var r=n[i];++i;var s=r.owner.$Md;null!=s&&r.owner.$RE.collisionsEnabled&&null==r.owner.$re&&this.isInRange(s)&&((r=Math.abs(s._worldElement.position3d.x+s.$nd-this._worldElement.position3d.x)+Bs.native.to(50))<e&&(e=r,t=s))}return t},__class__:Mt});var It=function(t,e){null==e&&(e=0),null==t&&(t=0),f.call(this),this.$nd=t,this.$Nd=e};It.__name__=!0,It.__super__=f,It.prototype=e(f.prototype,{get_name:function(){return"$Md"},onStart:function(){null==this._worldElement&&(this._worldElement=this.owner.$rD),f.prototype.onStart.call(this)},onAdded:function(){null==this._worldElement&&(this._worldElement=this.owner.$rD),f.prototype.onAdded.call(this)},__class__:It});var Pt=function(){dt.call(this,"player_gun_3",{x:0,y:-20},.55)};Pt.__name__=!0,Pt.__super__=dt,Pt.prototype=e(dt.prototype,{fire:function(){var a=this;dt.prototype.fire.call(this);for(var t=0;t<4;){var e=function(o){return function(t){if(null==t.$rD)return t;if(null==t.$RE)return t;var e=t.$rD;t.$RE.flags|=32,e.heading.set__(fi.Right);var i=e.position3d,n=a._worldElement.position3d;i.x=n.x,i.y=n.y,i.z=n.z,i=e.position3d;var r=a.$ed.container.position;i.x+=r.x,i.y+=r.y,e.position3d.x+=15+o[0]%2*8,e.position3d.y-=12+8*(o[0]/2|0),i=e.velocity3d;var s=a._worldElement.heading._value,n=s.x,r=s.y,s=Pt.bulletSpeed.getValueFromFactor(Math.random()),n=n*s,s=r*s;return i.x=n,i.y=s,e.velocity3d.y+=Bs.native.range(-60,60),a._game.sounds.playProjectile(3),t}}([t++]),i=Tn.EComponent(new Mt(this._enemies)),i=e(this._game.factory.createProjectile("player_projectile_rocket",2).add(i));this._game.worldPlayerContainer.addEntity(i)}},get_name:function(){return"$ED"},onStart:function(){null==this._enemies&&(this._enemies=this.owner._internal_getFromParents("$FD")),dt.prototype.onStart.call(this)},__class__:Pt});var Ot=function(){dt.call(this,"player_gun_2",{x:0,y:-20},1)};function Dt(t,e,i){it.call(this,t,e,i)}Ot.__name__=!0,Ot.__super__=dt,Ot.prototype=e(dt.prototype,{fire:function(){var r=this;dt.prototype.fire.call(this);for(var t=0;t<5;){var e,i,n,s=t++,o=[null],a=Tn.EComponent(new St(1)),h=this._game.factory.createProjectile("projectile_blaster",2).add(a).add(Tn.EComponent(new Ir(1.5,function(n){return function(){var t=n[0].$rD.position3d,e=(new Sn).setTimeScale(Bs.native.range(.8,1.2)),i=S.animations.get("bullet_dissolves",S.animationLibraries.get_currentGame()).setXY(t.x,t.y),t=p.random(4)*Math.PI/2;i.container.rotation=t;i=e.add(Tn.EArray([Tn.EComponent(i),Tn.EComponent(new kr)]));r._game.worldPlayerContainer.addEntity(i)}}(o)))),h=(null==h.$rD||(i=(n=h.$rD).position3d,e=r._worldElement.position3d,i.x=e.x,i.y=e.y,i.z=e.z,a=n.position3d,i=r.$ed.container.position,a.x+=i.x,a.y+=i.y,n.position3d.x+=15,n.position3d.y-=11,e=n.velocity3d,i=400*(a=r._worldElement.heading._value).x,a=400*a.y,e.x=i,e.y=a,a=s/5,s=(s=Math.PI/2-.3)+(.3+Math.PI/2-s)*(a<0?0:1<a?1:a),a=400*Math.sin(s),s=400*Math.cos(s),(n=n.velocity3d).x=a,n.y=s,r._game.sounds.playProjectile(4)),h),h=o[0]=h;this._game.worldPlayerContainer.addEntity(h)}},get_name:function(){return"$dD"},__class__:Ot}),Dt.__name__=!0,Dt.__super__=it,Dt.prototype=e(it.prototype,{get_name:function(){return"$vd"},onStart:function(){null==this.$rA&&(this.$rA=this.owner.$Aa),null==this.$dA&&(this.$dA=this.owner.$rD),it.prototype.onStart.call(this)},onAdded:function(){null==this.$rA&&(this.$rA=this.owner.$Aa),null==this.$dA&&(this.$dA=this.owner.$rD),it.prototype.onAdded.call(this)},__class__:Dt});var Rt=function(){this.$BD=0,this.$AD=0,this.$aD=200,Dt.call(this,null,!0)};Rt.__name__=!0,Rt.__super__=Dt,Rt.prototype=e(Dt.prototype,{onActivate:function(){Dt.prototype.onActivate.call(this);var t,e,i,n,r=this.owner,s=[16057380,16777215],o=new An;null!=r.$w&&(t=r.$w,e=new or(s[0],1),t.container.filters=[e],i=0,o.add(Vs.create(r.parent,.1,100,function(){var t=i+=.5;e.update(s[(0|t)%s.length],1==e.multiplier?0:1)})),n=r.parent,r=(new Sn).addComponent(new Ir(10.1,function(){t.container.filters=null})),n.addEntity(r,!0),o.add(r)),this.$Ma.sounds.playerDie(),this.$Ma.player.disableGun(),this.owner.$JD.filter=Ei.INVINCIBILITY_FILTER,this.$uC=this.owner.parent},onUpdateState:function(t){Dt.prototype.onUpdateState.call(this,t),this.$pA(),this.$cD(t),this.$CD(t)},$cD:function(t){this.$AD+=this.$aD*t,this.$rA.playerOffset.y+=t*this.$AD},$PA:function(){return"player_move_down"},$CD:function(t){this.$BD+=t,.05<this.$BD&&(this.$BD=0,this.$UC={x:this.$ya.container.x,y:this.$ya.container.y},this.$VC(),this.$VC(),this.$VC())},$VC:function(){var t={x:this.$UC.x,y:this.$UC.y};t.x+=Bs.native.range(-50,50),t.y+=Bs.native.range(0,50);var e=this.$Ma.factory.createExplosion(Hs.randomElement(["explosion_medium","explosion_medium_02"],Bs.native));null!=e.$w&&e.$w.container.position.copyFrom(t),this.$uC.addEntity(e)},keepInState:function(){return this.$rA.playerOffset.y<600},getNextStateName:function(){return"$Zd"},get_name:function(){return"$_D"},onStart:function(){null==this.$ya&&(this.$ya=this.owner.$w),null==this.$Ma&&(this.$Ma=this.owner._internal_getFromParents("$Aa",V)),Dt.prototype.onStart.call(this)},onAdded:function(){null==this.$ya&&(this.$ya=this.owner.$w),Dt.prototype.onAdded.call(this)},__class__:Rt});var Lt=function(){Dt.call(this,null,!0)};Lt.__name__=!0,Lt.__super__=Dt,Lt.prototype=e(Dt.prototype,{onActivate:function(){Dt.prototype.onActivate.call(this),this.$rA.playerDied.emit()},$PA:function(){return"player_move_down"},get_name:function(){return"$Zd"},__class__:Lt});var kt=function(){};kt.__name__=!0,kt.__isInterface__=!0,kt.prototype={__class__:kt};var Ft=function(){this.$yd={x:-54,y:0},Dt.call(this,"player_blackhole_death",!1)};Ft.__name__=!0,Ft.__interfaces__=[kt],Ft.__super__=Dt,Ft.prototype=e(Dt.prototype,{onActivate:function(){Dt.prototype.onActivate.call(this),this.$rA.disposeGun(),this.owner.$RE.disableCollisions(),this.$Ma.sounds.playHitBlackHole(),this.owner.$JD.filter=Ei.INVINCIBILITY_FILTER},onUpdateState:function(t){Dt.prototype.onUpdateState.call(this,t),this.$rA.baseSpeedModifier=.2;var e,i,n=this.data.worldElement.position3d,r=this.$rA.levelAnchorPosition,s=(e=n.x,i=n.y,e-=r.x),o=i-=r.y,s=e+(r=this.$yd).x,o=i+r.y,n=this.$rA.playerOffset,r=this.$rA.playerOffset,t=10*t,s=(e=s,i=o,t<0?0:1<t?1:t),o=e-=r.x,t=i-=r.y,o=e*s,t=i*s,s=e=r.x,r=i=r.y,s=e+o,r=i+t;n.x=s,n.y=r},onDeactivate:function(){Dt.prototype.onDeactivate.call(this),this.data.isSpecialBlackHole?this.$Ma.owner.$Yd.finish(2):this.$Ma.owner.$Yd.finish(1),this.$ya.container.visible=!1},get_name:function(){return"$Xd"},onStart:function(){null==this.$ya&&(this.$ya=this.owner.$w),null==this.$Ma&&(this.$Ma=this.owner._internal_getFromParents("$Aa",V)),Dt.prototype.onStart.call(this)},onAdded:function(){null==this.$ya&&(this.$ya=this.owner.$w),Dt.prototype.onAdded.call(this)},__class__:Ft});var Nt=function(){this._smoothMovementSpeed={x:0,y:0},Dt.call(this,null,!0)};Nt.__name__=!0,Nt.__super__=Dt,Nt.prototype=e(Dt.prototype,{onUpdateState:function(t){Dt.prototype.onUpdateState.call(this,t),this.$pA(),!(this.$hA.axis1.horizontal._value<0)&&0<this.$hA.axis1.horizontal._value?this.$rA.baseSpeedModifier=2:this.$rA.baseSpeedModifier=1;var e,i,n=this._smoothMovementSpeed,r={x:250,y:350},s=(e=(h=this.$hA.axis1.value).x,i=h.y,e*=r.x,i*=r.y,15*t),o=(e*=t,i*=t,s<0?0:1<s?1:s),a=e-=n.x,s=i-=n.y,a=e*o,s=i*o;(h={x:n.x,y:n.y}).x+=a,h.y+=s,this._smoothMovementSpeed=h;var h=this.$rA.playerOffset,h=(r=this._smoothMovementSpeed,{x:h.x,y:h.y});h.x+=r.x,h.y+=r.y,this.$rA.playerOffset=this.$Wd(h,t)},$Wd:function(t,e){var i,t={x:t.x,y:t.y},e=8*e;return t.x<=80?(i=t.x,t.x=i+(80-i)*(e<0?0:1<e?1:e)):500<=t.x&&(i=t.x,t.x=i+(500-i)*(e<0?0:1<e?1:e)),t.y<=-200?(i=t.y,t.y=i+(-200-i)*(e<0?0:1<e?1:e)):200<=t.y&&(i=t.y,t.y=i+(200-i)*(e<0?0:1<e?1:e)),t},$PA:function(){return this.$hA.axis1.vertical._value<0?"player_move_up":0<this.$hA.axis1.vertical._value?"player_move_down":!(this.$hA.axis1.horizontal._value<0)&&0<this.$hA.axis1.horizontal._value?"player_move_left_right":"player_idle"},get_name:function(){return"$wd"},onStart:function(){null==this.$hA&&(this.$hA=this.owner.$Hc),Dt.prototype.onStart.call(this)},onAdded:function(){null==this.$hA&&(this.$hA=this.owner.$Hc),Dt.prototype.onAdded.call(this)},__class__:Nt});var Bt=function(){Dt.call(this,"player_move_left_right",!0,3)};Bt.__name__=!0,Bt.__super__=Dt,Bt.prototype=e(Dt.prototype,{onActivate:function(){Dt.prototype.onActivate.call(this),this.$Ma.player.disableGun(),this.owner.$RE.disableCollisions()},onUpdateState:function(t){Dt.prototype.onUpdateState.call(this,t),this.$rA.baseSpeedModifier+=15*t},onDeactivate:function(){Dt.prototype.onDeactivate.call(this),this.$Ma.endGame()},get_name:function(){return"$Vd"},onStart:function(){null==this.$Ma&&(this.$Ma=this.owner._internal_getFromParents("$Aa",V)),Dt.prototype.onStart.call(this)},__class__:Bt});var Ut=function(){et.call(this)};Ut.__name__=!0,Ut.__super__=et,Ut.prototype=e(et.prototype,{onActivate:function(){var i=this;et.prototype.onActivate.call(this);var t=this.$Ma.touchUI;null!=t&&t.disable(),this.$g_(1.5,function(){var e=i.$Ma.createDialog(0,!0),t=Tn.EComponent(new jr(function(t){e.$Hf.$A_().animate(1,0,.1,null,null,0),i.$g_(.1,Ys(i,i.deactivate))}));e.add(Tn.EArray([Tn.EComponent(new qr),t])),i.$La.add(e)})},getNextStateName:function(){return"$Yd"},$g_:function(t,e){var i=this.$La,n=this.owner,r=t;null==t&&(r=0);e=(new Sn).addComponent(new Ir(r,e));return n.addEntity(e,!0),i.add(e)},get_name:function(){return"$fB"},onStart:function(){null==this.$FB&&(this.$FB=this.owner._internal_getFromParents("$se")),null==this.$Ma&&(this.$Ma=this.owner._internal_getFromParents("$Aa",V)),et.prototype.onStart.call(this)},__class__:Ut});var Xt=function(){et.call(this)};Xt.__name__=!0,Xt.__super__=et,Xt.prototype=e(et.prototype,{onActivate:function(){et.prototype.onActivate.call(this);var t=this.$Ma.touchUI;switch(null!=t&&t.disable(),this.$Ma.gameModel.outcome){case 0:this.$Ma.createDialog(1,!1),this.$Ma.player.changeStateTo("$Vd",null);break;case 1:this.$Ma.createDialog(2,!1),this.$Ma.endGame(2);break;case 2:this.$Ma.endGame()}},get_name:function(){return"$EB"},onStart:function(){null==this.$Ma&&(this.$Ma=this.owner._internal_getFromParents("$Aa",V)),et.prototype.onStart.call(this)},__class__:Xt});var jt=function(){this.$zd=!1,et.call(this)};jt.__name__=!0,jt.__super__=et,jt.prototype=e(et.prototype,{onActivate:function(){et.prototype.onActivate.call(this);var t=this.$Ma.touchUI;null!=t&&t.enable(),this.$Ma.spawner.isEnabled=!0,this.$zd=!1;var e=Ys(this,this.finish);this.$La.add(this.$Ma.player.playerDied.connect(function(){e(1)}))},onDeactivate:function(){this.$Ma.spawner.isEnabled=!1,et.prototype.onDeactivate.call(this)},onUpdateState:function(t){var e;3!=this.$Ma.spawner.$ub.length||this.$zd||(e=this.$Ma.spawnMargin*this.$Ma.chunkUnitSize,this.$Ma.worldElementContainer.parent.add(Tn.EEntity((new Sn).add(Tn.EArray([Tn.EComponent(S.animations.get("game1_big_planet",S.animationLibraries.get_currentGame()).setXY(this.$Ma.worldElementLayer.viewportRight._value+e,290))])))),this.$zd=!0),0==this.$Ma.spawner.$ub.length&&0==this.$Ma.enemyList.activeEnemies.length&&this.finish(0)},finish:function(t){this.$Ma.finishLevel(t),this.$la=!1},getNextStateName:function(){return"$EB"},get_name:function(){return"$Yd"},onStart:function(){null==this.$Ma&&(this.$Ma=this.owner.$Aa),et.prototype.onStart.call(this)},onAdded:function(){null==this.$Ma&&(this.$Ma=this.owner.$Aa),et.prototype.onAdded.call(this)},__class__:jt});var Vt=function(t){this.useLayerIndex=!1,f.call(this),this.container=null!=t?t:new PIXI.Container};Vt.__name__=!0,Vt.render=function(t,e){t=t.$w;null!=t&&e.render(t.container)},Vt.__super__=f,Vt.prototype=e(f.prototype,{onStart:function(){f.prototype.onStart.call(this),this.reparentContainer()},onStop:function(){null!=this.container.parent&&this.container.parent.removeChild(this.container),f.prototype.onStop.call(this)},reparentContainer:function(){var t,e;null==this.owner.parent||null!=(t=this.owner.parent._internal_getFromParents("$w"))&&(e=this.owner.layerIndex,this.useLayerIndex&&e<=t.container.children.length?t.container.addChildAt(this.container,e):t.container.addChild(this.container))},setXY:function(t,e){return this.container.position.set(t,e),this},setAlpha:function(t){return this.container.alpha=t,this},dispose:function(){this.container.destroy(),f.prototype.dispose.call(this)},get_name:function(){return"$w"},__class__:Vt});var Ht=function(){};function Gt(){this.button4Down=new Mn(!1),this.button3Down=new Mn(!1),this.button2Down=new Mn(!1),this.button1Down=new Mn(!1),this.axisDirection={x:0,y:0},Vt.call(this)}Ht.__name__=!0,Ht.__isInterface__=!0,Ht.prototype={__class__:Ht},Gt.__name__=!0,Gt.__interfaces__=[Ht],Gt.__super__=Vt,Gt.prototype=e(Vt.prototype,{enable:function(){this.container.visible=!0},disable:function(){this.container.visible=!1},__class__:Gt});var Yt=function(t,e,i){null==i&&(i=120),null==e&&(e=55),null==t&&(t=30),this.$ie={x:0,y:0},this.$Ge={x:0,y:0},this.$a=new An,Gt.call(this),this.$fe=t,this.$Fe=e,this.$ge=i};function Wt(t,e){this.$Ea=[],this.$ea=fi.Right,this.pewSlugs=[],this.boxingSlugs=[],this.cyclopsSlugs=[],this.slugs=[],B.call(this,new zt,t,e),t=50,e=-900,this.$Ea.push(new rt(-900,50)),e+=1300,t+=1300,this.$Ea.push(new rt(400,1350)),e+=1300,t+=1300,this.$Ea.push(new rt(1700,2650)),e+=1300,t+=1300,this.$Ea.push(new rt(3e3,3950))}Yt.__name__=!0,Yt.__super__=Gt,Yt.prototype=e(Gt.prototype,{onAdded:function(){Gt.prototype.onAdded.call(this),this.owner.add(Tn.EEntity((new Sn).add(Tn.EArray([Tn.EComponent(this.$ya=new Vt),Tn.EComponent(new us(ps.fromString("100%"),ps.fromString("100%"))),Tn.EEntity((new Sn).add(Tn.EArray([Tn.EComponent(this.$he=(new pn).setHitArea(0,0,2e3,2e3)),Tn.EComponent(new Vr(Ys(this,this.$Ie),!1)),Tn.EComponent(new Hr(Ys(this,this.$je),!1)),Tn.EComponent(new us(ms.Relative(2e3),ms.Relative(2e3),ps.fromString("40%"),ps.fromString("50%"),ps.fromString("100%"),ps.fromString("50%")))]))),Tn.EEntity((new Sn).add(Tn.EArray([Tn.EComponent(this.$He=new Bi(Math.round(this.$Fe))),Tn.EComponent(new us(ms.Relative(120),ms.Relative(120),ps.fromString("100"),ps.fromString("100% - 100")))]))),Tn.EEntity((new Sn).add(Tn.EArray([Tn.EComponent(this.$Ya=new Ni(this.$ge).setHitArea(-150,-150,300,300)),Tn.EEntity((new Sn).add(Tn.EComponent(S.animations.get("button_shoot",S.animationLibraries.get_currentGame())))),Tn.EComponent(new us(ms.Relative(this.$ge),ms.Relative(this.$ge),ps.fromString("100% - 100"),ps.fromString("100% - 100")))])))])))),this.$a.add(this.$he.isDown.watch(Ys(this,this.$Je)));function t(t,e){return t}var e=this.$Ya.isDown,i=new Mn(t(e._value,e._value));e.get_changed().connect(function(t,e){i.set__(t)}),this.button1Down=i},$Ie:function(t){this.$Ge=t.data.getLocalPosition(this.$ya.container),this.$Ge.x=Math.max(2*this.$fe,this.$Ge.x),this.$He.setXY(this.$Ge.x,this.$Ge.y),this.$je(t)},$je:function(t){var e,i,n;this.$he.isDown._value&&(t.data.getLocalPosition(this.$he.container,this.$ie),this.$ie.x<2e3)&&(e=t.data.getLocalPosition(this.$ya.container),i=this.$Ge,(n={x:e.x,y:e.y}).x-=i.x,n.y-=i.y,t=n,i=Math.min(1,Math.sqrt(t.x*t.x+t.y*t.y)/this.$fe),n=hs.angle(t),t.x=i*Math.cos(n),t.y=i*Math.sin(n),(e=this.$He.direction).x=t.x,e.y=t.y)},$Je:function(t,e){t||((t=this.$He.direction).x=0,t.y=0)},onUpdate:function(t){Gt.prototype.onUpdate.call(this,t);var e=this.axisDirection,t=this.$He.direction;e.x=t.x,e.y=t.y},dispose:function(){null!=this.$a&&(this.$a.dispose(),this.$a=null),Gt.prototype.dispose.call(this)},__class__:Yt}),Wt.__name__=!0,Wt.__super__=B,Wt.prototype=e(B.prototype,{onAdded:function(){B.prototype.onAdded.call(this),this.worldProjection.matrix.scale(1,-1),this.worldProjection.zToXYProjection.x=-30,this.worldProjection.zToXYProjection.y=25,this.owner.add(Tn.EArray([Tn.EComponent(new ge),Tn.EComponent(new we),Tn.EComponent(new ve),Tn.EComponent(this.sounds=new qt)]))},onStart:function(){B.prototype.onStart.call(this),PIXI.utils.isMobile.any&&this.addTouchUI(new xe),this.camera.lockY=!0,this.camera.offset.x.set__(-75),this.camera.setBounds(0,0,179769313486231e294,179769313486231e294),this.camera.smoothTimeX=.4,this.createVignette(190),this.$Ga(),this.$ha(),this.$Ha(),this.$ga(),this.$fa(),this.changeStateTo("$Oa",null)},$fa:function(){for(var t=0,e=this.$Ea;t<e.length;){var i=[e[t]];++t;var n=function(i,n){return function(t){if(null==t.$rD)return t;if(null==t.$Wc)return t;var e=t.$rD;return t.$Wc.autoUpdate=!1,e.position3d.x=n[0]._from,e.position3d.z=i[0],t}}([1.4],i)(this.factory.createGrass("grass_lane1",i[0]._size));this.worldElementContainer.add(Tn.EEntity(n));n=function(i,n){return function(t){if(null==t.$rD)return t;if(null==t.$Wc)return t;var e=t.$rD;return t.$Wc.autoUpdate=!1,e.position3d.x=n[0]._from,e.position3d.z=i[0],t}}([.4],i)(this.factory.createGrass("grass_lane2",i[0]._size));this.worldElementContainer.add(Tn.EEntity(n));i=function(i,n){return function(t){if(null==t.$rD)return t;if(null==t.$Wc)return t;var e=t.$rD;return t.$Wc.autoUpdate=!1,e.position3d.x=n[0]._from,e.position3d.z=i[0],t}}([-.6],i)(this.factory.createGrass("grass_lane3",i[0]._size));this.worldElementContainer.add(Tn.EEntity(i))}},addSlug:function(t){this.slugs.push(t);var e=t.$Aa;switch((e instanceof Ii?e:null).type){case"slug_boxing":this.boxingSlugs.push(t);break;case"slug_cyclops":this.cyclopsSlugs.push(t);break;case"slug_pew":this.pewSlugs.push(t)}},removeSlug:function(t){u.remove(this.slugs,t),u.remove(this.boxingSlugs,t),u.remove(this.cyclopsSlugs,t),u.remove(this.pewSlugs,t)},$ga:function(){this.owner._internal_getFromParents("$se").top.add(Tn.EEntity((new Sn).add(Tn.EArray([Tn.EComponent(S.animations.getMovieSprite("healthbar",S.animationLibraries.get_currentGame())),Tn.EComponent(new ki(this.playerEntity.$qD.value)),Tn.EComponent(new us(ms.Relative(0),ms.Relative(0),ms.Relative(20),ms.Relative(10)))]))))},$Ga:function(){var t=new mi,e=.5*(650-this.sceneWidth);this.containers.bottom.add(Tn.EEntity((new Sn).add(Tn.EArray([Tn.EComponent(new Vt),Tn.EComponent(this.sky=new ye)])))),this.containers.bottom.add(Tn.EEntity((new Sn).add(Tn.EArray([Tn.EComponent(new Vt),Tn.EComponent(new li(.88,1).setCameraOffset(e,0)),Tn.EComponent(new di(this.$ea,new gi(this.$ia("back_far")),t))])))),this.containers.bottom.add(Tn.EEntity((new Sn).add(Tn.EArray([Tn.EComponent(new Vt),Tn.EComponent(new li(1,1).setViewOffset(0,this.sceneHeight-57)),Tn.EEntity(this.tripGasContainer=(new Sn).add(Tn.EArray([Tn.EComponent(new Vi)])))])))),this.containers.bottom.add(Tn.EEntity((new Sn).add(Tn.EArray([Tn.EComponent(new Vt),Tn.EComponent(new li(1,1).setCameraOffset(350+e,0)),Tn.EComponent(new di(this.$ea,new gi(this.$ia("rocks")),t))])))),this.containers.mid.add(Tn.EEntity((new Sn).add(Tn.EArray([Tn.EComponent(new Vt),Tn.EComponent(new li(1,1).setCameraOffset(650+e,0)),Tn.EComponent(new di(this.$ea,new gi(this.$ia("lanes")),t))])))),this.containers.mid.add(Tn.EEntity((new Sn).add(Tn.EArray([Tn.EComponent(new Vt),Tn.EComponent(new li(1,1,"shadow_puddle").setViewOffset(0,this.sceneHeight-57)),Tn.EEntity(this.puddleContainer=(new Sn).add(Tn.EComponent(new Vt))),Tn.EEntity(this.bombTargetContainer=(new Sn).add(Tn.EComponent(new Vt))),Tn.EEntity(this.shadowContainer=(new Sn).add(Tn.EComponent(new Vt)))])))),this.containers.top.add(Tn.EEntity((new Sn).add(Tn.EArray([Tn.EComponent(new Vt),Tn.EComponent(this.worldElementLayer=new li(1,1,"worldElement").setViewOffset(0,this.sceneHeight-57)),Tn.EEntity(this.worldElementContainer=(new Sn).add(Tn.EArray([Tn.EComponent(new Vi)])))]))))},$ha:function(){var r=this;return this.playerEntity=function(t){if(null==((n=t.$Aa)instanceof le?n:null))return t;if(null==t.$rD)return t;if(null==t.$w)return t;var e=(n=t.$Aa)instanceof le?n:null,i=t.$rD,n=t.$w;return r.player=e,r.playerWorldElement=i,r.playerDisplay=n,i.position3d.x=-75,t}(this.factory.createPlayer()),this.worldElementContainer.add(Tn.EEntity(this.playerEntity)),this.playerEntity},$Ha:function(){this.spawner=new Jt(this.worldElementLayer.viewportRight,fi.Left),this.spawner.offset.x=this.spawnMargin*this.chunkUnitSize*.25,this.worldElementContainer.addEntity((new Sn).add(Tn.EComponent(this.spawner)))},$ia:function(t){for(var e=Rn.assets.getJson(S.files.json.manifest.fileNames[0]),i=0;i<e.length;){var n=e[i];if(++i,n.id==t)return n}return null},onUpdate:function(t){B.prototype.onUpdate.call(this,t),this.camera.target.x=this.playerWorldElement.position3d.x},$da:function(){B.prototype.$da.call(this)},__class__:Wt});var zt=function(){f.call(this)};zt.__name__=!0,zt.__interfaces__=[H],zt.__super__=f,zt.prototype=e(f.prototype,{create:function(t,e){return new Sn},createPlayer:function(){return(new Sn).add(Tn.EArray([Tn.EComponent(new Vt),Tn.EEntity((new Sn).add(Tn.EArray([Tn.EComponent(S.animations.getMovieSpritePlayer("player_idle",S.animationLibraries.get_currentGame()))]))),Tn.EComponent(new le),Tn.EComponent(new Ci),Tn.EComponent(new Ei),Tn.EComponent(new xi(100).setMaxHealth(100)),Tn.EComponent(new ji),Tn.EComponent(new Hi),Tn.EComponent(new Ee("shadow_large")),Tn.EComponent(new Ui),Tn.EComponent(vi.fromMovieSprite("player_colliders",S.animationLibraries.get_currentGame(),null,1,0))]))},createProjectile:function(t,e){return(new Sn).add(Tn.EArray([Tn.EComponent(new Vt),Tn.EEntity((new Sn).add(Tn.EArray([Tn.EComponent(S.animations.get(t,S.animationLibraries.get_currentGame()))]))),Tn.EComponent(new ji),Tn.EComponent(new Hi),Tn.EComponent(new Ee("shadow_medium")),Tn.EComponent(new Di(1,250)),Tn.EComponent(new wi),Tn.EComponent(new Ui),Tn.EComponent(vi.fromMovieSprite(t+"_colliders",S.animationLibraries.get_currentGame(),1,4,e).setFilterFlagsMethod(bs.Inclusive))]))},createEnemy:function(t,e){var i,n=new Sn,r=Tn.EComponent(new Vt),s=Tn.EEntity((new Sn).add(Tn.EArray([Tn.EComponent(S.animations.getMovieSpritePlayer(null,S.animationLibraries.get_currentGame()))]))),o=Tn.EComponent(new ji),a=Tn.EComponent(new Hi(!0)),h=Tn.EComponent(new Ee("shadow_large")),l=Tn.EComponent(new xi(100)),u=Tn.EComponent(new Ii(t,e));switch(e){case"slug_boxing":i=Tn.EComponent(new ie);break;case"slug_cyclops":i=Tn.EComponent(new ne);break;case"slug_pew":i=Tn.EComponent(new re);break;default:i=null}return n.add(Tn.EArray([r,s,o,a,h,l,u,i,Tn.EComponent(new Ei),Tn.EComponent(new wi),Tn.EComponent(new Ui),Tn.EComponent(vi.fromMovieSprite(t+"_colliders",S.animationLibraries.get_currentGame(),null,2,0))]))},createPickup:function(t,e){return null},createExplosion:function(t){return(new Sn).add(Tn.EArray([Tn.EComponent(S.animations.get(t,S.animationLibraries.get_currentGame())),Tn.EComponent(new kr),Tn.EComponent(new ji),Tn.EComponent(new Hi(Bs.native._random.next()<=.5))]))},createPuddle:function(){return(new Sn).add(Tn.EArray([Tn.EComponent(S.animations.getMovieSpritePlayer(null,S.animationLibraries.get_currentGame())),Tn.EComponent(new ji),Tn.EComponent(new Hi),Tn.EComponent(new he)]))},createPuddleParticle:function(){var t=new Sn,e=Tn.EComponent(new Vt),i=Tn.EEntity((new Sn).add(Tn.EComponent(S.animations.getMovieSpritePlayer(null,S.animationLibraries.get_currentGame()))).setTimeScale(Bs.native.range(.7,1.5))),n=new ji,r=.5<Bs.native._random.next()?fi.Left:fi.Right;return n.heading.set__(r),t.add(Tn.EArray([e,i,Tn.EComponent(n),Tn.EComponent(new Hi)]))},createGasCloud:function(t){return(new Sn).add(Tn.EArray([Tn.EComponent(new Vt),Tn.EComponent(new ji),Tn.EComponent(new Hi),Tn.EComponent(new ae(t))]))},createGasCloudParticle:function(){var t=new Sn,e=Tn.EComponent(new Vt),i=Tn.EEntity((new Sn).add(Tn.EComponent(S.animations.getMovieSpritePlayer(null,S.animationLibraries.get_currentGame()).setAlpha(.75))).setTimeScale(Bs.native.range(.7,1.5))),n=new ji,r=.5<Bs.native._random.next()?fi.Left:fi.Right;return n.heading.set__(r),t.add(Tn.EArray([e,i,Tn.EComponent(n),Tn.EComponent(new Hi)]))},createBottle:function(t){return(new Sn).add(Tn.EArray([Tn.EComponent(S.animations.get("bottle",S.animationLibraries.get_currentGame())),Tn.EComponent(new ji),Tn.EComponent(new Hi),Tn.EComponent(new Ee("shadow_medium")),Tn.EComponent(new oe(t))]))},createBomb:function(){return(new Sn).add(Tn.EArray([Tn.EComponent(S.animations.get("nuke",S.animationLibraries.get_currentGame())),Tn.EComponent(new ji),Tn.EComponent(new Hi),Tn.EComponent(new Ee("shadow_medium")),Tn.EComponent(new se)]))},createBombTarget:function(){return(new Sn).add(Tn.EArray([Tn.EComponent(S.animations.get("target",S.animationLibraries.get_currentGame())),Tn.EComponent(new ji),Tn.EComponent(new Hi(!1,!1))]))},createGrass:function(t,e){return(new Sn).add(Tn.EArray([Tn.EComponent(new Vt),Tn.EComponent(new ji),Tn.EComponent(new Hi),Tn.EComponent(new be(t,e))]))},get_name:function(){return"$AA"},__class__:zt});var qt=function(){Y.call(this)};qt.__name__=!0,qt.__super__=Y,qt.prototype=e(Y.prototype,{playProjectile:function(){Rn.get_soundManager().play(Hs.randomElement(qt.projectileSounds,Bs.native),1)},playExplosion:function(t){switch(t){case 0:var e=S.sounds.game2.EXPLOSION;Rn.get_soundManager().play(e,1);break;case 1:e=S.sounds.game2.EXPLOSION_ACID,Rn.get_soundManager().play(e,1)}},playerMove:function(t){t=t?S.sounds.game2.PLAYER_MOVES_UP:S.sounds.game2.PLAYER_MOVES_DOWN;Rn.get_soundManager().play(t,1)},playerDie:function(){var t=S.sounds.game2.PLAYER_DIES;Rn.get_soundManager().play(t,1)},slugShoot:function(){var t=S.sounds.game2.SLUG_PEW_SHOOT;Rn.get_soundManager().play(t,1)},slugPunchLoop:function(){var t=S.sounds.game2.SLUG_PUNCHES_LOOP;return null!=Rn.get_soundManager().sounds.h.__keys__[t.__id__]?Rn.get_soundManager().loop(t,1):null},slugThrow:function(){var t=S.sounds.game2.FALLING_BOMB_LOOP;Rn.get_soundManager().play(t,1)},bombFall:function(){var t=S.sounds.game2.FALLING_BOMB_LOOP;Rn.get_soundManager().play(t,1)},__class__:qt});var Jt=function(t,e){this.$Vb=0,this.$vb=[-1,0,1],this.$Ub=new js(1),this.offset={x:0,y:0},this.hasStarted=!1,f.call(this),this.$tb=t,this.$Tb=e};function Kt(){nt.call(this,"punch",!0)}function Zt(){this.$DA=ls.empty(),this.$ob=!1,this.$Nb=0,nt.call(this,"shoot")}function Qt(){nt.call(this,"throw")}function te(t){this.$a=new An,f.call(this),this.$kb=t}Jt.__name__=!0,Jt.__super__=f,Jt.prototype=e(f.prototype,{setWave:function(t){this.$ub=t},setSpawnInterval:function(t){this.$Ub.reset(t)},start:function(){this.hasStarted=!0},stop:function(){this.hasStarted=!1},insertInWave:function(t,e){this.$ub.length<=e?this.$ub.push([t]):this.$ub.splice(e,0,[t])},$wb:function(){for(var t=this.$ub.shift(),e=0;e<t.length;){var i=t[e],n=e++,n=1<t.length?n-1:null;"-"!=i&&("R"==i?this.$Xb(n):this.$xb(this.$Wb(i),n))}},$Wb:function(t){switch(t){case"B":return"slug_boxing";case"C":return 0==this.$Ma.cyclopsSlugs.length?"slug_cyclops":0==this.$Ma.pewSlugs.length?"slug_pew":"slug_boxing";case"P":return this.$Ma.pewSlugs.length<2?"slug_pew":0==this.$Ma.cyclopsSlugs.length?"slug_cyclops":"slug_boxing";default:throw wr.thrown("Wave item with identifier "+t+" is not a slug")}},$xb:function(t,e){var i=this.$vb.slice();if("slug_boxing"==t)null==e&&u.remove(i,this.$Vb);else{for(var n=0,r=this.$Ma.cyclopsSlugs;n<r.length;)u.remove(i,Math.round(r[n++].$rD.position3d.z));for(n=0,r=this.$Ma.pewSlugs;n<r.length;)u.remove(i,Math.round(r[n++].$rD.position3d.z))}var s=0<i.length;null!=e?s&&-1==i.indexOf(e)&&(e=Bs.native.fromArray(i)):e=s?Bs.native.fromArray(i):Bs.native.fromArray(this.$vb),this.$Vb=e;var o=this.$tb._value+this.offset.x,a=e+.01;null!=(s=this.$Ma.factory.createEnemy(t,t)).$rD&&((t=(e=s.$rD).position3d).x=o,t.y=0,t.z=null==a?0:a,e.heading.set__(this.$Tb)),this.$Ma.addSlug(s),this.$Ma.worldElementContainer.addEntity(s,!1)},$Xb:function(t){null==t&&(t=Bs.native.fromArray([-1,0,1]));var e,i=this.$Ma.factory.createBomb(),i=(null==i.$rD||((e=i.$rD).position3d.x=this.$Ma.player.$dA.position3d.x,e.position3d.y=500,e.position3d.z=t),i);this.$Ma.worldElementContainer.addEntity(i)},onUpdate:function(t){var e;f.prototype.onUpdate.call(this,t),this.hasStarted&&((e=this.$Ub).isEnabled&&e.time<=0||!this.$Ub.update(t)||(0<this.$ub.length&&this.$wb(),this.$Ub.reset()))},get_name:function(){return"$Rb"},onStart:function(){null==this.$Ma&&(this.$Ma=this.owner._internal_getFromParents("$Aa",Wt)),null==this.$sb&&(this.$sb=this.owner._internal_getFromParents("$hE")),f.prototype.onStart.call(this)},__class__:Jt}),Kt.__name__=!0,Kt.__super__=nt,Kt.prototype=e(nt.prototype,{onActivate:function(){nt.prototype.onActivate.call(this);var t=this.$Ma.sounds.slugPunchLoop();null!=t&&this.$La.add(t),this.$La.add(this.$qb.currentLabel.watch(Ys(this,this.$Qb)))},$Qb:function(t,e){this.$zb(),this.$Yb.shakeItBaby(5,.05,0,!1)},$zb:function(){this.$Ma.playerEntity.$JD.hit(5)},get_name:function(){return"$yb"},onStart:function(){null==this.$dA&&(this.$dA=this.owner.$rD),null==this.$qb&&(this.$qb=this.owner.$Zb),null==this.$Ma&&(this.$Ma=this.owner._internal_getFromParents("$Aa",Wt)),null==this.$Yb&&(this.$Yb=this.owner._internal_getFromParents("$pe")),nt.prototype.onStart.call(this)},onAdded:function(){null==this.$dA&&(this.$dA=this.owner.$rD),null==this.$qb&&(this.$qb=this.owner.$Zb),nt.prototype.onAdded.call(this)},__class__:Kt}),Zt.__name__=!0,Zt.__super__=nt,Zt.prototype=e(nt.prototype,{onActivate:function(){nt.prototype.onActivate.call(this);var t=this.$dA.position3d;this.$DA={x:t.x,y:t.y,z:t.z},this.$DA.x-=30,this.$DA.y=30,this.$ob=!0,this.$Nb=3,this.$Ob()},$Ob:function(){var s=this;this.$Nb--;var t=function(t){if(null==t.$rD)return t;if(null==t.$iD)return t;var e=t.$rD,i=t.$iD,n=e.position3d,r=s.$DA;return n.x=r.x,n.y=r.y,n.z=r.z,e.position3d.z+=.01,e.velocity3d.x=-150,i.hitPoints=5,i.maxRange=500,t}(this.$Ma.factory.createProjectile("projectile_pew",1));t._internal_getFromChildren("$w",lr).owner.add(Tn.EComponent(new Fr)),this.$Ma.worldElementContainer.add(Tn.EEntity(t)),this.$Ma.sounds.slugShoot()},$qA:function(){0<this.$Nb?(this.$pA(),this.$Ob()):this.$ob=!1},keepInState:function(){return this.$ob},getNextStateName:function(){return"$qC"},get_name:function(){return"$nb"},onStart:function(){null==this.$dA&&(this.$dA=this.owner.$rD),null==this.$Ma&&(this.$Ma=this.owner._internal_getFromParents("$Aa",Wt)),nt.prototype.onStart.call(this)},onAdded:function(){null==this.$dA&&(this.$dA=this.owner.$rD),nt.prototype.onAdded.call(this)},__class__:Zt}),Qt.__name__=!0,Qt.__super__=nt,Qt.prototype=e(nt.prototype,{onStart:function(){null==this.$dA&&(this.$dA=this.owner.$rD),null==this.$qb&&(this.$qb=this.owner.$Zb),null==this.$Ma&&(this.$Ma=this.owner._internal_getFromParents("$Aa",Wt)),nt.prototype.onStart.call(this)},onActivate:function(){nt.prototype.onActivate.call(this),this.$La.add(this.$qb.currentLabel.watch(Ys(this,this.$Qb)))},$Qb:function(t,e){"throw"==t&&this.$rb()},$rb:function(){var t,e=(n=this.$dA.position3d).x,i=n.z;n.y,t=e-20;e={x:(n=this.$Ma.playerWorldElement.position3d).x,y:n.y,z:n.z};e.y=0,e.z=Math.round(e.z);var n,e=this.$Ma.factory.createBottle(e);(n=e.$rD.position3d).x=t,n.y=90,n.z=i,this.$Ma.worldElementContainer.add(Tn.EEntity(e)),this.$Ma.sounds.slugThrow()},getNextStateName:function(){return"$qC"},get_name:function(){return"$Pb"},onAdded:function(){null==this.$dA&&(this.$dA=this.owner.$rD),null==this.$qb&&(this.$qb=this.owner.$Zb),nt.prototype.onAdded.call(this)},__class__:Qt});var ee=function(t){switch(t){case"slug_boxing":return"B";case"slug_cyclops":return"C";case"slug_pew":return"P"}};te.__name__=!0,te.__super__=f,te.prototype=e(f.prototype,{$Jb:function(){return this.$Ma.player.isAlive._value},onAdded:function(){null==this.$jb&&(this.$jb=this.owner.$Aa),null==this.$HA&&(this.$HA=this.owner.$qD),null==this.$dA&&(this.$dA=this.owner.$rD),null==this.$ya&&(this.$ya=this.owner.$w),f.prototype.onAdded.call(this),this.owner.add(Tn.EArray([Tn.EComponent(new Pi),Tn.EComponent(new wt)])),this.$dA.heading.set__(fi.Left),this.$HA.value.set__(this.$kb.health),this.$jb.fallbackStateName="$Zc"},onStart:function(){null==this.$jb&&(this.$jb=this.owner.$Aa),null==this.$HA&&(this.$HA=this.owner.$qD),null==this.$dA&&(this.$dA=this.owner.$rD),null==this.$ya&&(this.$ya=this.owner.$w),null==this.$Ma&&(this.$Ma=this.owner._internal_getFromParents("$Aa",Wt)),f.prototype.onStart.call(this),this.$db=this.$Ma.playerEntity.$rD,this.$a.add(this.owner.$qD.value.watch(Ys(this,this.$lb)))},$lb:function(t,e){var i,n;0==t&&(null==(n=this.$Ma.factory.createExplosion("big_explosion")).$rD||(i=n.$rD.position3d,t=this.$dA.position3d,i.x=t.x,i.y=t.y,i.z=t.z),n=n,this.$Ma.worldElementContainer.add(Tn.EEntity(n)),this.owner._internal_getFromParents("$pe").shakeItBaby(20,.3,1),this.$Ma.sounds.playExplosion(0),this.$Ma.removeSlug(this.owner))},onUpdate:function(t){var e;f.prototype.onUpdate.call(this,t),this.$Jb()?("$Zc"==(null!=(e=this.$jb).currentState?e.currentState.get_name():null)&&(this.$dA.position3d.x-=this.$kb.speed*t),this.$Kb=this.$dA.position3d.x-this.$Ma.playerWorldElement.position3d.x,this.$Kb<-120&&(this.owner.add(Tn.EComponent(new Ir)),this.$Ma.spawner.insertInWave(ee(Mr.__cast(this.$jb.type,String)),3),this.$Ma.removeSlug(this.owner))):"$qC"!=(null!=(e=this.$jb).currentState?e.currentState.get_name():null)&&this.$jb.changeStateTo("$qC",null)},get_name:function(){return"$Ib"},dispose:function(){null!=this.$a&&(this.$a.dispose(),this.$a=null),f.prototype.dispose.call(this)},__class__:te});var ie=function(){te.call(this,{health:4,speed:125})};ie.__name__=!0,ie.__super__=te,ie.prototype=e(te.prototype,{onAdded:function(){te.prototype.onAdded.call(this),this.owner.add(Tn.EArray([Tn.EComponent(new Kt),Tn.EComponent(new Nr)]))},onUpdate:function(t){var e;te.prototype.onUpdate.call(this,t),this.$Jb()&&(this.$Kb<50&&20<this.$Kb&&Math.abs(this.$dA.position3d.z-this.$Ma.playerWorldElement.position3d.z)<.1?"$Zc"==(null!=(e=this.$jb).currentState?e.currentState.get_name():null)&&this.$jb.changeStateTo("$yb",null):"$Zc"!=(null!=(e=this.$jb).currentState?e.currentState.get_name():null)&&this.$jb.changeStateTo("$Zc",null))},__class__:ie});var ne=function(){this.$pb=new js(5),te.call(this,{health:3,speed:100})};ne.__name__=!0,ne.__super__=te,ne.prototype=e(te.prototype,{onAdded:function(){te.prototype.onAdded.call(this),this.owner.add(Tn.EArray([Tn.EComponent(new Qt),Tn.EComponent(new Nr)]))},throwBottle:function(){this.$jb.changeStateTo("$Pb",null)},onUpdate:function(t){var e;te.prototype.onUpdate.call(this,t),this.$Jb()&&("$Zc"==(null!=(e=this.$jb).currentState?e.currentState.get_name():null)?this.$Kb<290&&this.throwBottle():"$qC"==(null!=(e=this.$jb).currentState?e.currentState.get_name():null)&&this.$pb.update(t)&&(this.throwBottle(),this.$pb.reset()))},__class__:ne});var re=function(){this.$Lb=new js(2),te.call(this,{health:3,speed:100})};re.__name__=!0,re.__super__=te,re.prototype=e(te.prototype,{onAdded:function(){te.prototype.onAdded.call(this),this.owner.add(Tn.EArray([Tn.EComponent(new Zt)]))},shoot:function(){this.$jb.changeStateTo("$nb",null)},onUpdate:function(t){var e;te.prototype.onUpdate.call(this,t),this.$Jb()&&("$Zc"==(null!=(e=this.$jb).currentState?e.currentState.get_name():null)?this.$Kb<250&&this.shoot():"$qC"==(null!=(e=this.$jb).currentState?e.currentState.get_name():null)&&this.$Lb.update(t)&&(this.shoot(),this.$Lb.reset()))},__class__:re});var se=function(){this.$GA=!1,f.call(this)};se.__name__=!0,se.__super__=f,se.prototype=e(f.prototype,{onStart:function(){null==this.$dA&&(this.$dA=this.owner.$rD),null==this.$Ma&&(this.$Ma=this.owner._internal_getFromParents("$Aa",Wt)),f.prototype.onStart.call(this);var t,e,i,n=this.$Ma.factory.createBombTarget(),n=(null==n.$rD||(e=(t=n.$rD).position3d,i=this.$dA.position3d,e.x=i.x,e.y=i.y,e.z=i.z,t.position3d.y=0),n);this.$gA=n,this.$Ma.bombTargetContainer.add(Tn.EEntity(this.$gA)),this.$Ma.sounds.bombFall()},$fA:function(){this.$gA.addComponent(new Ir),this.owner.addComponent(new Ir);var t,e,i=this.$Ma.factory.createGasCloud(),i=(null==i.$rD||(t=i.$rD.position3d,e=this.$dA.position3d,t.x=e.x,t.y=e.y,t.z=e.z),i);this.$Ma.worldElementContainer.add(Tn.EEntity(i)),this.owner._internal_getFromParents("$pe").shakeItBaby(10,.1,0,!1)},onUpdate:function(t){f.prototype.onUpdate.call(this,t),this.$GA||(this.$dA.position3d.y=Math.max(0,this.$dA.position3d.y-125*t),0==this.$dA.position3d.y&&(this.$GA=!0,this.$fA()))},get_name:function(){return"$FA"},onAdded:function(){null==this.$dA&&(this.$dA=this.owner.$rD),f.prototype.onAdded.call(this)},__class__:se});var oe=function(t){this.$EA=0,this._progress=0,f.call(this),this.$eA=t};oe.__name__=!0,oe.__super__=f,oe.prototype=e(f.prototype,{onStart:function(){null==this.$dA&&(this.$dA=this.owner.$rD),null==this.$Ma&&(this.$Ma=this.owner._internal_getFromParents("$Aa",Wt)),f.prototype.onStart.call(this);var t=this.$dA.position3d;this.$DA={x:t.x,y:t.y,z:t.z}},$fA:function(){this.owner.addComponent(new Ir);var t,e,i=this.$Ma.factory.createPuddle(),i=(null==i.$rD||(t=i.$rD.position3d,e=this.$dA.position3d,t.x=e.x,t.y=e.y,t.z=e.z),i);this.$Ma.puddleContainer.add(Tn.EEntity(i)),this.owner._internal_getFromParents("$pe").shakeItBaby(10,.1,0,!1)},onUpdate:function(t){var e;f.prototype.onUpdate.call(this,t),1!=this._progress&&(this.$EA+=t,e=this.$EA/1.75,this._progress=e<0?0:1<e?1:e,t=this.$DA.x,e=this._progress,this.$dA.position3d.x=t+(this.$eA.x-t)*(e<0?0:1<e?1:e),t=this.$DA.y,e=this._progress,this.$dA.position3d.y=t+(this.$eA.y-t)*(e<0?0:1<e?1:e),t=this.$DA.z,e=this._progress,this.$dA.position3d.z=t+(this.$eA.z-t)*(e<0?0:1<e?1:e),this._progress<.5?this.$dA.position3d.y+=175*Fn.sineOut(2*this._progress):this.$dA.position3d.y+=175*Fn.sineOut(1-2*(this._progress-.5)),1==this._progress&&this.$fA())},get_name:function(){return"$CA"},onAdded:function(){null==this.$dA&&(this.$dA=this.owner.$rD),f.prototype.onAdded.call(this)},__class__:oe});var ae=function(t){this.$GA=!1,this.$hb=[],this.$Gb=5,this.$gb=null,this.$Fb=new rt(.05,.1),f.call(this),this.$Eb=null!=t?t:1};ae.__name__=!0,ae.__super__=f,ae.prototype=e(f.prototype,{onStart:function(){null==this.$dA&&(this.$dA=this.owner.$rD),null==this.$cb&&(this.$cb=this.owner._internal_getFromParents("$gE")),null==this.$Ma&&(this.$Ma=this.owner._internal_getFromParents("$Aa",Wt)),f.prototype.onStart.call(this),this.$Ma.sounds.playExplosion(1),this.$db=this.$Ma.playerEntity.$rD,this.$Db=new rt(this.$dA.position3d.x-40,this.$dA.position3d.x+40),this.$eb=new rt(this.$dA.position3d.z-.5,this.$dA.position3d.z+.5),this.$gb=0,this.$Hb(this.$dA.position3d.x,this.$eb._from),this.$Hb(this.$dA.position3d.x,this.$eb._to)},$Hb:function(t,e){var i=ls.empty();i.x=null!=t?t:this.$Db.getValueFromFactor(Math.random()),i.y=this.$dA.position3d.y,i.z=null!=e?e:this.$eb.getValueFromFactor(Math.random());var t=this.$Ma.factory.createGasCloudParticle(),t=(null==t.$rD||((e=t.$rD.position3d).x=i.x,e.y=i.y,e.z=i.z),t),n=t._internal_getFromChildren("$w",Ur);n.setMovie("gas_cloud_in").play().completed(function(){n.setMovie("gas_cloud_loop").play(!0)}),this.owner.parent.add(Tn.EEntity(t)),this.$hb.push(t)},onUpdate:function(t){if(f.prototype.onUpdate.call(this,t),!this.$GA)if(this.$Eb<=0){this.$GA=!0,this.owner.add(Tn.EComponent(new Ir));for(var e=0,i=this.$hb;e<i.length;){var n=[i[e++]],r=this.owner.parent,s=.5*Math.random();null==s&&(s=0),r.addEntity((new Sn).addComponent(new Ir(s,function(e){return function(){var t;e[0]._internal_getFromChildren("$w",Ur).setMovie("gas_cloud_out").play().completed((t=e,function(){t[0].add(Tn.EComponent(new Ir))}))}}(n))),!0)}this.$hb=null}else this.$Eb-=t,this.$hb.length<this.$Gb&&(null!=this.$gb&&(this.$gb-=t)<=0)&&(this.$Hb(),this.$gb=this.$Fb.getValueFromFactor(Math.random())),Math.abs(this.$db.position3d.z-this.$dA.position3d.z)<.5&&this.$Ma.playerEntity.$JD.hit(20*t)},get_name:function(){return"$ib"},onAdded:function(){null==this.$dA&&(this.$dA=this.owner.$rD),f.prototype.onAdded.call(this)},__class__:ae});var he=function(){this.$GA=!1,this.$hb=[],this.$Gb=10,this.$gb=null,this.$Fb=new rt(.05,.1),this.$Eb=2,f.call(this)};he.__name__=!0,he.__super__=f,he.prototype=e(f.prototype,{onStart:function(){var t=this;null==this.$dA&&(this.$dA=this.owner.$rD),null==this.$Cb&&(this.$Cb=this.owner.$w),null==this.$cb&&(this.$cb=this.owner._internal_getFromParents("$gE")),null==this.$Ma&&(this.$Ma=this.owner._internal_getFromParents("$Aa",Wt)),f.prototype.onStart.call(this),this.$Ma.sounds.playExplosion(1),this.$db=this.$Ma.playerWorldElement,this.owner.add(Tn.EEntity((new Sn).add(Tn.EArray([Tn.EComponent(S.animations.getMovieSprite("puddle_splash",S.animationLibraries.get_currentGame())),Tn.EComponent(new kr)])))),this.$Cb.setMovie("puddle_in").play().completed(function(){t.$Cb.setMovie("puddle_loop").play(!0)}),this.$Db=new rt(this.$dA.position3d.x-30,this.$dA.position3d.x+30),this.$eb=new rt(this.$dA.position3d.z-.4,this.$dA.position3d.z+.4),this.$gb=0,this.$Hb(this.$dA.position3d.x,this.$eb._from),this.$Hb(this.$dA.position3d.x,this.$eb._to)},$Hb:function(t,e){var i=ls.empty();i.x=null!=t?t:this.$Db.getValueFromFactor(Math.random()),i.y=0,i.z=null!=e?e:this.$eb.getValueFromFactor(Math.random());var t=this.$Ma.factory.createPuddleParticle(),t=(null==t.$rD||((e=t.$rD.position3d).x=i.x,e.y=i.y,e.z=i.z),t);t._internal_getFromChildren("$w",Ur).setMovie(this.$hb.length%2==0?"puddle_bubble":"puddle_smoke").play(!0),this.$Ma.worldElementContainer.add(Tn.EEntity(t)),this.$hb.push(t)},onUpdate:function(t){var e=this;if(f.prototype.onUpdate.call(this,t),!this.$GA)if(this.$Eb<=0){for(this.$GA=!0;0<this.$hb.length;)this.$hb.shift().add(Tn.EComponent(new Ir));this.$Cb.setMovie("puddle_out").play().completed(function(){e.owner.add(Tn.EComponent(new Ir))})}else this.$Eb-=t,this.$hb.length<this.$Gb&&(null!=this.$gb&&(this.$gb-=t)<=0)&&(this.$Hb(),this.$gb=this.$Fb.getValueFromFactor(Math.random())),Math.abs(this.$db.position3d.z-this.$dA.position3d.z)<.5&&this.$Ma.playerEntity.$JD.hit(20*t)},get_name:function(){return"$Bb"},onAdded:function(){null==this.$dA&&(this.$dA=this.owner.$rD),null==this.$Cb&&(this.$Cb=this.owner.$w),f.prototype.onAdded.call(this)},__class__:he});var le=function(){this.$iA=[],this.hasWon=new Mn(!1),this.isInteractive=new Mn(!1),this.isAlive=new Mn(!0),this.isEnabled=new Mn(!0),this.$a=new An,N.call(this)};le.__name__=!0,le.__super__=N,le.prototype=e(N.prototype,{onAdded:function(){null==this.$dA&&(this.$dA=this.owner.$rD),null==this.$hA&&(this.$hA=this.owner.$Hc),null==this.$ya&&(this.$ya=this.owner.$w),null==this.$HA&&(this.$HA=this.owner.$qD),N.prototype.onAdded.call(this),this.owner.add(Tn.EArray([Tn.EComponent(new Oi),Tn.EComponent(new _e),Tn.EComponent(new ue),Tn.EComponent(new de),Tn.EComponent(new pe),Tn.EComponent(new ce),Tn.EComponent(new me),Tn.EComponent(new fe)]))},onStart:function(){var i=this;null==this.$dA&&(this.$dA=this.owner.$rD),null==this.$hA&&(this.$hA=this.owner.$Hc),null==this.$ya&&(this.$ya=this.owner.$w),null==this.$HA&&(this.$HA=this.owner.$qD),null==this.$Ma&&(this.$Ma=this.owner._internal_getFromParents("$Aa",Wt)),N.prototype.onStart.call(this),this.$a.add(this.$HA.value.watch(function(t,e){0<t&&t<e&&("$Ab"!=(null!=i.currentState?i.currentState.get_name():null)&&"$xA"!=(null!=i.currentState?i.currentState.get_name():null)||i.hurt())})),this.changeStateTo("$Ab",null)},shoot:function(){this.changeStateTo("$xA",null)},hurt:function(){this.changeStateTo("$XA",null)},die:function(){this.changeStateTo("$ZA",null)},walkToNextWavePosition:function(){this.changeStateTo("$yA",null)},$jA:function(t){this.isEnabled._value&&this.$iA.length<2&&this.$iA.push(t)},sayQuote:function(t){var e=this.owner,i=new Sn,n=Tn.EComponent(S.animations.get(t,S.animationLibraries.get_currentGame())),t=new qr;t.$A_().animate(0,1,.25,null,null,0),t.$Y().x.animate(10,15,.25,Fn.quintOut,null,0),t.$Y().y.animate(-35,-40,.25,Fn.quintOut,null,0),t.$z().y.animate(0,1,.25,Fn.backOut,null,0),e.add(Tn.EEntity(this.$IA=i.add(Tn.EArray([n,Tn.EComponent(t)]))))},clearQuote:function(){null!=this.$IA&&null==this.$IA.$re&&(this.$IA.add(Tn.EComponent(new Ir)),this.$IA=null)},$JA:function(){this.isEnabled._value&&0<this.$iA.length&&this.$kA(this.$iA.shift())},$kA:function(t){t==fi.Up&&this.$dA.position3d.z<-.9||t==fi.Down&&.9<this.$dA.position3d.z||(t=this.$dA.position3d.z+t.axisDirection,this.changeStateTo("$ab",Math.round(t<-1?-1:1<t?1:t)))},onUpdate:function(t){N.prototype.onUpdate.call(this,t),"$QA"!=(null!=this.currentState?this.currentState.get_name():null)&&(this.isAlive.set__(0<this.$HA.value._value),this.isAlive._value?"$bb"==(null!=this.currentState?this.currentState.get_name():null)?(this.$hA.buttonUp.wasPressed._value&&(this.$dA.position3d.z<-.5?this.changeStateTo("$QA",null):(this.$jA(fi.Up),this.$JA())),this.$hA.buttonDown.wasPressed._value&&(this.$jA(fi.Down),this.$JA())):this.isInteractive._value&&(this.$hA.buttonUp.wasPressed._value?this.$jA(fi.Up):this.$hA.buttonDown.wasPressed._value&&this.$jA(fi.Down),"$Ab"!=(null!=this.currentState?this.currentState.get_name():null)&&"$XA"!=(null!=this.currentState?this.currentState.get_name():null)&&"$xA"!=(null!=this.currentState?this.currentState.get_name():null)||this.$hA.buttonAction1.wasPressed._value&&(this.shoot(),this.$iA=[]),"$Ab"!=(null!=this.currentState?this.currentState.get_name():null)&&"$XA"!=(null!=this.currentState?this.currentState.get_name():null)&&"$xA"!=(null!=this.currentState?this.currentState.get_name():null)||this.$JA()):"$ZA"!=(null!=this.currentState?this.currentState.get_name():null)&&this.die())},dispose:function(){null!=this.$a&&(this.$a.dispose(),this.$a=null),N.prototype.dispose.call(this)},__class__:le});var ue=function(){this.$SA=!1,this.$RA=new kn(0),it.call(this,"player_jump")};ue.__name__=!0,ue.__interfaces__=[kt],ue.__super__=it,ue.prototype=e(it.prototype,{onActivate:function(){it.prototype.onActivate.call(this),this.$SA=!0,this.$Ma.sounds.playerMove(this.data<this.$dA.position3d.z),this.$RA.animate(this.$dA.position3d.z,this.data,.05,Fn.linear,Ys(this,this.$tA))},$tA:function(){this.$dA.position3d.z=this.data,this.$SA=!1},keepInState:function(){return this.$SA},getNextStateName:function(){return this.$rA.hasWon._value?"$bb":"$Ab"},onUpdateState:function(t){it.prototype.onUpdateState.call(this,t),this.$RA.update(t),this.$dA.position3d.z=this.$RA._value},get_name:function(){return"$ab"},onStart:function(){null==this.$rA&&(this.$rA=this.owner.$Aa),null==this.$dA&&(this.$dA=this.owner.$rD),null==this.$Ma&&(this.$Ma=this.owner._internal_getFromParents("$Aa",Wt)),it.prototype.onStart.call(this)},onAdded:function(){null==this.$rA&&(this.$rA=this.owner.$Aa),null==this.$dA&&(this.$dA=this.owner.$rD),it.prototype.onAdded.call(this)},__class__:ue});var ce=function(){it.call(this,"player_die")};ce.__name__=!0,ce.__super__=it,ce.prototype=e(it.prototype,{onActivate:function(){it.prototype.onActivate.call(this),this.$Ma.sounds.playerDie(),this.$HA.value.set__(0),this.$_b.collisionsEnabled=!1;var t,e,i,n=(new Sn).add(Tn.EArray([Tn.EComponent(S.animations.getMovieSprite("player_die_explosion",S.animationLibraries.get_currentGame())),Tn.EComponent(new ji),Tn.EComponent(new Hi),Tn.EComponent(new kr)])),n=(null==n.$rD||(e=(t=n.$rD).position3d,i=this.$Ma.playerWorldElement.position3d,e.x=i.x,e.y=i.y,e.z=i.z,t.position3d.z+=.01),n);this.$Ma.worldElementContainer.add(Tn.EEntity(n))},get_name:function(){return"$ZA"},onStart:function(){null==this.$HA&&(this.$HA=this.owner.$qD),null==this.$_b&&(this.$_b=this.owner.$RE),null==this.$dA&&(this.$dA=this.owner.$rD),null==this.$Ma&&(this.$Ma=this.owner._internal_getFromParents("$Aa",Wt)),it.prototype.onStart.call(this)},onAdded:function(){null==this.$HA&&(this.$HA=this.owner.$qD),null==this.$_b&&(this.$_b=this.owner.$RE),null==this.$dA&&(this.$dA=this.owner.$rD),it.prototype.onAdded.call(this)},__class__:ce});var pe=function(){it.call(this,"player_hurt")};pe.__name__=!0,pe.__super__=it,pe.prototype=e(it.prototype,{onActivate:function(){it.prototype.onActivate.call(this);var t,e,i,n,r=this.owner,s=[16057380],o=new An;null!=r.$w&&(t=r.$w,e=new or(s[0],1),t.container.filters=[e],i=0,o.add(Vs.create(r.parent,.05,1,function(){var t=i+=.5;e.update(s[(0|t)%s.length],1==e.multiplier?0:1)})),n=r.parent,r=(new Sn).addComponent(new Ir(.1,function(){t.container.filters=null})),n.addEntity(r,!0),o.add(r))},getNextStateName:function(){return"$Ab"},get_name:function(){return"$XA"},__class__:pe});var de=function(){this.$zA=0,this.$YA=[75,1375,2675,2805],it.call(this,"player_move",!0)};de.__name__=!0,de.__super__=it,de.prototype=e(it.prototype,{onActivate:function(){it.prototype.onActivate.call(this),this.$zA=37.5,0==this.$YA.length?this.$la=!1:this.$rA.isInteractive.set__(!1)},onDeactivate:function(){this.$rA.isInteractive.set__(!0),it.prototype.onDeactivate.call(this)},onUpdateState:function(t){var e;it.prototype.onUpdateState.call(this,t),this.$zA=Math.min(this.$zA+150*t,300),this.$dA.position3d.x+=this.$zA*t,1<this.$YA.length&&this.$HA.modifyHealth(5*t),this.$dA.position3d.x>=this.$YA[0]&&(e=this.$dA,t=this.$YA.shift(),e.position3d.x=t,this.$la=!1)},getNextStateName:function(){return"$Ab"},get_name:function(){return"$yA"},onStart:function(){null==this.$rA&&(this.$rA=this.owner.$Aa),null==this.$dA&&(this.$dA=this.owner.$rD),null==this.$HA&&(this.$HA=this.owner.$qD),it.prototype.onStart.call(this)},onAdded:function(){null==this.$rA&&(this.$rA=this.owner.$Aa),null==this.$dA&&(this.$dA=this.owner.$rD),null==this.$HA&&(this.$HA=this.owner.$qD),it.prototype.onAdded.call(this)},__class__:de});var _e=function(){it.call(this,"player_shoot"),this.canReactivate=!0};_e.__name__=!0,_e.__super__=it,_e.prototype=e(it.prototype,{onActivate:function(){it.prototype.onActivate.call(this),this.fireProjectile()},fireProjectile:function(){var t,e,i,n=this.$Ma.factory.createProjectile("player_projectile",2);null!=n.$rD&&(t=(e=n.$rD).position3d,i=this.$dA.position3d,t.x=i.x,t.y=i.y,t.z=i.z,e.position3d.x+=50*this.$dA.heading._value.axisDirection,e.position3d.y+=27,t=e.velocity3d,e=400*(i=e.heading._value).x,i=400*i.y,t.x=e,t.y=i),this.owner.parent.add(Tn.EEntity(n)),this.$Ma.sounds.playProjectile()},getNextStateName:function(){return"$Ab"},get_name:function(){return"$xA"},onStart:function(){null==this.$rA&&(this.$rA=this.owner.$Aa),null==this.$dA&&(this.$dA=this.owner.$rD),null==this.$Ma&&(this.$Ma=this.owner._internal_getFromParents("$Aa",Wt)),it.prototype.onStart.call(this)},onAdded:function(){null==this.$rA&&(this.$rA=this.owner.$Aa),null==this.$dA&&(this.$dA=this.owner.$rD),it.prototype.onAdded.call(this)},__class__:_e});var fe=function(){this.$sA=new kn(0),this.$RA=new kn(0),it.call(this,"player_win")};fe.__name__=!0,fe.__super__=it,fe.prototype=e(it.prototype,{onActivate:function(){it.prototype.onActivate.call(this),this.$rA.clearQuote(),this.$Ma.tripGasContainer.add(Tn.EEntity(this.owner));var t=this.owner;null!=t.$TA&&t.$TA.dispose(),this.$RA.animate(this.$dA.position3d.z,-2,.05,Fn.linear,Ys(this,this.$tA)),this.$sA.animate(this.$dA.position3d.y,-150,.5,Fn.quadIn)},$tA:function(){},onUpdateState:function(t){it.prototype.onUpdateState.call(this,t),this.$sA.update(t),this.$RA.update(t),this.$dA.position3d.y=this.$sA._value,this.$dA.position3d.z=this.$RA._value},get_name:function(){return"$QA"},onStart:function(){null==this.$rA&&(this.$rA=this.owner.$Aa),null==this.$dA&&(this.$dA=this.owner.$rD),null==this.$Ma&&(this.$Ma=this.owner._internal_getFromParents("$Aa",Wt)),it.prototype.onStart.call(this)},onAdded:function(){null==this.$rA&&(this.$rA=this.owner.$Aa),null==this.$dA&&(this.$dA=this.owner.$rD),it.prototype.onAdded.call(this)},__class__:fe});var me=function(){it.call(this,"player_win",!0)};me.__name__=!0,me.__super__=it,me.prototype=e(it.prototype,{get_name:function(){return"$bb"},__class__:me});var ye=function(){this.$xa=!1,f.call(this),this.$va=new rt(600,1e3),this.$Va=new rt(1900,2300)};ye.__name__=!0,ye.__super__=f,ye.prototype=e(f.prototype,{onStart:function(){null==this.$Ma&&(this.$Ma=this.owner._internal_getFromParents("$Aa",Wt)),f.prototype.onStart.call(this),this.$Wa=[new kn(0),new kn(0),new kn(0)],this.$wa=[this.$Xa("background_sky_blue"),this.$Xa("background_sky_pink"),this.$Xa("background_sky_yellow")];for(var t=0,e=this.$wa;t<e.length;){var i=new Vt(e[t++]).setXY(.5*(this.$Ma.sceneWidth-ye.$Ua),-25);this.owner.add(Tn.EEntity((new Sn).add(Tn.EComponent(i))))}},activateCrazyMode:function(){this.$xa=!0,this.$Wa[0].set_behavior(new Nn(1,0,.2)),this.$Wa[1].set_behavior(new Nn(.5,0,.4)),this.$Wa[2].set_behavior(new Nn(.5,0,.3))},$Xa:function(t){t=S.animations.getTexture(t,S.animationLibraries.get_currentGame());return t.baseTexture.mipmap=PIXI.MIPMAP_MODES.OFF,new PIXI.TilingSprite(t,ye.$Ua,193)},onUpdate:function(t){var e;f.prototype.onUpdate.call(this,t),this.$xa||(e=this.$Ma.playerWorldElement.position3d.x,this.$Wa[0].set__(e<this.$va._to?1:0),this.$Wa[1].set__(this.$va.getFactorFromValue(e)),this.$Wa[2].set__(this.$Va.getFactorFromValue(e)));for(var i=0,n=this.$Wa;i<n.length;)n[i++].update(t);for(var r=this.$wa,s=0;s<r.length;){var o=r[s];o.alpha=this.$Wa[s++]._value,o.visible=0!=o.alpha}},get_name:function(){return"$ua"},__class__:ye});var ge=function(){et.call(this)};ge.__name__=!0,ge.__super__=et,ge.prototype=e(et.prototype,{onActivate:function(){et.prototype.onActivate.call(this);var t=this.$Ma.touchUI;null!=t&&t.disable(),this.$Ma.fader.$nA.$A_().animate(1,0,1,null,Ys(this,this.deactivate),0)},getNextStateName:function(){return"$pa"},get_name:function(){return"$Oa"},onStart:function(){null==this.$Ma&&(this.$Ma=this.owner._internal_getFromParents("$Aa",Wt)),et.prototype.onStart.call(this)},__class__:ge});var ve=function(){this.$na=0,et.call(this)};ve.__name__=!0,ve.__super__=et,ve.prototype=e(et.prototype,{onActivate:function(){et.prototype.onActivate.call(this);var t=this.$Ma.touchUI;switch(null!=t&&t.disable(),this.$Ma.gameModel.outcome){case 0:this.$na=4,this.$oa();break;case 1:this.$Ma.player.sayQuote("quote_lose"),this.$na=4}},$Na:function(t,e){null!=e&&("$yA"==e.get_name()&&"$Ab"==t.get_name()&&(this.$Ma.player.changeStateTo("$bb",null),null!=(e=this.$Ma.touchUI)&&(e.enable(),Mr.__cast(e,f),Mr.__cast(e,f).owner.$w.container.alpha=0)),"$QA"==t.get_name()&&(this.$Ma.sky.activateCrazyMode(),this.$Ma.gameModel.outcome=2,this.$na=2))},$oa:function(){var e=this;this.$La.add(this.$Ma.player.stateChanged.connect(Ys(this,this.$Na))),this.$Ma.camera.lockX=!0,this.$Ma.player.hasWon.set__(!0),this.$Ma.player.walkToNextWavePosition();for(var t=this.$Ma.playerWorldElement.position3d.x+75-140,i=0;i<5;){++i;var n=this.$Ma.factory.createGasCloud(179769313486231e294),r=(null==n.$rD||((s=n.$rD).position3d.x=t,r=Bs.native.range(-30,-50),s.position3d.y=r,s.position3d.z=-2),n),s=[r];s[0].timeScale=Bs.native.range(.9,1.1);n=this.owner,r=Bs.native.range(0,.5);null==r&&(r=0),n.addEntity((new Sn).addComponent(new Ir(r,function(t){return function(){e.$Ma.tripGasContainer.add(Tn.EEntity(t[0]))}}(s))),!0),t+=70}},onUpdateState:function(t){et.prototype.onUpdateState.call(this,t),this.$na-=t,this.$na<0&&this.$Ma.endGame()},get_name:function(){return"$ma"},onStart:function(){null==this.$Ma&&(this.$Ma=this.owner._internal_getFromParents("$Aa",Wt)),et.prototype.onStart.call(this)},__class__:ve});var we=function(){et.call(this)};we.__name__=!0,we.__super__=et,we.prototype=e(et.prototype,{onStart:function(){null==this.$Ma&&(this.$Ma=this.owner.$Aa),et.prototype.onStart.call(this),this.$Pa=this.$Ma.spawner},onActivate:function(){var i=this;et.prototype.onActivate.call(this),this.$qa=[" -B-   B-B   B-- -B- --B  B  B-B  B-B  -C-"," -B-  --R B--  -P-  B-B -B-  P  R P  B B -C- P-P R  R"," B-B -C- B B R B B B R B B B R  P P B B C R BBB  P P C R"],this.$Qa=[1,1,1],this.$La.add(this.$Ma.playerEntity.$qD.value.watch(function(t,e){0==t&&i.$Ta(1)})),this.$Ra()},$Na:function(t,e){null!=e&&("$yA"==e.get_name()&&"$Ab"==t.get_name()&&this.$sa(),this.$Pa.hasStarted||"$ab"!=e.get_name()||this.$Ra())},onDeactivate:function(){this.$Pa.stop(),this.$ta(),et.prototype.onDeactivate.call(this)},onUpdateState:function(t){var e=this;this.$Pa.hasStarted&&0==this.$Pa.$ub.length&&0==this.$Ma.slugs.length&&(this.$Pa.stop(),this.owner.addEntity((new Sn).addComponent(new Ir(2,function(){e.$Ra()})),!0))},$Ra:function(){var t=this.$Ma.touchUI;null!=t&&t.disable(),this.$Ma.player.isInteractive.set__(!1),this.$Sa(),.1<Math.abs(this.$Ma.playerWorldElement.position3d.z)?this.$Ma.player.changeStateTo("$ab",0):0==this.$qa.length?(this.$Ma.playerEntity.$JD.filter=Ei.INVINCIBILITY_FILTER,this.$Ta(0)):this.$Ma.player.walkToNextWavePosition()},$sa:function(){this.$ta();for(var t=this.$qa.shift().split(" "),e=new Array(t.length),i=0,n=t.length;i<n;){var r=i++;e[r]=t[r].split("")}var s=this.$Qa.shift();this.$Pa.setWave(e),this.$Pa.setSpawnInterval(s),this.$Pa.start();s=this.$Ma.touchUI;null!=s&&s.enable()},$Sa:function(){null==this.$ra&&(this.$ra=this.$Ma.player.stateChanged.connect(Ys(this,this.$Na)))},$ta:function(){null!=this.$ra&&(this.$ra.dispose(),this.$ra=null)},$Ta:function(t){this.$Ma.finishLevel(t),this.$la=!1},getNextStateName:function(){return"$ma"},get_name:function(){return"$pa"},onAdded:function(){null==this.$Ma&&(this.$Ma=this.owner.$Aa),et.prototype.onAdded.call(this)},__class__:we});var xe=function(){this.$_A=.4,this.$a=new An,Gt.call(this)};xe.__name__=!0,xe.__super__=Gt,xe.prototype=e(Gt.prototype,{onAdded:function(){Gt.prototype.onAdded.call(this);var t=50*this.$_A;this.owner.add(Tn.EEntity((new Sn).add(Tn.EArray([Tn.EComponent(this.$ya=new Vt),Tn.EComponent(new us(ps.fromString("100%"),ps.fromString("100%"))),Tn.EEntity((new Sn).add(Tn.EArray([Tn.EComponent(this.$Ya=new Ni(45).setHitArea(-150,-150,300,300)),Tn.EEntity((new Sn).add(Tn.EComponent(S.animations.get("button_shoot",S.animationLibraries.get_currentGame())))),Tn.EComponent(new us(ms.Relative(t),ms.Relative(t),ps.fromString("100% - 30"),ps.fromString("100% - 30"),ms.Relative(.5*t),ms.Relative(.5*t)))]))),Tn.EEntity((new Sn).add(Tn.EArray([Tn.EComponent(this.$za=new Ni(35).setHitArea(-100,-150,250,170)),Tn.EEntity((new Sn).add(Tn.EComponent(S.animations.get("button_up",S.animationLibraries.get_currentGame())))),Tn.EComponent(new us(ms.Relative(t),ms.Relative(t),ms.Relative(30),ps.fromString("100% - 70"),ms.Relative(-.5*t),ms.Relative(.5*t)))]))),Tn.EEntity((new Sn).add(Tn.EArray([Tn.EComponent(this.$Za=new Ni(35).setHitArea(-100,-15,250,100)),Tn.EEntity((new Sn).add(Tn.EComponent(S.animations.get("button_down",S.animationLibraries.get_currentGame())))),Tn.EComponent(new us(ms.Relative(t),ms.Relative(t),ms.Relative(30),ps.fromString("100% - 30"),ms.Relative(-.5*t),ms.Relative(.5*t)))])))]))))},onUpdate:function(t){var e;Gt.prototype.onUpdate.call(this,t),this.button1Down.set__(this.$Ya.isDown._value),this.$za.isDown._value?((e=this.axisDirection).x=0,e.y=-1):this.$Za.isDown._value?((e=this.axisDirection).x=0,e.y=1):((e=this.axisDirection).x=0,e.y=0)},dispose:function(){null!=this.$a&&(this.$a.dispose(),this.$a=null),Gt.prototype.dispose.call(this)},__class__:xe});var be=function(t,e){this.$cA=0,f.call(this),this.$BA=t,this.$i_=e};be.__name__=!0,be.__super__=f,be.prototype=e(f.prototype,{onAdded:function(){null==this.$ya&&(this.$ya=this.owner.$w),f.prototype.onAdded.call(this),this.$fa()},$fa:function(){var t=this.$i_-150;for(this.$Fa("small"),this.$Fa("tall");this.$cA<t;)this.$Fa(Bs.native._random.next()<=.5?"small":Bs.native.fromArray(["medium","tall"]));this.$cA=t,this.$Fa("tall"),this.$Fa("small")},$Fa:function(t){var e=S.animations.getSprite(this.$BA+"_"+t,S.animationLibraries.get_currentGame());e.x=this.$cA,e.y=Bs.native.range(-1,1),this.$ya.container.addChild(e);var i,n=this.$cA;switch(t){case"medium":i=100;break;case"small":i=42;break;case"tall":i=100}return this.$cA=n+i,e},get_name:function(){return"$bA"},onStart:function(){null==this.$ya&&(this.$ya=this.owner.$w),f.prototype.onStart.call(this)},__class__:be});var Ee=function(t){null==t&&(t="generic_shadow"),this.$WA=new kn(1,1,0),this.$wA=new kn(0,250,500),this.$VA=ls.empty(),this.$vA=ls.empty(),this.$k_={x:0,y:0,z:0},this.$a=new An,f.call(this),this.$uA=(new Sn).add(Tn.EArray([Tn.EComponent(new Vt),Tn.EEntity((new Sn).add(Tn.EArray([Tn.EComponent(S.animations.get(t,S.animationLibraries.get_currentGame()))])))])),this.$UA=this.$uA.$w,this.$WA.follow(this.$wA)};function $e(t,e){this.$ea=fi.Right,this.isBossBattle=!1,B.call(this,new Ae,t,e)}Ee.__name__=!0,Ee.__super__=f,Ee.prototype=e(f.prototype,{onStart:function(){null==this.$dA&&(this.$dA=this.owner.$rD),null==this.$Ma&&(this.$Ma=this.owner._internal_getFromParents("$Aa",Wt)),f.prototype.onStart.call(this),this.setTargetContainer(this.$Ma.shadowContainer)},setTargetContainer:function(t){t.addEntity(this.$uA),this.$UA.reparentContainer()},onUpdate:function(t){f.prototype.onUpdate.call(this,t);var e=this.$vA,t=this.$dA.position3d;e.x=t.x,e.y=t.y,e.z=t.z,this.$vA.y=0,e=this.$vA;t=this.$k_;e.x+=t.x,e.y+=t.y,e.z+=t.z,this.$wA.set__(this.$dA.position3d.y),this.$Ma.worldProjection.project(this.$vA,this.$VA),this.$UA.setXY(this.$VA.x,this.$VA.y),this.$UA.setAlpha(this.$WA._value)},dispose:function(){null!=this.$a&&(this.$a.dispose(),this.$a=null),f.prototype.dispose.call(this),this.$uA.add(Tn.EComponent(new Ir))},get_name:function(){return"$TA"},onAdded:function(){null==this.$dA&&(this.$dA=this.owner.$rD),f.prototype.onAdded.call(this)},__class__:Ee}),$e.__name__=!0,$e.__super__=B,$e.prototype=e(B.prototype,{onAdded:function(){B.prototype.onAdded.call(this),this.worldProjection.matrix.scale(1,-1),this.owner.add(Tn.EArray([Tn.EComponent(new si),Tn.EComponent(new ri),Tn.EComponent(new ei),Tn.EComponent(new ni),Tn.EComponent(new ii),Tn.EComponent(this.sounds=new Se)]))},onStart:function(){B.prototype.onStart.call(this),this.isBossBattle=0<=Rn.root._internal_getFromChildren("$_",zi).$C().indexOf("bossbattle"),PIXI.utils.isMobile.any&&this.addTouchUI(new hi),this.camera.lockY=!0,this.owner.$lf.$df.set_fixedTimestep(.011111111111111112),this.$WB(),this.createVignette(190),this.isBossBattle?(this.$xB(),this.$ha(),this.$ga(),this.changeStateTo("$dc",null)):(this.$Ga(),this.$ha(),this.$ga(),this.camera.offset.x.set__(.15*-this.sceneWidth),this.changeStateTo("$Cc",null))},$WB:function(){var o=this;this.populator=new mi(this.worldProjection),this.owner.add(Tn.EComponent(this.populator));var a=new Rs(["enemy_leon","enemy_max","enemy_brock","enemy_bea"]);this.populator.unwrapper.registerTransformer(new xn("enemy_",{transformInfo:function(t){return t.willInstantiateSymbol=!1,t},decorateEntity:function(t,n){var e=null,i=null;switch(n.symbolName){case"enemy_old_brawler":e="brawler_old",i="enemy_gale";break;case"enemy_surge":e="brawler_shooter",i="enemy_surge";break;case"enemy_young_brawler":e="brawler_young",i=a.next()}var r=o.factory.createEnemy(i,e),s=t.$w;return function(){if(null==r.$rD)return;if(null==r.$w)return;if(null==r.$kc)return;var t=r.$rD,e=r.$w,i=r.$kc;e.container.setTransform(s.container.position.x,s.container.position.y,n.keyframe.scaleX,n.keyframe.scaleY,null,-n.keyframe.skewX,n.keyframe.skewY,n.keyframe.pivotX,n.keyframe.pivotY),o.worldProjection.unproject({x:e.container.position.x,y:e.container.position.y,z:0},t.position3d),i.setMovementBounds(t.position3d.x,n.keyframe.scaleX<=1.1?t.position3d.x:t.position3d.x+20*n.keyframe.scaleX)}(),r}}));var e=new Rs(["obstacle_arcade_2","obstacle_arcade_4","obstacle_arcade_5","obstacle_arcade_6","obstacle_gumball"]);this.populator.unwrapper.registerTransformer(new xn("obstacle_random_arcade",{transformInfo:function(t){return t.symbolName=e.next(),t}})),this.populator.unwrapper.registerTransformer(new xn("obstacle_",{transformInfo:function(t){return t.willInstantiateSymbol=!1,t},decorateEntity:function(t,e){var i=o.factory.createObstacle(e.symbolName),t=t.$w;return null!=i.$w&&i.$w.container.setTransform(t.container.position.x,t.container.position.y,e.keyframe.scaleX,e.keyframe.scaleY,null,-e.keyframe.skewX,e.keyframe.skewY,e.keyframe.pivotX,e.keyframe.pivotY),i}}));var i=new Rs(["bg_neon_8bit","bg_neon_lp","bg_neon_plannet","bg_neon_slugfest","bg_neon_starrcade","bg_poster"]);this.populator.unwrapper.registerTransformer(new xn("random_wall_decoration",{transformInfo:function(t){return t.symbolName=i.next(),t},decorateEntity:function(t,e){0<=e.symbolName.indexOf("neon")&&t.add(Tn.EComponent(new ke));var i=S.animationLibraries.get_currentGame();null==i&&(i=x.defaultLibaryName);i=x._libraryByName.get(i)._symbols.h[e.symbolName];return null!=t.$w&&((e=t.$w).container.position.x-=i.anchorX,e.container.position.y-=i.anchorY),t}}));var n=new Rs(["bg_tl_blue","bg_tl_pink"]);this.populator.unwrapper.registerTransformer(new xn("bg_tl_",{transformInfo:function(t){return t.symbolName=n.next(),t}})),this.populator.unwrapper.registerTransformer(new xn("powerplug",{transformInfo:function(t){return t.willInstantiateSymbol=!1,t},decorateEntity:function(t,i){var n=o.factory.createBossPowerPlug(),r=t.$w;return function(){if(null==n.$rD)return;if(null==n.$w)return;var t=n.$rD,e=n.$w;e.container.setTransform(r.container.position.x,r.container.position.y,i.keyframe.scaleX,i.keyframe.scaleY,null,-i.keyframe.skewX,i.keyframe.skewY,i.keyframe.pivotX,i.keyframe.pivotY),o.worldProjection.unproject({x:e.container.position.x,y:e.container.position.y,z:0},t.position3d)}(),n}})),this.populator.unwrapper.registerTransformer(new xn("garage_door",{decorateEntity:function(t,e){return t.add(Tn.EComponent(new Le)),t}}))},triggerBossBattle:function(){this.finishLevel(2)},showQuote:function(t){this.containers.top.add(Tn.EEntity((new Sn).add(Tn.EArray([Tn.EComponent(S.animations.get(t,S.animationLibraries.get_currentGame()).setXY(.5*this.sceneWidth,.5*this.sceneHeight))]))))},finishLevel:function(t){switch(B.prototype.finishLevel.call(this,t),t){case 0:case 1:this.changeStateTo("$HC",null);break;case 2:this.changeStateTo("$IC",null);break;case 3:this.changeStateTo("$iC",null)}},$Ga:function(){var t,e=this.sceneHeight-32;(t=new Sn).add(Tn.EArray([Tn.EComponent(new Vt),Tn.EComponent(new li(.9,.9).setCameraOffset(0,0).setViewOffset(0,e)),Tn.EComponent(new di(this.$ea,new gi(this.$ia("background")),this.populator))])),this.containers.bottom.add(Tn.EEntity(t)),(t=new Sn).add(Tn.EArray([Tn.EComponent(new Vt),Tn.EComponent(new li(1,1).setViewOffset(0,e)),Tn.EComponent(new di(this.$ea,new gi(this.$ia("platforms")),this.populator))])),this.containers.bottom.add(Tn.EEntity(t)),(t=new Sn).add(Tn.EArray([Tn.EComponent(new Vt),Tn.EComponent(this.worldElementLayer=new li(1,1,"worldElement").setCameraOffset(0,0).setViewOffset(0,e)),Tn.EEntity(this.worldElementContainer=new Sn),Tn.EEntity(this.playerContainer=(new Sn).add(Tn.EComponent(new Vt))),Tn.EEntity(this.fxContainer=(new Sn).add(Tn.EComponent(new Vt)))])),this.containers.mid.add(Tn.EEntity(t))},$ha:function(){var r=this;return this.playerEntity=this.factory.createPlayer(),function(t){if(null==((n=t.$Aa)instanceof ze?n:null))return;if(null==t.$w)return;if(null==t.$rD)return;if(null==t.$RE)return;var e=(n=t.$Aa)instanceof ze?n:null,i=t.$w,n=t.$rD,t=t.$RE;r.player=e,r.playerDisplay=i,r.playerWorldElement=n,r.playerCollidable=t}(this.playerEntity),this.playerContainer.add(Tn.EEntity(this.playerEntity)),this.$a.add(this.playerEntity.$qD.value.watch(function(t,e){0==t&&r.finishLevel(1)})),this.playerEntity},$xB:function(){var t=this.sceneHeight-32,e=new Sn;e.add(Tn.EArray([Tn.EComponent(new Vt),Tn.EComponent(this.worldElementLayer=new li(1,1,"worldElement").setCameraOffset(0,0).setViewOffset(0,t)),Tn.EEntity(this.worldElementContainer=new Sn),Tn.EEntity(this.playerContainer=(new Sn).add(Tn.EComponent(new Vt))),Tn.EEntity(this.fxContainer=(new Sn).add(Tn.EComponent(new Vt)))])),this.containers.mid.add(Tn.EEntity(e))},$ga:function(){this.owner._internal_getFromParents("$se").top.add(Tn.EEntity((new Sn).add(Tn.EArray([Tn.EComponent(S.animations.getMovieSprite("healthbar",S.animationLibraries.get_currentGame())),Tn.EComponent(new ai(this.playerEntity.$qD.value)),Tn.EComponent(new us(ms.Relative(0),ms.Relative(0),ms.Relative(10),ms.Relative(10)))])))),this.isBossBattle||this.owner._internal_getFromParents("$se").top.add(Tn.EEntity((new Sn).add(Tn.EArray([Tn.EComponent(new Vt),Tn.EComponent(new oi(this.gameModel.score)),Tn.EComponent(new us(ms.Relative(0),ms.Relative(0),ps.fromString("100% - 10"),ms.Relative(10)))]))))},spawnCoin:function(n,r,s){var t=function(t){if(null==t.$rD)return t;if(null==((i=t.$nB)instanceof We?i:null))return t;var e=t.$rD,i=(i=t.$nB)instanceof We?i:null,e=e.position3d;return e.x=n.x,e.y=n.y,i.bounce(r,s),t}(this.factory.createPickup("pickup_coin","coin"));return this.worldElementContainer.add(Tn.EEntity(t)),t},$ia:function(t){for(var e=Rn.assets.getJson(S.files.json.manifest.fileNames[2]),i=0;i<e.length;){var n=e[i];if(++i,n.id==t)return n}return null},onUpdate:function(t){B.prototype.onUpdate.call(this,t),"$Cc"==(null!=this.currentState?this.currentState.get_name():null)&&(this.camera.target.x=this.playerDisplay.container.x)},__class__:$e});var Ae=function(){f.call(this)};Ae.__name__=!0,Ae.__interfaces__=[H],Ae.__super__=f,Ae.prototype=e(f.prototype,{create:function(t,e){return"pickup_coin"==t?this.createPickup(t,"coin"):0<=t.indexOf("enemy")?this.createEnemy(t,"brawler_young"):new Sn},createPlayer:function(){return(new Sn).add(Tn.EArray([Tn.EComponent(new Vt),Tn.EEntity((new Sn).add(Tn.EArray([Tn.EComponent(S.animations.getMovieSpritePlayer("player_idle",S.animationLibraries.get_currentGame()))]))),Tn.EComponent(new ze),Tn.EComponent(new Ci),Tn.EComponent(new Ei),Tn.EComponent(new xi(15)),Tn.EComponent(new Fe({x:16,y:10},"player",500,18)),Tn.EComponent(vi.fromMovieSprite("player_colliders",S.animationLibraries.get_currentGame(),null,1,0).setMass(2e3)),Tn.EComponent(new Xi),Tn.EComponent(new ji),Tn.EComponent(new Hi)]))},createBoss:function(){return(new Sn).add(Tn.EArray([Tn.EComponent(new Vt),Tn.EEntity((new Sn).add(Tn.EArray([Tn.EComponent(S.animations.getMovieSpritePlayer("boss_idle",S.animationLibraries.get_currentGame()))]))),Tn.EComponent(new Te),Tn.EComponent(new Ei),Tn.EComponent(new xi(1e4)),Tn.EComponent(new Fe({x:16,y:10},"boss",500,17)),Tn.EComponent(new ji),Tn.EComponent(new Hi),Tn.EComponent(new Ui),Tn.EComponent(vi.fromMovieSprite("boss_colliders",S.animationLibraries.get_currentGame(),null,2,0).setMass(2e3))]))},createBossPowerPlug:function(){return(new Sn).add(Tn.EArray([Tn.EComponent(S.animations.get("powerplug",S.animationLibraries.get_currentGame())),Tn.EComponent(new Oe),Tn.EComponent(new Ei),Tn.EComponent(new xi(3)),Tn.EComponent(new ji),Tn.EComponent(new Hi),Tn.EComponent(new Ui),Tn.EComponent(vi.fromMovieSprite("powerplug_colliders",S.animationLibraries.get_currentGame(),2,16,0))]))},createProjectile:function(t,e){return(new Sn).add(Tn.EArray([Tn.EComponent(new Vt),Tn.EEntity((new Sn).add(Tn.EArray([Tn.EComponent(S.animations.get(t,S.animationLibraries.get_currentGame()))]))),Tn.EComponent(new ji),Tn.EComponent(new Hi),Tn.EComponent(new Di(1,300)),Tn.EComponent(new wi),Tn.EComponent(new Ui),Tn.EComponent(vi.fromMovieSprite(t+"_colliders",S.animationLibraries.get_currentGame(),1,4,e).setFilterFlagsMethod(bs.Inclusive))]))},createEnemy:function(t,e){var i,n=new Sn,r=Tn.EComponent(new Vt),s=Tn.EEntity((new Sn).add(Tn.EArray([Tn.EComponent(S.animations.getMovieSpritePlayer(null,S.animationLibraries.get_currentGame()))]))),o=Tn.EComponent(new ji),a=Tn.EComponent(new Hi),h=Tn.EComponent(new Ii(t,e));switch(e){case"brawler_old":i=Tn.EComponent(new Ve);break;case"brawler_shooter":i=Tn.EComponent(new He);break;case"brawler_young":i=Tn.EComponent(new Ge);break;default:i=null}return n.add(Tn.EArray([r,s,o,a,h,i,Tn.EComponent(new Pi),Tn.EComponent(new wt),Tn.EComponent(new xi(1)),Tn.EComponent(new De),Tn.EComponent(new Ei),Tn.EComponent(new wi),Tn.EComponent(new Ui),Tn.EComponent(vi.fromMovieSprite(t+"_colliders",S.animationLibraries.get_currentGame(),null,2))]))},createPickup:function(t,e){return(new Sn).add(Tn.EArray([Tn.EComponent(new Vt),Tn.EEntity((new Sn).add(Tn.EArray([Tn.EComponent(S.animations.getMovieSprite(t,S.animationLibraries.get_currentGame()))])).setTimeScale(Bs.native.range(.9,1.1))),Tn.EComponent(new ji),Tn.EComponent(new Hi),"coin"==e?Tn.EComponent(new We):null,Tn.EComponent(new wi),Tn.EComponent(new Ui),Tn.EComponent(vi.fromMovieSprite(t+"_colliders",S.animationLibraries.get_currentGame(),null,8,0))]))},createObstacle:function(t){return(new Sn).add(Tn.EArray([Tn.EComponent(new Vt),Tn.EEntity((new Sn).add(Tn.EArray([Tn.EComponent(S.animations.get(t,S.animationLibraries.get_currentGame()))])).setTimeScale(Bs.native.range(.9,1.1))),Tn.EComponent(new ji),Tn.EComponent(new Ye),Tn.EComponent(new De),Tn.EComponent(new Ei),Tn.EComponent(new xi(3)),Tn.EComponent(new vs),Tn.EComponent(new Xi),Tn.EComponent(new ws),Tn.EComponent(vi.fromMovieSprite(t+"_colliders",S.animationLibraries.get_currentGame(),2,16,0))]))},createExplosion:function(t){return(new Sn).add(Tn.EArray([Tn.EComponent(S.animations.get(t,S.animationLibraries.get_currentGame())),Tn.EComponent(new kr)]))},get_name:function(){return"$Qc"},__class__:Ae});var Se=function(){Y.call(this)};Se.__name__=!0,Se.__super__=Y,Se.prototype=e(Y.prototype,{playProjectile:function(t){t=t?S.sounds.game3.PLAYER_SHOOT:S.sounds.game3.ENEMY_SHOOT;Rn.get_soundManager().play(t,1)},playBossDie:function(){var t=S.sounds.game3.BOSS_DEFEATED;Rn.get_soundManager().play(t,1)},playArcadeExplode:function(){var t=S.sounds.game3.ARCADE_EXPLODE;Rn.get_soundManager().play(t,1)},playArcadeHurt:function(){var t=S.sounds.game3.ARCADE_HURT;Rn.get_soundManager().play(t,1)},playEnemyHurt:function(){var t=S.sounds.game3.ENEMY_HURT;Rn.get_soundManager().play(t,1)},playEnemyDie:function(){var t=S.sounds.game3.ENEMY_DEFEATED;Rn.get_soundManager().play(t,1)},playerHurt:function(){var t=S.sounds.game3.PLAYER_HURT;Rn.get_soundManager().play(t,1)},playerJump:function(){var t=S.sounds.game3.PLAYER_JUMP;Rn.get_soundManager().play(t,1)},playerLand:function(){var t=S.sounds.game3.PLAYER_LAND;Rn.get_soundManager().play(t,1)},playDoubleJump:function(){var t=S.sounds.game3.PLAYER_DOUBLEJUMP;Rn.get_soundManager().play(t,1)},__class__:Se});var Te=function(){this.$DC=3,this.$BC=!0,this.isAlive=new Mn(!0),this.$a=new An,N.call(this)};function Ce(){this.axis1=new Ai,this.buttonAction4=new Si,this.buttonAction3=new Si,this.buttonAction2=new Si,this.buttonAction1=new Si,this.buttonRight=new Si,this.buttonLeft=new Si,this.buttonDown=new Si,this.buttonUp=new Si,f.call(this)}Te.__name__=!0,Te.__super__=N,Te.prototype=e(N.prototype,{onAdded:function(){null==this.$qB&&(this.$qB=this.owner.$LC),null==this.$HA&&(this.$HA=this.owner.$qD),null==this.$dA&&(this.$dA=this.owner.$rD),N.prototype.onAdded.call(this),this.owner.add(Tn.EArray([Tn.EComponent(new Ie),Tn.EComponent(new Pe),Tn.EComponent(new Me)]))},onStart:function(){null==this.$qB&&(this.$qB=this.owner.$LC),null==this.$HA&&(this.$HA=this.owner.$qD),null==this.$dA&&(this.$dA=this.owner.$rD),null==this.$Cb&&(this.$Cb=this.owner._internal_getFromChildren("$w",Ur)),null==this.$Ma&&(this.$Ma=this.owner._internal_getFromParents("$Aa",$e)),N.prototype.onStart.call(this),this.$cC={timeStamp:0,yPos:0},this.$rA=this.$Ma.player,this.$bC=this.$rA.owner.$JD,this.$Ma.playerContainer.add(Tn.EEntity((new Sn).add(Tn.EArray([Tn.EComponent(this.$dC=S.animations.get("boss_wire_scale",S.animationLibraries.get_currentGame()).setXY(this.$dA.position3d.x+12,this.$dA.position3d.y-3))])))),this.$a.add(this.$HA.value.watch(Ys(this,this.$lb),!1)),this.$a.add(this.$rA.owner.$qD.value.watch(Ys(this,this.$eC),!1))},$lb:function(t,e){this.$bC.hit(Math.round(e-t))},$eC:function(t,e){var i,n,r,s,o;t<e&&(o=this.owner,i=[16057380],t=new An,null!=o.$w&&(n=o.$w,r=new or(i[0],1),n.container.filters=[r],s=0,t.add(Vs.create(o.parent,.05,1,function(){var t=s+=.5;r.update(i[(0|t)%i.length],1==r.multiplier?0:1)})),e=o.parent,o=(new Sn).addComponent(new Ir(.1,function(){n.container.filters=null})),e.addEntity(o,!0),t.add(o)))},idle:function(){this.changeStateTo("$GC",null)},jump:function(){this.changeStateTo("$gC",null)},shoot:function(){this.$qB.fireProjectile(!1)},die:function(){this.changeStateTo("$hC",null)},$EC:function(t){this.$dA.position3d.y=t.yPos,this.isAlive._value&&(t.didDie?this.die():(t.didJump&&this.jump(),t.didShoot&&this.shoot(),t.wasIdle&&this.idle()))},onUpdate:function(t){if(N.prototype.onUpdate.call(this,t),this.$BC){var e=this.$rA.snapshots,i=this.$rA.currentTime-.335;if(!(i<0)){for(var n=0,r=e.length;n<r;){var s=e[n++];s.timeStamp>this.$cC.timeStamp&&s.timeStamp<i&&(this.$EC(s),this.$cC=s)}this.$dC.container.scale.y=this.$dA.position3d.y/this.$DC}}},dispose:function(){null!=this.$a&&(this.$a.dispose(),this.$a=null),N.prototype.dispose.call(this)},__class__:Te}),Ce.__name__=!0,Ce.__super__=f,Ce.prototype=e(f.prototype,{get_name:function(){return"$Hc"},__class__:Ce});var Me=function(){it.call(this,"boss_dazed",!0)};Me.__name__=!0,Me.__super__=it,Me.prototype=e(it.prototype,{onActivate:function(){it.prototype.onActivate.call(this),this.owner._internal_getFromParents("$V_",Se).playBossDie(),this.$ec.isAlive.set__(!1)},get_name:function(){return"$hC"},onStart:function(){null==this.$ec&&(this.$ec=this.owner.$Aa),it.prototype.onStart.call(this)},onAdded:function(){null==this.$ec&&(this.$ec=this.owner.$Aa),it.prototype.onAdded.call(this)},__class__:Me});var Ie=function(){it.call(this,"boss_idle",!0)};Ie.__name__=!0,Ie.__super__=it,Ie.prototype=e(it.prototype,{get_name:function(){return"$GC"},__class__:Ie});var Pe=function(){it.call(this,"boss_jump",!0)};Pe.__name__=!0,Pe.__super__=it,Pe.prototype=e(it.prototype,{get_name:function(){return"$gC"},__class__:Pe});var Oe=function(){this.$FC={x:23,y:-47},this.health=new Mn(3),this.$a=new An,f.call(this)};Oe.__name__=!0,Oe.__super__=f,Oe.prototype=e(f.prototype,{onStart:function(){null==this.$HA&&(this.$HA=this.owner.$qD),null==this.$aB&&(this.$aB=this.owner.$w),null==this.$Ma&&(this.$Ma=this.owner._internal_getFromParents("$Aa",$e)),f.prototype.onStart.call(this),this.$a.add(this.$HA.value.watch(Ys(this,this.$lb),!1)),this.$aB.$iF(!0)},$lb:function(t,e){var i,n,r,s,o,a=null;0==t?(null==(n=this.$Ma.factory.createExplosion("medium_explosion")).$w||(s=(r=n.$w).container.position,o=this.owner.$w.container.position,s.x=o.x,s.y=o.y,s=r.container.position,i=this.$FC,s.x+=i.x,s.y+=i.y),a=n,this.$aB.$hF(this.$aB.symbol.duration)):t<e&&(a=(null==(n=this.$Ma.factory.createExplosion("sparks_powerplug")).$w||(s=(r=n.$w).container.position,o=this.owner.$w.container.position,s.x=o.x,s.y=o.y,s=r.container.position,i=this.$FC,s.x+=i.x,s.y+=i.y),n)),null!=a&&this.$Ma.fxContainer.add(Tn.EEntity(a))},onUpdate:function(t){f.prototype.onUpdate.call(this,t),this.health.set__(this.$HA.value._value)},get_name:function(){return"$fC"},onAdded:function(){null==this.$HA&&(this.$HA=this.owner.$qD),null==this.$aB&&(this.$aB=this.owner.$w),f.prototype.onAdded.call(this)},dispose:function(){null!=this.$a&&(this.$a.dispose(),this.$a=null),f.prototype.dispose.call(this)},__class__:Oe});var De=function(t){null==t&&(t=1),this.$aC=new Rs([-31,-24,-17,-10,10,17,24,31]),this.$a=new An,f.call(this),this.$AC=t};De.__name__=!0,De.__super__=f,De.prototype=e(f.prototype,{onStart:function(){null==this.$dA&&(this.$dA=this.owner.$rD),null==this.$HA&&(this.$HA=this.owner.$qD),null==this.$Ma&&(this.$Ma=this.owner._internal_getFromParents("$Aa",$e)),f.prototype.onStart.call(this),this.$a.add(this.$HA.value.watch(Ys(this,this.$lb),!1))},$lb:function(t,e){if(!(e<t))for(var i=Math.round(e-t)*this.$AC,n=0;n<i;){++n;var r=this.$dA.position3d,s=0,o=10,r={x:r.x,y:r.y};r.x+=s,r.y+=o,this.$Ma.spawnCoin(r,this.$aC.next())}},get_name:function(){return"$_C"},onAdded:function(){null==this.$dA&&(this.$dA=this.owner.$rD),null==this.$HA&&(this.$HA=this.owner.$qD),f.prototype.onAdded.call(this)},dispose:function(){null!=this.$a&&(this.$a.dispose(),this.$a=null),f.prototype.dispose.call(this)},__class__:De});var Re=function(){this.$a=new An,f.call(this)};Re.__name__=!0,Re.__super__=f,Re.prototype=e(f.prototype,{onStart:function(){null==this.$ya&&(this.$ya=this.owner.$w),null==this.$nA&&(this.$nA=this.owner.$Hf),f.prototype.onStart.call(this),this.$a.add(this.$nA.$A_().watch(Ys(this,this.$hf)))},$hf:function(t,e){this.$ya.container.visible=0<t},get_name:function(){return"$Gf"},onAdded:function(){null==this.$ya&&(this.$ya=this.owner.$w),null==this.$nA&&(this.$nA=this.owner.$Hf),f.prototype.onAdded.call(this)},dispose:function(){null!=this.$a&&(this.$a.dispose(),this.$a=null),f.prototype.dispose.call(this)},__class__:Re});var Le=function(){f.call(this)};Le.__name__=!0,Le.__super__=f,Le.prototype=e(f.prototype,{onAdded:function(){null==this.$aB&&(this.$aB=this.owner.$w),f.prototype.onAdded.call(this),this.owner.add(Tn.EComponent(new Fr))},onStart:function(){null==this.$aB&&(this.$aB=this.owner.$w),f.prototype.onStart.call(this),this.$aB.$iF(!0)},open:function(){this.$aB.$iF(!1)},get_name:function(){return"$jC"},__class__:Le});var ke=function(){this.$NA=null,f.call(this)};ke.__name__=!0,ke.__super__=f,ke.prototype=e(f.prototype,{onStart:function(){f.prototype.onStart.call(this),this.$qc()},$qc:function(){this.$NA=Bs.native.range(1,4)},onUpdate:function(t){var e,i,n,r,s,o,a;f.prototype.onUpdate.call(this,t),null!=this.$NA&&(this.$NA-=t)<=0&&(e=this.owner,i=[0],null==(a=Bs.native.intRange(1,3))&&(a=1),n=new An,null!=e.$w&&(r=e.$w,s=new or(i[0],1),r.container.filters=[s],o=0,n.add(Vs.create(e.parent,.1,a,function(){var t=o+=.5;s.update(i[(0|t)%i.length],1==s.multiplier?0:1)})),t=e.parent,null==(a=.1*a+.1)&&(a=0),e=(new Sn).addComponent(new Ir(a,function(){r.container.filters=null})),t.addEntity(e,!0),n.add(e)),this.$qc())},get_name:function(){return"$Pc"},__class__:ke});var Fe=function(t,e,i,n){f.call(this),this.$k_=t,this.$mC=e,this.$zA=i,this.$MC=n};function Ne(t){this.$Kc=new rt,this.$a=new An,f.call(this),this.settings=t}Fe.__name__=!0,Fe.__super__=f,Fe.prototype=e(f.prototype,{onAdded:function(){null==this.$dA&&(this.$dA=this.owner.$rD),f.prototype.onAdded.call(this),this.owner.add(Tn.EArray([Tn.EEntity((new Sn).add(Tn.EArray([Tn.EComponent(this.$nC=S.animations.getMovieSprite(this.$mC+"_muzzle_flash",S.animationLibraries.get_currentGame()).setXY(this.$k_.x,-this.$k_.y)),Tn.EComponent(new Fr)])))])),this.$nC.$hF(this.$nC.symbol.duration),this.$nC.$iF(!0)},fireProjectile:function(t){this.$nC.$hF(0),this.$nC.$iF(!1),this.$Ma.sounds.playProjectile(t);var e,i,n,r=this.$Ma.factory.createProjectile(this.$mC+"_projectile",this.$MC);null!=r.$rD&&(e=(i=r.$rD).position3d,n=this.$dA.position3d,e.x=n.x,e.y=n.y,e.z=n.z,i.position3d.x+=this.$k_.x*this.$dA.heading._value.axisDirection,i.position3d.y+=this.$k_.y,i.heading.set__(this.$dA.heading._value.clone()),e=i.velocity3d,n=(t=i.heading._value).x,i=t.y,n=n*(t=this.$zA),t=i*t,e.x=n,e.y=t),this.owner.parent.add(Tn.EEntity(r))},get_name:function(){return"$LC"},onStart:function(){null==this.$dA&&(this.$dA=this.owner.$rD),null==this.$Ma&&(this.$Ma=this.owner._internal_getFromParents("$Aa",$e)),f.prototype.onStart.call(this)},__class__:Fe}),Ne.__name__=!0,Ne.__super__=f,Ne.prototype=e(f.prototype,{setMovementBounds:function(t,e){this.$Kc.set(t,e)},facePlayer:function(){this.settings.facePlayer&&this.$dA.heading.set__(this.$Ma.playerWorldElement.position3d.x<this.$dA.position3d.x?fi.Left:fi.Right)},onAdded:function(){null==this.$jb&&(this.$jb=this.owner.$Aa),null==this.$HA&&(this.$HA=this.owner.$qD),null==this.$dA&&(this.$dA=this.owner.$rD),null==this.$_b&&(this.$_b=this.owner.$RE),null==this.$ya&&(this.$ya=this.owner.$w),f.prototype.onAdded.call(this),this.owner.add(Tn.EArray([Tn.EComponent(new Be),Tn.EComponent(new Xe),Tn.EComponent(new je),Tn.EComponent(new Ue)]))},onStart:function(){null==this.$jb&&(this.$jb=this.owner.$Aa),null==this.$HA&&(this.$HA=this.owner.$qD),null==this.$dA&&(this.$dA=this.owner.$rD),null==this.$_b&&(this.$_b=this.owner.$RE),null==this.$ya&&(this.$ya=this.owner.$w),null==this.$Ma&&(this.$Ma=this.owner._internal_getFromParents("$Aa",$e)),f.prototype.onStart.call(this),this.$dA.heading.set__(.5<Bs.native._random.next()?fi.Left:fi.Right);var t=this.$Kc.getValueFromFactor(Math.random());this.$dA.position3d.x=t,this.$HA.value.set__(this.settings.health),this.$a.add(this.$HA.value.watch(Ys(this,this.$lb),!1)),this.$jb.dieOnZeroHealth=!1,this.$jb.fallbackStateName="$Zc",this.$_b.filterFlags=1,this.$_b.filterFlagsMethod=bs.Inclusive,this.$a.add(this.$_b.$ZE().connect(Ys(this,this.$lc)))},$lc:function(t){var e;!this.$Ma.player.isAlive._value||"$Oc"==(null!=(e=this.$jb).currentState?e.currentState.get_name():null)||this.$jb.changeStateTo("$Oc",null)},$lb:function(t,e){0==t?this.$jb.changeStateTo("$oc",null):t<e&&this.$jb.changeStateTo("$Nc",null)},onUpdate:function(t){var e;f.prototype.onUpdate.call(this,t),"$oc"!=(null!=(e=this.$jb).currentState?e.currentState.get_name():null)&&(this.distanceToPlayer=hs.distanceTo(this.$dA.position3d,this.$Ma.playerWorldElement.position3d),("$Zc"==(null!=(e=this.$jb).currentState?e.currentState.get_name():null)||"$qC"==(null!=(e=this.$jb).currentState?e.currentState.get_name():null))&&this.distanceToPlayer<75?this.$jb.changeStateTo("$Mc",null):!("$Zc"==(null!=(e=this.$jb).currentState?e.currentState.get_name():null)||"$qC"==(null!=(e=this.$jb).currentState?e.currentState.get_name():null))||this.$Kc._size<1?"$Zc"==(null!=(e=this.$jb).currentState?e.currentState.get_name():null)&&this.$jb.changeStateTo("$qC",null):("$qC"==(null!=(e=this.$jb).currentState?e.currentState.get_name():null)&&this.$jb.changeStateTo("$Zc",null),this.$dA.position3d.x+=this.settings.speed*t*this.$dA.heading._value.axisDirection,e=this.$Kc,t=this.$dA.position3d.x,e._from<=t&&t<=e._to||e._to<=t&&t<=e._from||(this.$dA.heading.set__(this.$dA.heading._value==fi.Left?fi.Right:fi.Left),this.$dA.position3d.x=this.$Kc.clamp(this.$dA.position3d.x))))},get_name:function(){return"$kc"},dispose:function(){null!=this.$a&&(this.$a.dispose(),this.$a=null),f.prototype.dispose.call(this)},__class__:Ne});var Be=function(){nt.call(this,"attack")};Be.__name__=!0,Be.__super__=nt,Be.prototype=e(nt.prototype,{onActivate:function(){nt.prototype.onActivate.call(this);var t=this.$Ma.playerEntity;null!=t.$JD&&t.$JD.hit(this.$nc.settings.attackHitPoints)},onUpdateState:function(t){nt.prototype.onUpdateState.call(this,t),this.$nc.facePlayer()},getNextStateName:function(){return"$Zc"},get_name:function(){return"$Oc"},onStart:function(){null==this.$dA&&(this.$dA=this.owner.$rD),null==this.$nc&&(this.$nc=this.owner.$kc),null==this.$Ma&&(this.$Ma=this.owner._internal_getFromParents("$Aa",$e)),nt.prototype.onStart.call(this)},onAdded:function(){null==this.$dA&&(this.$dA=this.owner.$rD),null==this.$nc&&(this.$nc=this.owner.$kc),nt.prototype.onAdded.call(this)},__class__:Be});var Ue=function(){nt.call(this,"dazed",!0)};Ue.__name__=!0,Ue.__super__=nt,Ue.prototype=e(nt.prototype,{onActivate:function(){nt.prototype.onActivate.call(this),this.owner._internal_getFromParents("$V_",Se).playEnemyDie(),this.$_b.collisionsEnabled=!1},get_name:function(){return"$oc"},onStart:function(){null==this.$_b&&(this.$_b=this.owner.$RE),nt.prototype.onStart.call(this)},onAdded:function(){null==this.$_b&&(this.$_b=this.owner.$RE),nt.prototype.onAdded.call(this)},__class__:Ue});var Xe=function(){nt.call(this,"hurt"),this.canReactivate=!0};Xe.__name__=!0,Xe.__super__=nt,Xe.prototype=e(nt.prototype,{onActivate:function(){nt.prototype.onActivate.call(this),this.$Ma.sounds.playEnemyHurt()},getNextStateName:function(){return"$Zc"},get_name:function(){return"$Nc"},onStart:function(){null==this.$Ma&&(this.$Ma=this.owner._internal_getFromParents("$Aa",$e)),nt.prototype.onStart.call(this)},__class__:Xe});var je=function(){nt.call(this,"windup",!0)};je.__name__=!0,je.__super__=nt,je.prototype=e(nt.prototype,{onUpdateState:function(t){nt.prototype.onUpdateState.call(this,t),this.$nc.facePlayer()},keepInState:function(){return this.$nc.distanceToPlayer<75},getNextStateName:function(){return"$Zc"},get_name:function(){return"$Mc"},onStart:function(){null==this.$nc&&(this.$nc=this.owner.$kc),nt.prototype.onStart.call(this)},onAdded:function(){null==this.$nc&&(this.$nc=this.owner.$kc),nt.prototype.onAdded.call(this)},__class__:je});var Ve=function(){Ne.call(this,{health:5,speed:25,attackHitPoints:3,facePlayer:!0})};Ve.__name__=!0,Ve.__super__=Ne,Ve.prototype=e(Ne.prototype,{__class__:Ve});var He=function(){this.$Lb=new js(1.5),Ne.call(this,{health:5,speed:25,attackHitPoints:3,facePlayer:!1})};He.__name__=!0,He.__super__=Ne,He.prototype=e(Ne.prototype,{onAdded:function(){Ne.prototype.onAdded.call(this),this.owner.add(Tn.EArray([Tn.EComponent(this.$qB=new Fe({x:19,y:13},"enemy_surge",250,17))]))},onStart:function(){var t=this;Ne.prototype.onStart.call(this),this.$dA.heading.set__(fi.Left),Xs.create(this.owner,1,function(){t.$qB.fireProjectile(!1)})},onUpdate:function(t){Ne.prototype.onUpdate.call(this,t),this.$Lb.update(t)&&("$Zc"!=(null!=(t=this.$jb).currentState?t.currentState.get_name():null)&&"$qC"!=(null!=(t=this.$jb).currentState?t.currentState.get_name():null)||this.$qB.fireProjectile(!1),this.$Lb.reset())},__class__:He});var Ge=function(){Ne.call(this,{health:3,speed:75,attackHitPoints:3,facePlayer:!0})};Ge.__name__=!0,Ge.__super__=Ne,Ge.prototype=e(Ne.prototype,{__class__:Ge});var Ye=function(){this.$Yc=new js(.1),this.$a=new An,f.call(this)};Ye.__name__=!0,Ye.__super__=f,Ye.prototype=e(f.prototype,{onStart:function(){var i=this;null==this.$HA&&(this.$HA=this.owner.$qD),null==this.$dA&&(this.$dA=this.owner.$rD),null==this.$_b&&(this.$_b=this.owner.$RE),null==this.$Ma&&(this.$Ma=this.owner._internal_getFromParents("$Aa",$e)),f.prototype.onStart.call(this),this.$a.add(this.$HA.value.watch(function(t,e){t<e&&i.$Ma.sounds.playArcadeHurt()},!1)),this.$a.add(this.$Ma.player.stateChanged.connect(Ys(this,this.$Na)))},$Na:function(t,e){"$JC"==t.get_name()&&(this.$_b.collisionsEnabled=!1,this.$Yc.reset())},$zc:function(){var t,e,i,n,r=this,s=this.$Ma.factory.createExplosion("big_explosion_02"),s=(null==s.$w||(e=(t=s.$w).container.position,i=r.$dA.position3d.x,n=-r.$dA.position3d.y,e.x=i,e.y=null==n?i:n,t.container.position.x+=3),s);this.$Ma.fxContainer.add(Tn.EEntity(s)),this.owner.parent.addEntity((new Sn).addComponent(new Ir(.1,function(){var t={x:r.$dA.position3d.x+Bs.native.range(-10,10),y:-r.$dA.position3d.y-20+Bs.native.range(-10,10)},e=r.$Ma.factory.createExplosion("medium_explosion");null!=e.$w&&e.$w.container.position.copyFrom(t),r.$Ma.fxContainer.addEntity(e)})),!0),this.owner.parent.addEntity((new Sn).addComponent(new Ir(.2,function(){var t={x:r.$dA.position3d.x+Bs.native.range(-10,10),y:-r.$dA.position3d.y-20+Bs.native.range(-10,10)},e=r.$Ma.factory.createExplosion("medium_explosion");null!=e.$w&&e.$w.container.position.copyFrom(t),r.$Ma.fxContainer.addEntity(e)})),!0),this.$Ma.sounds.playArcadeExplode()},onUpdate:function(t){var e;f.prototype.onUpdate.call(this,t),this.$_b.collisionsEnabled||(e=this.$Yc).isEnabled&&e.time<=0||!this.$Yc.update(t)||(this.$_b.collisionsEnabled=!0),0==this.$HA.value._value&&null==this.owner.$re&&(this.owner.add(Tn.EComponent(new Ir)),this.$zc())},get_name:function(){return"$yc"},onAdded:function(){null==this.$HA&&(this.$HA=this.owner.$qD),null==this.$dA&&(this.$dA=this.owner.$rD),null==this.$_b&&(this.$_b=this.owner.$RE),f.prototype.onAdded.call(this)},dispose:function(){null!=this.$a&&(this.$a.dispose(),this.$a=null),f.prototype.dispose.call(this)},__class__:Ye});var We=function(){this.$pB=!1,this.$NB=new zr(0,0),bt.call(this)};We.__name__=!0,We.__super__=bt,We.prototype=e(bt.prototype,{onAdded:function(){var e=this;null==this.$dA&&(this.$dA=this.owner.$rD);var t=Tn.EComponent(new $i(fn.fromFlag(1),function(t){e.owner.$RE.disableCollisions();t=t.other.owner.$Aa;(t instanceof ze?t:null).collectCoin(),e.owner.add(Tn.EComponent(new Ir)),Rn.get_soundManager().play(S.sounds.game3.PICKUP_COIN)}));this.owner.add(t)},onStart:function(){null==this.$dA&&(this.$dA=this.owner.$rD),bt.prototype.onStart.call(this);var t=this.$dA.position3d;this.$oB={x:t.x,y:t.y},this.$NB.set(this.$dA.position3d.x,this.$dA.position3d.y),null!=this.$OB&&(this.bounce(this.$OB.x,this.$OB.y),this.$OB=null);t=this.owner._internal_getFromChildren("$w",lr);t.$hF(Bs.native._random.next()*t.symbol.duration)},bounce:function(t,e){var i=this;null==t&&(t=(.5<Bs.native._random.next()?-1:1)*Bs.native.range(15,25)),null==e&&(e=30),null==this.$oB?this.$OB={x:t,y:e}:(this.$pB=!0,this.$NB.x.animateTo(this.$NB.x._value+t,.4),this.$NB.y.animateTo(this.$oB.y+e,.2,Fn.sineOut,function(){i.$NB.y.animateTo(i.$oB.y,.2,Fn.sineIn,function(){i.$PB(),i.$pB=!1})}))},$PB:function(){var t=this.$dA.position3d,e=this.$NB.x._value,i=this.$NB.y._value;t.x=e,t.y=null==i?e:i},onUpdate:function(t){var e;bt.prototype.onUpdate.call(this,t),this.$pB&&((e=this.$NB).x.update(t),e.y.update(t),this.$PB())},__class__:We});var ze=function(){this.$sB={x:0,y:0},this.$RB={x:0,y:0},this.$rB=1,this.snapshots=[],this.currentTime=0,this.velocityDampening={x:1,y:1},this.isInteractive=new Mn(!0),this.isAlive=new Mn(!0),this.isOnFloor=new Mn(!0),this.canDoubleJump=!0,this.$a=new An,N.call(this)};ze.__name__=!0,ze.__super__=N,ze.prototype=e(N.prototype,{onAdded:function(){null==this.$_b&&(this.$_b=this.owner.$RE),null==this.$dA&&(this.$dA=this.owner.$rD),null==this.$hA&&(this.$hA=this.owner.$Hc),null==this.$ya&&(this.$ya=this.owner.$w),null==this.$HA&&(this.$HA=this.owner.$qD),null==this.$qB&&(this.$qB=this.owner.$LC),N.prototype.onAdded.call(this),this.owner.add(Tn.EArray([Tn.EComponent(new Ze),Tn.EComponent(new Qe),Tn.EComponent(new Je),Tn.EComponent(new ti),Tn.EComponent(new Ke),Tn.EComponent(new qe)]))},onStart:function(){var i=this;null==this.$_b&&(this.$_b=this.owner.$RE),null==this.$dA&&(this.$dA=this.owner.$rD),null==this.$hA&&(this.$hA=this.owner.$Hc),null==this.$ya&&(this.$ya=this.owner.$w),null==this.$HA&&(this.$HA=this.owner.$qD),null==this.$qB&&(this.$qB=this.owner.$LC),null==this.$Ma&&(this.$Ma=this.owner._internal_getFromParents("$Aa",$e)),N.prototype.onStart.call(this),this.changeStateTo("$vB",null),this.$a.add(this.$_b.$Tc().connect(Ys(this,this.$SB))),this.$a.add(this.isOnFloor.watch(Ys(this,this.$tB))),this.$a.add(this.owner.$qD.value.watch(function(t,e){0<t&&t<e&&i.hurt(Math.round(e-t))},!1))},collectCoin:function(){var t=this.$Ma.gameModel.score;t.set__(t._value+1)},$SB:function(t){var e;16!=t.other.flags||0==(e=t.type)._hx_index&&-1!=e.currentSides.indexOf(8)&&this.isOnFloor.set__(!0),3==t.other.type&&("exit_trigger"==t.other.data?this.$Ma.finishLevel(0):"endboss_trigger"==t.other.data&&this.$Ma.triggerBossBattle())},$tB:function(t,e){t?this.changeStateTo("$VB",null):"$vB"==(null!=this.currentState?this.currentState.get_name():null)&&this.changeStateTo("$KC",null)},hurt:function(t){"$kC"!=(null!=this.currentState?this.currentState.get_name():null)&&this.changeStateTo("$kC",null);var e=this.$Ma.gameModel.score._value,t=e<t?e:t;if((i=this.$Ma.gameModel.score).set__(i._value-t),!this.$Ma.isBossBattle)for(var i=0,n=t;i<n;){++i;var r=this.$dA.position3d,s=r.x,o=r.y,a=0,r=Bs.native.range(5,15),o={x:s,y:o};o.x+=a,o.y+=r;o=this.$Ma.spawnCoin(o,Bs.native.range(-75,-125),Bs.native.range(40,60));null!=o.$RE&&o.$RE.disableCollisions()}},jump:function(){this.isOnFloor._value?this.$QB.didJump=!0:this.$QB.didDoubleJump=!0,this.changeStateTo("$JC",null)},shoot:function(){this.$QB.didShoot=!0,this.$qB.fireProjectile(!0)},die:function(){this.$QB.didDie=!0,this.changeStateTo("$lC",null)},drown:function(){this.die(),this.$ya.container.visible=!1;var t,e=(new Sn).add(Tn.EArray([Tn.EComponent(S.animations.get("lava_splash",S.animationLibraries.get_currentGame())),Tn.EComponent(new kr)])),e=(null==e.$w||((t=e.$w.container.position).x=this.$ya.container.position.x,t.y=19),e);this.$Ma.worldElementContainer.add(Tn.EEntity(e))},onUpdate:function(t){for(N.prototype.onUpdate.call(this,t),this.currentTime+=t;0<this.snapshots.length&&this.currentTime-this.snapshots[0].timeStamp>this.$rB;)this.snapshots.shift();var e;this.$QB={timeStamp:this.currentTime,yPos:this.$dA.position3d.y},this.snapshots.push(this.$QB),0==this.$HA.value._value?"$lC"!=(null!=this.currentState?this.currentState.get_name():null)&&this.die():this.$dA.position3d.y<-20?this.drown():this.isAlive._value&&this.isInteractive._value&&(e=this.$dA.position3d,t=this.$RB,(i={x:e.x,y:e.y}).x-=t.x,i.y-=t.y,this.$sB=i,e=this.$RB,i=this.$dA.position3d,e.x=i.x,e.y=i.y,this.isOnFloor._value&&1<Math.abs(this.$sB.y)&&this.changeStateTo("$KC",null),"$kC"!=(null!=this.currentState?this.currentState.get_name():null)&&(this.$_b.velocity.x=115*this.velocityDampening.x,this.$hA.buttonUp.wasPressed._value&&(this.isOnFloor._value||this.canDoubleJump)&&(this.isOnFloor._value||(this.canDoubleJump=!1),this.jump())),this.$hA.buttonAction1.wasPressed._value&&this.shoot());var i=null!=this.currentState?this.currentState.get_name():null;this.$QB.wasIdle="$vB"==i},dispose:function(){null!=this.$a&&(this.$a.dispose(),this.$a=null),N.prototype.dispose.call(this)},__class__:ze});var qe=function(){it.call(this,"player_dazed",!0)};qe.__name__=!0,qe.__super__=it,qe.prototype=e(it.prototype,{onActivate:function(){it.prototype.onActivate.call(this),this.$HA.value.set__(0),this.$rA.isAlive.set__(!1),this.$_b.velocity.x=0},get_name:function(){return"$lC"},onStart:function(){null==this.$rA&&(this.$rA=this.owner.$Aa),null==this.$HA&&(this.$HA=this.owner.$qD),null==this.$_b&&(this.$_b=this.owner.$RE),it.prototype.onStart.call(this)},onAdded:function(){null==this.$rA&&(this.$rA=this.owner.$Aa),null==this.$HA&&(this.$HA=this.owner.$qD),null==this.$_b&&(this.$_b=this.owner.$RE),it.prototype.onAdded.call(this)},__class__:qe});var Je=function(){it.call(this,"player_jump",!0)};Je.__name__=!0,Je.__super__=it,Je.prototype=e(it.prototype,{onActivate:function(){it.prototype.onActivate.call(this),this.$rA.isOnFloor.set__(!1)},get_name:function(){return"$KC"},onStart:function(){null==this.$rA&&(this.$rA=this.owner.$Aa),it.prototype.onStart.call(this)},onAdded:function(){null==this.$rA&&(this.$rA=this.owner.$Aa),it.prototype.onAdded.call(this)},__class__:Je});var Ke=function(){it.call(this,"player_hurt",!0)};Ke.__name__=!0,Ke.__super__=it,Ke.prototype=e(it.prototype,{onActivate:function(){it.prototype.onActivate.call(this);var t,e,i,n,r=this.owner,s=[16057380],o=new An;null!=r.$w&&(t=r.$w,e=new or(s[0],1),t.container.filters=[e],i=0,o.add(Vs.create(r.parent,.05,1,function(){var t=i+=.5;e.update(s[(0|t)%s.length],1==e.multiplier?0:1)})),n=r.parent,r=(new Sn).addComponent(new Ir(.1,function(){t.container.filters=null})),n.addEntity(r,!0),o.add(r)),this.$_b.velocity.x=-180*this.$rA.velocityDampening.x,this.$_b.velocity.y=-300*this.$rA.velocityDampening.x;r=this.$_b;r.position.y=r.step.y=r.$wE.y=r.position.y-1,this.$rA.isOnFloor.set__(!1),this.$Ma.sounds.playerHurt()},get_name:function(){return"$kC"},onStart:function(){null==this.$rA&&(this.$rA=this.owner.$Aa),null==this.$_b&&(this.$_b=this.owner.$RE),null==this.$Ma&&(this.$Ma=this.owner._internal_getFromParents("$Aa",$e)),it.prototype.onStart.call(this)},onAdded:function(){null==this.$rA&&(this.$rA=this.owner.$Aa),null==this.$_b&&(this.$_b=this.owner.$RE),it.prototype.onAdded.call(this)},__class__:Ke});var Ze=function(){it.call(this,Ze._NAME_IDLE,!0)};Ze.__name__=!0,Ze.__super__=it,Ze.prototype=e(it.prototype,{onActivate:function(){it.prototype.onActivate.call(this)},onUpdateState:function(t){it.prototype.onUpdateState.call(this,t),this.$MA==Ze._NAME_MOVE&&0==this.$_b.velocity.x&&(this.$MA=Ze._NAME_IDLE,this.$pA()),this.$MA==Ze._NAME_IDLE&&0<this.$_b.velocity.x&&(this.$MA=Ze._NAME_MOVE,this.$pA())},get_name:function(){return"$vB"},onStart:function(){null==this.$_b&&(this.$_b=this.owner.$RE),it.prototype.onStart.call(this)},onAdded:function(){null==this.$_b&&(this.$_b=this.owner.$RE),it.prototype.onAdded.call(this)},__class__:Ze});var Qe=function(){it.call(this,"player_jump",!0),this.canReactivate=!0};Qe.__name__=!0,Qe.__super__=it,Qe.prototype=e(it.prototype,{onActivate:function(){var t;it.prototype.onActivate.call(this),this.$rA.isOnFloor._value?(this.$_b.velocity.y=-600,this.$Ma.sounds.playerJump()):(this.$_b.velocity.y<0?this.$_b.velocity.y+=-390:this.$_b.velocity.y=Math.min(-390,this.$_b.velocity.y),this.$Ma.sounds.playDoubleJump()),1<this.$_b.position.y&&((t=this.$_b).position.y=t.step.y=t.$wE.y=-1),this.$rA.isOnFloor.set__(!1)},get_name:function(){return"$JC"},onStart:function(){null==this.$rA&&(this.$rA=this.owner.$Aa),null==this.$_b&&(this.$_b=this.owner.$RE),null==this.$Ma&&(this.$Ma=this.owner._internal_getFromParents("$Aa",$e)),it.prototype.onStart.call(this)},onAdded:function(){null==this.$rA&&(this.$rA=this.owner.$Aa),null==this.$_b&&(this.$_b=this.owner.$RE),it.prototype.onAdded.call(this)},__class__:Qe});var ti=function(){it.call(this,"player_idle",!0)};ti.__name__=!0,ti.__super__=it,ti.prototype=e(it.prototype,{onActivate:function(){it.prototype.onActivate.call(this),this.$Ma.sounds.playerLand(),this.$rA.isOnFloor.set__(!0),this.$rA.canDoubleJump=!0},keepInState:function(){return!1},getNextStateName:function(){return"$vB"},get_name:function(){return"$VB"},onStart:function(){null==this.$rA&&(this.$rA=this.owner.$Aa),null==this.$Ma&&(this.$Ma=this.owner._internal_getFromParents("$Aa",$e)),it.prototype.onStart.call(this)},onAdded:function(){null==this.$rA&&(this.$rA=this.owner.$Aa),it.prototype.onAdded.call(this)},__class__:ti});var ei=function(){et.call(this)};ei.__name__=!0,ei.__super__=et,ei.prototype=e(et.prototype,{onActivate:function(){var t=this;et.prototype.onActivate.call(this);var e=this.$Ma.touchUI;null!=e&&e.disable(),this.$Ma.playerEntity.add(Tn.EComponent(new Ir)),this.$Ma.fader.$nA.$A_().animate(0,1,.2,null,function(){t.$Ma.containers.bottom.disposeChildren(),t.$Ma.containers.mid.disposeChildren(),t.$Ma.containers.top.disposeChildren(),t.$Ma.containers.top.add(Tn.EEntity((new Sn).add(Tn.EArray([Tn.EComponent(S.animations.get("bossroom_intro",S.animationLibraries.get_currentGame())),Tn.EComponent(new Fr(function(){t.$Ma.endGame()}))])))),t.$Ma.fader.$nA.$A_().animate(1,0,.2,null,null,0)},0)},get_name:function(){return"$IC"},onStart:function(){null==this.$Ma&&(this.$Ma=this.owner._internal_getFromParents("$Aa",$e)),et.prototype.onStart.call(this)},__class__:ei});var ii=function(){et.call(this)};ii.__name__=!0,ii.__super__=et,ii.prototype=e(et.prototype,{onActivate:function(){var t=this;et.prototype.onActivate.call(this);var e=this.$Ma.touchUI;null!=e&&e.disable(),this.$Ma.worldElementContainer._internal_getFromChildren("$jC").open(),this.owner.addEntity((new Sn).addComponent(new Ir(1,function(){t.$Ma.playerCollidable.velocity.x=115})),!0)},onUpdateState:function(t){et.prototype.onUpdateState.call(this,t),355<this.$Ma.playerCollidable.position.x&&this.$Ma.endGame()},get_name:function(){return"$iC"},onStart:function(){null==this.$Ma&&(this.$Ma=this.owner._internal_getFromParents("$Aa",$e)),et.prototype.onStart.call(this)},__class__:ii});var ni=function(){et.call(this)};ni.__name__=!0,ni.__super__=et,ni.prototype=e(et.prototype,{onActivate:function(){et.prototype.onActivate.call(this);for(var t,e=this.$Ma.populator.unwrapper.unwrap("chunk_bossbattle_x_500",S.animationLibraries.get_currentGame()),i=0;i<e.length;){var n=e[i];++i,this.$Ma.worldElementContainer.add(Tn.EEntity(n)),null!=n.$fC&&(this.$Fc=n,this.$gc=n.$fC)}this.$hc(),this.$Ma.playerCollidable.setXY(70,0),(t=this.$Ma.player.velocityDampening).x=0,t.y=0,(t=this.$Ec.position3d).x=212,t.y=0,this.$Ec.heading.set__(fi.Left),this.$Ma.fxContainer.addEntity((new Sn).add(Tn.EComponent(S.animations.get("bossroom_lighttrail",S.animationLibraries.get_currentGame()).setXY(153,-167)))),this.$La.add(this.$gc.health.watch(Ys(this,this.$Gc)))},$Gc:function(t,e){0==t&&(this.$ec.die(),this.$Ma.player.isInteractive.set__(!1),this.$Ma.finishLevel(3))},$hc:function(){var n=this;return this.$Dc=this.$Ma.factory.createBoss(),function(t){if(null==((i=t.$Aa)instanceof Te?i:null))return;if(null==t.$rD)return;if(null==t.$RE)return;var e=(i=t.$Aa)instanceof Te?i:null,i=t.$rD,t=t.$RE;n.$ec=e,n.$fc=t,n.$Ec=i}(this.$Dc),this.$Ma.playerContainer.addEntity(this.$Dc,!1),this.$Dc},onUpdateState:function(t){et.prototype.onUpdateState.call(this,t)},get_name:function(){return"$dc"},onStart:function(){null==this.$Ma&&(this.$Ma=this.owner._internal_getFromParents("$Aa",$e)),et.prototype.onStart.call(this)},__class__:ni});var ri=function(){et.call(this)};ri.__name__=!0,ri.__super__=et,ri.prototype=e(et.prototype,{onActivate:function(){var t=this;et.prototype.onActivate.call(this);var e=this.$Ma.touchUI;switch(null!=e&&e.disable(),this.$Ma.gameModel.outcome){case 0:this.win();break;case 1:this.lose()}this.owner.addEntity((new Sn).addComponent(new Ir(3,function(){t.$Ma.endGame()})),!0)},win:function(){this.$Ma.showQuote("quote_win"),this.$Ma.playerDisplay.container.visible=!1},lose:function(){this.$Ma.showQuote("quote_lose")},get_name:function(){return"$HC"},onStart:function(){null==this.$Ma&&(this.$Ma=this.owner.$Aa),et.prototype.onStart.call(this)},onAdded:function(){null==this.$Ma&&(this.$Ma=this.owner.$Aa),et.prototype.onAdded.call(this)},__class__:ri});var si=function(){et.call(this)};si.__name__=!0,si.__super__=et,si.prototype=e(et.prototype,{onActivate:function(){var t;et.prototype.onActivate.call(this),(t=this.$Ma.playerCollidable).position.x=t.step.x=t.$wE.x=1e3,(t=this.$Ma.playerCollidable).position.y=t.step.y=t.$wE.y=-100},onDeactivate:function(){et.prototype.onDeactivate.call(this)},onUpdateState:function(t){},get_name:function(){return"$Cc"},onStart:function(){null==this.$Ma&&(this.$Ma=this.owner.$Aa),et.prototype.onStart.call(this)},onAdded:function(){null==this.$Ma&&(this.$Ma=this.owner.$Aa),et.prototype.onAdded.call(this)},__class__:si});var oi=function(t){this.$a=new An,f.call(this),this.$cc=t};oi.__name__=!0,oi.__super__=f,oi.prototype=e(f.prototype,{onAdded:function(){f.prototype.onAdded.call(this),this.$Bc=new PIXI.BitmapText("0",{font:"perfectdos",align:"right"}),this.$Bc.anchor.set(1,0),this.owner.add(Tn.EArray([Tn.EEntity((new Sn).add(Tn.EArray([Tn.EComponent(S.animations.get("counter_coin",S.animationLibraries.get_currentGame()).setXY(-13,-2))]))),Tn.EEntity((new Sn).add(Tn.EArray([Tn.EComponent(new Vt(this.$Bc).setXY(-13,0))])))]))},onStart:function(){var i=this;f.prototype.onStart.call(this),this.$a.add(this.$cc.watch(function(t,e){i.$Bc.text=null==t?"null":""+t}))},get_name:function(){return"$bc"},dispose:function(){null!=this.$a&&(this.$a.dispose(),this.$a=null),f.prototype.dispose.call(this)},__class__:oi});var ai=function(t){f.call(this),this.$HA=t,this.$eB=this.$HA._value};ai.__name__=!0,ai.__super__=f,ai.prototype=e(f.prototype,{onStart:function(){var i=this;null==this._movieSprite&&(this._movieSprite=this.owner.$w),f.prototype.onStart.call(this);var t=this.owner,e=new Sn,n=(new Vt).setXY(38,0);t.add(Tn.EArray([Tn.EEntity(e.add(Tn.EArray([Tn.EComponent(n)])))])),this.$ac=S.animations.getSprite("healthbar_hearts_fill",S.animationLibraries.get_currentGame()),this.$Ac=S.animations.getSprite("healthbar_hearts_mask",S.animationLibraries.get_currentGame()),this.$ac.mask=this.$Ac,n.container.addChild(this.$ac,this.$Ac),this.$h=this.$HA.watch(function(t,e){i.$Ac.scale.x=t/i.$eB})},get_name:function(){return"$_c"},onAdded:function(){null==this._movieSprite&&(this._movieSprite=this.owner.$w),f.prototype.onAdded.call(this)},dispose:function(){null!=this.$h&&(this.$h.dispose(),this.$h=null),f.prototype.dispose.call(this)},__class__:ai});var hi=function(){this.$a=new An,Gt.call(this)};hi.__name__=!0,hi.__super__=Gt,hi.prototype=e(Gt.prototype,{onAdded:function(){Gt.prototype.onAdded.call(this),this.owner.add(Tn.EEntity((new Sn).add(Tn.EArray([Tn.EComponent(this.$ya=new Vt),Tn.EComponent(new us(ps.fromString("100%"),ps.fromString("100%"))),Tn.EEntity((new Sn).add(Tn.EArray([Tn.EComponent(this.$pc=new Ni(42).setHitArea(-100,-150,300,300)),Tn.EEntity((new Sn).add(Tn.EComponent(S.animations.get("button_jump",S.animationLibraries.get_currentGame())))),Tn.EComponent(new us(ms.Relative(42),ms.Relative(42),ms.Relative(33),ps.fromString("100% - 33")))]))),Tn.EEntity((new Sn).add(Tn.EArray([Tn.EComponent(this.$Ya=new Ni(42).setHitArea(-200,-150,300,300)),Tn.EEntity((new Sn).add(Tn.EComponent(S.animations.get("button_shoot",S.animationLibraries.get_currentGame())))),Tn.EComponent(new us(ms.Relative(42),ms.Relative(42),ps.fromString("100% - 33"),ps.fromString("100% - 33")))])))]))))},onUpdate:function(t){var e;Gt.prototype.onUpdate.call(this,t),this.button1Down.set__(this.$Ya.isDown._value),this.$pc.isDown._value?((e=this.axisDirection).x=0,e.y=-1):((e=this.axisDirection).x=0,e.y=0)},dispose:function(){null!=this.$a&&(this.$a.dispose(),this.$a=null),Gt.prototype.dispose.call(this)},__class__:hi});var li=function(t,e,i){null==i&&(i=""),null==e&&(e=1),null==t&&(t=1),this.viewportBottom=new Mn(0),this.viewportTop=new Mn(0),this.viewportRight=new Mn(0),this.viewportLeft=new Mn(0),this.$IE=li.$Uc,this.$vc=li.$Uc,this.$iE=[],f.call(this),this.xMultiplier=t,this.yMultiplier=e,this.id=i};function ui(t,e,i){null==i&&(i=1),null==e&&(e=0),this.entities=[],this.data=t,this.startIndex=e,this.numCells=i}li.__name__=!0,li.__super__=f,li.prototype=e(f.prototype,{setViewOffset:function(t,e){var i=this.$vc,n=li.$Uc;return i.x==n.x&&i.y==n.y?this.$vc={x:t,y:e}:((i=this.$vc).x=t,i.y=null==e?t:e),this},setCameraOffset:function(t,e){var i=this.$IE,n=li.$Uc;return i.x==n.x&&i.y==n.y?this.$IE={x:t,y:e}:((i=this.$IE).x=t,i.y=null==e?t:e),this},onStart:function(){null==this.$ya&&(this.$ya=this.owner.$w),null==this.$Ma&&(this.$Ma=this.owner._internal_getFromParents("$Aa",B)),f.prototype.onStart.call(this),this.$HE=this.$Ma.camera},addLayerEntity:function(t){this.$iE.push(t),this.owner.addEntity(t)},removeLayerEntity:function(t){u.remove(this.$iE,t),t.parent==this.owner&&this.owner.removeEntity(t)},onUpdate:function(t){f.prototype.onUpdate.call(this,t),this.viewportLeft.set__(this.$HE.viewArea.x*this.xMultiplier+this.$IE.x),this.viewportRight.set__(this.viewportLeft._value+this.$HE.viewArea.width),this.viewportTop.set__(this.$HE.viewArea.y*this.yMultiplier+this.$IE.y),this.viewportBottom.set__(this.viewportTop._value+this.$HE.viewArea.height),this.$ya.setXY(-this.viewportLeft._value+this.$vc.x,-this.viewportTop._value+this.$vc.y)},get_name:function(){return"$hE"},onAdded:function(){null==this.$ya&&(this.$ya=this.owner.$w),f.prototype.onAdded.call(this)},__class__:li}),ui.__name__=!0,ui.prototype={__class__:ui};var ci=function(t){return JSON.parse(JSON.stringify(t))},pi=function(t){return JSON.parse(JSON.stringify(t))},di=function(t,e,i){this.$XD=[],this.spawnEnabled=!0,f.call(this),this.moveDirection=t,this.$yD=e,this.$YD=i,this.$xD=new ui({id:"placeholder"}),this.$xD.startIndex=1,this.$xD.numCells=-1,this.$wD=this.$xD,this.$WD=this.$xD};di.__name__=!0,di.__super__=f,di.prototype=e(f.prototype,{onStart:function(){switch(null==this.layer&&(this.layer=this.owner.$hE),null==this.game&&(this.game=this.owner._internal_getFromParents("$Aa",B)),f.prototype.onStart.call(this),this.chunkUnitSize=this.game.chunkUnitSize,this.spawnMargin=this.game.spawnMargin,this.cullMargin=this.game.cullMargin,this.$vD=new _i(this.spawnMargin),this.$VD=new _i(this.cullMargin),this.$yD.chunkUnitSize=this.chunkUnitSize,this.moveDirection){case fi.Down:this.$uD=this.layer.viewportTop,this.$UD=this.layer.viewportBottom;break;case fi.Left:this.$uD=this.layer.viewportRight,this.$UD=this.layer.viewportLeft;break;case fi.Right:this.$uD=this.layer.viewportLeft,this.$UD=this.layer.viewportRight;break;case fi.Up:this.$uD=this.layer.viewportBottom,this.$UD=this.layer.viewportTop}},onUpdate:function(t){f.prototype.onUpdate.call(this,t);var e,i,n=Math.floor(this.$uD._value*this.moveDirection.axisDirection/this.chunkUnitSize),t=Math.floor(this.$UD._value*this.moveDirection.axisDirection/this.chunkUnitSize);for(this.$vD.set(n,t),this.$VD.set(n,t),this.spawnEnabled&&this.$zD();;){if(!(0!=this.$XD.length&&(e=this.$wD).startIndex+e.numCells-1<this.$VD.lower))break;for(var r=this.$YD.depopulate(this.$XD.shift(),this),s=0;s<r.length;)this.layer.removeLayerEntity(r[s++]);0!=this.$XD.length&&(this.$wD=this.$XD[0])}for(;0!=this.$XD.length&&this.$WD.startIndex>this.$VD.upper;)this.$YD.depopulate(this.$XD.pop(),this),0!=this.$XD.length&&(i=this.$XD,this.$WD=i[i.length-1]);0==this.$XD.length&&(this.$wD=this.$xD,this.$WD=this.$xD)},$zD:function(){for(;this.$vD.lower<this.$wD.startIndex;){var t=this.$wD.startIndex-1;if(null==(r=this.$yD.getChunkAtIndex(t<0?0:t,this)))break;for(var e=this.$YD.populate(r,this),i=0;i<e.length;)this.layer.addLayerEntity(e[i++]);this.$XD.unshift(r),this.$wD=r}for(;;){var n=this.$WD;if(!(this.$vD.upper>n.startIndex+n.numCells-1))break;var r,n=this.$WD;if(null==(r=this.$yD.getChunkAtIndex(n.startIndex+n.numCells-1+1,this)))break;for(e=this.$YD.populate(r,this),i=0;i<e.length;)this.layer.addLayerEntity(e[i++]);this.$XD.push(r),this.$WD=r}},get_name:function(){return"$TD"},onAdded:function(){null==this.layer&&(this.layer=this.owner.$hE),f.prototype.onAdded.call(this)},__class__:di});var _i=function(t){null==t&&(t=0),this._offset=t};_i.__name__=!0,_i.prototype={set:function(t,e){t-=this._offset;this.lower=t<0?0:t,t=e+this._offset,this.upper=t<0?0:t},__class__:_i};var fi=function(t,e){this.x=t,this.y=e,this.isHorizontal=0!=t,this.isVertical=0!=e,this.axisDirection=this.isHorizontal?t:e};fi.__name__=!0,fi.prototype={clone:function(){return new fi(this.x,this.y)},__class__:fi};var mi=function(t){this.unwrapper=new vn,f.call(this),this.$YB=t,this.init(null)};mi.__name__=!0,mi.__interfaces__=[q],mi.__super__=f,mi.prototype=e(f.prototype,{init:function(t){var n=this;this.unwrapper.registerTransformer(new En("_placeholder","")),this.unwrapper.registerTransformer(new xn("spawner_",{transformInfo:function(t){return t.willInstantiateSymbol=!1,t},decorateEntity:function(t,e){var i=n.$Ma.factory.create(e.symbolName.split("spawner_")[1]),t=t.$w;return null!=i.$w&&i.$w.container.setTransform(t.container.position.x,t.container.position.y,e.keyframe.scaleX,e.keyframe.scaleY,null,-e.keyframe.skewX,e.keyframe.skewY,e.keyframe.pivotX,e.keyframe.pivotY),null!=i.$rD&&(e=i.$rD,n.$YB.unproject({x:t.container.position.x,y:t.container.y,z:0},e.position3d)),i}})),this.unwrapper.registerTransformer(new bn(new l("_(collider)|(trigger)","g"),{transformInfo:function(t){return t.willInstantiateSymbol=!1,t},decorateEntity:function(t,e){var i=e.keyframe,n=0<=e.symbolName.indexOf("_trigger")?3:2;return t.add(Tn.EComponent(new xs(As.BoxShape(new PIXI.Rectangle(0,0,10*i.scaleX,10*i.scaleY)),n).setData(e.symbolName))),t.add(Tn.EComponent(new vs)),t}})),this.unwrapper.registerTransformer(new xn("wall_collider",{decorateEntity:function(t,e){return t.$RE.flags=16,t.add(Tn.EComponent(new ws)),t}})),this.unwrapper.registerTransformer(new xn("tile_",{decorateEntity:function(t,e){return n.$zB(e)&&t.add(Tn.EArray([Tn.EComponent(vi.fromMovieSprite(e.symbolName+"_colliders",e.libraryName,2,16,0,{x:e.keyframe.scaleX,y:e.keyframe.scaleY})),Tn.EComponent(new vs),Tn.EComponent(new ws)])),t}}))},populate:function(t,e){var i=e.moveDirection,n=i.x,r=i.y,n=n*(i=t.startIndex),r=r*i,i=e.chunkUnitSize,r={x:n,y:r};return r.x*=i,r.y*=i,t.entities=this.unwrapper.unwrap(t.data.id,S.animationLibraries.get_currentGame(),r),t.entities},depopulate:function(t,e){for(var i=t.entities.slice(),n=0,r=t.entities;n<r.length;)r[n++].dispose();return t.entities=[],i},$zB:function(t){return S.animations.has(t.symbolName+"_colliders",t.libraryName)},get_name:function(){return"$yB"},onStart:function(){null==this.$Ma&&(this.$Ma=this.owner._internal_getFromParents("$Aa",B)),f.prototype.onStart.call(this)},__class__:mi});var yi=function(){};yi.__name__=!0,yi.__isInterface__=!0,yi.prototype={__class__:yi};var gi=function(t){this._random=Bs.native,this._sectionIndex=-1,this._chunks=[],this.chunkUnitSize=100,this.defaultNumCells=4,this.maxChunkHistory=100,this.setSection(t)};gi.__name__=!0,gi.__interfaces__=[yi],gi.prototype={setSection:function(t){this._rootSection=t,this._sectionIndex=-1},unpackNextSection:function(){var t,e=null==this._activeSection||0==(null!=(t=this._activeSection).cycles?t.cycles:1);if(e){if(this._sectionIndex++,!(this._sectionIndex<this._rootSection.sections.length))return Cn.warn("No more sections to unpack"),!1;this._activeSection=ci(this._rootSection.sections[this._sectionIndex])}return this.unpackSection(this._activeSection,this._chunks),-1!=(null!=(t=this._activeSection).cycles?t.cycles:1)&&(t=this._activeSection,this._activeSection.cycles=(null!=t.cycles?t.cycles:1)-1),this._chunks.length>this.maxChunkHistory&&(this._chunks=this._chunks.slice(this._chunks.length-this.maxChunkHistory)),!0},unpackSection:function(t,e){if(null==e&&(e=[]),null!=t.chunks)for(var i=0,n=t.chunks;i<n.length;){var r=n[i];if(++i,-1==(null!=r.cycles?r.cycles:1))Cn.warn("Chunk with id ${chunkData.id} is set to loop infinitely. This is not supported.");else for(var s=0,o=null!=r.cycles?r.cycles:1;s<o;)++s,this.unpackChunk(r,e)}if(null!=t.sections)for(i=0,n=t.sections;i<n.length;){var a=n[i];if(++i,-1==(null!=a.cycles?a.cycles:1))Cn.warn("Section with id ${currSectionData.id} is set to loop infinitely. This is only supported for root sections.");else for(s=0,o=null!=a.cycles?a.cycles:1;s<o;)++s,this.unpackSection(a,e)}return e},unpackChunk:function(t,e){var i;0<=t.id.indexOf("|")&&(i=t.id.split("|"),(t=pi(t)).id=Hs.randomElement(i,this._random));var n,t=new ui(t);return n=0!=this._chunks.length?(n=(n=this._chunks)[n.length-1]).startIndex+n.numCells-1:-1,t.startIndex=n+1,0<=t.data.id.indexOf("_x_")?(n=p.parseInt(t.data.id.split("_x_")[1]))%this.chunkUnitSize==0&&(t.numCells=Math.round(n/this.chunkUnitSize)):t.numCells=this.defaultNumCells,e.push(t),e},getChunkAtIndex:function(t,e){for(;;){var i;if(!((0!=this._chunks.length?(i=(n=this._chunks)[n.length-1]).startIndex+i.numCells-1:-1)<t))break;if(!this.unpackNextSection())return Cn.warn("A chunk at index "+t+" was requested, but none exists"),null}for(var n=this._chunks,r=new Os(n,n.length-1,0,1);r.hasNext();){var s=r.next();if(this.isIndexWithinChunk(t,s.value))return s.value}return null},isIndexWithinChunk:function(t,e){return t>=e.startIndex&&t<=e.startIndex+e.numCells-1},__class__:gi};var vi=function(){};vi.__name__=!0,vi.fromMovieSprite=function(t,e,i,n,r,s){null==r&&(r=0),null==n&&(n=0),null==i&&(i=1),null==s&&(s={x:1,y:1});var o=[];return a.iter(S.animations.getMovieSprite(t,e).$fF,function(t){var e=t.layer;null==t.content.$w||null!=(e=e.keyframes[0]).symbol&&(e=e,e=As.BoxShape(new PIXI.Rectangle(Math.round(e.x-e.pivotX*e.scaleX*s.x),Math.round(e.y-e.pivotY*e.scaleY*s.y),Math.round(10*e.scaleX*s.x),Math.round(10*e.scaleY*s.y))),o.push(e))}),new xs(As.Group(o),i,n,r)};var wi=function(){f.call(this)};wi.__name__=!0,wi.__super__=f,wi.prototype=e(f.prototype,{onUpdate:function(t){f.prototype.onUpdate.call(this,t),this.$dA.position3d.x<this.$Ma.cullBounds._from&&this.owner.add(Tn.EComponent(new Ir))},get_name:function(){return"$MB"},onStart:function(){null==this.$dA&&(this.$dA=this.owner.$rD),null==this.$Ma&&(this.$Ma=this.owner._internal_getFromParents("$Aa",B)),f.prototype.onStart.call(this)},onAdded:function(){null==this.$dA&&(this.$dA=this.owner.$rD),f.prototype.onAdded.call(this)},__class__:wi});var xi=function(t){this.valueBounds=new rt(0,179769313486231e294),this.value=new Mn(0),f.call(this),this.value.set__(t)};xi.__name__=!0,xi.__super__=f,xi.prototype=e(f.prototype,{setMaxHealth:function(t){return this.valueBounds.set_to(t),this},setHealth:function(t){return this.value.set__(this.valueBounds.clamp(t)),this},modifyHealth:function(t){return this.value.set__(this.valueBounds.clamp(this.value._value+t)),this.value._value},get_name:function(){return"$qD"},__class__:xi});var bi=function(t){f.call(this),this.$md=t};bi.__name__=!0,bi.__super__=f,bi.prototype=e(f.prototype,{onStart:function(){var i=this;null==this.$HA&&(this.$HA=this.owner.$qD),f.prototype.onStart.call(this),this.$h=this.$HA.value.watch(function(t,e){t<e&&Rn.get_soundManager().play(i.$md)})},get_name:function(){return"$Ld"},onAdded:function(){null==this.$HA&&(this.$HA=this.owner.$qD),f.prototype.onAdded.call(this)},dispose:function(){null!=this.$h&&(this.$h.dispose(),this.$h=null),f.prototype.dispose.call(this)},__class__:bi});var Ei=function(){this.filter=Ei.NO_FILTER,f.call(this)};Ei.__name__=!0,Ei.NO_FILTER=function(t){return t},Ei.INVINCIBILITY_FILTER=function(t){return 0},Ei.__super__=f,Ei.prototype=e(f.prototype,{hit:function(t){var e=this.owner;null!=e.$qD&&e.$qD.modifyHealth(this.filter(-t))},setFilter:function(t){return this.filter=t,this},get_name:function(){return"$JD"},__class__:Ei});var $i=function(t,e){f.call(this),this.$Sd=t,this.$sd=e};$i.__name__=!0,$i.__super__=f,$i.prototype=e(f.prototype,{onStart:function(){var n=this;null==this._collidable&&(this._collidable=this.owner.$RE),f.prototype.onStart.call(this),this.$h=this._collidable.$ZE().connect(function(t){for(var e=0,i=n.$Sd;e<i.length;)0!=(t.other.flags&i[e++])&&n.$sd(t)})},get_name:function(){return"$Rd"},onAdded:function(){null==this._collidable&&(this._collidable=this.owner.$RE),f.prototype.onAdded.call(this)},dispose:function(){null!=this.$h&&(this.$h.dispose(),this.$h=null),f.prototype.dispose.call(this)},__class__:$i});var Ai=function(t){null==t&&(t=""),this.vertical=new Mn(0),this.horizontal=new Mn(0),this.value={x:0,y:0},this.id=t};Ai.__name__=!0,Ai.prototype={__class__:Ai};var Si=function(t){null==t&&(t=""),this.value=new Mn(0),this.wasReleased=new Mn(!1),this.wasPressed=new Mn(!1),this.isPressed=new Mn(!1),this.id=t};function Ti(){this.$ce=[],this.$Be=new $r,this.isActive=!0,f.call(this)}Si.__name__=!0,Si.prototype={__class__:Si},Ti.__name__=!0,Ti.__super__=f,Ti.prototype=e(f.prototype,{mapButton:function(t,e){this.$Be.h[t]=e},mapAxis:function(t,e,i,n,r){this.$ce.push({left:t,right:e,up:i,down:n,axis:r})},update:function(){for(var t=this.$Be.keys();t.hasNext();){var e=t.next(),i=this.$Be.h[e];i.wasPressed._value&&i.wasPressed.set__(!1),i.wasReleased._value&&i.wasReleased.set__(!1);e=Rn.get_keyboard().isDown(e);e&&!i.isPressed._value&&i.wasPressed.set__(!0),!e&&i.isPressed._value&&i.wasReleased.set__(!0),i.isPressed.set__(e),i.value.set__(e?1:0)}for(var n=0,r=this.$ce;n<r.length;){var s=r[n];++n;var o=Rn.get_keyboard().isDown(s.left)?-1:0,a=Rn.get_keyboard().isDown(s.right)?1:0;s.axis.horizontal.set__(o+a);o=Rn.get_keyboard().isDown(s.up)?-1:0,a=Rn.get_keyboard().isDown(s.down)?1:0;s.axis.vertical.set__(o+a);o=s.axis.value,a=s.axis.horizontal._value,s=s.axis.vertical._value;o.x=a,o.y=null==s?a:s,hs.normalize(o)}},get_name:function(){return"$be"},__class__:Ti});var Ci=function(){Ce.call(this)};Ci.__name__=!0,Ci.__super__=Ce,Ci.prototype=e(Ce.prototype,{onStart:function(){null==this.$Ma&&(this.$Ma=this.owner._internal_getFromParents("$Aa",B)),Ce.prototype.onStart.call(this),this.$ae=new Ti,this.$ae.mapButton(38,this.buttonUp),this.$ae.mapButton(40,this.buttonDown),this.$ae.mapButton(37,this.buttonLeft),this.$ae.mapButton(39,this.buttonRight),this.$ae.mapButton(32,this.buttonAction1),this.$ae.mapButton(49,this.buttonAction2),this.$ae.mapButton(50,this.buttonAction3),this.$ae.mapButton(51,this.buttonAction4),this.$ae.mapAxis(37,39,38,40,this.axis1),null!=this.$Ma.touchUI&&(this.$Ae=new Mi(this.$Ma.touchUI),this.$Ae.mapButton(0,this.buttonUp),this.$Ae.mapButton(1,this.buttonDown),this.$Ae.mapButton(2,this.buttonLeft),this.$Ae.mapButton(3,this.buttonRight),this.$Ae.mapButton(4,this.buttonAction1),this.$Ae.mapButton(5,this.buttonAction2),this.$Ae.mapButton(6,this.buttonAction3),this.$Ae.mapButton(7,this.buttonAction4),this.$Ae.mapAxis(8,this.axis1),this.$ae.isActive=!1)},onUpdate:function(t){Ce.prototype.onUpdate.call(this,t),null!=this.$ae&&this.$ae.isActive&&this.$ae.update(),null!=this.$Ae&&this.$Ae.isActive&&this.$Ae.update()},__class__:Ci});var Mi=function(t){this.$ee=.6,this.$de=new $r,this.$Be=new $r,this.isActive=!0,f.call(this),this.$De=t};Mi.__name__=!0,Mi.__super__=f,Mi.prototype=e(f.prototype,{mapButton:function(t,e){this.$Be.set(t,e)},mapAxis:function(t,e){this.$de.set(t,e)},update:function(){var t=this.$de.get(8),e=t.value,i=this.$De.axisDirection;e.x=i.x,e.y=i.y,t.horizontal.set__(t.value.x),t.vertical.set__(t.value.y);e=this.$Be.get(0),i=-t.vertical._value;this.$Ee(e,i<0?0:1<i?1:i),e=this.$Be.get(1),i=t.vertical._value,this.$Ee(e,i<0?0:1<i?1:i),e=this.$Be.get(2),i=-t.horizontal._value,this.$Ee(e,i<0?0:1<i?1:i),e=this.$Be.get(3),i=t.horizontal._value,this.$Ee(e,i<0?0:1<i?1:i),this.$Ee(this.$Be.get(4),this.$De.button1Down._value?1:0),this.$Ee(this.$Be.get(5),this.$De.button2Down._value?1:0),this.$Ee(this.$Be.get(6),this.$De.button3Down._value?1:0),this.$Ee(this.$Be.get(7),this.$De.button4Down._value?1:0)},$Ee:function(t,e){t.value.set__(e),t.wasPressed._value&&t.wasPressed.set__(!1),t.wasReleased._value&&t.wasReleased.set__(!1);e=t.value._value>this.$ee;e&&!t.isPressed._value&&t.wasPressed.set__(!0),!e&&t.isPressed._value&&t.wasReleased.set__(!0),t.isPressed.set__(e)},get_name:function(){return"$Ce"},__class__:Mi});var Ii=function(t,e){this.dieOnZeroHealth=!0,this.$a=new An,N.call(this),this.type=e,this.animationPrefix=t+"_"};Ii.__name__=!0,Ii.__super__=N,Ii.prototype=e(N.prototype,{onAdded:function(){null==this.$dA&&(this.$dA=this.owner.$rD),null==this.$ya&&(this.$ya=this.owner.$w),null==this.$HA&&(this.$HA=this.owner.$qD),N.prototype.onAdded.call(this)},onStart:function(){null==this.$dA&&(this.$dA=this.owner.$rD),null==this.$ya&&(this.$ya=this.owner.$w),null==this.$HA&&(this.$HA=this.owner.$qD),null==this.$Ma&&(this.$Ma=this.owner._internal_getFromParents("$Aa",B)),N.prototype.onStart.call(this),null!=this.$HA&&this.$a.add(this.$HA.value.watch(Ys(this,this.$lb)))},$lb:function(t,e){0==t?this.dieOnZeroHealth&&this.die():t<e&&this.$kD()},$kD:function(){null!=this.owner.$pD&&this.changeStateTo("$pD",null);var t,e,i,n,r=this.owner,s=[16057380],o=new An;null!=r.$w&&(t=r.$w,e=new or(s[0],1),t.container.filters=[e],i=0,o.add(Vs.create(r.parent,.05,1,function(){var t=i+=.5;e.update(s[(0|t)%s.length],1==e.multiplier?0:1)})),n=r.parent,r=(new Sn).addComponent(new Ir(.1,function(){t.container.filters=null})),n.addEntity(r,!0),o.add(r))},die:function(){null!=this.owner.$PD&&this.changeStateTo("$PD",null),null!=this.owner.$TC?this.owner.$TC.explode(0,0,.1):Ir.create(this.owner,.1)},$KD:function(){var t=this.$Ma.viewportBounds,e=this.$dA.position3d.x;return t._from<=e&&e<=t._to||t._to<=e&&e<=t._from},$ba:function(){return this.fallbackStateName},dispose:function(){null!=this.$a&&(this.$a.dispose(),this.$a=null),N.prototype.dispose.call(this)},__class__:Ii}),(ds=function(){nt.call(this,"die")}).__name__=!0,ds.__super__=nt,ds.prototype=e(nt.prototype,{onActivate:function(){nt.prototype.onActivate.call(this),null!=this.$_b&&(this.$_b.dispose(),this.$_b=null)},get_name:function(){return"$PD"},onStart:function(){null==this.$_b&&(this.$_b=this.owner.$RE),nt.prototype.onStart.call(this)},onAdded:function(){null==this.$_b&&(this.$_b=this.owner.$RE),nt.prototype.onAdded.call(this)},__class__:ds}),(Ht=function(){nt.call(this,"hurt")}).__name__=!0,Ht.__super__=nt,Ht.prototype=e(nt.prototype,{getNextStateName:function(){return"$Zc"},get_name:function(){return"$pD"},__class__:Ht});var Pi=function(){nt.call(this,"move",!0)};Pi.__name__=!0,Pi.__super__=nt,Pi.prototype=e(nt.prototype,{get_name:function(){return"$Zc"},__class__:Pi});var Oi=function(){it.call(this,"player_idle",!0)};Oi.__name__=!0,Oi.__super__=it,Oi.prototype=e(it.prototype,{get_name:function(){return"$Ab"},__class__:Oi});var Di=function(t,e){null==t&&(t=1),this.impactSignal=new mr,this.$a=new An,f.call(this),this.hitPoints=t,this.maxRange=e};Di.__name__=!0,Di.__super__=f,Di.prototype=e(f.prototype,{onStart:function(){null==this.$_b&&(this.$_b=this.owner.$RE),null==this.$dA&&(this.$dA=this.owner.$rD),f.prototype.onStart.call(this),this.$ID=this.$dA.position3d.x,this.$a.add(this.$_b.$Tc().connect(Ys(this,this.$SB)))},$SB:function(t){t=t.other.owner;(null==t.$rD||Math.abs(t.$rD.position3d.z-this.$dA.position3d.z)<.5)&&(this.onImpact(),null!=t.$JD&&t.$JD.hit(this.hitPoints))},onImpact:function(){this.impactSignal.emit(),this.$_b.disableCollisions(),null!=this.owner.$TC?this.owner.$TC.explode(0,0,0):this.$jD()},$jD:function(){Ir.create(this.owner)},onUpdate:function(t){null!=this.maxRange&&Math.abs(this.$ID-this.$dA.position3d.x)>this.maxRange&&this.$jD()},get_name:function(){return"$iD"},onAdded:function(){null==this.$_b&&(this.$_b=this.owner.$RE),null==this.$dA&&(this.$dA=this.owner.$rD),f.prototype.onAdded.call(this)},dispose:function(){null!=this.$a&&(this.$a.dispose(),this.$a=null),f.prototype.dispose.call(this)},__class__:Di});var Ri=function(){Y.call(this)};function Li(t){Vt.call(this,new PIXI.Sprite(Rn.assets.getTexture(t,S.files.get_currentGame().manifest.path)))}Ri.__name__=!0,Ri.__super__=Y,Ri.prototype=e(Y.prototype,{onStart:function(){},start:function(t){var o=this;null==this._connection&&(this._connection=Rn.get_sceneManager().currentSceneDefinition.watch(function(t,e){var i;switch(t._hx_index){case 0:i={getInstance:t.c,name:t.name,layer:0};break;case 1:i={getInstance:t.c,name:t.name,layer:t.layer}}var n,r=v.fromString(i.name.split("/").shift()),s=i.name.split("/").pop();switch(r){case 1:if(null==s)n=null;else switch(s){case"easteregg":n=S.sounds.game1.BLACK_HOLE_LOOP_CINEMATIC;break;case"":case"home":case"preloader":n=S.sounds.game1.MUSIC_PROJECT_LASER_TITLE_SCREEN;break;case"intro":n=S.sounds.game1.MUSIC_PROJECT_LASER_CINEMATIC;break;case"lose":n=S.sounds.game1.MUSIC_PROJECT_LASER_GAMEOVER;break;case"play":n=S.sounds.game1.MUSIC_PROJECT_LASER;break;case"win":n=S.sounds.game1.MUSIC_PROJECT_LASER_VICTORY;break;default:n=null}break;case 2:if(null==s)n=null;else switch(s){case"":case"prologue":n=S.sounds.game2.MUSIC_SLUGFEST_CINEMATIC;break;case"easteregg":n=S.sounds.game2.MUSIC_SLUGFEST_CINEMATIC_B;break;case"home":case"intro":n=S.sounds.game2.MUSIC_SLUGFEST_TITLE_SCREEN;break;case"lose":n=S.sounds.game2.MUSIC_SLUGFEST_GAMEOVER;break;case"play":n=S.sounds.game2.MUSIC_SLUGFEST;break;case"win":n=S.sounds.game2.MUSIC_SLUGFEST_VICTORY;break;default:n=null}break;case 3:if(null==s)n=null;else switch(s){case"bossbattle":n=S.sounds.game3.MUSIC_BOSSFIGHT_LOOP;break;case"easteregg":n=S.sounds.game3.MUSIC_BOSSFIGHT_INTRO;break;case"":case"home":case"intro":case"prologue":n=S.sounds.game3.MUSIC_STARCADIA_CINEMATIC_A;break;case"lose":n=S.sounds.game3.MUSIC_STARCADIA_GAMEOVER;break;case"play":n=S.sounds.game3.MUSIC_STARCADIA;break;case"win":n=S.sounds.game3.MUSIC_STARCADIA_VICTORY;break;default:n=null}break;default:n=null}null!=n&&(n!=[]?(r=!0,n==S.sounds.game3.MUSIC_BOSSFIGHT_INTRO&&(r=!1),o.playMusic(n,r)):o.stopMusic())}))},fade:function(t){var e;null==this.$w_||null!=(e=this.$w_.playback)&&e.howl.fade(e.howl.volume(e.id),0,Math.round(1e3*t),e.id)},playMusic:function(t,e){null!=this.$w_&&this.$w_.source==t||(this.stopMusic(),this.$w_={playback:e?null!=Rn.get_soundManager().sounds.h.__keys__[t.__id__]?Rn.get_soundManager().loop(t,1):null:Rn.get_soundManager().play(t,1),source:t})},stopMusic:function(){var t;null!=this.$w_&&(null!=(t=this.$w_.playback)&&t.dispose(),this.$w_=null)},dispose:function(){null!=this._connection&&(this._connection.dispose(),this._connection=null),Y.prototype.dispose.call(this)},__class__:Ri}),Li.__name__=!0,Li.__super__=Vt,Li.prototype=e(Vt.prototype,{__class__:Li});var ki=function(t){f.call(this),this.$HA=t,this.$eB=this.$HA._value};function Fi(){this.$a=new An,Vt.call(this)}ki.__name__=!0,ki.__super__=f,ki.prototype=e(f.prototype,{onStart:function(){var i=this;null==this._movieSprite&&(this._movieSprite=this.owner.$w),f.prototype.onStart.call(this),this._movieSprite.$iF(!0),this.$h=this.$HA.watch(function(t,e){i._movieSprite.$hF(t/i.$eB*i._movieSprite.symbol.duration)})},get_name:function(){return"$DB"},onAdded:function(){null==this._movieSprite&&(this._movieSprite=this.owner.$w),f.prototype.onAdded.call(this)},dispose:function(){null!=this.$h&&(this.$h.dispose(),this.$h=null),f.prototype.dispose.call(this)},__class__:ki}),Fi.__name__=!0,Fi.__super__=Vt,Fi.prototype=e(Vt.prototype,{setHitArea:function(t,e,i,n){return this.container.hitArea=new PIXI.Rectangle(t,e,i,n),this},enable:function(){return this.container.interactive=!0,this.container.buttonMode=!0,this},onAdded:function(){var e=this;Vt.prototype.onAdded.call(this);var t=new Gr;this.$a.add(t.state.watch(Ys(this,this.$M_))),this.owner.addComponent(t),null!=this.$m_&&this.$a.add(Rn.get_keyboard().down.connect(function(t){e.container.visible&&-1!=e.$m_.indexOf(t.key)&&e.owner.$aa.emit()})),this.enable()},$M_:function(t,e){if(PIXI.utils.isMobile.any)switch(t._hx_index){case 0:case 1:this.$n_();break;case 2:case 3:this.$N_()}else switch(t._hx_index){case 0:this.$n_(),this.$o_();break;case 1:this.$O_();break;case 2:this.$N_(),this.$p_();break;case 3:this.$P_()}},$n_:function(){},$N_:function(){},$o_:function(){},$O_:function(){},$p_:function(){},$P_:function(){},dispose:function(){null!=this.$a&&(this.$a.dispose(),this.$a=null),Vt.prototype.dispose.call(this)},__class__:Fi});var Ni=function(t){null==t&&(t=50),this.isDown=new Mn(!1),Fi.call(this),this.$le=t};Ni.__name__=!0,Ni.__super__=Fi,Ni.prototype=e(Fi.prototype,{onAdded:function(){null==this.container.hitArea&&this.setHitArea(-.5*this.$le,-.5*this.$le,this.$le,this.$le),Fi.prototype.onAdded.call(this)},$N_:function(){Fi.prototype.$N_.call(this),this.isDown.set__(!0)},$n_:function(){Fi.prototype.$n_.call(this),this.isDown.set__(!1)},__class__:Ni});var Bi=function(t){this.direction={x:0,y:0},Vt.call(this),this.size=t;t=S.animations.getSprite("touchpad_ring",S.animationLibraries.get_currentGame());this.$Ne=S.animations.getSprite("touchpad_handle",S.animationLibraries.get_currentGame()),this.container.addChild(t,this.$Ne)};Bi.__name__=!0,Bi.__super__=Vt,Bi.prototype=e(Vt.prototype,{onUpdate:function(t){var e;Vt.prototype.onUpdate.call(this,t),this.container.visible&&(e=this.direction,t=this.size,(e={x:e.x,y:e.y}).x*=t,e.y*=t,this.$Ne.position.copyFrom(e))},__class__:Bi});var Ui=function(t){null==t&&(t=!0),this.$Vc=ls.empty(),this.$vc=Ui.$Uc,f.call(this),this.updateEveryFrame=t};Ui.__name__=!0,Ui.__super__=f,Ui.prototype=e(f.prototype,{onStart:function(){null==this.$dA&&(this.$dA=this.owner.$rD),null==this.$YB&&(this.$YB=this.owner._internal_getFromParents("$gE")),this.updatePosition()},onUpdate:function(t){this.updateEveryFrame&&this.updatePosition()},updatePosition:function(){var t=this.owner.$RE;null!=t&&(this.$YB.project(this.$dA.position3d,this.$Vc),t.setXY(this.$Vc.x+this.$vc.x,this.$Vc.y+this.$vc.y))},get_name:function(){return"$wc"},onAdded:function(){null==this.$dA&&(this.$dA=this.owner.$rD),f.prototype.onAdded.call(this)},__class__:Ui});var Xi=function(t){null==t&&(t=!0),this.$Vc=ls.empty(),this.$vc=Xi.$Uc,f.call(this),this.updateEveryFrame=t};Xi.__name__=!0,Xi.__super__=f,Xi.prototype=e(f.prototype,{onStart:function(){null==this.$dA&&(this.$dA=this.owner.$rD),null==this.$YB&&(this.$YB=this.owner._internal_getFromParents("$gE")),this.updatePosition()},onUpdate:function(t){this.updateEveryFrame&&this.updatePosition()},updatePosition:function(){var t,e,i=this.owner.$RE;null!=i&&(t=this.$Vc,e=i.position.x+this.$vc.x,i=i.position.y+this.$vc.y,t.x=e,t.y=null==i?e:i,t.z=0,this.$YB.unproject(this.$Vc,this.$dA.position3d))},get_name:function(){return"$uc"},onAdded:function(){null==this.$dA&&(this.$dA=this.owner.$rD),f.prototype.onAdded.call(this)},__class__:Xi}),(H=function(){}).__name__=!0,H.__isInterface__=!0;var ji=function(){this.heading=new Mn(fi.Right),this.velocity3d=ls.empty(),this.position3d=ls.empty(),f.call(this)};ji.__name__=!0,ji.__super__=f,ji.prototype=e(f.prototype,{onUpdate:function(t){f.prototype.onUpdate.call(this,t);var e=this.position3d,i=this.velocity3d,n=i.x*t,r=i.y*t,t=i.z*t;e.x+=n,e.y+=r,e.z+=t},get_name:function(){return"$rD"},__class__:ji});var Vi=function(t){null==t&&(t=0),this.$ja=0,f.call(this),this.$Ja=t,this.$Ja++};Vi.__name__=!0,Vi.$ka=function(t,e){var i;return t.position3d.z==e.position3d.z?(i=t.position3d.y-e.position3d.y)<0?-1:0<i?1:0:(i=t.position3d.z-e.position3d.z)<0?-1:0<i?1:0},Vi.__super__=f,Vi.prototype=e(f.prototype,{onUpdate:function(t){if(f.prototype.onUpdate.call(this,t),this.$ja%this.$Ja==0){Gs.depthSort(this.owner,"$rD",Vi.$ka);for(var e=this.owner.firstChild;null!=e;){var i,n=e.next;null!=e.$w&&((i=e.$w).useLayerIndex=!0,i.reparentContainer()),e=n}}this.$ja++,this.$ja%=this.$Ja},get_name:function(){return"$Ia"},__class__:Vi});var Hi=function(t,e){null==e&&(e=!0),null==t&&(t=!1),this.$Xc=ls.empty(),this.$xc=1,f.call(this),this.$xc=t?-1:1,this.autoUpdate=e};Hi.__name__=!0,Hi.__interfaces__=[H],Hi.__super__=f,Hi.prototype=e(f.prototype,{onStart:function(){null==this.$ya&&(this.$ya=this.owner.$w),null==this.$dA&&(this.$dA=this.owner.$rD),null==this.$Ma&&(this.$Ma=this.owner._internal_getFromParents("$Aa",B)),f.prototype.onStart.call(this),this.autoUpdate||this.updateProjection()},onUpdate:function(t){f.prototype.onUpdate.call(this,t),this.autoUpdate&&this.updateProjection()},updateProjection:function(){this.$Ma.worldProjection.project(this.$dA.position3d,this.$Xc),this.$ya.container.position.set(this.$Xc.x,this.$Xc.y),this.$ya.container.scale.x=this.$dA.heading._value.axisDirection*this.$xc},get_name:function(){return"$Wc"},onAdded:function(){null==this.$ya&&(this.$ya=this.owner.$w),null==this.$dA&&(this.$dA=this.owner.$rD),f.prototype.onAdded.call(this)},__class__:Hi});var Gi=function(){this.zToXYProjection={x:0,y:0},this.matrix=new PIXI.Matrix,f.call(this)};function Yi(){this.$a=new An,this.containers=new tr,f.call(this)}function Wi(){this.$D=new us(ps.fromString("100%"),ps.fromString("100%")),this.sceneHeight=480,this.sceneWidth=850,Yi.call(this)}Gi.__name__=!0,Gi.__interfaces__=[H],Gi.__super__=f,Gi.prototype=e(f.prototype,{project:function(t,e){return null==e&&(e=ls.empty()),this.matrix.apply(t,e),e.x+=t.z*this.zToXYProjection.x,e.y+=t.z*this.zToXYProjection.y,e.z=t.z,e},unproject:function(t,e){null==e&&(e=ls.empty());t={x:t.x,y:t.y,z:t.z};return t.x-=t.z*this.zToXYProjection.x,t.y-=t.z*this.zToXYProjection.y,this.matrix.applyInverse(t,e),e},get_name:function(){return"$gE"},__class__:Gi}),Yi.__name__=!0,Yi.__super__=f,Yi.prototype=e(f.prototype,{gotoScene:function(t,e){null!=this.$A&&this.$A.goto(t,e)},onAdded:function(){f.prototype.onAdded.call(this),this.owner.addComponent(this.containers)},onUpdate:function(t){f.prototype.onUpdate.call(this,t),null!=this.$b&&this.$b.update(t)&&(this.$b.complete(),this.$b=null)},$B:function(){this.isTransitioning=!1},$c:function(){null!=this.owner&&this.owner.dispose(),this.isTransitioning=!1},$C:function(){var t,e=this.id;switch(e._hx_index){case 0:t={getInstance:e.c,name:e.name,layer:0};break;case 1:t={getInstance:e.c,name:e.name,layer:e.layer}}return t.name},get_name:function(){return"$_"},onStart:function(){null==this.$A&&(this.$A=this.owner._internal_getFromParents("$kF")),f.prototype.onStart.call(this)},dispose:function(){null!=this.containers&&(this.containers.dispose(),this.containers=null),null!=this.$a&&(this.$a.dispose(),this.$a=null),f.prototype.dispose.call(this)},__class__:Yi}),Wi.__name__=!0,Wi.__super__=Yi,Wi.prototype=e(Yi.prototype,{onAdded:function(){Yi.prototype.onAdded.call(this),this.owner.addComponent(this.$D),this.containers.main.addComponent(new us(ms.Relative(this.sceneWidth),ms.Relative(this.sceneHeight),ps.fromString("50%"),ps.fromString("50%"),ps.fromString("50%"),ps.fromString("50%")).setScaleMode(fs.Contain)),this.containers.top.addComponent(new us(ps.fromString("100%"),ps.fromString("100%"),ps.fromString("50%"),ps.fromString("50%"),ps.fromString("50%"),ps.fromString("50%")).setScaleMode(fs.Contained(this.sceneWidth,this.sceneHeight))),this.containers.bottom.addComponent(new us(ps.fromString("100%"),ps.fromString("100%"),ps.fromString("50%"),ps.fromString("50%"),ps.fromString("50%"),ps.fromString("50%")).setScaleMode(fs.Contained(this.sceneWidth,this.sceneHeight)))},onStart:function(){Yi.prototype.onStart.call(this),ys.trackPageview(this.$C()),this.$a.add(Rn.stage.resizeSignal.connect(Ys(this,this.$e))),this.$e(Rn.renderer.width/Rn.renderer.resolution|0,Rn.renderer.height/Rn.renderer.resolution|0)},$e:function(t,e){this.$D.resize(t,e)},$E:function(t){var e;switch(t){case 1:e=850;break;case 2:case 3:e=425}switch(this.sceneWidth=e,t){case 1:e=480;break;case 2:case 3:e=240}this.sceneHeight=e},__class__:Wi});var zi=function(t){var e;switch(Wi.call(this),this.$i=t,v.current=this.$i.gameId,this.$i.gameId){case 1:e=2296908;break;case 2:case 3:e=0}Rn.renderer.backgroundColor=e,this.$E(this.$i.gameId)};function qi(t){Wi.call(this),this.$L=t}zi.__name__=!0,zi.__super__=Wi,zi.prototype=e(Wi.prototype,{onAdded:function(){var t,i=this,e=new U;switch(this.$i.gameId){case 1:t=new V(this.sceneWidth,this.sceneHeight);break;case 2:t=new Wt(this.sceneWidth,this.sceneHeight);break;case 3:t=new $e(this.sceneWidth,this.sceneHeight)}this.game=t,this.containers.main.add(Tn.EArray([Tn.EComponent(new Wr(.016666666666666666)),Tn.EComponent(e),Tn.EComponent(this.$i),Tn.EComponent(this.game)])),this.$a.add(this.$i.isPlaying.get_changed().connect(function(t,e){t?i.$x_():i.$X_()})),Wi.prototype.onAdded.call(this)},onStart:function(){Wi.prototype.onStart.call(this),this.game.startGame()},$x_:function(){},$X_:function(){switch(this.$i.outcome){case 0:this.$A.goto(S.scenes.win(this.$i));break;case 1:this.$A.goto(S.scenes.lose(this.$i));break;case 2:this.$A.goto(S.scenes.easterEgg(this.$i));break;case 3:this.$A.goto(S.scenes.outro)}},__class__:zi}),qi.__name__=!0,qi.__super__=Wi,qi.prototype=e(Wi.prototype,{onStart:function(){Wi.prototype.onStart.call(this),this.containers.main.add(Tn.EEntity((new Sn).add(Tn.EComponent(new Dr(Rn.renderer.backgroundColor,1.5*this.sceneWidth,this.sceneHeight,!0,0,1).setXY(.25*-this.sceneWidth,0))))),this.containers.top.add(Tn.EEntity((new Sn).add(Tn.EArray([Tn.EComponent(new an),Tn.EComponent(new us(ms.Relative(this.sceneWidth),ms.Relative(this.sceneHeight),ps.fromString("50%"),ps.fromString("50%"),ps.fromString("50%"),ps.fromString("50%")))])))),this.$M()},removeInteraction:function(){var t=this.containers.main;null!=t.$aa&&t.$aa.dispose()},enableInteraction:function(e){var t=Tn.EComponent(new jr(function(t){e(t),t.stopPropagation()}));this.containers.main.add(t)},$m:function(t){var o=this,a=qi.$l.slice(),e=this.containers.main,i=new Sn,h=S.animations.getMovieSpritePlayer(t,S.animationLibraries.get_currentCutscene()).setXY(.5*this.sceneWidth,0),n=i.add(Tn.EArray([Tn.EComponent(h)]));e.add(Tn.EEntity(n));var e=h.getLabels(),l=new An;n.add(Tn.EComponent(l));function u(){l.dispose(),n.add(Tn.EComponent(new Ir(null,Ys(o,o.$M))))}var c;0<e.list.length?(c=null,(c=function(){var t,e,i,n,r,s;0<a.length?(s=a.shift(),t=0<=s.indexOf("loop"),e=s,i=c,o.removeInteraction(),h.getLabels().hasLabel(e)?(n=function(){o.removeInteraction(),l.dispose(),i()},l.add(h.gotoLabelAndPlayRange(e,t,.025).completed(function(){t||n()})),l.add(Xs.create(o.owner,2,function(){o.enableInteraction(function(t){n()})})),t&&(r=l,s=o.owner,e=(new Sn).addComponent(new Ir(3.5,n)),s.addEntity(e,!0),r.add(e))):i()):(o.removeInteraction(),u())})()):(h.play(!1).completed(u),this.enableInteraction(function(t){u()}))},$M:function(){0<this.$L.length?this.$m(this.$L.shift()):this.$n()},$n:function(){this.$g()},$g:function(){},__class__:qi});var Ji=function(t){var e;switch(t){case 1:e=["game1_intro1_anim","game1_intro2_anim"];break;case 2:e=["game2_intro1_anim","game2_intro2_anim"];break;case 3:e=["game3_cutscene2_anim"]}qi.call(this,e),v.current=t,this.$s=t,Rn.renderer.backgroundColor=0,this.$E(this.$s)};Ji.__name__=!0,Ji.__super__=qi,Ji.prototype=e(qi.prototype,{$g:function(){Rn.get_sceneManager().goto(S.scenes.game(new j(this.$s)))},__class__:Ji});var Ki=function(){qi.call(this,["game3_ending"]),v.current=3,Rn.renderer.backgroundColor=0,this.$E(3)};Ki.__name__=!0,Ki.__super__=qi,Ki.prototype=e(qi.prototype,{$n:function(){var t=this,e=Rn.root.$V_;(e instanceof Ri?e:null).fade(8),this.containers.main.addEntity((new Sn).add(Tn.EArray([Tn.EComponent(S.animations.get("game3_game_not_over_anim",S.animationLibraries.get_currentCutscene()).setXY(.5*this.sceneWidth,0)),Tn.EComponent(new kr(function(){t.owner.addEntity((new Sn).addComponent(new Ir(2.5,Ys(t,t.$g))),!0)}))])))},$j:function(){var e=this;this.containers.main.addEntity((new Sn).add(Tn.EArray([Tn.EComponent(new us(ps.fromString("auto"),ps.fromString("auto"),ms.Relative(135),ms.Relative(200),ps.fromString("50%"),ps.fromString("50%"))),Tn.EComponent(new Li(S.files.game3.manifest.fileNames[0])),Tn.EComponent(new jr(function(t){e.$k()}))]))),this.containers.main.addEntity((new Sn).add(Tn.EArray([Tn.EComponent(new us(ps.fromString("auto"),ps.fromString("auto"),ms.Relative(293),ms.Relative(200),ps.fromString("50%"),ps.fromString("50%"))),Tn.EComponent(new Li(S.files.game3.manifest.fileNames[6])),Tn.EComponent(new jr(function(t){e.$J()}))])))},$J:function(){this.$A.goto(S.scenes.title(1))},$k:function(){yn.exit()},$g:function(){mn.isNativeChinese()?this.$j():this.$k()},__class__:Ki});var Zi=function(t){var e;switch(t){case 1:e=[];break;case 2:e=["game2_prologue1_anim","game2_prologue2_anim"];break;case 3:e=["game3_prologue1_anim"]}qi.call(this,e),v.current=t,this.$s=t,Rn.renderer.backgroundColor=0,this.$E(this.$s)};Zi.__name__=!0,Zi.__super__=qi,Zi.prototype=e(qi.prototype,{$g:function(){Rn.get_sceneManager().goto(S.scenes.title(this.$s))},__class__:Zi}),(q=function(){}).__name__=!0,q.__isInterface__=!0,q.prototype={__class__:q};var Qi=function(){this.terminal=new un,this.$V=0,Wi.call(this),Rn.renderer.backgroundColor=361193};Qi.__name__=!0,Qi.__interfaces__=[q],Qi.__super__=Wi,Qi.prototype=e(Wi.prototype,{show:function(){this.containers.main.add(Tn.EEntity((new Sn).add(Tn.EComponent(new Dr(Rn.renderer.backgroundColor,1.5*this.sceneWidth,this.sceneHeight,!0,0,1).setXY(.25*-this.sceneWidth,0))))),this.containers.main.add(Tn.EEntity((new Sn).add(Tn.EComponent(this.terminal.setFill(16777215).setFontSize(18).setXY(30,30))))),this.terminal.pointerTapSignal.connect(function(t){Rn.get_soundManager().play(S.sounds.shared.PRELOADER_CLICK,1),PIXI.utils.isMobile.android.device&&Rn.stage.requestFullScreen()})},setProgress:function(t){this.$V=t,null!=this.owner&&this.terminal.setProgress(this.$V)},__class__:Qi});var tn=function(t){var e;switch(this.$o=!1,this.$N=!1,t.gameId){case 1:e=["game1_easteregg1_anim","game1_easteregg2_anim"];break;case 2:e=["game2_easteregg1_anim","game2_easteregg2_anim"];break;case 3:e=["game3_boss_intro_anim"]}qi.call(this,e),this.$i=t,Rn.renderer.backgroundColor=0,this.$E(this.$i.gameId)};function en(t){Wi.call(this),this.$i=t,Rn.renderer.backgroundColor=0,this.$E(this.$i.gameId)}tn.__name__=!0,tn.__super__=qi,tn.prototype=e(qi.prototype,{onStart:function(){qi.prototype.onStart.call(this);var t=v.getNext(this.$i.gameId);null!=t?this.owner.add(Tn.EComponent(new X(t,Ys(this,this.$O)))):this.$O()},$O:function(){this.$o=!0,this.$g()},$n:function(){this.$N=!0,this.$g()},$g:function(){var t;this.$o&&this.$N&&(t=v.getNext(this.$i.gameId),3!=this.$i.gameId?Rn.get_sceneManager().goto(S.scenes.prologue(t),new Qn(0,.25)):Rn.get_sceneManager().goto(S.scenes.bossBattle(new j(3))))},__class__:tn}),en.__name__=!0,en.__super__=Wi,en.prototype=e(Wi.prototype,{onStart:function(){Wi.prototype.onStart.call(this),this.$I(),this.$j()},$I:function(){},$j:function(){var t,e,i=this;switch(this.$i.gameId){case 1:t={x:520,y:415};break;case 2:t={x:255,y:210};break;case 3:t={x:135,y:200}}switch(this.containers.main.addEntity((new Sn).add(Tn.EArray([Tn.EComponent(new us(ps.fromString("auto"),ps.fromString("auto"),ms.Relative(t.x),ms.Relative(t.y),ps.fromString("50%"),ps.fromString("50%"))),Tn.EComponent(new Li(S.files.game1.manifest.fileNames[2])),Tn.EComponent(new jr(function(t){i.$k()}))]))),this.$i.gameId){case 1:e={x:698,y:415};break;case 2:e={x:340,y:210};break;case 3:e={x:293,y:200}}this.containers.main.addEntity((new Sn).add(Tn.EArray([Tn.EComponent(new us(ps.fromString("auto"),ps.fromString("auto"),ms.Relative(e.x),ms.Relative(e.y),ps.fromString("50%"),ps.fromString("50%"))),Tn.EComponent(new Li(S.files.game1.manifest.fileNames[6])),Tn.EComponent(new jr(function(t){i.$J()}))])))},$J:function(){Rn.get_soundManager().play(S.sounds.shared.UI_CLICK_1),PIXI.utils.isMobile.android.device&&Rn.stage.requestFullScreen();var t,e=this.$A,i=1<e.history.length?e.history[1]:null;switch(i._hx_index){case 0:t={getInstance:i.c,name:i.name,layer:0};break;case 1:t={getInstance:i.c,name:i.name,layer:i.layer}}0<=t.name.indexOf("bossbattle")?this.gotoScene(S.scenes.bossBattle(new j(3))):this.gotoScene(S.scenes.game(new j(this.$i.gameId)))},$k:function(){Rn.get_soundManager().play(S.sounds.shared.UI_CLICK_2),yn.exit()},__class__:en});var nn=function(t){en.call(this,t)};nn.__name__=!0,nn.__super__=en,nn.prototype=e(en.prototype,{$I:function(){this.containers.main.add(Tn.EEntity((new Sn).add(Tn.EArray([Tn.EComponent(S.animations.getMovieSpritePlayer("game"+this.$i.gameId+"_game_over_anim",S.animationLibraries.get_currentCutscene()).setXY(.5*this.sceneWidth,0)),Tn.EComponent(new on)]))))},__class__:nn});var rn=function(t){en.call(this,t)};rn.__name__=!0,rn.__super__=en,rn.prototype=e(en.prototype,{$I:function(){this.containers.main.add(Tn.EEntity((new Sn).add(Tn.EArray([Tn.EComponent(S.animations.getMovieSpritePlayer("game"+this.$i.gameId+"_win_anim",S.animationLibraries.get_currentCutscene()).setXY(.5*this.sceneWidth,0)),Tn.EComponent(new on)]))))},__class__:rn});var sn=function(t){Wi.call(this),this.$f=t,v.current=t,Rn.renderer.backgroundColor=0,this.$E(t)};sn.__name__=!0,sn.__super__=Wi,sn.prototype=e(Wi.prototype,{onStart:function(){var o=this;Wi.prototype.onStart.call(this);var t=Rn.root.$V_;(t instanceof Ri?t:null).start(null),Rn.get_soundManager().play(S.sounds.shared.UI_START_GAME),this.containers.main.add(Tn.EEntity((new Sn).add(Tn.EComponent(new Dr(Rn.renderer.backgroundColor,1.5*this.sceneWidth,this.sceneHeight,!0,0,1).setXY(.25*-this.sceneWidth,0)))));var e=this.containers.main,t=new Sn,a=S.animations.getMovieSpritePlayer("game"+this.$f+"_title_anim",S.animationLibraries.get_currentCutscene()).setXY(.5*this.sceneWidth,0);e.add(Tn.EEntity(t.add(Tn.EArray([Tn.EComponent(a)]))));t=function(){!function(){var t;switch(o.$f){case 1:t={x:o.sceneWidth/2,y:410};break;case 2:t={x:o.sceneWidth/2,y:203};break;case 3:t={x:o.sceneWidth/2,y:212}}var e=new Mn(!1);Vs.create(o.owner,.1,5,function(){e.set__(!e._value)});var i=o.containers.main,n=new Sn,r=Tn.EComponent(new us(ps.fromString("auto"),ps.fromString("auto"),ms.Relative(t.x),ms.Relative(t.y),ps.fromString("50%"),ps.fromString("50%"))),s=Tn.EComponent(new Li(S.files.game1.manifest.fileNames[7]));i.addEntity(o.$F=n.add(Tn.EArray([r,s,Tn.EComponent(new Lr(e))]))),n=Tn.EComponent(new jr(function(t){Rn.get_soundManager().play(S.sounds.shared.UI_CLICK_1),o.containers.main.$aa.dispose(),o.$F.add(Tn.EComponent(new Ir)),PIXI.utils.isMobile.android.device&&Rn.stage.requestFullScreen(),a.getLabels().hasLabel("start")?a.gotoLabelAndPlayRange("start").completed(Ys(o,o.$g)):o.$g()})),o.containers.main.add(n)}(),a.getLabels().hasLabel("loop")?a.gotoLabelAndPlayRange("loop",!0):a.play(!0)};a.getLabels().hasLabel("intro")?a.gotoLabelAndPlayRange("intro",!1).completed(t):t()},$g:function(){this.$A.goto(S.scenes.intro(this.$f))},$B:function(){Wi.prototype.$B.call(this),X.disposeAssets(v.getPrevious(this.$f))},__class__:sn});var on=function(){this.onStartLoop=new mr,f.call(this)};on.__name__=!0,on.__super__=f,on.prototype=e(f.prototype,{onStart:function(){var t=this;null==this._movieSprite&&(this._movieSprite=this.owner.$w),f.prototype.onStart.call(this),this._movieSprite.getLabels().hasLabel("intro")?this._movieSprite.gotoLabelAndPlay("intro",!1).completed(function(){t.onStartLoop.emit(),t._movieSprite.gotoLabelAndPlayRange("loop",!0)}):this._movieSprite.play(!0)},get_name:function(){return"$K"},onAdded:function(){null==this._movieSprite&&(this._movieSprite=this.owner.$w),f.prototype.onAdded.call(this)},__class__:on});var an=function(){Vt.call(this,this.$H_=new PIXI.Graphics)};an.__name__=!0,an.__super__=Vt,an.prototype=e(Vt.prototype,{onStart:function(){null==this.$Te&&(this.$Te=this.owner._internal_getFromParents("$_",Wi)),Vt.prototype.onStart.call(this),this.$Ue=this.$Te.sceneWidth/this.$Te.sceneHeight,this.$H_.beginFill(0).drawRect(0,-an.$ue,this.$Te.sceneWidth,an.$ue).drawRect(0,this.$Te.sceneHeight,this.$Te.sceneWidth,an.$ue).endFill(),this.$H_.cacheAsBitmap=!0},onUpdate:function(t){Vt.prototype.onUpdate.call(this,t),this.container.visible=(Rn.renderer.width/Rn.renderer.resolution|0)/(Rn.renderer.height/Rn.renderer.resolution|0)<this.$Ue},__class__:an});var hn=function(t,e,i,n,r,s){null==r&&(r=0),null==n&&(n=16777215),null==i&&(i=0),null==e&&(e=30),null==t&&(t=300),this.$V=0,this.$H_=new PIXI.Graphics,Vt.call(this,this.$H_),this.frontColor=n,this.backColor=i,this.$I_=e,this.$i_=t,this.$J_=r,s=null==s?s=as.CENTER:s,this.$j_=s};hn.__name__=!0,hn.__interfaces__=[q],hn.__super__=Vt,hn.prototype=e(Vt.prototype,{setProgress:function(t){this.$V=t,this.draw()},draw:function(){var t;this.$K_(),this.$H_.clear(),this.$i_>this.$I_?this.$H_.beginFill(this.backColor,1).drawRect(this.$k_.x,this.$k_.y,this.$i_,this.$I_).endFill().beginFill(this.frontColor,1).drawRect(this.$k_.x+this.$J_,this.$k_.y+this.$J_,Math.max(this.$V*this.$i_-2*this.$J_,0),this.$I_-2*this.$J_).endFill():(t=this.$V*this.$I_-2*this.$J_,this.$H_.beginFill(this.backColor,1).drawRect(this.$k_.x,this.$k_.y,this.$i_,this.$I_).endFill().beginFill(this.frontColor,1).drawRect(this.$k_.x+this.$J_,this.$k_.y+this.$J_+(this.$I_-t),this.$i_-2*this.$J_,Math.max(t,0)).endFill())},$K_:function(){var t;switch(this.$j_._hx_index){case 4:t=new PIXI.Point(0,-this.$I_);break;case 5:t=new PIXI.Point(-this.$i_,-this.$I_);break;case 6:t=new PIXI.Point(0,0);break;case 7:t=new PIXI.Point(-this.$i_,0);break;case 8:t=new PIXI.Point(-this.$i_/2,-this.$I_/2);break;default:t=new PIXI.Point(0,0)}this.$k_=t},__class__:hn});var ln=function(t){null==t&&(t="");var i=this;Vt.call(this,this.$c_=new PIXI.Text(t)),null!=ln.defaultStyle&&(this.$c_.style=ln.defaultStyle),this.text=new Mn(t,function(t,e){i.$c_.text=t})};ln.__name__=!0,ln.__super__=Vt,ln.prototype=e(Vt.prototype,{setFill:function(t){return this.$c_.style.fill=t,this},setFontSize:function(t){return this.$c_.style.fontSize=t,this},__class__:ln});var un=function(){this.$F_=[cn.Prompt("C:\\8-BIT>","Hello 8-Bit. Welcome to 8-Bit.",!1),cn.Newline,cn.Line("Bad or missing C:\\Who.exe"),cn.Line("Bad or missing C:\\Whatis8bit.exe"),cn.Newline,cn.Line("Truth lies inside medium density fiberboard."),cn.Newline,cn.Line("To extract or compress truth"),cn.Line("Error in CONFIG.SYS line 86"),cn.Newline,cn.Newline,cn.Line("It eats at your soul."),cn.Newline,cn.Prompt("Reading source file(s)"," ....",!1),cn.Prompt("C:\\LOG>","echo lies.log",!1),cn.Line("Your nagging psyche keeps you from discovering who and what you truly are. "),cn.Newline,cn.Loader("$PROGRESS Memory Restored"),cn.Newline,cn.Line("Warning! You will now enter the memory core of 8-Bit."),cn.Line("Do you want to continue the program?"),cn.Prompt("[Y] [Y] ","Y",!0)],this.$f_="",this.$E_=0,this.$V=0,this.pointerTapSignal=new qn,this.completedSignal=new mr,ln.call(this)};un.__name__=!0,un.__super__=ln,un.prototype=e(ln.prototype,{$g_:function(t,e){t=null==t?0:t;this.owner.addEntity((new Sn).addComponent(new Ir(t,e)),!0)},$G_:function(t){var e=this;0<this.$F_.length?(t=null==t?0:t,this.owner.addEntity((new Sn).addComponent(new Ir(t,function(){e.$h_(e.$F_.shift())})),!0)):this.$g_(1,Ys(i=this.completedSignal,i.emit))},$h_:function(t){var n=this;switch(t._hx_index){case 0:var e=this;this.text.set__(e.$f_+=t.line+"\n"),this.$G_(.12);break;case 1:var r=t.userInput,e=this;this.text.set__(e.$f_+=t.cmd);var i,s=function(){for(var t=r.split(""),e=0;e<t.length;){var i=t[e++];n.$g_(.05*(e-1+7)-.05*Math.random(),function(t){return function(){n.text.set__(n.$f_+=t[0])}}([i]))}n.$g_(.05*(r.length+7),function(){n.text.set__(n.$f_+="\n")}),n.$G_(.05*(r.length+8))};t.waitForTap?(i=null,i=new jr(function(t){n.pointerTapSignal.emit(t),s(),i.dispose()}),this.owner.parent.add(Tn.EComponent(i))):s();break;case 2:(e=this).text.set__(e.$f_+="\n"),this.$G_(.06);break;case 3:this.$f_="",this.text.set__(""),this.$G_(.06);break;case 4:this.$E_+=.1,this.$E_=Math.min(this.$E_,this.$V);var o,a,h=_.replace(t.line,"$PROGRESS",(100*this.$E_|0)+"%");this.text.set__(this.$f_+h),this.$E_<1?(o=Ys(this,this.$h_),a=t,this.$g_(.016666666666666666,function(){o(a)})):((e=this).text.set__(e.$f_+=h+"\n"),this.$G_(.12))}},onStart:function(){ln.prototype.onStart.call(this),this.$G_(0)},setProgress:function(t){this.$V=t},__class__:un});var cn=d["com.mediamonks.ui.TerminalEntry"]={__ename__:!0,__constructs__:["Line","Prompt","Newline","Clear","Loader"],Line:((i=function(t){return{_hx_index:0,line:t,__enum__:"com.mediamonks.ui.TerminalEntry",toString:r}}).__params__=["line"],i),Prompt:((i=function(t,e,i){return{_hx_index:1,cmd:t,userInput:e,waitForTap:i,__enum__:"com.mediamonks.ui.TerminalEntry",toString:r}}).__params__=["cmd","userInput","waitForTap"],i),Newline:{_hx_index:2,__enum__:"com.mediamonks.ui.TerminalEntry",toString:r},Clear:{_hx_index:3,__enum__:"com.mediamonks.ui.TerminalEntry",toString:r},Loader:((i=function(t){return{_hx_index:4,line:t,__enum__:"com.mediamonks.ui.TerminalEntry",toString:r}}).__params__=["line"],i)};(yi=function(t,e){null==e&&(e=50),this.$me=new Is(0,0,0,.3),this.$Le=new Is(0,0,0,.2),this.isDown=new Mn(!1),this.upSignal=new qn,this.downSignal=new qn,Fi.call(this),this.$S_=t,this.$le=e}).__name__=!0,yi.__super__=Fi,yi.prototype=e(Fi.prototype,{onAdded:function(){this.$s_=new PIXI.Graphics,this.$ne(this.$Le),this.$q_=new PIXI.Text(this.$S_,new PIXI.TextStyle({fontSize:16,fontFamily:ln.defaultStyle.fontFamily,fontWeight:ln.defaultStyle.fontWeight,fill:16777215})),this.$q_.anchor.set(.5),this.container.addChild(this.$s_,this.$q_),this.setHitArea(-this.$le,-this.$le,2*this.$le,2*this.$le),Fi.prototype.onAdded.call(this)},$ne:function(t){this.$s_.clear().lineStyle(4,16777215,1).beginFill(Math.round((t._value>>16&255)/255*255)<<16|Math.round((t._value>>8&255)/255*255)<<8|Math.round((255&t._value)/255*255),t.a).drawCircle(0,0,this.$le)},$N_:function(){Fi.prototype.$N_.call(this),this.$ne(this.$me),this.isDown.set__(!0),this.downSignal.emit(this)},$n_:function(){Fi.prototype.$n_.call(this),this.$ne(this.$Le),this.isDown.set__(!1),this.upSignal.emit(this)},__class__:yi});var pn=function(){this.isDown=new Mn(!1),this.upSignal=new qn,this.downSignal=new qn,Fi.call(this)};pn.__name__=!0,pn.__super__=Fi,pn.prototype=e(Fi.prototype,{$N_:function(){Fi.prototype.$N_.call(this),this.isDown.set__(!0),this.downSignal.emit(this)},$n_:function(){Fi.prototype.$n_.call(this),this.isDown.set__(!1),this.upSignal.emit(this)},__class__:pn});var dn=function(){};function _n(){}dn.__name__=!0,dn.addSpeedAdjusterKeys=function(){};var fn={fromFlag:function(t){return[t]}};_n.__name__=!0,_n.addHtmlCss=function(){var i=window.document.documentElement;PIXI.utils.isMobile.any?(i.classList.add("is-mobile"),PIXI.utils.isMobile.phone?i.classList.add("is-phone"):PIXI.utils.isMobile.tablet&&i.classList.add("is-tablet")):i.classList.add("is-desktop");function t(t,e){e=t<e,i.classList.add(e?"is-portrait":"is-landscape"),i.classList.remove(e?"is-landscape":"is-portrait")}return t(Rn.renderer.width/Rn.renderer.resolution|0,Rn.renderer.height/Rn.renderer.resolution|0),Rn.stage.resizeSignal.connect(t)};var mn=function(){};mn.__name__=!0,mn.isNativeChinese=function(){return"cn_cn"==gn.language||"cn_en"==gn.language};var yn=function(){};yn.__name__=!0,yn.exit=function(){var t;if(ys.trackEvent("redirect","exit"),mn.isNativeChinese())if(PIXI.utils.isMobile.android.device)t="https://brawlstars.com";else switch(gn.language){case"cn_cn":t="https://link.brawlstars.cn/cn";break;case"cn_en":t="https://link.brawlstars.cn/en";break;default:t="https://link.brawlstars.cn/cn"}else t="https://link.brawlstars.com/"+gn.language;h.location.href=t};var gn=function(){};gn.__name__=!0,gn.init=function(){var t=Rn.url.getQueryString("params","en").split("/");gn.language=t.shift(),null==gn.language&&(gn.language="en"),gn.id1=t.shift(),gn.id2=t.shift()},(ds=function(){}).__name__=!0,ds.__isInterface__=!0,ds.prototype={__class__:ds};var vn=function(){this._transformers=[]};function wn(t){this._override=t}vn.__name__=!0,vn.prototype={unwrap:function(t,e,i){var n=[];return null==i&&(i={x:0,y:0}),this.doUnwrap(t,e,n,i),n},doUnwrap:function(t,u,c,p){var d=this;return a.iter(S.animations.getMovieSprite(t,u).$fF,function(t){var e,i=t.layer;null!=t.content.$w&&null!=(e=i.keyframes[0]).symbol&&function(t,e){if(0<=e.symbolName.indexOf("prefab")){var i={x:p.x,y:p.y};i.x+=e.x-e.pivotX,i.y+=e.y-e.pivotY,d.doUnwrap(e.symbolName,u,c,i)}else{for(var n,r=new $n(t,e,u),s=[],o=0,a=d._transformers;o<a.length;){var h=a[o];++o,h.isMatch(r)&&(r=h.transformInfo(r),s.push(h))}if(!r.willSkip){r.willInstantiateSymbol?0<=e.symbolName.indexOf("tile_")&&(1!=e.scaleX||1!=e.scaleY)&&e.symbol instanceof ar?(n=e.symbol,(t=S.animations.getTexture(n._name,r.libraryName)).baseTexture.mipmap=PIXI.MIPMAP_MODES.OFF,(n=new Vt(new PIXI.TilingSprite(t,Math.ceil(n.texture.width*e.scaleX),Math.ceil(n.texture.height*e.scaleY)))).container.setTransform(e.x-e.pivotX*e.scaleX,e.y-e.pivotY*e.scaleY,1,1,null,-e.skewX,e.skewY,0,0)):(n=S.animations.get(r.symbolName,r.libraryName),d.applyKeyframeTransformToDisplay(n,r.keyframe)):(n=new Vt,d.applyKeyframeTransformToDisplay(n,r.keyframe)),n.container.x+=p.x,n.container.y+=p.y;for(var l=(new Sn).add(Tn.EComponent(n)),o=0;o<s.length;)l=s[o++].decorateEntity(l,r);c.push(l)}}}(t,e)}),c},registerTransformer:function(t){return this._transformers.push(t),t},applyKeyframeTransformToDisplay:function(t,e){var i=e.x,n=e.y,r=e.scaleX,s=e.scaleY,o=e.skewX,a=e.skewY,h=e.alpha,l=e.tintColor,u=e.tintAmount;0!=u?(null==e.tintFilter?e.tintFilter=new or(l,u):e.tintFilter.update(l,u),null!=t.container.filters&&t.container.filters[0]==e.tintFilter||(t.container.filters=[e.tintFilter])):null!=t.container.filters&&(t.container.filters=null),t.container.setTransform(i,n,r,s,null,-o,a,e.pivotX,e.pivotY),t.container.alpha=h},__class__:vn},wn.__name__=!0,wn.__interfaces__=[ds],wn.prototype={isMatch:function(t){return null!=this._override&&null!=this._override.isMatch&&this._override.isMatch(t)},transformInfo:function(t){return null!=this._override&&null!=this._override.transformInfo?this._override.transformInfo(t):t},decorateEntity:function(t,e){return null!=this._override&&null!=this._override.decorateEntity?this._override.decorateEntity(t,e):t},__class__:wn};var xn=function(t,e){wn.call(this,e),this._symbolNameSubstring=t,null!=e&&null!=e.isMatch&&Cn.warn("IsMatch of the override will not be used")};xn.__name__=!0,xn.__super__=wn,xn.prototype=e(wn.prototype,{isMatch:function(t){return 0<=t.symbolName.indexOf(this._symbolNameSubstring)},__class__:xn});var bn=function(t,e){wn.call(this,e),this._regex=t,null!=e&&null!=e.isMatch&&Cn.warn("IsMatch of the override will not be used")};bn.__name__=!0,bn.__super__=wn,bn.prototype=e(wn.prototype,{isMatch:function(t){return this._regex.match(t.symbolName)},__class__:bn});var En=function(t,e,i){wn.call(this,i),this._symbolNameSubstring=t,this._replaceBy=e,null!=i&&(null!=i.isMatch&&Cn.warn("IsMatch of the override will not be used"),null!=i.transformInfo&&Cn.warn("transformInfo of the override will not be used"))};En.__name__=!0,En.__super__=wn,En.prototype=e(wn.prototype,{isMatch:function(t){return 0<=t.symbolName.indexOf(this._symbolNameSubstring)},transformInfo:function(t){return t.symbolName=_.replace(t.symbolName,this._symbolNameSubstring,this._replaceBy),t},__class__:En});var $n=function(t,e,i){this.willInstantiateSymbol=!0,this.willSkip=!1,this.animator=t,this.keyframe=e,this.libraryName=i,this.symbolName=this.keyframe.symbolName};$n.__name__=!0,$n.prototype={__class__:$n};var An=function(){f.call(this),this.$MF=[]};An.__name__=!0,An.__super__=f,An.prototype=e(f.prototype,{add:function(t){return this.$MF.push(t),this},onRemoved:function(){this.$nF()},dispose:function(){f.prototype.dispose.call(this),this.$nF()},$nF:function(){var t=this.$MF;this.$MF=[];for(var e=0;e<t.length;)t[e++].dispose()},get_name:function(){return"$mF"},__class__:An});var Sn=function(){this.timeScale=1,this.firstComponent=null,this.next=null,this.firstChild=null,this.parent=null};Sn.__name__=!0,Sn.__interfaces__=[n],Sn.prototype={setTimeScale:function(t){return this.timeScale=t,this},add:function(t){switch(t._hx_index){case 0:this.addEntity(t.entity);break;case 1:this.addComponent(t.component);break;case 2:for(var e=t.structure,i=0;i<e.length;)this.add(e[i++])}return this},addComponent:function(t){null!=t.owner&&t.owner.removeComponent(t);var e=t.get_name(),i=this[e];null!=i&&this.removeComponent(i),this[e]=t;for(var n=null,r=this.firstComponent;null!=r;)r=(n=r).next;return null!=n?n.next=t:this.firstComponent=t,t.owner=this,t.next=null,t.onAdded(),this},removeComponent:function(t){for(var e=null,i=this.firstComponent;null!=i;){var n=i.next;if(i==t)return null==e?this.firstComponent=n:(e.owner=this,e.next=n),delete this[i.get_name()],0!=(1&i._flags)&&(i.onStop(),i._flags&=-2),i.onRemoved(),i.owner=null,!(i.next=null);e=i,i=n}return!1},addEntity:function(t,e){if(null==e&&(e=!0),null!=t.parent&&t.parent.removeEntity(t),t.parent=this,e){for(var i=null,n=this.firstChild;null!=n;)n=(i=n).next;null!=i?i.next=t:this.firstChild=t}else t.next=this.firstChild,this.firstChild=t;return this},removeEntity:function(t){for(var e=null,i=this.firstChild;null!=i;){var n=i.next;if(i==t){null==e?this.firstChild=n:e.next=n,i.parent=null,i.next=null;break}e=i,i=n}},disposeChildren:function(){for(;null!=this.firstChild;)this.firstChild.dispose()},dispose:function(){for(null!=this.parent&&this.parent.removeEntity(this);null!=this.firstComponent;)this.firstComponent.dispose();this.disposeChildren()},_internal_getFromParents:function(t,e){for(var i=this;;){var n=i[t];if(null!=e&&(n=Mr.__downcastCheck(n,e)?n:null),null!=n)return n;if(null==(i=i.parent))break}return null},_internal_getFromChildren:function(t,e){var i=this[t];if(null!=e&&(i=Mr.__downcastCheck(i,e)?i:null),null!=i)return i;for(var n=this.firstChild;null!=n;){if(null!=(i=n._internal_getFromChildren(t,e)))return i;n=n.next}return null},__class__:Sn};var Tn=d["flambe._Entity.EntityType"]={__ename__:!0,__constructs__:["EEntity","EComponent","EArray"],EEntity:((i=function(t){return{_hx_index:0,entity:t,__enum__:"flambe._Entity.EntityType",toString:r}}).__params__=["entity"],i),EComponent:((i=function(t){return{_hx_index:1,component:t,__enum__:"flambe._Entity.EntityType",toString:r}}).__params__=["component"],i),EArray:((i=function(t){return{_hx_index:2,structure:t,__enum__:"flambe._Entity.EntityType",toString:r}}).__params__=["structure"],i)},Cn=function(){};Cn.__name__=!0,Cn.warn=function(t,e){Cn.log(2,gr.withFields(t,e))},Cn.log=function(t,e){switch(e=Cn._tagPrefix+e,t){case 1:h.console.info(e);break;case 2:h.console.warn(e);break;case 3:h.console.error(e)}};var Mn=function(t,e){this._value=t,this._changed=null!=e?new On(e):null};function In(t,e){this._next=null,this._signal=t,this._listener=e,this.stayInList=!0}function Pn(t){this._head=null!=t?new In(this,t):null,this._deferredTasks=null}Mn.__name__=!0,Mn.prototype={watch:function(t,e){return null==e&&(e=!0),e&&t(this._value,this._value),this.get_changed().connect(t)},set__:function(t){var e=this._value;return t!=e&&(this._value=t,null!=this._changed&&this._changed.emit(t,e)),t},get_changed:function(){return null==this._changed&&(this._changed=new On),this._changed},dispose:function(){(this._value=null)!=this._changed&&this._changed.dispose()},setValue:function(t){this._value=t},__class__:Mn},In.__name__=!0,In.__interfaces__=[n],In.prototype={once:function(){return this.stayInList=!1,this},dispose:function(){null!=this._signal&&(this._signal.disconnect(this),this._signal=null)},__class__:In},Pn.__name__=!0,Pn.prototype={connectImpl:function(t,e){var i=this,n=new In(this,t);return this._head==Pn.DISPATCHING_SENTINEL?this.defer(function(){i.listAdd(n,e)}):this.listAdd(n,e),n},disconnect:function(t){var e=this;this._head==Pn.DISPATCHING_SENTINEL?this.defer(function(){e.listRemove(t)}):this.listRemove(t)},defer:function(t){for(var e=null,i=this._deferredTasks;null!=i;)i=(e=i).next;t=new yr(t);null!=e?e.next=t:this._deferredTasks=t},willEmit:function(){var t=this._head;return this._head=Pn.DISPATCHING_SENTINEL,t},didEmit:function(t){this._head=t;var e=this._deferredTasks;for(this._deferredTasks=null;null!=e;)e.fn(),e=e.next},listAdd:function(t,e){if(e)t._next=this._head,this._head=t;else{for(var i=null,n=this._head;null!=n;)n=(i=n)._next;null!=i?i._next=t:this._head=t}},listRemove:function(t){for(var e=null,i=this._head;null!=i;){if(i==t){var n=i._next;return void(null==e?this._head=n:e._next=n)}i=(e=i)._next}},dispose:function(){for(;null!=this._head;){var t=this._head._next;this._head.dispose(),this._head=t}},__class__:Pn};var On=function(t){Pn.call(this,t)};function Dn(t){this._parts=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],this.url=t;var e=new l("^(?:(?![^:@]+:[^:@/]*@)([^:/?#.]+):)?(?://)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:/?#]*)(?::(\\d*))?)(((/(?:[^?#](?![^?#/]*\\.[^?#/.]+(?:[?#]|$)))*/?)?([^?#/]*))(?:\\?([^#]*))?(?:#(.*))?)","");e.match(t);for(var i,n=0,r=this._parts.length;n<r;){var s=n++;this[this._parts[s]]=e.matched(s)}if(null!=this.query){n=new Sr,r=0;for(var o=this.query.split("&");r<o.length;){var a=o[r];++r,n.h[a.split("=")[0]]=a.split("=")[1]}i=n}else i=new Sr;this.queryString=i}On.__name__=!0,On.__super__=Pn,On.prototype=e(Pn.prototype,{connect:function(t,e){return null==e&&(e=!1),this.connectImpl(t,e)},emit:function(t,e){var i=this;this._head==Pn.DISPATCHING_SENTINEL?this.defer(function(){i.emitImpl(t,e)}):this.emitImpl(t,e)},emitImpl:function(t,e){for(var i=this.willEmit(),n=i;null!=n;)n._listener(t,e),n.stayInList||n.dispose(),n=n._next;this.didEmit(i)},__class__:On}),Dn.__name__=!0,Dn.parse=function(t){return new Dn(t)},Dn.prototype={toString:function(){for(var t="URL: "+this.url+"\n",e=0,i=this._parts.length;e<i;){var n=e++;t+=this._parts[n]+": "+p.string(c.field(this,this._parts[n]))+(n==this._parts.length-1?"":"\n")}return t},getQueryString:function(t,e){return Object.prototype.hasOwnProperty.call(this.queryString.h,t)?this.queryString.h[t]:e},getQueryStringAsInt:function(t,e){return Object.prototype.hasOwnProperty.call(this.queryString.h,t)?p.parseInt(this.queryString.h[t]):e},getQueryStringAsFloat:function(t,e){return Object.prototype.hasOwnProperty.call(this.queryString.h,t)?parseFloat(this.queryString.h[t]):e},getQueryStringAsBool:function(t,e){return Object.prototype.hasOwnProperty.call(this.queryString.h,t)?"true"==this.queryString.h[t]:e},__class__:Dn};var Rn=function(){};Rn.__name__=!0,Rn.__interfaces__=[n],Rn.init=function(t,e){var i=new An;Rn.root=(new Sn).addComponent(new Vt).addComponent(i),PIXI.utils.skipHello(),Rn.renderer=new PIXI.Renderer(e),t.appendChild(Rn.renderer.view),i.add(Rn.platform=new zn),i.add(Rn.stage=new sr(t)),i.add(Rn.assets=new Xn),i.add(_n.addHtmlCss()),i.add(Rn.hidden.get_changed().connect(Rn.onHiddenChanged)),i.add(Rn.stage.resizeSignal.connect(Rn.onResize,!0))},Rn.getResolution=function(){var t=2;Object.prototype.hasOwnProperty.call(Rn.url.queryString.h,"quality")&&"low"==Rn.url.queryString.h.quality&&(t=1);var e=window.devicePixelRatio;return null!=e&&!isNaN(e)||(e=1),Math.min(e,t)},Rn.get_soundManager=function(){return null==Rn.soundManager&&Rn.root.$mF.add(Rn.soundManager=new Ts(null)),Rn.soundManager},Rn.onResize=function(t,e){},Rn.onHiddenChanged=function(t,e){t?Howler.mute(!0):Howler.mute(Rn.get_soundManager().muted._value)},Rn.get_sceneManager=function(){return null==Rn.sceneManager&&Rn.root.addEntity((new Sn).addComponent(new Vt).addComponent(Rn.sceneManager=new er(3))),Rn.sceneManager},Rn.get_keyboard=function(){return null==Rn.keyboard?Rn.keyboard=Rn.platform.getKeyboard():Rn.keyboard},Rn.prototype={dispose:function(){x.dispose(),Rn.root.dispose()},__class__:Rn};var Ln=function(t,e){null==t&&(t=1),this._realDt=0,f.call(this),this.$te=e,this.scale=new kn(t)};Ln.__name__=!0,Ln.__super__=f,Ln.prototype=e(f.prototype,{onStart:function(){f.prototype.onStart.call(this),null==this.$te&&(this.$te=this.owner)},onUpdate:function(t){0<this._realDt&&(t=this._realDt,this._realDt=0),this.scale.update(t),this.$te.timeScale=this.scale._value},get_name:function(){return"$Se"},__class__:Ln}),(Ht=function(t){this._capacity=2147483647,this._allocator=t,this._freeObjects=[]}).__name__=!0,Ht.__interfaces__=[n],Ht.prototype={take:function(){return 0<this._freeObjects.length?this._freeObjects.pop():this._allocator()},put:function(t){this._freeObjects.length<this._capacity&&this._freeObjects.push(t)},dispose:function(){if((this._allocator=null)!=this._freeObjects)for(;0<this._freeObjects.length;){var t=this._freeObjects.shift();Mr.__implements(t,n)&&Mr.__cast(t,n).dispose()}},__class__:Ht};var kn=function(t,e,i){this._behavior=null,Mn.call(this,t),null!=e&&null!=i&&this.setBounds(e,i)};kn.__name__=!0,kn.take=function(t,e,i,n){var r=kn.POOL.take();return r.setValue(t),null!=e&&null!=i?r.setBounds(e,i):r.clearBounds(),null!=n&&r.get_changed().connect(n),r},kn.put=function(t){return null!=t&&(t.dispose(),kn.POOL.put(t)),null},kn.allocate=function(){return new kn(NaN)},kn.__super__=Mn,kn.prototype=e(Mn.prototype,{setBounds:function(t,e){null!=this.bounds?this.bounds.set(t,e):this.bounds=new rt(t,e),this.set__(this._value)},clearBounds:function(){this.bounds=null},set__:function(t){return(this._behavior=null)==this.bounds?Mn.prototype.set__.call(this,t):Mn.prototype.set__.call(this,this.bounds.clamp(t))},onLeaderValueChanged:function(t,e){null!=this.bounds&&null!=this.leader.bounds?this.set__(this.leader.bounds.translate(t,this.bounds)):this.set__(t)},follow:function(t,e){null==e&&(e=!0),null!=this.leaderConnection&&this.leaderConnection.dispose(),this.leader=t,this.leaderConnection=e?this.leader.watch(Ys(this,this.onLeaderValueChanged)):this.leader.get_changed().connect(Ys(this,this.onLeaderValueChanged))},update:function(t){null!=this._behavior&&(Mn.prototype.set__.call(this,this._behavior.update(t)),null!=this._behavior&&this._behavior.isComplete()&&(this._behavior=null))},animate:function(t,e,i,n,r,s){null==s&&(s=0),this.set__(t),this.animateTo(e,i,n,r,s)},animateTo:function(t,e,i,n,r){null==r&&(r=0),this.set_behavior(new Bn(this._value,t,e,i,n,r))},set_behavior:function(t){return this._behavior=t,this.update(0),t},dispose:function(){this._behavior=null,Mn.prototype.dispose.call(this)},__class__:kn}),(H=function(){}).__name__=!0,H.__isInterface__=!0,H.prototype={__class__:H};var Fn=function(){};Fn.__name__=!0,Fn.linear=function(t){return t},Fn.quadIn=function(t){return t*t},Fn.quintOut=function(t){return--t*t*t*t*t+1},Fn.sineIn=function(t){return 1-Math.cos(Fn.PIhalf*t)},Fn.sineOut=function(t){return Math.sin(Fn.PIhalf*t)},Fn.backOut=function(t){return 1- --t*t*(-2.70158*t-1.70158)};var Nn=function(t,e,i,n,r){null==r&&(r=0),null==n&&(n=0),null==i&&(i=1),this.start=t,this.end=e,this.cycles=n,this.speed=new kn(i),this._count=jn.HALF_PI+r*(Math.PI/i),this._distance=.5*(t-e),this._center=e+this._distance};Nn.__name__=!0,Nn.__interfaces__=[H],Nn.prototype={update:function(t){return this.speed.update(t),this._count+=t*(Math.PI/this.speed._value),this.isComplete()?this.end:this._center+Math.sin(this._count)*this._distance},isComplete:function(){return 0<this.cycles&&(this._count-jn.HALF_PI)/Math.PI*.5>=this.cycles},__class__:Nn};var Bn=function(t,e,i,n,r,s){null==s&&(s=0),this._from=t,this._to=e,this._duration=i,this.elapsed=0,this._easing=null!=n?n:Fn.linear,this._onComplete=r,this._delay=s};function Un(t,e){null==e&&(e=""),this._embeddedJSON=new Sr,this._embeddedTextures=new Sr,this.loader=new PIXI.Loader,this._baseUrl=e,this.manifest=t,this.loaded=new qn}Bn.__name__=!0,Bn.__interfaces__=[H],Bn.prototype={update:function(t){return this.elapsed+=t,this.elapsed-this._delay>=this._duration?(null!=this._onComplete&&(this._onComplete(),this._onComplete=null),this._to):this.elapsed>this._delay?this._from+(this._to-this._from)*this._easing((this.elapsed-this._delay)/this._duration):this._from},isComplete:function(){return this.elapsed-this._delay>=this._duration},__class__:Bn},Un.__name__=!0,Un.__interfaces__=[n],Un.prototype={load:function(){for(var t=this,e=this.manifest.fileNames.slice(),i=0;i<e.length;){var n,r=e[i];++i,"json"==Tr.extension(r)&&-1!=r.indexOf("multispine")?(n=this._baseUrl+this.manifest.path+Tr.directory(r)+"/multispine.atlas",this.loader.add(this.manifest.path+r,this._baseUrl+this.manifest.path+r,{metadata:{spineAtlasFile:n,imageNamePrefix:n}})):this.loader.add(this.manifest.path+r,this._baseUrl+this.manifest.path+r)}this.loader.load(function(){null!=t.loader&&t.loaded.emit(t)})},hasResource:function(t){return!!Object.prototype.hasOwnProperty.call(this._embeddedJSON.h,t)||!!Object.prototype.hasOwnProperty.call(this._embeddedTextures.h,t)||Object.prototype.hasOwnProperty.call(this.loader.resources,t)},get_progress:function(){return null==this._progress&&(this._progress=new Mn(this.loader.progress),this.loader.on("progress",Ys(this,this.onPreload))),this._progress},onPreload:function(){this._progress.set__(this.loader.progress/100)},dispose:function(){if(null!=this.loader){for(var t=Sr.valueIterator(this._embeddedTextures.h);t.hasNext();)t.next().destroy(!0);this._embeddedTextures=null,this._embeddedJSON=null,this.loader.off("progress",Ys(this,this.onPreload));for(var e=0,i=c.fields(this.loader.resources);e<i.length;){var n=i[e];++e;var r=this.loader.resources[n];r.type==PIXI.LoaderResource.TYPE.IMAGE&&null!=r.texture&&r.texture.destroy(!0),c.deleteField(this.loader.resources,n)}this.loader.reset(),this.loader=null}this.loaded.dispose()},__class__:Un};var Xn=function(t){null==t&&(t=""),this.assetPackByName=new Sr,this.baseUrl=t};Xn.__name__=!0,Xn.__interfaces__=[n],Xn.prototype={loadPack:function(t,e){var i=t.path;Object.prototype.hasOwnProperty.call(this.assetPackByName.h,i)&&(Object.prototype.hasOwnProperty.call(this.assetPackByName.h,i),Object.prototype.hasOwnProperty.call(this.assetPackByName.h,i));t=new Un(t,this.baseUrl);return this.assetPackByName.h[i]=t,null!=e&&t.loaded.connect(e),t.load(),t},getJson:function(t,e){if(null==e){for(var i=Sr.valueIterator(this.assetPackByName.h);i.hasNext();){var n=i.next();if(n.hasResource(t))return Object.prototype.hasOwnProperty.call(n._embeddedJSON.h,t)?n._embeddedJSON.h[t]:(n.hasResource(t),n.hasResource(t),n.loader.resources[t].data);if(n.hasResource(n.manifest.path+t)){var r=n.manifest.path+t;return Object.prototype.hasOwnProperty.call(n._embeddedJSON.h,r)?n._embeddedJSON.h[r]:(n.hasResource(r),n.hasResource(r),n.loader.resources[r].data)}}return null}var s=this.assetPackByName.h[e],r=e+t;return Object.prototype.hasOwnProperty.call(s._embeddedJSON.h,r)?s._embeddedJSON.h[r]:(s.hasResource(r),s.hasResource(r),s.loader.resources[r].data)},getTexture:function(t,e){if(null==e){for(var i=Sr.valueIterator(this.assetPackByName.h);i.hasNext();){var n=i.next();if(n.hasResource(t)){var r=n.manifest.path+t;return Object.prototype.hasOwnProperty.call(n._embeddedTextures.h,r)?n._embeddedTextures.h[r]:(n.hasResource(r),n.hasResource(r),n.loader.resources[r].texture)}if(n.hasResource(n.manifest.path+t)){var s=n.manifest.path+t;return Object.prototype.hasOwnProperty.call(n._embeddedTextures.h,s)?n._embeddedTextures.h[s]:(n.hasResource(s),n.hasResource(s),n.loader.resources[s].texture)}}return null}var o=this.assetPackByName.h[e],r=e+t;return Object.prototype.hasOwnProperty.call(o._embeddedTextures.h,r)?o._embeddedTextures.h[r]:(o.hasResource(r),o.hasResource(r),o.loader.resources[r].texture)},disposePack:function(t){Object.prototype.hasOwnProperty.call(this.assetPackByName.h,t),this.assetPackByName.h[t].dispose();var e=this.assetPackByName;Object.prototype.hasOwnProperty.call(e.h,t)&&delete e.h[t]},dispose:function(){for(var t=Sr.valueIterator(this.assetPackByName.h);t.hasNext();)t.next().dispose();this.assetPackByName=null},__class__:Xn},(q=function(){this.init(0,null)}).__name__=!0,q.prototype={init:function(t,e){this.id=t,this.key=e},__class__:q};var jn=function(){};function Vn(){this._keyStates=new $r,this.backButton=new mr,this.up=new qn,this.down=new qn}function Hn(){this._entries=[]}jn.__name__=!0,jn.smoothDamp=function(t,e,i,n,r,s){null==s&&(s=179769313486231e294),n<1e-4&&(n=1e-4);var o=2/n,a=o*r,h=1/(1+a+.48*a*a+.235*a*a*a),l=t-e,a=e,s=s*n,n=-s;l<n?l=n:s<l&&(l=s),e=t-l;s=(i._value+o*l)*r;i.set__((i._value-o*s)*h);h=e+(l+s)*h;return 0<a-t==a<h&&(h=a,i.set__((a-a)/r)),h},jn.lineSegmentIntersection=function(t,e,i,n,r){var s=e.x-t.x,o=e.y-t.y,a=n.x-i.x,h=n.y-i.y,e=s*h-o*a;if(0==e)return!1;n=i.x-t.x,i=i.y-t.y,a=(n*h-i*a)/e;if(a<0||1<a)return!1;e=(n*o-i*s)/e;return!(e<0||1<e)&&(null!=r&&(s=t.x+a*s,o=t.y+a*o,r.x=s,r.y=null==o?s:o),!0)},(yi=function(){}).__name__=!0,yi.__isInterface__=!0,yi.prototype={__class__:yi},Vn.__name__=!0,Vn.__interfaces__=[yi],Vn.prototype={isDown:function(t){return this._keyStates.h.hasOwnProperty(Yn.toKeyCode(t))},submitDown:function(t){return 16777238==t?null!=this.backButton._head&&(this.backButton.emit(),!0):(this._keyStates.h.hasOwnProperty(t)||(this._keyStates.h[t]=!0,Vn._sharedEvent.init(Vn._sharedEvent.id+1,Yn.toKey(t)),this.down.emit(Vn._sharedEvent)),!0)},submitUp:function(t){this._keyStates.h.hasOwnProperty(t)&&(this._keyStates.remove(t),Vn._sharedEvent.init(Vn._sharedEvent.id+1,Yn.toKey(t)),this.up.emit(Vn._sharedEvent))},connect:function(e,i){return this.down.connect(function(t){t.key==e&&i()})},__class__:Vn},Hn.__name__=!0,Hn.__interfaces__=[n],Hn.prototype={addListener:function(t,e,i,n){null==n&&(n=!1),t.addEventListener(e,i,n),this._entries.push(new Gn(t,e,i))},dispose:function(){for(var t=0,e=this._entries;t<e.length;){var i=e[t];++t,i.dispatcher.removeEventListener(i.type,i.listener,!1)}this._entries=[]},__class__:Hn};var Gn=function(t,e,i){this.dispatcher=t,this.type=e,this.listener=i};Gn.__name__=!0,Gn.prototype={__class__:Gn};var Yn=function(){};function Wn(){this._tickables=[],this.enabled=!0}Yn.__name__=!0,Yn.toKey=function(t){return t},Yn.toKeyCode=function(t){return t},Wn.__name__=!0,Wn.updateEntity=function(t,e){var i=t.$Se;if(null!=i&&(i._realDt=e,(e*=i.scale._value)<=0))i.onUpdate(e);else{for(var n=t.firstComponent;null!=n;){var r=n.next;null==t.parent&&t!=Rn.root||(0==(1&n._flags)&&(n._flags|=1,n.onStart()),n.onUpdate(e*t.timeScale)),n=r}for(var s=0,n=t.firstChild;null!=n;)r=n.next,n.layerIndex=s++,Wn.updateEntity(n,e*t.timeScale),n=r}},Wn.prototype={update:function(t){if(this.enabled)if(t<=0)Cn.warn("Zero or negative time elapsed since the last frame!",["dt",t]);else{1<t&&(t=1);for(var e=0;e<this._tickables.length;){var i=this._tickables[e];null==i||i.update(t)?this._tickables.splice(e,1):++e}Wn.updateEntity(Rn.root,t)}},__class__:Wn};var zn=function(){this._events=new Hn,this._disposer=new An,this.mainLoop=new Wn,this._disposer.add(this._events),this.addMainLoop(),this.addHidden()};zn.__name__=!0,zn.__interfaces__=[n],zn.prototype={addMainLoop:function(){var t=this,e=window.performance,i=null!=e&&Jn.polyfill("now",e);this._lastUpdate=Date.now(),this._mainEvent=br.add(function(){t.update((i?e:Date).now())})},addHidden:function(){var t,i=this,e=Jn.loadExtension("hidden",window.document);null!=e.value?((t=function(t){Rn.hidden.set__(c.field(window.document,e.field))})(),this._events.addListener(window.document,e.prefix+"visibilitychange",t)):(t=function(t){Rn.hidden.set__("pagehide"==t.type)},this._events.addListener(window,"pageshow",t),this._events.addListener(window,"pagehide",t)),this._disposer.add(Rn.hidden.get_changed().connect(function(t,e){t||(i._skipFrame=!0)})),this._skipFrame=!1},update:function(t){var e=(t-this._lastUpdate)/1e3;this._lastUpdate=t,this._skipFrame?this._skipFrame=!1:(this.mainLoop.update(e),Vt.render(Rn.root,Rn.renderer))},getKeyboard:function(){function t(t){switch(t.type){case"keydown":e.submitDown(t.keyCode);break;case"keyup":e.submitUp(t.keyCode)}}var e=new Vn;return this._events.addListener(window,"keydown",t),this._events.addListener(window,"keyup",t),e},dispose:function(){this._mainEvent.stop(),this._mainEvent=null;var t=this._disposer;null!=t&&t.dispose(),this._disposer=null},__class__:zn},(ds=function(){}).__name__=!0,ds.__isInterface__=!0,ds.prototype={__class__:ds};var qn=function(t){Pn.call(this,t)};qn.__name__=!0,qn.__super__=Pn,qn.prototype=e(Pn.prototype,{connect:function(t,e){return null==e&&(e=!1),this.connectImpl(t,e)},emit:function(t){var e=this;this._head==Pn.DISPATCHING_SENTINEL?this.defer(function(){e.emitImpl(t)}):this.emitImpl(t)},emitImpl:function(t){for(var e=this.willEmit(),i=e;null!=i;)i._listener(t),i.stayInList||i.dispose(),i=i._next;this.didEmit(e)},__class__:qn});var Jn=function(){};function Kn(){}function Zn(t,e){this.duration=t,this._ease=null!=e?e:Fn.linear}Jn.__name__=!0,Jn.isIframe=function(){try{return window.self!=window.top}catch(t){return!0}},Jn.callLater=function(t,e){null==e&&(e=0),window.setTimeout(t,e)},Jn.hideMobileBrowser=function(){window.scrollTo(1,0)},Jn.loadExtension=function(t,e){if(null==e&&(e=window),null!=(o=c.field(e,t)))return{prefix:"",field:t,value:o};for(var i=t.charAt(0).toUpperCase()+u.substr(t,1,null),n=0,r=Jn.VENDOR_PREFIXES;n<r.length;){var s=r[n];++n;var o,a=s+i;if(null!=(o=c.field(e,a)))return{prefix:s,field:a,value:o}}return{prefix:null,field:null,value:null}},Jn.polyfill=function(t,e){null==e&&(e=window);var i=Jn.loadExtension(t,e).value;return null!=i&&(e[t]=i,!0)},Jn.orientation=function(t){switch(t){case-90:case 90:return 2;default:return 1}},Kn.__name__=!0,Kn.prototype={init:function(t,e){this._from=t,this._to=e},update:function(t){return!0},complete:function(){},__class__:Kn},Zn.__name__=!0,Zn.__super__=Kn,Zn.prototype=e(Kn.prototype,{init:function(t,e){Kn.prototype.init.call(this,t,e),this._elapsed=0},update:function(t){var e=this._elapsed+=t,t=this.duration;return this._elapsed=e<t?e:t,this._elapsed>=this.duration},interp:function(t,e){return t+(e-t)*this._ease(this._elapsed/this.duration)},__class__:Zn});var Qn=function(t,e,i){this._fadeOutGraphics=new PIXI.Graphics,this._fadeInGraphics=new PIXI.Graphics,Zn.call(this,e,Fn.linear),this.color=t,null!=i&&(this._fadeInGraphics.blendMode=i,this._fadeOutGraphics.blendMode=i)};Qn.__name__=!0,Qn.__super__=Zn,Qn.prototype=e(Zn.prototype,{init:function(t,e){Zn.prototype.init.call(this,t,e),(e=this._fadeInGraphics).beginFill(this.color),e.drawRect(0,0,Rn.renderer.width/Rn.renderer.resolution|0,Rn.renderer.height/Rn.renderer.resolution|0),e.endFill(),e.alpha=0,(e=this._fadeOutGraphics).beginFill(this.color),e.drawRect(0,0,Rn.renderer.width/Rn.renderer.resolution|0,Rn.renderer.height/Rn.renderer.resolution|0),e.endFill(),e.alpha=0,this._from.addEntity((new Sn).addComponent(new Vt(this._fadeInGraphics))),this._to.addEntity((new Sn).addComponent(new Vt(this._fadeOutGraphics)))},update:function(t){t=Zn.prototype.update.call(this,t);return this._elapsed/this.duration<.5?(this._fadeInGraphics.alpha=this.interp(0,2),this._from.$w.setAlpha(1),this._to.$w.setAlpha(0)):(this._fadeOutGraphics.alpha=this.interp(2,0),this._from.$w.setAlpha(0),this._to.$w.setAlpha(1)),t},complete:function(){this._fadeInGraphics.alpha=0,this._to.$w.setAlpha(1),this._from.$w.setAlpha(0)},__class__:Qn});var tr=function(){this.top=(new Sn).addComponent(new Vt),this.main=(new Sn).addComponent(new Vt),this.bottom=(new Sn).addComponent(new Vt),f.call(this)};tr.__name__=!0,tr.__super__=f,tr.prototype=e(f.prototype,{onAdded:function(){this.owner.addEntity(this.bottom).addEntity(this.main).addEntity(this.top)},get_name:function(){return"$se"},__class__:tr});var er=function(t){null==t&&(t=3),this.currentSceneDefinition=new Mn(null),this.layers=[],this.history=[],f.call(this);for(var e=0;e<t;){var i=(new Sn).addComponent(new Vt);this.layers.push(i);var n=rr.Popup(function(){return new nr},"empty",e++),r=[n.c,n.layer][0]();r.id=n,i.addEntity(this.$lF(r))}};er.__name__=!0,er.__super__=f,er.prototype=e(f.prototype,{onAdded:function(){f.prototype.onAdded.call(this);for(var t=0,e=this.layers;t<e.length;)this.owner.addEntity(e[t++])},getScene:function(t){return null==t&&(t=0),this.getLayer(t),this.getLayer(t).$_},getLayer:function(t){return null==t&&(t=0),this.layers[t].firstChild},goto:function(t,e){var i;switch(null==e&&(e=this.defaultTransition),t._hx_index){case 0:i={getInstance:t.c,name:t.name,layer:0};break;case 1:i={getInstance:t.c,name:t.name,layer:t.layer}}var n=this.getScene(i.layer),r=n.owner;n.isTransitioning=!0,0==t._hx_index&&this.history.unshift(t);var s=i.getInstance();s.id=t;var o=this.$lF(s);return s.isTransitioning=!0,this.currentSceneDefinition.set__(t),this.layers[i.layer].addEntity(o),n.$b=new ir(r,o,e,function(){null!=o&&o.$_.$B(),null!=r&&r.$_.$c()}),o},$lF:function(t){return(new Sn).addComponent(new Vt).addComponent(t)},get_name:function(){return"$kF"},__class__:er});var ir=function(t,e,i,n){this.from=t,this.to=e,this.transition=i,this._onComplete=n,null!=i&&this.transition.init(t,e)};ir.__name__=!0,ir.prototype={update:function(t){return null==this.transition||this.transition.update(t)},complete:function(){null!=this.transition&&this.transition.complete(),this._onComplete()},__class__:ir};var nr=function(){Yi.call(this)};nr.__name__=!0,nr.__super__=Yi,nr.prototype=e(Yi.prototype,{__class__:nr});var rr=d["flambe.scene.SceneDefinition"]={__ename__:!0,__constructs__:["Page","Popup"],Page:((i=function(t,e){return{_hx_index:0,c:t,name:e,__enum__:"flambe.scene.SceneDefinition",toString:r}}).__params__=["c","name"],i),Popup:((i=function(t,e,i){return{_hx_index:1,c:t,name:e,layer:i,__enum__:"flambe.scene.SceneDefinition",toString:r}}).__params__=["c","name","layer"],i)},sr=function(t){this.resizeSignal=new On,this._events=new Hn,this.orientation=new Mn(null),this._containerDiv=t,this.updateContainerSize(),null!=window.orientation&&(this._events.addListener(window,"orientationchange",Ys(this,this.onOrientationChange)),this.onOrientationChange(null))};sr.__name__=!0,sr.__interfaces__=[n],sr.prototype={onOrientationChange:function(t){this.orientation.set__(Jn.orientation(window.orientation)),Jn.SHOULD_HIDE_MOBILE_BROWSER&&this.hideMobileBrower()},hideMobileBrower:function(){var e=window.document.documentElement.style,t=p.string(window.innerHeight+100);e.height=t+"px",t=p.string(window.innerWidth),e.width=t+"px",e.overflow="visible",Jn.callLater(function(){Jn.hideMobileBrowser(),Jn.callLater(function(){var t=p.string(window.innerHeight);e.height=t+"px"},100)})},updateContainerSize:function(){var t,e=PIXI.utils.isMobile.any?(t=window.innerWidth,window.innerHeight):(t=Rn.renderer.view.parentElement.offsetWidth,Rn.renderer.view.parentElement.offsetHeight);return(this._containerWidth!=t||this._containerHeight!=e)&&(this._containerWidth=t,this._containerHeight=e,PIXI.utils.isMobile.any&&window.scrollTo(0,-1),this.resizeCanvas(),!0)},resizeCanvas:function(){var t=Rn.renderer.view,e=0|+this._containerWidth,i=0|+this._containerHeight;return(t.width!=e||t.height!=i)&&(Rn.renderer.resize(e,i),this.rescaleHTMLElement(Rn.renderer.view,e,i),PIXI.utils.isMobile.any&&this.rescaleHTMLElement(this._containerDiv,e,i),this.resizeSignal.emit(e,i),!0)},requestFullScreen:function(){if(null==Jn.loadExtension("fullscreenElement",window.document).value){var t=Jn.loadExtension("requestFullScreen",this._containerDiv);if(null!=t.field)try{t.value.apply(this._containerDiv,[])}catch(t){}}},rescaleHTMLElement:function(t,e,i){t.style.width=e+"px",t.style.height=i+"px"},dispose:function(){var t=this._events;null!=t&&t.dispose(),this._events=null},__class__:sr};var or=function(t,e){null==e&&(e=1),PIXI.Filter.call(this,null,this.getFragmentSrc()),this.uniforms.color=this.hex2array(t),this.uniforms.multiplier=.5};or.__name__=!0,or.__super__=PIXI.Filter,or.prototype=e(PIXI.Filter.prototype,{getFragmentSrc:function(){return"precision mediump float;varying vec2 vTextureCoord;uniform sampler2D uSampler;uniform vec3 color;uniform float multiplier;void main () { gl_FragColor = texture2D(uSampler, vTextureCoord);gl_FragColor.rgb = mix(gl_FragColor.rgb, color.rgb, multiplier) * gl_FragColor.a;}"},hex2array:function(t){return[s(t>>>16&255)/s(255),s(t>>>8&255)/s(255),s(255&t)/s(255)]},update:function(t,e){null==e&&(e=1),this.color=t,this.multiplier=e,PIXI.utils.hex2rgb(t,this.uniforms.color),this.uniforms.multiplier=e},__class__:or}),(yi=function(){}).__name__=!0,yi.__isInterface__=!0,yi.prototype={__class__:yi};var ar=function(t,e){this._name=t.symbol,this._data=t.data;var i=t.rect;this.texture=new PIXI.Texture(e.baseTexture,new PIXI.Rectangle(i[0],i[1],i[2],i[3]));t=t.origin;null!=t?(this.anchorX=t[0],this.anchorY=t[1]):(this.anchorX=0,this.anchorY=0)};function hr(t,e){var i=t.manifest.path+e+"library.json",n=n=Object.prototype.hasOwnProperty.call(t._embeddedJSON.h,i)?t._embeddedJSON.h[i]:(t.hasResource(i),t.hasResource(i),t.loader.resources[i].data);this._symbols=new Sr,this.frameRate=n.frameRate;for(var r=[],s=0,o=n.movies;s<o.length;){var a=new pr(this,o[s++]);r.push(a),this._symbols.h[a._name]=a}(1!=(n=n.textureGroups)[0].scaleFactor||1<n.length)&&Cn.warn("Flambe doesn't support Flump's Additional Scale Factors. Use Base Scales and load from different asset packs instead.");for(var h=n[0].atlases,s=0;s<h.length;){var l,u=h[s];++s,i=t.manifest.path+e+u.file,l=Object.prototype.hasOwnProperty.call(t._embeddedTextures.h,i)?t._embeddedTextures.h[i]:(t.hasResource(i),t.hasResource(i),t.loader.resources[i].texture),o=0;for(var c=u.textures;o<c.length;){var p=new ar(c[o++],l);this._symbols.h[p._name]=p}}for(s=0;s<r.length;)for(o=0,c=r[s++].layers;o<c.length;)for(var d=c[o++].keyframes,_=d.length,f=0;f<_;){var m=f++,y=d[m];null!=y.symbolName&&(y.symbol=this._symbols.h[y.symbolName]),y.tweened&&1==y.duration&&1+m<_&&((m=d[1+m]).visible&&null!=m.symbolName||(y.visible=!1))}}ar.__name__=!0,ar.__interfaces__=[yi],ar.prototype={createSprite:function(t){var e=new PIXI.Sprite(this.texture),i=new Vt(e);return i.useLayerIndex=!0,e.pivot.set(this.anchorX,this.anchorY),i},__class__:ar},hr.__name__=!0,hr.prototype={createSprite:function(t,e,i){null==e&&(e=!0);var n=this._symbols.h[t];if(null!=n)return n.createSprite(i);if(e)throw wr.thrown(gr.withFields("Missing symbol",["name",t]));return null},__class__:hr},(ds=function(t){this.$aF=null,this.$_F=null,f.call(this),this.$tf=t,this.$Zf=new Sn,this.movie=new Mn(null),this.setCache(!0)}).__name__=!0,ds.__super__=f,ds.prototype=e(f.prototype,{setCache:function(t){return this.$Tf=t?new Sr:null,this},onAdded:function(){this.owner.addEntity(this.$Zf)},onRemoved:function(){this.$Zf.dispose(),this.$_F=this.$aF=null,this.movie.set__(null)},onUpdate:function(t){null!=this.$_F&&this.$_F.$jc+t>this.$_F.symbol.duration&&(this.$_F=null,this.$cF(this.$aF))},$cF:function(t){return this.$Zf.addComponent(t),this.movie.set__(t)},get_name:function(){return"$zf"},__class__:ds});var lr=function(t,e){this.startedAtFrame=0,this.$FF=null,Vt.call(this),this.useLayerIndex=!0,this.symbol=t,this.speed=new kn(1),this.$fF=new Array(t.layers.length);for(var i=0,n=this.$fF.length;i<n;){var r=i++;this.$fF[r]=new ur(t.layers[r],e)}this.$ja=0,this.$jc=0,this.$gF(1)};lr.__name__=!0,lr.__super__=Vt,lr.prototype=e(Vt.prototype,{onStart:function(){Vt.prototype.onStart.call(this);for(var t=0,e=this.symbol.layers;t<e.length;){var i,n=e[t];++t,null!=n.mask&&(this.getLayer(n.name),i=[this.getLayer(n.name).$w.container],this.getLayer(n.mask),n=this.getLayer(n.mask).$w.container.getBounds(),n=[(new PIXI.Graphics).beginFill(0).drawRect(n.x,n.y,n.width,n.height).endFill()],Xs.create(this.owner,1,function(t,e){return function(){e[0].parent.addChild(t[0]),e[0].mask=t[0]}}(n,i)))}},getLayer:function(t,e){null==e&&(e=!0);for(var i=0,n=this.$fF;i<n.length;){var r=n[i];if(++i,r.layer.name==t)return r.content}if(e)throw wr.thrown(gr.withFields("Missing layer",["name",t]));return null},onAdded:function(){Vt.prototype.onAdded.call(this);for(var t=0,e=this.$fF;t<e.length;)this.owner.addEntity(e[t++].content)},setDeepPosition:function(t){0==(256&this._flags)&&(this.$hF(t),this.$ja=-1,this.onUpdate(0));for(var e=0,i=this.$fF;e<i.length;){var n=i[e++].content.$w,n=n instanceof lr?n:null;null!=n&&n.setDeepPosition((t-n.startedAtFrame/this.symbol.frameRate)%n.symbol.duration)}},onRemoved:function(){Vt.prototype.onRemoved.call(this);for(var t=0,e=this.$fF;t<e.length;)this.owner.removeEntity(e[t++].content)},onUpdate:function(t){Vt.prototype.onUpdate.call(this,t),this.speed.update(t);var e=768&this._flags;0==e?(this.$jc+=this.speed._value*t,this.$jc>this.symbol.duration&&(this.$jc%=this.symbol.duration,null!=this.$FF&&this.$FF.emit())):512==e&&(this._flags&=-513),this.$gF(this.$jc*this.symbol.frameRate)},$gF:function(t){if(this.$ja!=t){if(t<this.$ja)for(var e=0,i=this.$fF;e<i.length;){var n=i[e];++e,n.needsKeyframeUpdate=!0,n.keyframeIdx=0}for(e=0,i=this.$fF;e<i.length;)i[e++].composeFrame(t);this.$ja=t}},$hF:function(t){var e=this.symbol.duration;return this.$jc=t<0?0:e<t?e:t},$iF:function(t){return this._flags=fr.set(this._flags,256,t),t},$Wf:function(){return null==this.$FF&&(this.$FF=new mr),this.$FF},rewind:function(){this.$jc=0,this._flags|=512},dispose:function(){if(null!=this.$fF)for(var t=0,e=this.$fF;t<e.length;)e[t++].dispose();Vt.prototype.dispose.call(this)},__class__:lr});var ur=function(t,e){if(this.keyframeIdx=0,this.needsKeyframeUpdate=!1,this.content=new Sn,this.layer=t,null!=(this._decorator=e)&&(this._decoratedSymbols=new Ar),t.empty)this._sprites=null;else{this._sprites=new Array(t.keyframes.length);for(var i=0,n=this._sprites.length;i<n;){var r,s,o=i++,a=t.keyframes[o];0<o&&t.keyframes[o-1].symbol==a.symbol?this._sprites[o]=this._sprites[o-1]:null==a.symbol?(null==this._emptySprite&&(this._emptySprite=new cr),this._sprites[o]=this._emptySprite):null!=e?(r=a.symbol,null!=this._decoratedSymbols.h.__keys__[r.__id__]?this._sprites[o]=this._decoratedSymbols.h[r.__id__].createSprite(e):a.symbol instanceof pr?(this._sprites[o]=a.symbol.createSprite(e),this._sprites[o].startedAtFrame=o):(r!=(s=e(a.symbol))&&this._decoratedSymbols.set(r,s),this._sprites[o]=s.createSprite(null))):(this._sprites[o]=a.symbol.createSprite(null),a.symbol instanceof pr&&(this._sprites[o].startedAtFrame=o))}this.content.addComponent(this._sprites[0])}};ur.__name__=!0,ur.__interfaces__=[n],ur.prototype={composeFrame:function(t){if(null!=this._sprites){var e,i,n,r,s,o,a,h,l,u,c,p,d,_,f,m,y=this.layer.keyframes,g=y.length-1;if(t>this.layer.frames)return this.content.$w.container.visible=!1,this.keyframeIdx=g,void(this.needsKeyframeUpdate=!0);for(;this.keyframeIdx<g&&y[this.keyframeIdx+1].index<=t;)++this.keyframeIdx,this.needsKeyframeUpdate=!0;this.needsKeyframeUpdate?(this.needsKeyframeUpdate=!1,(e=this._sprites[this.keyframeIdx])!=this.content.$w&&(e instanceof lr&&e.rewind(),this.content.addComponent(e))):e=this.content.$w,null!=e&&(p=(i=y[this.keyframeIdx]).visible&&null!=i.symbol,(e.container.visible=p)&&(n=i.x,r=i.y,s=i.scaleX,o=i.scaleY,a=i.skewX,h=i.skewY,l=i.alpha,m=i.tintColor,u=i.tintAmount,i.tweened&&this.keyframeIdx<g&&(c=(t-i.index)/i.duration,0!=(f=i.ease)&&(f<0?(_=1-(d=1-c)*d,f=-f):_=c*c,c=f*_+(1-f)*c),n+=((p=y[this.keyframeIdx+1]).x-n)*c,r+=(p.y-r)*c,s+=(p.scaleX-s)*c,o+=(p.scaleY-o)*c,a+=(p.skewX-a)*c,h+=(p.skewY-h)*c,l+=(p.alpha-l)*c,d=p.tintColor,m=(16711935&m)*(f=256-(_=Math.round(256*c)))+(16711935&d)*_>>8&16711935|(65280&m)*f+(65280&d)*_>>8&65280,u+=(p.tintAmount-u)*c),0!=u?(null==i.tintFilter?i.tintFilter=new or(m,u):i.tintFilter.update(m,u),null!=e.container.filters&&e.container.filters[0]==i.tintFilter||(e.container.filters=[i.tintFilter])):null!=e.container.filters&&(e.container.filters=null),e.container.setTransform(n,r,s,o,null,-a,h,i.pivotX,i.pivotY),e.container.alpha=l,this.layer.isMask&&(e.container.visible=!1)))}},dispose:function(){this._decoratedSymbols=null,this._decorator=null,this._sprites=null},__class__:ur};var cr=function(){Vt.call(this),this.useLayerIndex=!0};cr.__name__=!0,cr.__super__=Vt,cr.prototype=e(Vt.prototype,{__class__:cr});var pr=function(t,e){this._name=e.id,this._data=e.data,this._baseClass=e.baseClass,this.frameRate=t.frameRate,this.frames=0,this.layers=new Array(e.layers.length);for(var i=[],n=0,r=this.layers.length;n<r;){var s=n++,o=new dr(e.layers[s]);this.frames=Math.max(o.frames,this.frames),null!=(this.layers[s]=o).mask&&i.push(o.mask)}for(n=0,r=this.layers;n<r.length;)o=r[n],++n,-1!=i.indexOf(o.name)&&o.setIsMask(!0);this.duration=this.frames/this.frameRate};pr.__name__=!0,pr.__interfaces__=[yi],pr.prototype={createSprite:function(t){return new lr(this,t)},__class__:pr};var dr=function(t){this.empty=!0,this.isMask=!1,this.name=t.name,this.mask=t.mask;var e=null;this.keyframes=new Array(t.keyframes.length);for(var i=0,n=this.keyframes.length;i<n;){var r=i++,e=new _r(t.keyframes[r],e);this.keyframes[r]=e,this.empty=this.empty&&null==e.symbolName}this.frames=null!=e?e.index+e.duration:0};dr.__name__=!0,dr.prototype={setIsMask:function(t){this.isMask=t},__class__:dr};var _r=function(t,e){this.tintAmount=0,this.tintColor=0,this.ease=0,this.tweened=!0,this.visible=!0,this.alpha=1,this.pivotY=0,this.pivotX=0,this.skewY=0,this.skewX=0,this.scaleY=1,this.scaleX=1,this.y=0,this.x=0,this.symbol=null,this.index=null!=e?e.index+e.duration:0,this.duration=t.duration,this.label=t.label,this.symbolName=t.ref,this.data=t.data;e=t.tint;null!=e&&(this.tintAmount=e[0],this.tintColor=p.parseInt("0x"+e[1].substring(1)));e=t.loc;null!=e&&(this.x=e[0],this.y=e[1]);e=t.scale;null!=e&&(this.scaleX=e[0],this.scaleY=e[1]);e=t.skew;null!=e&&(this.skewX=e[0],this.skewY=e[1]);e=t.pivot;null!=e&&(this.pivotX=e[0],this.pivotY=e[1]),null!=t.alpha&&(this.alpha=t.alpha),null!=t.visible&&(this.visible=t.visible),null!=t.tweened&&(this.tweened=t.tweened),null!=t.ease&&(this.ease=t.ease)};_r.__name__=!0,_r.prototype={__class__:_r};var fr=function(){};fr.__name__=!0,fr.set=function(t,e,i){return i?t|e:t&~e};var mr=function(t){Pn.call(this,t)};mr.__name__=!0,mr.__super__=Pn,mr.prototype=e(Pn.prototype,{connect:function(t,e){return null==e&&(e=!1),this.connectImpl(t,e)},emit:function(){var t=this;this._head==Pn.DISPATCHING_SENTINEL?this.defer(function(){t.emitImpl()}):this.emitImpl()},emitImpl:function(){for(var t=this.willEmit(),e=t;null!=e;)e._listener(),e.stayInList||e.dispose(),e=e._next;this.didEmit(t)},__class__:mr});var yr=function(t){this.next=null,this.fn=t};yr.__name__=!0,yr.prototype={__class__:yr};var gr=function(){};function vr(){}gr.__name__=!0,gr.getFileExtension=function(t){var e=t.lastIndexOf(".");return 0<e?u.substr(t,e+1,null):null},gr.removeFileExtension=function(t){var e=t.lastIndexOf(".");return 0<e?u.substr(t,0,e):t},gr.withFields=function(t,e){if(null!=e){var i=e.length;if(0<i){t+=0<t.length?" [":"[";for(var n=0;n<i;){0<n&&(t+=", ");var r,s=e[n+1];s instanceof Error&&(null!=(r=s.stack)&&(s=r)),t+=e[n]+"="+p.string(s),n+=2}t+="]"}}return t},(ds=function(){}).__name__=!0,ds.__isInterface__=!0,ds.prototype={__class__:ds},vr.__name__=!0,vr.processEvents=function(){for(;;){var t=vr.pending.shift();if(null==t)break;t()}var e=br.tick();return br.hasEvents()||0!=vr.threadCount?e:-1},vr.run=function(){var t,e=vr.processEvents();"undefined"!=typeof window&&null!=(t=(t=window).requestAnimationFrame||t.webkitRequestAnimationFrame||t.mozRequestAnimationFrame)?t(vr.run):0<=e&&setTimeout(vr.run,1e3*e)};var wr=function(t,e,i){Error.call(this,t),this.message=t,this.__previousException=e,this.__nativeException=null!=i?i:this};function xr(t,e){this.isBlocking=!0,this.f=t,this.priority=e,this.nextRun=-1/0}wr.__name__=!0,wr.thrown=function(t){return t instanceof wr?t.get_native():t instanceof Error?t:new Er(t)},wr.__super__=Error,wr.prototype=e(Error.prototype,{get_native:function(){return this.__nativeException},__class__:wr}),xr.__name__=!0,xr.prototype={stop:function(){null!=this.f&&(this.f=null,this.nextRun=-1/0,null==this.prev?br.pending=this.next:this.prev.next=this.next,null!=this.next&&(this.next.prev=this.prev))},__class__:xr};var br=function(){};br.__name__=!0,br.hasEvents=function(){for(var t=br.pending;null!=t;){if(t.isBlocking)return!0;t=t.next}return!1},br.add=function(t,e){if(null==e&&(e=0),null==t)throw wr.thrown("Event function is null");t=new xr(t,e),e=br.pending;return null!=e&&(e.prev=t),t.next=e,br.pending=t},br.sortEvents=function(){var t=br.pending;if(null!=t){for(var e,i,n,r,s,o=1,a=0,h=0;;){for(i=t,s=t=null,e=0;null!=i;){++e,n=i;for(var l=a=0,u=o;l<u&&(++l,++a,null!=(n=n.next)););for(h=o;0<a||0<h&&null!=n;)0!=a&&(0==h||null==n||i.priority>n.priority||i.priority==n.priority&&i.nextRun<=n.nextRun)?(i=(r=i).next,--a):(n=(r=n).next,--h),null!=s?s.next=r:t=r,r.prev=s,s=r;i=n}if(s.next=null,e<=1)break;o*=2}t.prev=null,br.pending=t}},br.tick=function(){br.sortEvents();for(var t=br.pending,e=u.now()/1e3,i=1e9;null!=t;){var n=t.next,r=t.nextRun-e;r<=0?(i=0,null!=t.f&&t.f()):r<i&&(i=r),t=n}return i};var Er=function(t,e,i){wr.call(this,String(t),e,i),this.value=t};Er.__name__=!0,Er.__super__=wr,Er.prototype=e(wr.prototype,{__class__:Er});var $r=function(){this.h={}};$r.__name__=!0,$r.__interfaces__=[ds],$r.prototype={set:function(t,e){this.h[t]=e},get:function(t){return this.h[t]},exists:function(t){return this.h.hasOwnProperty(t)},remove:function(t){return!!this.h.hasOwnProperty(t)&&(delete this.h[t],!0)},keys:function(){var t,e=[];for(t in this.h)this.h.hasOwnProperty(t)&&e.push(0|t);return new Cr(e)},__class__:$r};var Ar=function(){this.h={__keys__:{}}};Ar.__name__=!0,Ar.__interfaces__=[ds],Ar.prototype={set:function(t,e){var i=t.__id__;null==i&&(i=t.__id__=h.$haxeUID++),this.h[i]=e,this.h.__keys__[i]=t},get:function(t){return this.h[t.__id__]},exists:function(t){return null!=this.h.__keys__[t.__id__]},remove:function(t){t=t.__id__;return null!=this.h.__keys__[t]&&(delete this.h[t],delete this.h.__keys__[t],!0)},keys:function(){var t,e=[];for(t in this.h.__keys__)this.h.hasOwnProperty(t)&&e.push(this.h.__keys__[t]);return new Cr(e)},__class__:Ar};var Sr=function(){this.h=Object.create(null)};Sr.__name__=!0,Sr.__interfaces__=[ds],Sr.valueIterator=function(t){var e=Object.keys(t),i=e.length,n=0;return{hasNext:function(){return n<i},next:function(){return t[e[(n+=1)-1]]}}},Sr.prototype={exists:function(t){return Object.prototype.hasOwnProperty.call(this.h,t)},get:function(t){return this.h[t]},set:function(t,e){this.h[t]=e},remove:function(t){return!!Object.prototype.hasOwnProperty.call(this.h,t)&&(delete this.h[t],!0)},__class__:Sr};var Tr=function(t){switch(t){case".":case"..":return this.dir=t,void(this.file="")}var e=t.lastIndexOf("/"),i=t.lastIndexOf("\\");e<i?(this.dir=u.substr(t,0,i),t=u.substr(t,i+1,null),this.backslash=!0):i<e?(this.dir=u.substr(t,0,e),t=u.substr(t,e+1,null)):this.dir=null;e=t.lastIndexOf(".");-1!=e?(this.ext=u.substr(t,e+1,null),this.file=u.substr(t,0,e)):(this.ext=null,this.file=t)};Tr.__name__=!0,Tr.withoutExtension=function(t){t=new Tr(t);return t.ext=null,t.toString()},Tr.directory=function(t){t=new Tr(t);return null==t.dir?"":t.dir},Tr.extension=function(t){t=new Tr(t);return null==t.ext?"":t.ext},Tr.prototype={toString:function(){return(null==this.dir?"":this.dir+(this.backslash?"\\":"/"))+this.file+(null==this.ext?"":"."+this.ext)},__class__:Tr};var Cr=function(t){this.current=0,this.array=t};Cr.__name__=!0,Cr.prototype={hasNext:function(){return this.current<this.array.length},next:function(){return this.array[this.current++]},__class__:Cr};var Mr=function(){};Mr.__name__=!0,Mr.getClass=function(t){if(null==t)return null;if(t instanceof Array)return Array;var e=t.__class__;if(null!=e)return e;t=Mr.__nativeClassName(t);return null!=t?Mr.__resolveNativeClass(t):null},Mr.__string_rec=function(r,s){if(null==r)return"null";if(5<=s.length)return"<...>";var t,e=typeof r;switch("function"==e&&(r.__name__||r.__ename__)&&(e="object"),e){case"function":return"<function>";case"object":if(r.__enum__){var i=d[r.__enum__],n=i.__constructs__[r._hx_index],o=i[n];return o.__params__?(s+="\t",n+"("+function(){for(var t=[],e=0,i=o.__params__;e<i.length;){var n=i[e];e+=1,t.push(Mr.__string_rec(r[n],s))}return t}().join(",")+")"):n}if(r instanceof Array){var a="[";s+="\t";for(var h=0,l=r.length;h<l;){var u=h++;a+=(0<u?",":"")+Mr.__string_rec(r[u],s)}return a+"]"}try{t=r.toString}catch(h){return"???"}if(null!=t&&t!=Object.toString&&"function"==typeof t){n=r.toString();if("[object Object]"!=n)return n}a="{\n",s+="\t";var c=null!=r.hasOwnProperty,p=null;for(p in r)c&&!r.hasOwnProperty(p)||"prototype"!=p&&"__class__"!=p&&"__super__"!=p&&"__interfaces__"!=p&&"__properties__"!=p&&(2!=a.length&&(a+=", \n"),a+=s+p+" : "+Mr.__string_rec(r[p],s));return a+("\n"+(s=s.substring(1)))+"}";case"string":return r;default:return String(r)}},Mr.__interfLoop=function(t,e){for(;;){if(null==t)return!1;if(t==e)return!0;var i=t.__interfaces__;if(null!=i)for(var n=0,r=i.length;n<r;){var s=i[n++];if(s==e||Mr.__interfLoop(s,e))return!0}t=t.__super__}},Mr.__instanceof=function(t,e){if(null==e)return!1;switch(e){case Array:return t instanceof Array;case Js:return"boolean"==typeof t;case zs:return null!=t;case qs:return"number"==typeof t;case Ws:return"number"==typeof t&&(0|t)===t;case String:return"string"==typeof t;default:if(null==t)return!1;if("function"==typeof e){if(Mr.__downcastCheck(t,e))return!0}else if("object"==typeof e&&Mr.__isNativeObj(e)&&t instanceof e)return!0;return e==Ks&&null!=t.__name__||e==Zs&&null!=t.__ename__||null!=t.__enum__&&d[t.__enum__]==e}},Mr.__downcastCheck=function(t,e){return t instanceof e||!!e.__isInterface__&&Mr.__interfLoop(Mr.getClass(t),e)},Mr.__implements=function(t,e){return Mr.__interfLoop(Mr.getClass(t),e)},Mr.__cast=function(t,e){if(null==t||Mr.__instanceof(t,e))return t;throw wr.thrown("Cannot cast "+p.string(t)+" to "+p.string(e))},Mr.__nativeClassName=function(t){t=Mr.__toStr.call(t).slice(8,-1);return"Object"==t||"Function"==t||"Math"==t||"JSON"==t?null:t},Mr.__isNativeObj=function(t){return null!=Mr.__nativeClassName(t)},Mr.__resolveNativeClass=function(t){return h[t]},(yi=function(){}).__name__=!0,yi.__isInterface__=!0;var Ir=function(t,e){null==t&&(t=0),this.$Re=[],f.call(this),this.$NA=0<t?t:0,this.$Re.push(e)};function Pr(t){f.call(this),this.update=new On(t)}Ir.__name__=!0,Ir.create=function(t,e,i){var n;return null==e&&(e=0),null==t.$re?t.add(Tn.EComponent(new Ir(e,i))):null!=(n=t.$re).$NA&&(n.$NA=Math.min(e,n.$NA),n.$Re.push(i)),t.$re},Ir.__super__=f,Ir.prototype=e(f.prototype,{onUpdate:function(t){t=null!=this.$NA&&(this.$NA-=t)<=0;if(t){for(var e=0,i=this.$Re;e<i.length;){var n=i[e];++e,null!=n&&n()}null!=this.owner&&this.owner.dispose(),this.$NA=null}},get_name:function(){return"$re"},__class__:Ir}),Pr.__name__=!0,Pr.__super__=f,Pr.prototype=e(f.prototype,{onUpdate:function(t){this.update.emit(this.owner,t)},get_name:function(){return"$NF"},__class__:Pr});var Or=function(t,e,i){switch(null==i&&(i=0),this.isVirtual=!1,this.$ME=new zr(0,0),this.$mE=0,this.$LE=0,this.height=0,this.width=0,this.$KE=!0,this.useBounds=!0,this.lockY=!1,this.lockX=!1,this.offset=new zr(0,0),this.smoothTimeY=0,this.smoothTimeX=0,this.zoom=new kn(1),this.$JE=1,this.target={x:0,y:0},this.position={x:0,y:0},this.afterUpdateSignal=new mr,this.beforeUpdateSignal=new mr,f.call(this),this.viewArea=new PIXI.Rectangle(0,0,t,e),this.$PE(t),this.$qE(e),this.align=i){case 0:this.$LE=this.$mE=.5;break;case 1:this.$LE=0,this.$mE=0}this.$oE(),this.$OE()};Or.__name__=!0,Or.__super__=f,Or.prototype=e(f.prototype,{onStart:function(){null==this.$ya&&(this.$ya=this.owner.$w),f.prototype.onStart.call(this),this.owner.parent.addEntity(this.$lE=(new Sn).addComponent(new Pr(Ys(this,this.$nE)))),this.$KE&&this.$NE()},$nE:function(t,e){var i;this.$KE&&(this.beforeUpdateSignal.emit(),this.zoom.update(e),(i=this.offset).x.update(e),i.y.update(e),this.lockX||(this.position.x=jn.smoothDamp(this.position.x,this.target.x,this.$ME.x,this.smoothTimeX,e)),this.lockY||(this.position.y=jn.smoothDamp(this.position.y,this.target.y,this.$ME.y,this.smoothTimeY,e)),this.$NE(),this.onAfterLateUpdate(),this.afterUpdateSignal.emit())},onAfterLateUpdate:function(){},$NE:function(){var t,e=this.zoom._value;this.$JE!=e&&(this.$oE(),this.$JE=e),this.viewArea.x=(this.position.x*e-this.width*this.$LE+this.offset.x._value)/e,this.viewArea.y=(this.position.y*e-this.height*this.$mE+this.offset.y._value)/e,this.$OE(),this.isVirtual||null==this.$ya||((t=this.$ya.setXY(.5*this.width,.5*this.height)).container.pivot.set(this.viewArea.x+.5*this.viewArea.width,this.viewArea.y+.5*this.viewArea.height),t.container.scale.set(e))},$oE:function(){var t=this.zoom._value;this.viewArea.width=this.width/t,this.viewArea.height=this.height/t},$OE:function(){var t;null!=this.$kE&&this.useBounds&&(t=this.$kE,this.viewArea.x<t.x&&(this.viewArea.x=t.x),this.viewArea.y<t.y&&(this.viewArea.y=t.y),this.viewArea.x+this.viewArea.width>t.x+t.width&&(this.viewArea.x=t.x+t.width-this.viewArea.width),this.viewArea.y+this.viewArea.height>t.y+t.height&&(this.viewArea.y=t.y+t.height-this.viewArea.height))},$pE:function(){return null==this.$kE&&(this.$kE=new PIXI.Rectangle(-898846567431155e293,-898846567431155e293,179769313486231e294,179769313486231e294)),this.$kE},setBounds:function(t,e,i,n){var r=this.$pE();r.x=t,r.y=e,r.width=i,r.height=n},$PE:function(t){return this.width=t,this.viewArea.width=t/this.zoom._value,t},$qE:function(t){return this.height=t,this.viewArea.height=t/this.zoom._value,t},dispose:function(){(this.bounds=null)!=this.$lE&&(this.$lE.dispose(),this.$lE=null),f.prototype.dispose.call(this)},get_name:function(){return"$jE"},onAdded:function(){null==this.$ya&&(this.$ya=this.owner.$w),f.prototype.onAdded.call(this)},__class__:Or});var Dr=function(t,e,i,n,r,s){null==s&&(s=1),null==r&&(r=1),null==n&&(n=!0),null==i&&(i=100),null==e&&(e=100),null==t&&(t=16711680),this.$fE=!0,this.rectColor=kn.take(t,null,null,Ys(this,this.$FE)),this.rectWidth=kn.take(e,null,null,Ys(this,this.$FE)),this.rectHeight=kn.take(i,null,null,Ys(this,this.$FE)),this.rectStrokeWidth=kn.take(r,null,null,Ys(this,this.$FE)),this.rectAlpha=kn.take(s,null,null,Ys(this,this.$FE)),this.rectSolid=new Mn(n,Ys(this,this.$FE)),Vt.call(this,new PIXI.Graphics)};Dr.__name__=!0,Dr.__super__=Vt,Dr.prototype=e(Vt.prototype,{onUpdate:function(t){Vt.prototype.onUpdate.call(this,t),this.rectWidth.update(t),this.rectHeight.update(t),this.rectColor.update(t),this.rectStrokeWidth.update(t),this.rectAlpha.update(t),this.$fE&&(this.redraw(),this.$fE=!1)},redraw:function(){var t=this.container;t.clear(),this.rectSolid._value?t.beginFill(0|this.rectColor._value,this.rectAlpha._value):t.lineStyle(this.rectStrokeWidth._value,0|this.rectColor._value,this.rectAlpha._value),t.drawRect(0,0,this.rectWidth._value,this.rectHeight._value),t.endFill()},$FE:function(t,e){this.$fE=!0},dispose:function(){kn.put(this.rectColor),kn.put(this.rectWidth),kn.put(this.rectHeight),kn.put(this.rectAlpha),kn.put(this.rectStrokeWidth),Vt.prototype.dispose.call(this)},__class__:Dr});var Rr=function(){this.$Pe=new zr(0,0),this.$oB={x:0,y:0},f.call(this)};Rr.__name__=!0,Rr.__super__=f,Rr.prototype=e(f.prototype,{onStart:function(){null==this.$ya&&(this.$ya=this.owner.$w),f.prototype.onStart.call(this);var t=this.$oB,e=this.$ya.container.position;t.x=e.x,t.y=e.y},shakeItBaby:function(t,e,i,n){null==n&&(n=!0),null==i&&(i=0),null==e&&(e=.25),null==t&&(t=10);var r,s=this;if(n)try{Ps.util.any&&(r=e/2*1e3|0,window.navigator.vibrate([r]))}catch(t){}0!=i?Xs.create(this.owner,0,function(){s.$qe(t,e),s.microStutter(i)}):this.$qe(t,e)},$qe:function(t,e){this.$Pe.x.set_behavior(new Ms(this.$oB.x,t,e)),this.$Pe.y.set_behavior(new Ms(this.$oB.y,t,e))},microStutter:function(t){null==t&&(t=1);var e=this;this.owner.timeScale=0;t/=60;null==t&&(t=0),this.owner.parent.addEntity((new Sn).addComponent(new Ir(t,function(){e.owner.timeScale=1})),!0)},onUpdate:function(t){var e;f.prototype.onUpdate.call(this,t),this.$Qe()&&0!=this.owner.timeScale&&((e=this.$Pe).x.update(t),e.y.update(t),this.$ya.setXY(this.$Pe.x._value,this.$Pe.y._value))},dispose:function(){null!=this.$ya&&null!=this.$ya.container&&null!=this.$ya.container.transform&&this.$ya.container.position.set(this.$oB.x,this.$oB.y),this.$Pe.x.set_behavior(null),this.$Pe.y.set_behavior(null),this.$Pe.dispose(),f.prototype.dispose.call(this)},$Qe:function(){return null!=this.$Pe&&null!=this.$Pe.x&&null!=this.$Pe.x._behavior&&!this.$Pe.x._behavior.isComplete()},get_name:function(){return"$pe"},onAdded:function(){null==this.$ya&&(this.$ya=this.owner.$w),f.prototype.onAdded.call(this)},__class__:Rr});var Lr=function(t){f.call(this),this.visible=t};Lr.__name__=!0,Lr.__super__=f,Lr.prototype=e(f.prototype,{onStart:function(){var i=this;null==this._display&&(this._display=this.owner.$w),f.prototype.onStart.call(this),this.$h=this.visible.watch(function(t,e){i._display.container.visible=t})},get_name:function(){return"$G"},onAdded:function(){null==this._display&&(this._display=this.owner.$w),f.prototype.onAdded.call(this)},dispose:function(){null!=this.$h&&(this.$h.dispose(),this.$h=null),f.prototype.dispose.call(this)},__class__:Lr});var kr=function(t){f.call(this),this.$eD=t};kr.__name__=!0,kr.__super__=f,kr.prototype=e(f.prototype,{onStart:function(){var t;this.owner.$w,null!=((t=this.owner.$w)instanceof lr?t:null)?(t=this.owner.$w,this.$h=(t instanceof lr?t:null).$Wf().connect(Ys(this,this.$pC))):null!=((t=this.owner.$w)instanceof Ur?t:null)&&(t=this.owner.$w,this.$h=(t instanceof Ur?t:null).$Vf().connect(Ys(this,this.$pC)))},$pC:function(){null!=this.$eD&&this.$eD(),null!=this.owner&&this.owner.dispose()},dispose:function(){(this.$eD=null)!=this.$h&&(this.$h.dispose(),this.$h=null),f.prototype.dispose.call(this)},get_name:function(){return"$DD"},__class__:kr});var Fr=function(t){f.call(this),this.$oC=t};Fr.__name__=!0,Fr.__super__=f,Fr.prototype=e(f.prototype,{onStart:function(){this.$OC()},$OC:function(){var t;null!=this.owner&&(null==(t=(t=this.owner.$w)instanceof lr?t:null)&&null!=this.owner.$zf&&(t=this.owner.$zf.movie._value),null!=t&&(this.$h=t.$Wf().connect(Ys(this,this.$pC))))},onUpdate:function(t){null==this.$h&&this.$OC()},$pC:function(){var t=this.owner.$w,t=t instanceof lr?t:null;t.setDeepPosition(t.symbol.duration),t.$iF(!0),null!=this.$oC&&this.$oC()},dispose:function(){null!=this.$h&&(this.$h.dispose(),this.$h=null),this.$oC=null,f.prototype.dispose.call(this)},get_name:function(){return"$NC"},__class__:Fr});var Nr=function(t){this.currentLabel=new Mn(null),f.call(this),this.$bB=t};function Br(t){this._isDisposed=!1,this._player=t,this.playRange=this._player.playRange}Nr.__name__=!0,Nr.__super__=f,Nr.prototype=e(f.prototype,{onStart:function(){var i=this;f.prototype.onStart.call(this),this.$_B=this.owner._internal_getFromChildren("$w",Ur),null==this.$_B&&(this.$Cb=this.owner._internal_getFromChildren("$zf"),null!=this.$Cb?(this.$a=new An,this.$a.add(this.$Cb.movie.watch(function(t,e){i.$AB=Ls.getLabels(t,i.$bB)}))):(this.$aB=this.owner._internal_getFromChildren("$w",lr),null!=this.$aB&&(this.$AB=Ls.getLabels(this.$aB,this.$bB))))},onUpdate:function(t){f.prototype.onUpdate.call(this,t);var e=this.$AB,i=this.$aB;if(null==i&&(null!=this.$_B&&null!=this.$_B.movieSprite?(e=this.$_B.getLabels(),i=this.$_B.movieSprite):null!=this.$Cb&&null!=this.$Cb.movie._value&&(e=this.$AB,i=this.$Cb.movie._value)),null!=e){for(var n=!1,r=0,s=e.list;r<s.length;){var o=s[r];if(++r,null!=o.name&&e.isAtLabel(i,o.name)){this.currentLabel.set__(o.name),n=!0;break}}n||this.currentLabel.set__(null)}},dispose:function(){var t=this.$a;null!=t&&t.dispose(),this.$a=null,f.prototype.dispose.call(this)},get_name:function(){return"$Zb"},__class__:Nr}),Br.__name__=!0,Br.__interfaces__=[n],Br.prototype={completed:function(t){return this._isDisposed||(null!=this._completedSignalConnection&&this._completedSignalConnection.dispose(),this._completedSignalConnection=this._player.$Vf().connect(t).once()),this},get_time:function(){return null!=this._player&&null!=this._player.movieSprite?this._player.movieSprite.$jc:null},dispose:function(){var t;this._player=null,(this.playRange=null)!=(t=this._completedSignalConnection)&&t.dispose(),(this._completedSignalConnection=null)!=(t=this._loopedSignalConnection)&&t.dispose(),this._loopedSignalConnection=null,this._isDisposed=!0},__class__:Br};var Ur=function(t,e){this.$Sf=!1,Vt.call(this,new PIXI.Container),this.$tf=t,this.$te=new Sn,this.$Tf=new Sr,null!=e&&this.setMovie(e)};function Xr(t,e,i){null==i&&(i=!0),f.call(this),this.$Y_=t,this.$z_=e,this.$Z_=i}Ur.__name__=!0,Ur.__super__=Vt,Ur.prototype=e(Vt.prototype,{onAdded:function(){null==this.$te&&(this.$te=new Sn),this.owner.addEntity(this.$te),Vt.prototype.onAdded.call(this)},onUpdate:function(t){null!=this.movieSprite&&this.movieSprite.$jc+t>=this.playRange.endTime&&(this.isLooping?(null!=this.$Rf&&this.$Rf.emit(),0==this.playRange.startTime&&this.playRange.endTime==this.movieSprite.symbol.duration||this.movieSprite.$hF(this.playRange.startTime+(this.movieSprite.$jc+t)%this.playRange.endTime)):0==(256&this.movieSprite._flags)&&(this.movieSprite.$iF(!0),this.movieSprite.$hF(this.playRange.endTime-this.movieSprite.symbol.duration/this.movieSprite.symbol.frames*.01),null!=this.$rf&&this.$rf.emit())),Vt.prototype.onUpdate.call(this,t)},onRemoved:function(){null!=this.$te&&this.owner.removeEntity(this.$te),Vt.prototype.onRemoved.call(this)},setMovie:function(t){return(null!=this.movieSprite?this.movieSprite.symbol._name:null)!=t&&(null!=this.movieSprite&&(this.movieSprite.$iF(!0),this.movieSprite.$hF(0),this.$te.removeComponent(this.movieSprite)),this.$AB=null,this.movieSprite=this.$yf(t),this.$te.addComponent(this.movieSprite),null!=this.playback&&(this.playback.dispose(),this.playback=null),this.playRange=new Fs("",null,0,this.movieSprite.symbol.duration),this.movieSprite.$iF(!0),this.movieSprite.$hF(0),null!=this.$sf&&this.$sf.emit(this.movieSprite)),this},play:function(t,e){return null==e&&(e=!1),null==t&&(t=!1),this.isLooping=t,this.playRange.name="",this.playRange.startTime=0,this.playRange.endTime=this.movieSprite.symbol.duration,e&&this.movieSprite.$hF(0),this.resume(),this.$uf()},$uf:function(){return null!=this.playback&&this.playback.dispose(),this.playback=new Br(this),this.playback},pause:function(){return this.isPaused=!0,this.movieSprite.$iF(!0),this.playback},resume:function(){return this.isPaused=!1,this.movieSprite.$iF(!1),this.playback},gotoAndPlay:function(t,e){return null==e&&(e=!1),this.isLooping=e,this.playRange.name="",this.playRange.startTime=0,this.playRange.endTime=this.movieSprite.symbol.duration,this.movieSprite.$hF(t),this.resume(),this.$uf()},gotoLabelAndPlay:function(t,e){null==e&&(e=!1),this.isLooping=e;t=this.getLabels().getLabelInfoByName(t);return null!=t&&(this.playRange.name=t.name,this.playRange.startTime=0,this.playRange.endTime=this.movieSprite.symbol.duration,this.movieSprite.$hF(t.startTime),this.resume()),this.$uf()},gotoLabelAndPlayRange:function(t,e,i){null==i&&(i=0),null==e&&(e=!1),this.isLooping=e;t=this.getLabels().getLabelInfoByName(t);return null!=t&&(this.playRange.name=t.name,this.playRange.startTime=t.startTime,this.playRange.endTime=t.endTime-i,this.movieSprite.$hF(this.playRange.startTime),this.resume()),this.$uf()},gotoAndPause:function(t){return this.movieSprite.$hF(t),this.pause(),this.$uf()},getLabels:function(){return null==this.movieSprite?null:(null==this.$AB&&(this.$AB=Ls.getLabels(this.movieSprite,"labels")),this.$AB)},$Vf:function(){return null==this.$rf&&(this.$rf=new mr),this.$rf},$xf:function(){return this.$Sf},$yf:function(t){if(this.$xf()&&Object.prototype.hasOwnProperty.call(this.$Tf.h,t)){var e=this.$Tf.h[t];return e.$hF(0),e}return this.$Yf(t)},$Yf:function(t){var e=this.$tf.createSprite(t,!1);return this.$xf()&&(this.$Tf.h[t]=e),e},dispose:function(){var t;this.$tf=null,this.$Rf=null,this.$rf=null,this.$sf=null,this.$AB=null,(this.playRange=null)!=(t=this.movieSprite)&&t.dispose(),(this.movieSprite=null)!=(t=this.playback)&&t.dispose(),(this.playback=null)!=(t=this.$te)&&t.dispose(),this.$te=null,this.$Tf=null,Vt.prototype.dispose.call(this)},__class__:Ur}),Xr.__name__=!0,Xr.__super__=f,Xr.prototype=e(f.prototype,{enable:function(){null!=this.owner&&null==this.owner.$w||(this.$_a=this.owner.$w.container,this.$_a.interactive=!0,this.$_a.buttonMode=this.$Z_,this.$_a.on(this.$Y_,this.$z_))},emit:function(){null!=this.$_a&&this.$z_(null)},disable:function(){null!=this.$_a&&(this.$_a.buttonMode=!1,this.$_a.interactive=!1,this.$_a.off(this.$Y_,this.$z_))},onStart:function(){this.enable()},dispose:function(){this.disable(),this.$z_=null,this.$_a=null,f.prototype.dispose.call(this)},get_name:function(){return"$y_"},__class__:Xr});var jr=function(t,e){null==e&&(e=!0),Xr.call(this,"pointertap",t,e)};jr.__name__=!0,jr.__super__=Xr,jr.prototype=e(Xr.prototype,{get_name:function(){return"$aa"},__class__:jr});var Vr=function(t,e){null==e&&(e=!0),Xr.call(this,"pointerdown",t,e)};Vr.__name__=!0,Vr.__super__=Xr,Vr.prototype=e(Xr.prototype,{get_name:function(){return"$Ke"},__class__:Vr});var Hr=function(t,e){null==e&&(e=!0),Xr.call(this,"pointermove",t,e)};Hr.__name__=!0,Hr.__super__=Xr,Hr.prototype=e(Xr.prototype,{get_name:function(){return"$ke"},__class__:Hr});var Gr=function(t,e){f.call(this),null==t&&(t=Yr.UP_OUT),this.state=new Mn(t,e)};Gr.__name__=!0,Gr.__super__=f,Gr.prototype=e(f.prototype,{onStart:function(){this.$_a=this.owner.$w.container,this.$_a.on("pointerover",Ys(this,this.$Of)),this.$_a.on("pointerout",Ys(this,this.$pf)),this.$_a.on("pointerup",Ys(this,this.$Pf)),this.$_a.on("pointerupoutside",Ys(this,this.$Pf)),this.$_a.on("pointerdown",Ys(this,this.$qf))},$Of:function(t){this.isPointerOver=!0,this.$ff()},$pf:function(t){this.isPointerOver=!1,this.$ff()},$Pf:function(t){this.isPointerDown=!1,this.$ff()},$qf:function(t){this.isPointerDown=!0,this.$ff()},$ff:function(){this.isPointerDown?this.state.set__(this.isPointerOver?Yr.DOWN_OVER:Yr.DOWN_OUT):this.state.set__(this.isPointerOver?Yr.UP_OVER:Yr.UP_OUT)},dispose:function(){this.$_a.off("pointerover",Ys(this,this.$Of)),this.$_a.off("pointerout",Ys(this,this.$pf)),this.$_a.off("pointerup",Ys(this,this.$Pf)),this.$_a.off("pointerupoutside",Ys(this,this.$Pf)),this.$_a.off("pointerdown",Ys(this,this.$qf)),this.$_a=null,f.prototype.dispose.call(this)},get_name:function(){return"$of"},__class__:Gr});var Yr=d["temple.components.pointer.PointerState"]={__ename__:!0,__constructs__:["UP_OVER","UP_OUT","DOWN_OVER","DOWN_OUT"],UP_OVER:{_hx_index:0,__enum__:"temple.components.pointer.PointerState",toString:r},UP_OUT:{_hx_index:1,__enum__:"temple.components.pointer.PointerState",toString:r},DOWN_OVER:{_hx_index:2,__enum__:"temple.components.pointer.PointerState",toString:r},DOWN_OUT:{_hx_index:3,__enum__:"temple.components.pointer.PointerState",toString:r}},Wr=function(t){this.$Mf=new qn,this.$mf=new qn,this.$Lf=new qn,f.call(this),this.$df=new Us(Ys(i=this.$mf,i.emit),t)};Wr.__name__=!0,Wr.__super__=f,Wr.prototype=e(f.prototype,{connect:function(t,e){return null==e&&(e=!1),this.$mf.connect(t,e)},connectBefore:function(t,e){return null==e&&(e=!1),this.$Lf.connect(t,e)},connectAfter:function(t,e){return null==e&&(e=!1),this.$Mf.connect(t,e)},onUpdate:function(t){this.$Lf.emit(t),this.$df.update(t),this.$Mf.emit(this.$df.alpha)},dispose:function(){this.$Lf.dispose(),this.$mf.dispose(),this.$Mf.dispose(),this.$df.dispose(),f.prototype.dispose.call(this)},get_name:function(){return"$lf"},__class__:Wr});var zr=function(t,e){this.x=kn.take(t),this.y=kn.take(e)};zr.__name__=!0,zr.__interfaces__=[n],zr.prototype={set:function(t,e){this.x.set__(t),this.y.set__(null!=e?e:t)},dispose:function(){this.x=kn.put(this.x),this.y=kn.put(this.y)},__class__:zr};var qr=function(t){null==t&&(t=!1),f.call(this),this.$if=t};qr.__name__=!0,qr.__super__=f,qr.prototype=e(f.prototype,{onAdded:function(){null==this.$ya&&(this.$ya=this.owner.$w),f.prototype.onAdded.call(this),null!=this.$ya&&(this.$_a=this.$ya.container)},onStart:function(){var t;null==this.$ya&&(this.$ya=this.owner.$w),f.prototype.onStart.call(this),this.$_a=this.$ya.container,this.$if&&(null==(t=this.owner.$mF)&&(t=new An,this.owner.addComponent(t)),t.add(this.owner._internal_getFromParents("$lf").connect(Ys(this,this.$kf))))},$Y:function(){return null==this.$NB&&(this.$NB=new zr(null!=this.$_a?this.$_a.position.x:0,null!=this.$_a?this.$_a.position.y:0)),this.$NB},$z:function(){return null==this.$_A&&(this.$_A=new zr(null!=this.$_a?this.$_a.scale.x:1,null!=this.$_a?this.$_a.scale.y:1)),this.$_A},$A_:function(){return null==this.$Jf&&(this.$Jf=kn.take(null!=this.$_a?this.$_a.alpha:1)),this.$Jf},$kf:function(t){this.$Kf(t)},onUpdate:function(t){f.prototype.onUpdate.call(this,t),this.$if||this.$Kf(t)},$Kf:function(t){var e;null!=this.$_a&&(null!=this.$NB&&((e=this.$NB).x.update(t),e.y.update(t),this.$_a.position.set(this.$NB.x._value,this.$NB.y._value)),null!=this.$_A&&((e=this.$_A).x.update(t),e.y.update(t),this.$_a.scale.set(this.$_A.x._value,this.$_A.y._value)),null!=this.$jf&&((e=this.$jf).x.update(t),e.y.update(t),this.$_a.pivot.set(this.$jf.x._value,this.$jf.y._value)),null!=this.$If&&(this.$If.update(t),this.$_a.rotation=this.$If._value),null!=this.$Jf&&(this.$Jf.update(t),this.$_a.alpha=this.$Jf._value))},dispose:function(){null!=this.$NB&&(this.$NB.dispose(),this.$NB=null),null!=this.$If&&(this.$If.dispose(),this.$If=null),null!=this.$_A&&(this.$_A.dispose(),this.$_A=null),null!=this.$jf&&(this.$jf.dispose(),this.$jf=null),null!=this.$Jf&&(this.$Jf.dispose(),this.$Jf=null),this.$_a=null,f.prototype.dispose.call(this)},get_name:function(){return"$Hf"},__class__:qr});var Jr=function(t,e){null==e&&(e=!0),this.isExecuting=!1,this._tasks=null!=t?t:[],this.continueOnErrors=e};function Kr(){this._disposer=new An}Jr.__name__=!0,Jr.prototype={execute:function(t){return this.onComplete=t,this.isExecuting=!0,this.nextTask(),this},nextTask:function(){var i=this;null!=this.currentTask&&(this.currentTask.dispose(),this.currentTask=null),0<this._tasks.length?(this.currentTask=this._tasks.shift(),this.currentTask.onComplete=function(t){null!=i.onTaskComplete&&i.onTaskComplete(t),i.nextTask()},this.currentTask.onError=function(t,e){null!=i.onTaskError&&i.onTaskError(t,e),i.continueOnErrors&&i.nextTask()},this.currentTask.execute()):(this.isExecuting=!1,null!=this.onComplete&&this.onComplete())},__class__:Jr},Kr.__name__=!0,Kr.__interfaces__=[n],Kr.prototype={execute:function(){},complete:function(){null!=this.onComplete&&this.onComplete(this)},error:function(t){null!=this.onError&&this.onError(this,t)},dispose:function(){this.onError=null,this.onComplete=null,this._disposer.dispose(),this._disposer=null},__class__:Kr};var Zr=function(t){Kr.call(this),this._preloader=t,Zr.NUM_PRELOADER_STEPS++,this._currentPreloaderStep=Zr.NUM_PRELOADER_STEPS};Zr.__name__=!0,Zr.__super__=Kr,Zr.prototype=e(Kr.prototype,{calcProgress:function(t){var e=1/Zr.NUM_PRELOADER_STEPS;return(this._currentPreloaderStep-1)*e+t*e},dispose:function(){this._preloader=null,Kr.prototype.dispose.call(this)},__class__:Zr});var Qr=function(t,e){Zr.call(this,e),this._manifest=t};function ts(t,e){null==e&&(e=3),Kr.call(this),this._fontName=t,this._maxWaitTime=e}function es(t,e,i){this._fontStyle="normal",this._fontWeight="normal",Kr.call(this),this._fontName=t,this._extensions=e,this._path=i}Qr.__name__=!0,Qr.__super__=Zr,Qr.prototype=e(Zr.prototype,{execute:function(){var s=this,o=this._manifest;0==o.fileNames.length||Object.prototype.hasOwnProperty.call(Rn.assets.assetPackByName.h,o.path)?this.complete():(this._pack=Rn.assets.loadPack(o,function(t){null!=s._preloader&&s._preloader.setProgress(s.calcProgress(1));for(var e=0,i=t.manifest.fileNames;e<i.length;){var n,r=i[e];++e,-1<r.indexOf("library.json")&&((n=(o.path+r).split("/")).pop(),(r=r.split("/")).pop(),n=n[n.length-1],r=new hr(t,r.join("/")+"/"),x._libraryByName.set(n,r))}s.complete()}),null!=this._preloader&&this._disposer.add(this._pack.get_progress().watch(function(t,e){s._preloader.setProgress(s.calcProgress(t))})))},__class__:Qr}),ts.__name__=!0,ts.__super__=Kr,ts.prototype=e(Kr.prototype,{execute:function(){new FontFaceObserver(this._fontName).load(null,1e3*this._maxWaitTime).then(Ys(this,this.onLoadComplete),Ys(this,this.onLoadError))},onLoadComplete:function(t){this.complete()},onLoadError:function(t){this.error("Given up on loading font '"+t.family+"' after waiting for "+this._maxWaitTime+" seconds")},__class__:ts}),es.__name__=!0,es.__super__=Kr,es.prototype=e(Kr.prototype,{execute:function(){for(var t=""+this._path+this._fontName,e=[],i=0,n=this._extensions;i<n.length;){var r=n[i];switch(++i,r.toLowerCase()){case"eot":s='url("'+t+'.eot?#iefix") format("embedded-opentype")';break;case"otf":s='url("'+t+'.otf") format("opentype")';break;case"svg":s='url("'+t+".svg?#"+this._fontName+'") format("svg")';break;case"ttf":s='url("'+t+'.ttf") format("truetype")';break;case"woff":s='url("'+t+'.woff") format("woff")';break;case"woff2":s='url("'+t+'.woff2") format("woff2")';break;default:s=""}e.push(s)}var s=e.join(", "),o=-1!=this._extensions.indexOf("eot")?'src: url("'+t+'.eot"); src: '+s:"src: "+s,a='@font-face {\n\t\t\tfont-family: "'+this._fontName+'";\n\t\t\t'+o+";\n\t\t\tfont-weight: "+this._fontWeight+";\n\t\t\tfont-style: "+this._fontStyle+"; \n\t\t}",o=window.document.createElement("style");o.type="text/css",o.styleSheet?o.styleSheet.cssText=a:o.appendChild(window.document.createTextNode(a)),window.document.head.appendChild(o),this.complete()},__class__:es});var is=function(t){Kr.call(this),this._method=t};is.__name__=!0,is.__super__=Kr,is.prototype=e(Kr.prototype,{execute:function(){Kr.prototype.execute.call(this),null!=this._method&&this._method(),this.complete()},__class__:is});var ns=function(t){this._isExecuted=!1,this._isEmitted=!1;var e=this;Kr.call(this),this._signal=t,this._connection=this._signal.connect(function(){e._isEmitted=!0,e.tryComplete()})};ns.__name__=!0,ns.__super__=Kr,ns.prototype=e(Kr.prototype,{tryComplete:function(){this._isEmitted&&this._isExecuted&&this.complete()},execute:function(){Kr.prototype.execute.call(this),this._isExecuted=!0,this.tryComplete()},__class__:ns});var rs=function(t,e,i){if(this._numConcurrentLoads=4,Zr.call(this,i),this._soundManager=e,-1!=window.navigator.userAgent.indexOf("Edge"))for(var n=0,r=t.fileNames;n<r.length;){var s=r[n];++n;for(var o=new Os(s,s.length-1,0,1);o.hasNext();){var a=o.next();-1==a.value.toLowerCase().indexOf(".mp3")&&u.remove(s,a.value)}}this._loader=new Ss(t.fileNames),this._preloader=i};rs.__name__=!0,rs.__super__=Zr,rs.prototype=e(Zr.prototype,{execute:function(){var e=this;Zr.prototype.execute.call(this),null!=this._preloader&&(this._loader.onProgress=function(t){e._preloader.setProgress(e.calcProgress(e._loader.progress))}),this._loader.onComplete=function(){null!=e._preloader&&e._preloader.setProgress(e.calcProgress(1)),e.complete()},this._loader.load(this._numConcurrentLoads)},complete:function(){this._soundManager.registerSounds(this._loader.sounds),Zr.prototype.complete.call(this)},dispose:function(){this._loader.onProgress=null,this._loader.onComplete=null,this._loader=null,Zr.prototype.dispose.call(this)},__class__:rs});var ss=function(t){Kr.call(this),this._manifest=t};function os(t,e){this.point1=null!=t?t:{x:0,y:0},this.point2=null!=e?e:{x:0,y:0}}ss.__name__=!0,ss.__super__=Kr,ss.prototype=e(Kr.prototype,{execute:function(){for(var i=this,t=Object.create(null),e=[],n=0,r=this._manifest.fileNames;n<r.length;){var s=r[n];++n;var o=gr.removeFileExtension(s),s=gr.getFileExtension(s);-1!=ss.FONT_EXTENSIONS.indexOf(s)&&(Object.prototype.hasOwnProperty.call(t,o)||(t[o]=[]),t[o].push(s),-1==e.indexOf(o)&&e.push(o))}for(var a=Sr.valueIterator(t);a.hasNext();)a.next().sort(function(t,e){t=ss.FONT_EXTENSIONS.indexOf(t),e=ss.FONT_EXTENSIONS.indexOf(e);return t==e?0:e<t?1:-1});for(var h=[],l=0;l<e.length;){var u=e[l++];h.push(new es(u,t[u],this._manifest.path)),h.push(new ts(u))}this._sequence=new Jr(h),this._sequence.onTaskError=function(t,e){i.error(e)},this._sequence.execute(Ys(this,this.complete))},__class__:ss});var as=d["temple.enums.Align"]={__ename__:!0,__constructs__:["LEFT","RIGHT","TOP","BOTTOM","BOTTOM_LEFT","BOTTOM_RIGHT","TOP_LEFT","TOP_RIGHT","CENTER"],LEFT:{_hx_index:0,__enum__:"temple.enums.Align",toString:r},RIGHT:{_hx_index:1,__enum__:"temple.enums.Align",toString:r},TOP:{_hx_index:2,__enum__:"temple.enums.Align",toString:r},BOTTOM:{_hx_index:3,__enum__:"temple.enums.Align",toString:r},BOTTOM_LEFT:{_hx_index:4,__enum__:"temple.enums.Align",toString:r},BOTTOM_RIGHT:{_hx_index:5,__enum__:"temple.enums.Align",toString:r},TOP_LEFT:{_hx_index:6,__enum__:"temple.enums.Align",toString:r},TOP_RIGHT:{_hx_index:7,__enum__:"temple.enums.Align",toString:r},CENTER:{_hx_index:8,__enum__:"temple.enums.Align",toString:r}};os.__name__=!0,os.prototype={__class__:os};var hs={distanceTo:function(t,e){var i=t.x,t=t.y,i=i-e.x,e=t-e.y;return Math.sqrt(i*i+e*e)},normalize:function(t){if(0==t.x&&0==t.y)return t;var e=Math.sqrt(t.x*t.x+t.y*t.y);return t.x/=e,t.y/=e,t},angle:function(t){return Math.atan2(t.y,t.x)}},ls={empty:function(){return{x:0,y:0,z:0}}},us=function(t,e,i,n,r,s){this.$bE=0,this.$AE=0,this.$aE=[],this.$_E=2,this.doApply=!0,this.maxScale=2147483647,this.$Ye=fs.None,this.scale=1,this.$ye=ms.Auto,this.pivotY=0,this.$Xe=ms.Auto,this.pivotX=0,this.$xe=ms.Auto,this.height=0,this.$We=ms.Auto,this.width=0,this.$we=ms.Auto,this.y=0,this.$Ve=ms.Auto,this.x=0,f.call(this),null!=i&&this.setX(i),null!=n&&this.setY(n),null!=t&&this.setWidth(t),null!=e&&this.setHeight(e),null!=r&&this.setPivotX(r),null!=s&&this.setPivotY(s)};function cs(t,e){this.value=t,this.unit=e}us.__name__=!0,us.__super__=f,us.prototype=e(f.prototype,{onAdded:function(){f.prototype.onAdded.call(this);try{this.onStart()}catch(t){}},onStart:function(){var t;f.prototype.onStart.call(this),this.$_a=this.owner.$w.container,null!=this.owner.parent&&null!=(t=this.owner.parent._internal_getFromParents("$ve"))&&((t=t).$CE(this),this.$AE=t.width,this.$bE=t.height),this.$DE(),this.update()},onStop:function(){var t;f.prototype.onStop.call(this),null!=this.owner.parent&&null!=(t=this.owner.parent._internal_getFromParents("$ve"))&&t.$dE(this)},setScaleMode:function(t){return this.$Ye=t,this.$DE(),this},$CE:function(t){-1==this.$aE.indexOf(t)&&(this.$aE.push(t),this.$DE())},$dE:function(t){-1==this.$aE.indexOf(t)&&(u.remove(this.$aE,t),this.$DE())},setWidth:function(t){return this.$We=t,this.$DE(),this},setHeight:function(t){return this.$xe=t,this.$DE(),this},setX:function(t){return this.$Ve=t,this.$DE(),this},setY:function(t){return this.$we=t,this.$DE(),this},setPivotX:function(t){return this.$Xe=t,this.$DE(),this},setPivotY:function(t){return this.$ye=t,this.$DE(),this},resize:function(t,e){this.$DE(),this.$AE=t,this.$bE=e,this.update();for(var i=0,n=this.$aE;i<n.length;)n[i++].resize(this.width,this.height)},$DE:function(){this.$_E=2},update:function(){if(!(this.$_E<=0||null==this.$_a||null==this.owner)){this.$_E--,this.width=this.$EE(this.$We,this.$_a.width,this.$AE),this.height=this.$EE(this.$xe,this.$_a.height,this.$bE),this.x=this.$EE(this.$Ve,this.$_a.x,this.$AE),this.y=this.$EE(this.$we,this.$_a.y,this.$bE);var t,e=this.$Ye;switch(e._hx_index){case 0:t=1;break;case 1:t=e.value;break;case 2:var i=null;null!=this.owner.parent&&(i=this.owner.parent._internal_getFromParents("$ve")),t=null!=(r=i)?Math.min(r.width/this.width,r.height/this.height):1;break;case 3:(i=null)!=this.owner.parent&&(i=this.owner.parent._internal_getFromParents("$ve"));var n=null!=(r=i)?Math.min(r.width/e.w,r.height/e.h):1;this.width/=n,this.height/=n,t=n;break;case 4:(i=null)!=this.owner.parent&&(i=this.owner.parent._internal_getFromParents("$ve")),t=null!=(r=i)?Math.max(r.width/this.width,r.height/this.height):1;break;case 5:(i=null)!=this.owner.parent&&(i=this.owner.parent._internal_getFromParents("$ve")),n=null!=(r=i)?Math.min(r.width/e.w,r.height/e.h):1,this.width/=n,this.height/=n,t=n;break;case 6:(i=null)!=this.owner.parent&&(i=this.owner.parent._internal_getFromParents("$ve")),t=null!=(r=i)?r.height/this.height:1;break;case 7:var r,i=null;null!=this.owner.parent&&(i=this.owner.parent._internal_getFromParents("$ve")),t=null!=(r=i)?r.width/this.width:1}this.scale=t,this.scale=Math.min(this.scale,this.maxScale),this.pivotX=this.$EE(this.$Xe,this.$_a.pivot.x,this.width),this.pivotY=this.$EE(this.$ye,this.$_a.pivot.y,this.height),this.doApply&&this.$eE(),null!=(r=this.$ze)&&r.emit()}},$eE:function(){this.$_a.position.set(this.x,this.y),this.$_a.pivot.set(this.pivotX,this.pivotY),this.$Ye!=fs.None&&this.$_a.scale.set(this.scale,this.scale)},onUpdate:function(t){0<this.$_E&&this.update()},$EE:function(t,e,i){switch(t._hx_index){case 0:return e;case 1:return i*t.percentage;case 2:return t.observable._value;case 3:return t.value;case 4:return _s.calculate(i,t.calculations)}},get_name:function(){return"$ve"},dispose:function(){null!=this.$cE&&(this.$cE.dispose(),this.$cE=null),f.prototype.dispose.call(this)},__class__:us});var ps={fromString:function(t){return"auto"==t?ms.Auto:new l("^[0-9.]{1,}%$","").match(t)?ms.Percent(parseFloat(u.substr(t,0,t.length-1))/100):ms.Calc(_s.parse(t))}},ds=d["temple.layout.LayoutCalculationOperator"]={__ename__:!0,__constructs__:["Add","Substract","Multiply","Divide"],Add:{_hx_index:0,__enum__:"temple.layout.LayoutCalculationOperator",toString:r},Substract:{_hx_index:1,__enum__:"temple.layout.LayoutCalculationOperator",toString:r},Multiply:{_hx_index:2,__enum__:"temple.layout.LayoutCalculationOperator",toString:r},Divide:{_hx_index:3,__enum__:"temple.layout.LayoutCalculationOperator",toString:r}};cs.__name__=!0,cs.prototype={__class__:cs};var _s=function(){};_s.__name__=!0,_s.parse=function(t){for(var e=t.split(" "),i=[],n=0;n<e.length;)i.push(_s.parsePart(e[n])),++n;return i},_s.parsePart=function(t){var e=_s._operatorLookup.indexOf(t);if(0<=e)return _s._operators[e];var i,n,r=new l("([\\+\\-]?[0-9\\.]+)(%|px|vw|vh)?",""),s=r.match(t);try{i=r.matched(1)}catch(t){i=null}try{n=r.matched(2)}catch(t){n=null}e=null!=n?n:"px";if(s){var o=parseFloat(null!=i?r.matched(1):r.matched(0));return new cs(null!=o?o:0,e)}return o=parseFloat(t),new cs(null!=o?o:0,e)},_s.calculate=function(t,e){for(var i=_s.processUnit(t,e[0]),n=2,r=e.length;n<r;)i=_s.processOperator(i,e[n-1],_s.processUnit(t,e[n])),n+=2;return i},_s.processOperator=function(t,e,i){switch(e._hx_index){case 0:return t+i;case 1:return t-i;case 2:return t*i;case 3:return t/i}},_s.processUnit=function(t,e){switch(e.unit){case"%":return t*(e.value/100);case"px":return e.value;case"vh":return t*(Rn.renderer.height/Rn.renderer.resolution|0);case"vw":return t*(Rn.renderer.width/Rn.renderer.resolution|0)}};var fs=d["temple.layout.LayoutScaleMode"]={__ename__:!0,__constructs__:["None","Fixed","Contain","Contained","Cover","Covered","FitToHeight","FitToWidth"],None:{_hx_index:0,__enum__:"temple.layout.LayoutScaleMode",toString:r},Fixed:((i=function(t){return{_hx_index:1,value:t,__enum__:"temple.layout.LayoutScaleMode",toString:r}}).__params__=["value"],i),Contain:{_hx_index:2,__enum__:"temple.layout.LayoutScaleMode",toString:r},Contained:((i=function(t,e){return{_hx_index:3,w:t,h:e,__enum__:"temple.layout.LayoutScaleMode",toString:r}}).__params__=["w","h"],i),Cover:{_hx_index:4,__enum__:"temple.layout.LayoutScaleMode",toString:r},Covered:((i=function(t,e){return{_hx_index:5,w:t,h:e,__enum__:"temple.layout.LayoutScaleMode",toString:r}}).__params__=["w","h"],i),FitToHeight:{_hx_index:6,__enum__:"temple.layout.LayoutScaleMode",toString:r},FitToWidth:{_hx_index:7,__enum__:"temple.layout.LayoutScaleMode",toString:r}},ms=d["temple.layout.LayoutType"]={__ename__:!0,__constructs__:["Auto","Percent","Observable","Relative","Calc"],Auto:{_hx_index:0,__enum__:"temple.layout.LayoutType",toString:r},Percent:((i=function(t){return{_hx_index:1,percentage:t,__enum__:"temple.layout.LayoutType",toString:r}}).__params__=["percentage"],i),Observable:((i=function(t){return{_hx_index:2,observable:t,__enum__:"temple.layout.LayoutType",toString:r}}).__params__=["observable"],i),Relative:((i=function(t){return{_hx_index:3,value:t,__enum__:"temple.layout.LayoutType",toString:r}}).__params__=["value"],i),Calc:((i=function(t){return{_hx_index:4,calculations:t,__enum__:"temple.layout.LayoutType",toString:r}}).__params__=["calculations"],i)},ys=function(){};ys.__name__=!0,ys.trackPageview=function(t){if(ys.enabled)try{null==t?ga("send","pageview"):ga("send","pageview",t)}catch(t){}},ys.trackEvent=function(t,e,i,n){if(ys.enabled)try{ga("send","event",t,e,i,n)}catch(t){}};var gs=function(){this.$Ef=.03333333333333333,this.$a=new An,this.$Df=[],this.player=new Mn(null),this.$Cf=[],this.$cf=[],this.updateComplete=new mr,this.physicsUpdate=new qn,f.call(this),this.$ef=this.$Ef};gs.__name__=!0,gs.__super__=f,gs.prototype=e(f.prototype,{onStart:function(){null==this.$df&&(this.$df=this.owner._internal_getFromParents("$lf")),f.prototype.onStart.call(this),this.$a.add(this.$df.connectBefore(Ys(this,this.updateBefore))),this.$a.add(this.$df.connect(Ys(this,this.$ff))),this.$a.add(this.$df.connectAfter(Ys(this,this.$Ff)))},updateBefore:function(t){for(var e=this.$cf.length,i=this.$Cf.length,n=0,r=i<e?e:i;n<r;){var s=n++;s<e&&this.$cf[s].updateBefore(t),s<i&&this.$Cf[s].updateBefore(t)}this.$gf(),this.updateComplete.emit()},$ff:function(t){null!=this.$ef&&(this.$ef-=t),t=this.$df.$df._fixedTimestep;for(var e=this.$cf.length,i=this.$Cf.length,n=0,r=i<e?e:i;n<r;){var s,o=n++;o<e&&((s=this.$cf[o]).physicsEnabled&&null!=s.owner&&s.updatePhysics(t)),o<i&&(c=this.$Cf[o]).physicsEnabled&&null!=c.owner&&c.updatePhysics(t)}this.physicsUpdate.emit(this.$df.$df._fixedTimestep);for(var a=this.$Cf,h=0;h<a.length;){var l=a[h],u=h++;if(l.collisionsEnabled)for(n=1+u,r=this.$Cf.length;n<r;)(_=this.$Cf[n++]).collisionsEnabled&&$s.report(l,_)}for(n=0,r=this.$Cf;n<r.length;){var c=r[n];if(++n,c.collisionsEnabled)for(var p=0,d=this.$cf;p<d.length;){var _=d[p];++p,_.collisionsEnabled&&$s.report(c,_)}}},$Ff:function(t){for(var e,i=this.$cf.length,n=this.$Cf.length,r=0,s=n<i?i:n;r<s;){var o,a=r++;a<i&&((o=this.$cf[a]).physicsEnabled&&null!=o.owner&&o.updateAfter(t),null!=(e=this.$ef)&&e<=0&&o.pruneCurrentCollisions()),a<n&&((o=this.$Cf[a]).physicsEnabled&&null!=o.owner&&o.updateAfter(t),null!=(a=this.$ef)&&a<=0&&o.pruneCurrentCollisions())}null!=(e=this.$ef)&&e<=0&&(this.$ef=this.$Ef)},$gf:function(){for(;0<this.$Df.length;){var t=this.$Df.pop();u.remove(this.$cf,t),u.remove(this.$Cf,t)}},remove:function(t){t.disableCollisions(),t.disablePhysics(),-1==this.$Df.indexOf(t)&&this.$Df.push(t)},add:function(t){var e;switch(t.type){case 1:e=this.$Cf;break;case 2:case 3:e=this.$cf}-1==e.indexOf(t)&&e.push(t),u.remove(this.$Df,t)},get_name:function(){return"$Bf"},dispose:function(){null!=this.physicsUpdate&&(this.physicsUpdate.dispose(),this.physicsUpdate=null),null!=this.updateComplete&&(this.updateComplete.dispose(),this.updateComplete=null),null!=this.player&&(this.player.dispose(),this.player=null),null!=this.$a&&(this.$a.dispose(),this.$a=null),f.prototype.dispose.call(this)},__class__:gs});var vs=function(t){null==t&&(t=!0),this.$rE={x:0,y:0},this.$vc=vs.$Uc,f.call(this),this.updateEveryFrame=t};vs.__name__=!0,vs.__super__=f,vs.prototype=e(f.prototype,{onStart:function(){null==this.$_b&&(this.$_b=this.owner.$RE),null==this.$ya&&(this.$ya=this.owner._internal_getFromParents("$w")),this.updatePosition()},onUpdate:function(t){this.updateEveryFrame&&this.updatePosition()},updatePosition:function(){var t;null!=this.$ya&&null!=this.$ya.container&&null!=this.$ya.container.parent&&(this.$ya.container.parent.toLocal(vs.$Uc,this.$ya.container,this.$rE),null!=this.$_b?((t=this.$_b).position.x=t.step.x=t.$wE.x=this.$rE.x+this.$vc.x,(t=this.$_b).position.y=t.step.y=t.$wE.y=this.$rE.y+this.$vc.y):(this.$ya.container.x=this.$rE.x+this.$vc.x,this.$ya.container.y=this.$rE.y+this.$vc.y))},get_name:function(){return"$QE"},onAdded:function(){null==this.$_b&&(this.$_b=this.owner.$RE),f.prototype.onAdded.call(this)},__class__:vs});var ws=function(t){this.$Sc=new PIXI.Rectangle,this.enabled=!0,f.call(this),this.$Rc=t};ws.__name__=!0,ws.getBoxToBoxIntersection=function(t,e,i,n,r){var s=(a=t.step.x+e.left)>(l=i.step.x+n.left)?a:l,o=(a=t.step.x+e.right)<(l=i.step.x+n.right)?a:l;if(o<s)return null;var a,h=(a=t.step.y+e.top)>(l=i.step.y+n.top)?a:l,l=(a=t.step.y+e.bottom)<(l=i.step.y+n.bottom)?a:l;return l<h?null:(r.x=s,r.y=h,r.width=o-s,r.height=l-h,r)},ws.__super__=f,ws.prototype=e(f.prototype,{onStart:function(){null==this.$_b&&(this.$_b=this.owner.$RE),f.prototype.onStart.call(this),this.$h=this.$_b.$Tc().connect(Ys(this,this.$tc))},$tc:function(t){if(this.enabled&&this.isValidHit(t)){var e=t.type;if(0===e._hx_index){var i=e.otherBounds,n=e.currentBounds,r=e.currentSides;if(1==r.length)switch(r[0]){case 1:(s=t.other).position.x=s.step.x=s.$wE.x=t.current.position.x-i.width-i.x+n.x,t.other.velocity.x=0;break;case 2:(s=t.other).position.y=s.step.y=s.$wE.y=t.current.position.y-i.height-i.y+n.y,t.other.velocity.y=0;break;case 4:(s=t.other).position.x=s.step.x=s.$wE.x=t.current.position.x+n.width-i.x+n.x,t.other.velocity.x=0;break;case 8:(s=t.other).position.y=s.step.y=s.$wE.y=t.current.position.y+n.height-i.y+n.y,t.other.velocity.y=0}else{var s,e=ws.getBoxToBoxIntersection(t.current,n,t.other,i,this.$Sc);null!=e&&(e.width>=e.height?-1!=r.indexOf(2)?((s=t.other).position.y=s.step.y=s.$wE.y=t.current.position.y-i.height-i.y+n.y,t.other.velocity.y=0):-1!=r.indexOf(8)&&((s=t.other).position.y=s.step.y=s.$wE.y=t.current.position.y+n.height-i.y+n.y,t.other.velocity.y=0):-1!=r.indexOf(1)?((s=t.other).position.x=s.step.x=s.$wE.x=t.current.position.x-i.width-i.x+n.x,t.other.velocity.x=0):-1!=r.indexOf(4)&&((s=t.other).position.x=s.step.x=s.$wE.x=t.current.position.x+n.width-i.x+n.x,t.other.velocity.x=0))}}null!=this.$sc&&this.$sc.emit(t)}},isValidHit:function(t){return null==this.$Rc||0==(this.$_b.filterFlags&t.other.flags)},get_name:function(){return"$rc"},onAdded:function(){null==this.$_b&&(this.$_b=this.owner.$RE),f.prototype.onAdded.call(this)},dispose:function(){null!=this.$h&&(this.$h.dispose(),this.$h=null),f.prototype.dispose.call(this)},__class__:ws});var xs=function(t,e,i,n,r){null==r&&(r=bs.Exclusive),null==n&&(n=0),null==i&&(i=0),this.filterFlagsMethod=bs.Exclusive,this.$YE=-1,this.$yE=-1,this.$xE=!1,this.$WE=0,this.prevPosition={x:0,y:0},this.$wE={x:0,y:0},this.$VE=[],this.$vE=[],this.$UE=[],this.friction={x:1,y:1},this.step={x:0,y:0},this.impulse={x:0,y:0},this.velocity={x:0,y:0},this.position={x:0,y:0},this.collisionsEnabled=!0,this.physicsEnabled=!0,f.call(this),this.shape=t,this.type=e,this.flags=i,this.filterFlags=n,this.debugColor=1==e?16763904:52479};xs.__name__=!0,xs.__super__=f,xs.prototype=e(f.prototype,{setMass:function(t){return this.$WE=t,this},setData:function(t){return this.data=t,this},setFilterFlagsMethod:function(t){return this.filterFlagsMethod=t,this},onStart:function(){null==this.engine&&(this.engine=this.owner._internal_getFromParents("$Bf")),this.$zE(),this.setXY(this.position.x,this.position.y),this.$XE=this.engine.$df.$df._fixedTimestep},$zE:function(){this.engine.add(this)},onRemoved:function(){null!=this.engine&&this.engine.remove(this)},setXY:function(t,e){return this.position.x=this.step.x=this.$wE.x=t,this.position.y=this.step.y=this.$wE.y=e,this},updateBefore:function(t){var e=this.$tE;null!=e&&e.emit()},updatePhysics:function(t){var e=this.$wE,i=this.step;e.x=i.x,e.y=i.y,e=this.step;var n,r,s,o,a=this.impulse,h=this.velocity,l=(s=a.x,o=a.y,s+=h.x),h=o+=h.y,l=s*t,h=o*t;e.x+=l,e.y+=h,-1!=this.$yE&&(n=this.$yE,r=this.step.y,this.step.y=n<r?n:r,this.step.y==this.$yE&&(this.velocity.y=0)),-1!=this.$YE&&(n=this.$YE,r=this.step.y,this.step.y=r<n?n:r,this.step.y==this.$YE&&(this.velocity.y=0)),e=this.position,i=this.step,e.x=i.x,e.y=i.y,0!=this.$WE&&(this.velocity.y+=this.$WE*xs.gravity*t),e=this.velocity,s=(a=this.friction).x,o=a.y,s*=t,o*=t,l=s/(i=this.$XE),h=o/i,e.x*=l,e.y*=h,e=this.impulse,s=(a=this.friction).x,o=a.y,s*=t,o*=t,l=s/(i=this.$XE),h=o/i,e.x*=l,e.y*=h,null!=(e=this.$uE)&&e.emit(t)},updateAfter:function(t){var e=this.prevPosition,i=this.position;e.x=i.x,e.y=i.y,this.step.x!=this.$wE.x&&(this.position.x=this.step.x*t+this.$wE.x*(1-t)),this.step.y!=this.$wE.y&&(this.position.y=this.step.y*t+this.$wE.y*(1-t)),null!=(e=this.$TE)&&e.emit(t)},disablePhysics:function(){return this.physicsEnabled=!1,this},disableCollisions:function(){return this.collisionsEnabled=!1,this},enableCollisions:function(){return this.collisionsEnabled=!0,this},reportCollision:function(t){if(null!=this.owner&&null!=t.other.owner){if(this.filterFlagsMethod==bs.Exclusive){if(0!=(t.other.flags&this.filterFlags))return}else if(0==(t.other.flags&this.filterFlags))return;var e;this.$VE.push(t.other),-1==this.$UE.indexOf(t.other)&&(this.$UE.push(t.other),-1==this.$vE.indexOf(t.other)&&(this.$vE.push(t.other),null!=(e=this.$sE)&&e.emit(t))),null!=(e=this.$sc)&&e.emit(t)}},$Tc:function(){return null!=this.$sc?this.$sc:this.$sc=new qn},$ZE:function(){return null!=this.$sE?this.$sE:this.$sE=new qn},pruneCurrentCollisions:function(){for(var t=0,e=this.$vE;t<e.length;){var i,n=e[t];++t,-1==this.$VE.indexOf(n)&&(u.remove(this.$UE,n),null!=(i=this.$SE)&&i.emit(n))}this.$vE=this.$UE.slice(),this.$VE=[]},dispose:function(){this.$xE||(null!=this.engine&&this.engine.remove(this),this.$xE=!0,f.prototype.dispose.call(this))},get_name:function(){return"$RE"},__class__:xs});var bs=d["temple.physics.core.FilterFlagsMethod"]={__ename__:!0,__constructs__:["Inclusive","Exclusive"],Inclusive:{_hx_index:0,__enum__:"temple.physics.core.FilterFlagsMethod",toString:r},Exclusive:{_hx_index:1,__enum__:"temple.physics.core.FilterFlagsMethod",toString:r}};(yi=function(){}).__name__=!0,yi.prototype={set:function(t,e,i,n,r){return this.other=e,this.current=t,this.type=i,this.currentShape=n,this.otherShape=r,this},__class__:yi};var Es=d["temple.physics.core.CollisionType"]={__ename__:!0,__constructs__:["BoxToBox","LineToBox"],BoxToBox:((i=function(t,e,i,n){return{_hx_index:0,currentSides:t,currentBounds:e,otherSides:i,otherBounds:n,__enum__:"temple.physics.core.CollisionType",toString:r}}).__params__=["currentSides","currentBounds","otherSides","otherBounds"],i),LineToBox:((i=function(t,e,i){return{_hx_index:1,contactPoints:t,line:e,boxBounds:i,__enum__:"temple.physics.core.CollisionType",toString:r}}).__params__=["contactPoints","line","boxBounds"],i)},$s=function(){};$s.__name__=!0,$s.report=function(t,e){$s.reportCollision(t.shape,t,e.shape,e)},$s.reportCollision=function(t,e,i,n){switch(t._hx_index){case 0:var r=t.bounds;switch(i._hx_index){case 0:var s,o=i.bounds,a=$s.getBoxToBox(e,r,n,o);0!=a.length&&(s=$s.getBoxToBox(n,o,e,r),e.reportCollision($s.collision.set(e,n,Es.BoxToBox(a,r,s,o),t,i)),n.reportCollision($s.collision.set(n,e,Es.BoxToBox(s,o,a,r),i,t)));break;case 1:o=i.line,0<(h=$s.lineToBox(n,o,e,r)).length&&(e.reportCollision($s.collision.set(e,n,Es.LineToBox(h,o,r),t,i)),n.reportCollision($s.collision.set(n,e,Es.LineToBox(h,o,r),i,t)));break;case 2:for(r=i.shapes,o=0;o<r.length;)$s.reportCollision(t,e,r[o++],n)}break;case 1:switch(r=t.line,i._hx_index){case 0:var h,o=i.bounds;0<(h=$s.lineToBox(e,r,n,o)).length&&(e.reportCollision($s.collision.set(e,n,Es.LineToBox(h,r,o),t,i)),n.reportCollision($s.collision.set(n,e,Es.LineToBox(h,r,o),i,t)));break;case 1:break;case 2:for(r=i.shapes,o=0;o<r.length;)$s.reportCollision(t,e,r[o++],n)}break;case 2:for(r=t.shapes,o=0;o<r.length;)$s.reportCollision(r[o++],e,i,n)}},$s.getBoxToBox=function(t,e,i,n){var r=t.position.x+e.x,s=t.position.y+e.y,o=e.width,a=e.height,h=i.position.x+n.x,t=i.position.y+n.y,e=n.width,i=n.height,n=[];return s-i<t&&t<s+a&&r-h<e&&0<r-h&&n.push(1),s-i<t&&t<s+a&&r+o-e<h&&h<r+o&&n.push(4),r-e<h&&h<r+o&&s-t<i&&0<s-t&&n.push(2),r-e<h&&h<r+o&&s+a-i<t&&t<s+a&&n.push(8),0==n.length&&(s-i<t&&t<s+a&&r-h<=0&&-o/2+e/2<r-h&&n.push(1),s-i<t&&t<s+a&&r-h<-o/2+e/2&&-o+e<=r-h&&n.push(4),r-e<h&&h<r+o&&s-t<=i/2&&-a/2+i/2<s-t&&n.push(2),r-e<h&&h<r+o&&s-t<-a/2+i/2&&-a+i<=s-t&&n.push(8)),n},$s.lineToBox=function(t,e,i,n){var r=[],s=e.point1,e=e.point2,s=new os({x:s.x,y:s.y},{x:e.x,y:e.y});s.point1.x+=t.step.x,s.point1.y+=t.step.y,s.point2.x+=t.step.x,s.point2.y+=t.step.y;e=new os;e.point1.x=i.step.x-n.left,e.point1.y=i.step.y-n.top,e.point2.x=i.step.x+n.right,e.point2.y=i.step.y-n.top;t={x:0,y:0};return jn.lineSegmentIntersection(e.point1,e.point2,s.point1,s.point2,t)&&r.push(t),e.point1.x=i.step.x+n.right,e.point1.y=i.step.y-n.top,e.point2.x=i.step.x+n.right,e.point2.y=i.step.y+n.bottom,t={x:0,y:0},jn.lineSegmentIntersection(e.point1,e.point2,s.point1,s.point2,t)&&r.push(t),e.point1.x=i.step.x-n.left,e.point1.y=i.step.y+n.bottom,e.point2.x=i.step.x+n.right,e.point2.y=i.step.y+n.bottom,t={x:0,y:0},jn.lineSegmentIntersection(e.point1,e.point2,s.point1,s.point2,t)&&r.push(t),e.point1.x=i.step.x-n.left,e.point1.y=i.step.y-n.top,e.point2.x=i.step.x-n.left,e.point2.y=i.step.y+n.bottom,t={x:0,y:0},jn.lineSegmentIntersection(e.point1,e.point2,s.point1,s.point2,t)&&r.push(t),r};var As=d["temple.physics.core.Shape"]={__ename__:!0,__constructs__:["BoxShape","LineShape","Group"],BoxShape:((i=function(t){return{_hx_index:0,bounds:t,__enum__:"temple.physics.core.Shape",toString:r}}).__params__=["bounds"],i),LineShape:((i=function(t){return{_hx_index:1,line:t,__enum__:"temple.physics.core.Shape",toString:r}}).__params__=["line"],i),Group:((i=function(t){return{_hx_index:2,shapes:t,__enum__:"temple.physics.core.Shape",toString:r}}).__params__=["shapes"],i)},Ss=function(t){this._currentLoadList=[],this._loadedList=[],this.progress=0,this.isLoading=!1,this.isCompleted=!1,this.sounds=new Ar,this.sources=t,this._toLoadList=this.sources.slice()};Ss.__name__=!0,Ss.prototype={load:function(t){if(null==t&&(t=1),0==this._toLoadList.length)return this.isCompleted=!0,this.isLoading=!1,void this.onComplete();for(var e=0,i=this._toLoadList.length,n=t<i?t:i;e<n;)++e,this.loadNext();this.isLoading=!0,this.isCompleted=!1},loadNext:function(){var t=this;if(this.isLoading=!0,!this.isCompleted&&0<this._toLoadList.length){for(var e=this._toLoadList.pop(),i=new Array(e.length),n=0,r=e.length;n<r;){var s=n++;i[s]=Rn.assets.baseUrl+e[s]}var o=new Howl({src:i,autoplay:!1,preload:!1});this.sounds.set(e,o),o.once("load",function(){u.remove(t._currentLoadList,o),t._loadedList.push(e),t.progress=t._loadedList.length/t.sources.length,t.onProgress(t.progress),t.loadNext()}),this._currentLoadList.push(o),o.load()}else this.isCompleted||this._loadedList.length!=this.sources.length||(this.isCompleted=!0,this.isLoading=!1,this.onComplete())},onComplete:function(){},onProgress:function(t){},__class__:Ss};var Ts=function(t){this._disposer=new An,this.sounds=null!=t?t:new Ar,this.muted=new Mn(!1),this._disposer.add(this.muted.watch(Ys(this,this.onMuteChanged)))};Ts.__name__=!0,Ts.__interfaces__=[n],Ts.prototype={registerSounds:function(t){for(var e=t.keys();e.hasNext();){var i=e.next();this.sounds.set(i,t.h[i.__id__])}},loop:function(t,e){if(null==e&&(e=1),Ts.SOUND_SUPPORTED){var i=this.sounds.h[t.__id__],t=i.play();return i.volume(e,t),i.loop(!0,t),new Cs(i,t)}return null},play:function(t,e){if(null==e&&(e=1),Ts.SOUND_SUPPORTED){var i=this.sounds.h[t.__id__],t=i.play();return i.volume(e,t),i.loop(!1,t),new Cs(i,t)}return null},onMuteChanged:function(t,e){Howler.mute(t)},dispose:function(){var t=this._disposer;null!=t&&t.dispose(),this._disposer=null,Howler.unload()},__class__:Ts};var Cs=t.temple.sound.SoundPlayback=function(t,e){this.howl=t,this.id=e};Cs.__name__=!0,Cs.__interfaces__=[n],Cs.prototype={play:function(){return this.howl.play(this.id),this},pause:function(){return this.howl.pause(this.id),this},stop:function(){return this.howl.stop(this.id),this},mute:function(t){return null==t&&(t=!0),this.howl.mute(t,this.id),this},set_volume:function(t){return this.howl.volume(t,this.id),t},setStereo:function(t){return this.howl.stereo(t,this.id),this},fade:function(t,e,i){return this.howl.fade(t,e,Math.round(1e3*i),this.id),this},fadeTo:function(t,e){return this.howl.fade(this.howl.volume(this.id),t,Math.round(1e3*e),this.id),this},fadeFrom:function(t,e){return this.howl.fade(t,this.howl.volume(this.id),Math.round(1e3*e),this.id),this},on:function(t,e){return this.howl.on(t,e,this.id),this},off:function(t,e){return this.howl.off(t,e,this.id),this},once:function(t,e){return this.howl.once(t,e,this.id),this},get_volume:function(){return this.howl.volume(this.id)},get_stereo:function(){return this.howl.stereo(this.id)},get_isLooping:function(){return this.howl.loop(this.id)},get_isPlaying:function(){return this.howl.playing(this.id)},get_duration:function(){return this.howl.duration()},get_position:function(){return this.howl.seek(this.id)},set_position:function(t){return this.howl.seek(Math.round(t),this.id),t},dispose:function(){this.howl.stop(this.id)},__class__:Cs};var Ms=function(t,e,i,n){null==n&&(n=.016666666666666666),this._currentValue=0,this._elapsed=0,this.base=t,this.strength=e,this.duration=i,this.interval=n,this._cooldown=0};Ms.__name__=!0,Ms.__interfaces__=[H],Ms.prototype={update:function(t){if(this._elapsed+=t,this._elapsed>=this.duration)return this.base;var t=null!=this._cooldown&&(this._cooldown-=t)<=0;return t&&(t=(this.duration-this._elapsed)/this.duration*this.strength,this._currentValue=this.base+2*Math.random()*t-t,this._cooldown=this.interval),this._currentValue},isComplete:function(){return this._elapsed>=this.duration},__class__:Ms};var Is=function(t,e,i,n){null==n&&(n=1),null==i&&(i=0),null==e&&(e=0),null==t&&(t=0),this.setRgba(t,e,i,n)};Is.__name__=!0,Is.prototype={setRgba:function(t,e,i,n){return null==n&&(n=1),null==i&&(i=0),null==e&&(e=0),null==t&&(t=0),this._value=Math.round(255*t)<<16|Math.round(255*e)<<8|Math.round(255*i),this.a=n,this},__class__:Is};var Ps=function(){};Ps.__name__=!0,(H=function(){}).__name__=!0,H.__isInterface__=!0;var Os=function(t,e,i,n){this.array=t,this.index=e,this.end=i,this.step=n};Os.__name__=!0,Os.__interfaces__=[H],Os.prototype={hasNext:function(){return this.index>=this.end},next:function(){return new Ds(this.index,this.array[(this.index-=this.step)+this.step],this.index>=this.end,this.step)},__class__:Os};var Ds=function(t,e,i,n){this.index=t,this.value=e,this.hasNext=i,this.step=n};Ds.__name__=!0,Ds.prototype={__class__:Ds};var Rs=function(t,e){this.index=0,this.array=t.slice(),this.randomGenerator=null==e?new Ns:e,this.random=new Bs(this.randomGenerator)};Rs.__name__=!0,Rs.__interfaces__=[H],Rs.prototype={next:function(){var t,e;2<this.array.length&&0==this.index&&(e=(t=this.array)[t.length-1],Hs.shuffle(this.array,this.randomGenerator),this.array[0]==e&&(i=this.array.shift(),t=this.array,e=this.random.intRange(1,this.array.length),t.splice(e,0,i)));var i=this.array[this.index];return this.index=(this.index+1)%this.array.length,i},__class__:Rs};var Ls=function(){};Ls.__name__=!0,Ls.getLabels=function(t,e){for(var i=[],n=t.symbol,r=0,s=n.layers;r<s.length;){var o=s[r];if(++r,null==e||_.startsWith(o.name,e)){for(var a=null,h=0;h<o.keyframes.length;){var l,u=o.keyframes[h];null!=u.label&&(l=u.index/(n.frames-1)*n.duration,null!=a&&(a.endTime=l),a=new Fs(u.label,o.name,l,0),i.push(a)),++h}null!=a&&(a.endTime=n.duration)}}return new ks(i)};var ks=function(t){this.list=t};ks.__name__=!0,ks.prototype={getLabelInfoByName:function(t){for(var e=0,i=this.list;e<i.length;){var n=i[e];if(++e,n.name==t)return n}return null},hasLabel:function(t){return null!=this.getLabelInfoByName(t)},isAtLabel:function(t,e){e=this.getLabelInfoByName(e);return null!=e&&t.$jc>=e.startTime&&t.$jc<=e.endTime},__class__:ks};var Fs=function(t,e,i,n){this.name=t,this.layerName=e,this.startTime=i,this.endTime=n};Fs.__name__=!0,Fs.prototype={__class__:Fs},(H=function(){}).__name__=!0,H.__isInterface__=!0,H.prototype={__class__:H};var Ns=function(){};Ns.__name__=!0,Ns.__interfaces__=[H],Ns.prototype={next:function(){return Math.random()},__class__:Ns};var Bs=function(t){this._random=t};Bs.__name__=!0,Bs.__interfaces__=[H],Bs.prototype={range:function(t,e){var i;return e<t&&(i=e,e=t,t=i),t+this._random.next()*(e-t)},to:function(t){return this._random.next()*t},intRange:function(t,e){return t+(this._random.next()*(e-t+1)|0)},fromArray:function(t,e){return null==e&&(e=!1),Hs.randomElement(t,this,e)},next:function(){return this._random.next()},__class__:Bs};var Us=function(t,e){this._accumulator=0,this.alpha=0,this._callback=t,this._fixedTimestep=e};Us.__name__=!0,Us.__interfaces__=[n],Us.prototype={update:function(t){for(this._accumulator+=t;this._accumulator>=this._fixedTimestep;)null!=this._callback&&this._callback(this._fixedTimestep),this._accumulator-=this._fixedTimestep;this.alpha=this._accumulator/this._fixedTimestep},set_fixedTimestep:function(t){return this._fixedTimestep=t,this._accumulator%=this._fixedTimestep,this._fixedTimestep},dispose:function(){this._callback=null},__class__:Us};var Xs=function(t,e){null==t&&(t=1),this.$jF=!1,f.call(this),this.$JF=t,this.$MD=e,this.$jF=t<=1};Xs.__name__=!0,Xs.create=function(t,e,i,n){null==n&&(n=!0),null==e&&(e=1);i=(new Sn).addComponent(new Xs(e,i));return t.addEntity(i,n),i},Xs.__super__=f,Xs.prototype=e(f.prototype,{onUpdate:function(t){this.$jF?(null!=this.$MD&&this.$MD(),this.dispose()):(this.$JF--,this.$jF=this.$JF<=1)},dispose:function(){this.$MD=null,f.prototype.dispose.call(this)},get_name:function(){return"$IF"},__class__:Xs});var js=function(t){null==t&&(t=-1),this.lastCooldown=-1,this.time=0,this.isEnabled=!1,this.reset(t)};js.__name__=!0,js.prototype={reset:function(t){null==t?this.time=this.lastCooldown:(this.time=t,this.lastCooldown=t),0<this.time&&(this.isEnabled=!0)},update:function(t){return!!this.isEnabled&&(this.time-=t)<=0},__class__:js};var Vs=function(t,e,i){this.$NA=null,f.call(this),this.$mD=e,this.$LD=t,this.$MD=i,this.$NA=t};Vs.__name__=!0,Vs.create=function(t,e,i,n,r){null==r&&(r=!0),null==i&&(i=-1),null==e&&(e=.1);n=(new Sn).addComponent(new Vs(e,i,n));return t.addEntity(n,r),n},Vs.__super__=f,Vs.prototype=e(f.prototype,{onUpdate:function(t){t=null!=this.$NA&&(this.$NA-=t)<=0;t&&(0!=this.$mD--?(this.$NA=this.$LD,this.$MD()):this.owner.dispose())},dispose:function(){this.$MD=null,f.prototype.dispose.call(this)},get_name:function(){return"$lD"},__class__:Vs});var Hs=function(){};Hs.__name__=!0,Hs.randomElement=function(t,e,i){if(null==i&&(i=!1),null==e&&(e=Bs.native),null!=t&&0<t.length){var n=e.next()*t.length|0,e=t[n];return i&&t.splice(n,1),e}return null},Hs.shuffle=function(t,e){for(var i,n,r=t.length;0<r;)n=Math.floor(e.next()*r--),i=t[r],t[r]=t[n],t[n]=i;return t};var Gs=function(){};function Ys(t,e){return null==e?null:(null==e.__id__&&(e.__id__=h.$haxeUID++),null==t.hx__closures__?t.hx__closures__={}:i=t.hx__closures__[e.__id__],null==i&&(i=e.bind(t),t.hx__closures__[e.__id__]=i),i);var i}Gs.__name__=!0,Gs.depthSort=function(t,e,i){for(var n=[],r=null,s=t.firstChild;null!=s;){var o=s[e];null!=o?n.push(o):(null==r&&(r=[]),r.push(s)),s=s.next}n.sort(i),t.firstChild=null;var a,h=n.length;for(null!=r&&(h+=r.length);0!=n.length;)--h,(a=n.pop().owner).layerIndex=h,a.next=t.firstChild,t.firstChild=a;if(null!=r)for(;0!=r.length;)--h,(a=r.pop()).layerIndex=h,a.next=t.firstChild,t.firstChild=a;return t},h.$haxeUID|=0,"undefined"!=typeof performance&&"function"==typeof performance.now&&(u.now=performance.now.bind(performance)),null==String.fromCodePoint&&(String.fromCodePoint=function(t){return t<65536?String.fromCharCode(t):String.fromCharCode(55232+(t>>10))+String.fromCharCode(56320+(1023&t))}),String.prototype.__class__=String,String.__name__=!0,Array.__name__=!0,Date.prototype.__class__=Date,Date.__name__="Date";var Ws={},zs={},qs=Number,Js=Boolean,Ks={},Zs={};Ar.count=0,Mr.__toStr={}.toString,v.current=1,x.scaleByLibraryName=new Sr,x._libraryByName=new Sr,S.files=new b,S.sounds=new A,S.animationLibraries=new w,S.animations=x,S.fonts=new E,S.scenes=new $,W.explosions=[S.sounds.game1.EXPLOSION1_VAR1,S.sounds.game1.EXPLOSION1_VAR2],K.SMALL_EXPLOSION_SYMBOLS=["explosion_medium","explosion_medium_02"],st._spawnIntervalRange=new rt(1,2.5),ut.shootPatterns=[[.2,.2,.2,.2,3],[.2,.2,.2,2.5],[.2,.2,2]],pt.rocketLauncherPatterns=[[.5333333333333333]],pt.gunPatterns=[[3,.2,.2,.2,2]],xt._spawnIntervalRange=new rt(.3,1),Pt.bulletSpeed=new rt(350,400),qt.projectileSounds=[S.sounds.game2.SHOOT_A_VAR1,S.sounds.game2.SHOOT_B_VAR1,S.sounds.game2.SHOOT_B_VAR2],ye.$Ua=800,Ze._NAME_IDLE="player_idle",Ze._NAME_MOVE="player_move",li.$Uc={x:0,y:0},fi.Left=new fi(-1,0),fi.Right=new fi(1,0),fi.Up=new fi(0,-1),fi.Down=new fi(0,1),Ui.$Uc={x:0,y:0},Xi.$Uc={x:0,y:0},qi.$l=["intro","intro1","intro1_loop","intro1_outro","intro2","intro2_loop","intro2_outro","intro3","intro3_loop","intro3_outro","intro4","intro4_loop","intro4_outro","loop","outro","outro_loop"],an.$ue=250,Cn._tagPrefix="",Pn.DISPATCHING_SENTINEL=new In(null,null),Rn.url=new Dn(h.location.href.toString()),Rn.hidden=new Mn(!1),kn.POOL=new Ht(kn.allocate),Fn.PIhalf=Math.PI/2,jn.HALF_PI=.5*Math.PI,Vn._sharedEvent=new q,Jn.VENDOR_PREFIXES=["webkit","moz","ms","o","khtml"],Jn.SHOULD_HIDE_MOBILE_BROWSER=!!PIXI.utils.isMobile.apple.device&&!Jn.isIframe(),vr.pending=[],vr.threadCount=0,Zr.NUM_PRELOADER_STEPS=0,ss.FONT_EXTENSIONS=["woff2","woff","ttf","otf","eot","svg"],_s._operators=[ds.Add,ds.Substract,ds.Multiply,ds.Divide],_s._operatorLookup="+-*/",ys.enabled=!0,vs.$Uc={x:0,y:0},xs.gravity=.994,$s.collision=new yi,Ts.SOUND_SUPPORTED=!0,Ps.util=PIXI.utils.isMobile,Bs.native=new Bs(new Ns),m.main(),vr.run()}("undefined"!=typeof exports?exports:"undefined"!=typeof window?window:"undefined"!=typeof self?self:this,"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this);